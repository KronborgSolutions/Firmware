[
    {
        "id": "483a6f631e7f69a7",
        "type": "tab",
        "label": "Oppsett",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2d2bd18e.3e4abe",
        "type": "tab",
        "label": "IP Settings",
        "disabled": true,
        "info": ""
    },
    {
        "id": "389436610c6304c5",
        "type": "tab",
        "label": "State Machine",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "48ec77456e967366",
        "type": "tab",
        "label": "MODBUS",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "b1739a3211a017c8",
        "type": "tab",
        "label": "SVG-Update",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ec96b8f08fb0c19e",
        "type": "tab",
        "label": "MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "197f0510870cb1e6",
        "type": "tab",
        "label": "Adgangskontroll",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "aa95de13d0ae7341",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Node-RED Dashboard",
            "hideToolbar": "true",
            "allowSwipe": "menu",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "YYYY-MM-DD",
            "sizes": {
                "sx": 36,
                "sy": 36,
                "gx": 0,
                "gy": 0,
                "cx": 0,
                "cy": 0,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "bf34d136a8669896",
        "type": "ui_tab",
        "name": "Oppsett",
        "icon": "settings",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "46c1561852cb3234",
        "type": "modbus-client",
        "name": "LocalBUS",
        "clienttype": "simpleser",
        "bufferCommands": true,
        "stateLogEnabled": false,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyS0",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "115200",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "100",
        "reconnectOnTimeout": false,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "1cf52e38.3cfee2",
        "type": "ui_group",
        "name": "IP Settings",
        "tab": "be53a269.02ec3",
        "order": 1,
        "disp": true,
        "width": 16,
        "collapse": false
    },
    {
        "id": "be53a269.02ec3",
        "type": "ui_tab",
        "name": "Settings",
        "icon": "settings",
        "order": 3
    },
    {
        "id": "7f2169e2cb92802f",
        "type": "shared-state",
        "name": "myManuellKjoringState",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "713180c82aa959a2",
        "type": "ui_group",
        "name": "Prosessoppsett",
        "tab": "bf34d136a8669896",
        "order": 4,
        "disp": true,
        "width": "18",
        "collapse": true,
        "className": ""
    },
    {
        "id": "5dd95ee166991007",
        "type": "ui_group",
        "name": "Nettverk",
        "tab": "bf34d136a8669896",
        "order": 2,
        "disp": true,
        "width": "18",
        "collapse": true,
        "className": ""
    },
    {
        "id": "f2615cba8578655a",
        "type": "mqtt-broker",
        "name": "",
        "broker": "128.199.38.63",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "884e0b0f934ba909",
        "type": "shared-state",
        "name": "myLat",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "6",
        "numMin": "-90",
        "numMax": "90",
        "unit": "deg",
        "saveInterval": "0"
    },
    {
        "id": "407e7742e8b9f1bc",
        "type": "shared-state",
        "name": "myLon",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "6",
        "numMin": "-180",
        "numMax": "180",
        "unit": "deg",
        "saveInterval": "0"
    },
    {
        "id": "f00a67f94951c24d",
        "type": "ui_spacer",
        "z": "2d2bd18e.3e4abe",
        "name": "spacer",
        "group": "1cf52e38.3cfee2",
        "order": 8,
        "width": 10,
        "height": 1
    },
    {
        "id": "1c31383f58ccd4f8",
        "type": "ui_group",
        "name": "Programvare",
        "tab": "bf34d136a8669896",
        "order": 3,
        "disp": true,
        "width": "18",
        "collapse": true,
        "className": ""
    },
    {
        "id": "d5e8bd2b1115be28",
        "type": "shared-state",
        "name": "FW_Link",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "str",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "c17857ac55270dc4",
        "type": "bit-config",
        "name": "HR5",
        "bits": [
            {
                "property": "P1On",
                "length": 1,
                "shift": 0,
                "type": "number"
            },
            {
                "property": "P2On",
                "length": 1,
                "shift": 1,
                "type": "number"
            },
            {
                "property": "P3On",
                "length": 1,
                "shift": 2,
                "type": "number"
            },
            {
                "property": "RL1On",
                "length": 1,
                "shift": 3,
                "type": "number"
            },
            {
                "property": "RL2On",
                "length": 1,
                "shift": 4,
                "type": "number"
            },
            {
                "property": "RL3On",
                "length": 1,
                "shift": 5,
                "type": "number"
            },
            {
                "property": "RL4On",
                "length": 1,
                "shift": 6,
                "type": "number"
            },
            {
                "property": "RL5On",
                "length": 1,
                "shift": 7,
                "type": "number"
            }
        ]
    },
    {
        "id": "bebb9f5a2b2944ad",
        "type": "ui_tab",
        "name": "HW Test",
        "icon": "settings",
        "order": 4,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "95e5adfa6e36fd6e",
        "type": "ui_group",
        "name": "Settings",
        "tab": "bebb9f5a2b2944ad",
        "order": 1,
        "disp": false,
        "width": "22",
        "collapse": false,
        "className": ""
    },
    {
        "id": "8fb401a08da32934",
        "type": "ui_group",
        "name": "ECOWATER",
        "tab": "d5f639bc116dce5e",
        "order": 1,
        "disp": false,
        "width": "22",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d5f639bc116dce5e",
        "type": "ui_tab",
        "name": "ECOWATER",
        "icon": "wi-darksky-rain",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "bb52766f2efde479",
        "type": "shared-state",
        "name": "myDoseringspumperate",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "0",
        "numMin": "150",
        "numMax": "450",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "aec6327f36f37535",
        "type": "shared-state",
        "name": "myDoseringsrate",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "50",
        "numMax": "1000",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "259591f290c2625d",
        "type": "shared-state",
        "name": "myVanntankL",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "20",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "158931d1d9af94a1",
        "type": "shared-state",
        "name": "myBlandingsmengdeVanntank",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "10",
        "numMax": "20",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "cddbfc2323f5cd0a",
        "type": "shared-state",
        "name": "myAdditivtankL",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "20",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "82cc6a349b8cbe40",
        "type": "shared-state",
        "name": "myVanntankLL",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "20",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "0e3b3721cba4786b",
        "type": "shared-state",
        "name": "myTrippTeller",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "1f7d0f5a0f1e9dfc",
        "type": "shared-state",
        "name": "myHWaddr",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "str",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "160ddf0a.756f41",
        "type": "ui_group",
        "name": "Secure",
        "tab": "f83ce942.20d488",
        "order": 1,
        "disp": false,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4f3d9279.22b82c",
        "type": "ui_group",
        "name": "pin",
        "tab": "f83ce942.20d488",
        "order": 2,
        "disp": false,
        "width": "1"
    },
    {
        "id": "f83ce942.20d488",
        "type": "ui_tab",
        "name": "Adgangskontroll",
        "icon": "dialpad",
        "order": 5,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "606946dd38893eaf",
        "type": "ui_group",
        "name": "Modus",
        "tab": "bf34d136a8669896",
        "order": 1,
        "disp": true,
        "width": "18",
        "collapse": true,
        "className": ""
    },
    {
        "id": "70f571b1b634e156",
        "type": "shared-state",
        "name": "myDriftsmodus",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "str",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "8c84b863b552eaa7",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "d17a132b882b9649",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 4,
        "width": 7,
        "height": 1
    },
    {
        "id": "f89dafeee4e94f03",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 5,
        "width": 1,
        "height": 1
    },
    {
        "id": "222b16b60f9575a5",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 6,
        "width": 7,
        "height": 1
    },
    {
        "id": "fe336d269c629cd2",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 7,
        "width": 18,
        "height": 1
    },
    {
        "id": "8ed2f3eb9a1f4002",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 9,
        "width": 1,
        "height": 1
    },
    {
        "id": "59abf02f2346196f",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 11,
        "width": 1,
        "height": 1
    },
    {
        "id": "75016c5d0e2f8473",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 13,
        "width": 1,
        "height": 1
    },
    {
        "id": "8d2ee5e102947978",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 14,
        "width": 1,
        "height": 1
    },
    {
        "id": "360efa2e31feed9b",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 15,
        "width": 1,
        "height": 1
    },
    {
        "id": "e850ded32fe146e4",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "606946dd38893eaf",
        "order": 16,
        "width": 1,
        "height": 1
    },
    {
        "id": "e6df87f27b3a705d",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "5dd95ee166991007",
        "order": 8,
        "width": 8,
        "height": 1
    },
    {
        "id": "571025cc8acf3e88",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 7,
        "width": 18,
        "height": 1
    },
    {
        "id": "e06c1f611efd8793",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 9,
        "width": 18,
        "height": 1
    },
    {
        "id": "cbc7ef1d70e24741",
        "type": "shared-state",
        "name": "myCfgNormaldrift",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "obj",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "14f07955684d5ff1",
        "type": "shared-state",
        "name": "myCfgPowerClean",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "obj",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "7a6ab2b2b7e8aae8",
        "type": "shared-state",
        "name": "myCfgSpesialprogram",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "obj",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "ead8f956c53ebd34",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Prosessoppsett",
        "info": "Rutiner som må på plass:\n\nStartside:\n - LOGO\n - Antall liter behandlet vann.\n\nOppsett/vedlikehold\n- Tømming av Vanntank\n- Priming av Additiv\n- Varsling av lavt nivå Additiv\n- Andre Error tilstander\n- Doseringsnøkkel\n- Doseringsvindu\n\n\n",
        "x": 140,
        "y": 80,
        "wires": []
    },
    {
        "id": "9652c9e68944c869",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Hent Hostname og MAC og IP",
        "info": "",
        "x": 180,
        "y": 2080,
        "wires": []
    },
    {
        "id": "8606686a.ef7008",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract HWaddr",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ether \") + 6; // Offset the start of the address from \"ether \"\nlet addr = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nreturn { payload : addr }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2200,
        "wires": [
            [
                "b4ef47649e9c4759",
                "54b06a2d2d3f7da9"
            ]
        ]
    },
    {
        "id": "52753337.7b5a8c",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "ifconfig eth0",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 350,
        "y": 2220,
        "wires": [
            [
                "8606686a.ef7008",
                "f378c2eb37bccb2e"
            ],
            [],
            []
        ]
    },
    {
        "id": "7274cbde085522a1",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract Hostname",
        "func": "let hostname = msg.payload; // Save the payload string to a more convenient variable name\n\nreturn { payload : hostname.trim() };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 2140,
        "wires": [
            [
                "7f0574c4b0c6d150",
                "89718a34befe08cc"
            ]
        ]
    },
    {
        "id": "8672e44b8c93e04e",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "hostname",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 360,
        "y": 2140,
        "wires": [
            [
                "7274cbde085522a1"
            ],
            [],
            []
        ]
    },
    {
        "id": "7f0574c4b0c6d150",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Show Hostname",
        "label": "Hostname:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 760,
        "y": 2160,
        "wires": []
    },
    {
        "id": "b4ef47649e9c4759",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Show HW addr",
        "label": "MAC:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 760,
        "y": 2240,
        "wires": []
    },
    {
        "id": "f378c2eb37bccb2e",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract IP",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 2280,
        "wires": [
            [
                "c1effe7692196d3b"
            ]
        ]
    },
    {
        "id": "c1effe7692196d3b",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Show eth0 IP",
        "label": "eth0 IP:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 750,
        "y": 2280,
        "wires": []
    },
    {
        "id": "e6597813fd0ae3f4",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "ifconfig wlan0",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 340,
        "y": 2340,
        "wires": [
            [
                "fefea0960b0e5ccf"
            ],
            [],
            []
        ]
    },
    {
        "id": "096f2f794a85bfda",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Show wlan0 IP",
        "label": "wlan0 IP:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 760,
        "y": 2340,
        "wires": []
    },
    {
        "id": "54b06a2d2d3f7da9",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HWaddr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 2200,
        "wires": [
            [
                "0bae7bdf80e46091"
            ]
        ]
    },
    {
        "id": "cc41947dcd6a7447",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 150,
        "y": 2720,
        "wires": [
            [
                "bd2bf422b00f4ea1"
            ]
        ]
    },
    {
        "id": "f559be213ad80699",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 490,
        "y": 2760,
        "wires": []
    },
    {
        "id": "415279b36a1b260b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myLat",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 2720,
        "wires": [
            [
                "d3a04c2a524f335d"
            ]
        ]
    },
    {
        "id": "9446bd4891094586",
        "type": "inject",
        "z": "483a6f631e7f69a7",
        "name": "59.321648",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "59.321648",
        "payloadType": "num",
        "x": 140,
        "y": 2680,
        "wires": [
            [
                "bd2bf422b00f4ea1"
            ]
        ]
    },
    {
        "id": "bd2bf422b00f4ea1",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Lat:",
        "tooltip": "",
        "group": "5dd95ee166991007",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 290,
        "y": 2720,
        "wires": [
            [
                "415279b36a1b260b",
                "f559be213ad80699"
            ]
        ]
    },
    {
        "id": "136cbb4d09d53679",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 150,
        "y": 2840,
        "wires": [
            [
                "f4894c4f1c847f1c"
            ]
        ]
    },
    {
        "id": "18c63098db69cf72",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 490,
        "y": 2880,
        "wires": []
    },
    {
        "id": "942d34ae8956f965",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myLon",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 530,
        "y": 2840,
        "wires": [
            [
                "d3a04c2a524f335d"
            ]
        ]
    },
    {
        "id": "0658f9f3b5b365fe",
        "type": "inject",
        "z": "483a6f631e7f69a7",
        "name": "10.496234",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10.496234",
        "payloadType": "num",
        "x": 140,
        "y": 2800,
        "wires": [
            [
                "f4894c4f1c847f1c"
            ]
        ]
    },
    {
        "id": "f4894c4f1c847f1c",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Lon:",
        "tooltip": "",
        "group": "5dd95ee166991007",
        "order": 10,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 290,
        "y": 2840,
        "wires": [
            [
                "942d34ae8956f965",
                "18c63098db69cf72"
            ]
        ]
    },
    {
        "id": "6ce543380d8075b6",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 7,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Position:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 300,
        "y": 2680,
        "wires": []
    },
    {
        "id": "66075e03ab09b9bf",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "Send position update",
        "mode": "link",
        "links": [
            "3bcdd38ce2c510ef"
        ],
        "x": 1055,
        "y": 2780,
        "wires": []
    },
    {
        "id": "d3a04c2a524f335d",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "0",
        "op2": "",
        "op1type": "str",
        "op2type": "date",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 930,
        "y": 2760,
        "wires": [
            [],
            [
                "66075e03ab09b9bf"
            ]
        ]
    },
    {
        "id": "89718a34befe08cc",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hostname",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "85d582adbda505d5",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "WifiPassword",
        "label": "Nettverkspassord:",
        "tooltip": "Avslutt med Enter eller Tab for å endre.",
        "group": "5dd95ee166991007",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "password",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 740,
        "y": 2540,
        "wires": [
            [
                "8a75d5bd744e8a34"
            ]
        ]
    },
    {
        "id": "92f50ec9494dca41",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "SSID",
        "label": "Nettverksnavn (SSID):",
        "tooltip": "Avslutt med Enter eller Tab for å endre.",
        "group": "5dd95ee166991007",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 710,
        "y": 2500,
        "wires": [
            [
                "4137c932c634e85c"
            ]
        ]
    },
    {
        "id": "c7f54ee0b2f3a63a",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "cat /etc/wpa_supplicant/wpa_supplicant.conf",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 230,
        "y": 2520,
        "wires": [
            [
                "1b2a342569d2a26e",
                "42dc6006f9fea2f4"
            ],
            [],
            []
        ]
    },
    {
        "id": "4bbd09c9d61fa90a",
        "type": "ui_ui_control",
        "z": "483a6f631e7f69a7",
        "name": "",
        "events": "change",
        "x": 120,
        "y": 2160,
        "wires": [
            [
                "3d0a3603dfb62096"
            ]
        ]
    },
    {
        "id": "5d6762f0715ad17d",
        "type": "wifiscan",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 350,
        "y": 2400,
        "wires": [
            [
                "c14bb127b5df1c7b"
            ]
        ]
    },
    {
        "id": "e3fa8f4d8f0e2257",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 790,
        "y": 2400,
        "wires": []
    },
    {
        "id": "c14bb127b5df1c7b",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract available SSID",
        "func": "let myArray = msg.payload;\nlet mySSIDs = \"SSID(s):\";\n\n// List all SSIDs\nfor(let i=0;i<myArray.length;i++) {\n    mySSIDs = mySSIDs + \" \" + myArray[i].ssid;\n}\n\nreturn { payload : mySSIDs }; // return the SSIDs found as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 2400,
        "wires": [
            [
                "e3fa8f4d8f0e2257"
            ]
        ]
    },
    {
        "id": "fefea0960b0e5ccf",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract IP",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 2340,
        "wires": [
            [
                "096f2f794a85bfda"
            ]
        ]
    },
    {
        "id": "e465494834110f2d",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Oppsett",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 130,
        "y": 2280,
        "wires": [
            [
                "8672e44b8c93e04e",
                "52753337.7b5a8c",
                "e6597813fd0ae3f4",
                "c7f54ee0b2f3a63a",
                "5d6762f0715ad17d"
            ]
        ]
    },
    {
        "id": "1b2a342569d2a26e",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract SSID",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ssid=\") + 6; // Offset the start of the SSID \"\nlet mySSID = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgSSID\", mySSID);\n\nreturn { payload: mySSID }; // return the SSID as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 2500,
        "wires": [
            [
                "92f50ec9494dca41"
            ]
        ]
    },
    {
        "id": "42dc6006f9fea2f4",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract psk",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"psk=\") + 5; // Offset the start of the psk \"\nlet myPSK = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgPSK\", myPSK);\n\n\nreturn { payload: myPSK }; // return the PSK as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 2540,
        "wires": [
            [
                "85d582adbda505d5"
            ]
        ]
    },
    {
        "id": "4137c932c634e85c",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Endring?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "orgSSID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 920,
        "y": 2500,
        "wires": [
            [
                "f08261ebfc7c4153"
            ]
        ]
    },
    {
        "id": "8a75d5bd744e8a34",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Endring?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "orgPSK",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 920,
        "y": 2540,
        "wires": [
            [
                "585fb6d440aca651"
            ]
        ]
    },
    {
        "id": "f08261ebfc7c4153",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let newValue = msg.payload;\nlet orgValue = flow.get(\"orgSSID\"); \n\nlet command = `'s?ssid=\"${orgValue}\"?ssid=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgSSID\",newValue);\n\nreturn {payload: command};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 2500,
        "wires": [
            [
                "e4b41e99e4495c4e"
            ]
        ]
    },
    {
        "id": "e4b41e99e4495c4e",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "sudo sed -i ",
        "addpay": true,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1290,
        "y": 2520,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "585fb6d440aca651",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let newValue = msg.payload;\nlet orgValue = flow.get(\"orgPSK\"); \n\nlet command = `'s?psk=\"${orgValue}\"?psk=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgPSK\",newValue);\n\nreturn {payload: command};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 2540,
        "wires": [
            [
                "e4b41e99e4495c4e"
            ]
        ]
    },
    {
        "id": "43a334e28706087c",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in SSID",
        "links": [
            "bd09041f1951af61"
        ],
        "x": 565,
        "y": 2460,
        "wires": [
            [
                "92f50ec9494dca41"
            ]
        ]
    },
    {
        "id": "13a7ca5bd49cdb11",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in WifiPassword",
        "links": [
            "0fa5e2f74c05ad92"
        ],
        "x": 565,
        "y": 2580,
        "wires": [
            [
                "85d582adbda505d5"
            ]
        ]
    },
    {
        "id": "bf46220a5ddc0c5a",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "FW link:",
        "tooltip": "",
        "group": "1c31383f58ccd4f8",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 340,
        "y": 2960,
        "wires": [
            [
                "d276a4a2ddf4962d",
                "b13ec189cc79f6ba"
            ]
        ]
    },
    {
        "id": "73b0e388477c6a78",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d5e8bd2b1115be28",
        "name": "FW_Link",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 2960,
        "wires": [
            [
                "bf46220a5ddc0c5a"
            ]
        ]
    },
    {
        "id": "d276a4a2ddf4962d",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d5e8bd2b1115be28",
        "name": "FW_Link",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 540,
        "y": 3000,
        "wires": []
    },
    {
        "id": "b13ec189cc79f6ba",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "FW_Link",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 2960,
        "wires": [
            []
        ]
    },
    {
        "id": "5d8c74fd4da28a7d",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "1c31383f58ccd4f8",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Oppdater programvare",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Sikker på at du vil oppdatere programvare nå?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 200,
        "y": 3060,
        "wires": [
            [
                "b97564d416dc3d4b"
            ]
        ]
    },
    {
        "id": "b97564d416dc3d4b",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "OBS!",
        "name": "",
        "x": 410,
        "y": 3060,
        "wires": [
            [
                "87af758445f14285"
            ]
        ]
    },
    {
        "id": "87af758445f14285",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 3060,
        "wires": [
            [
                "f5c628fac390b678"
            ]
        ]
    },
    {
        "id": "fc771a88fc812e82",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "sudo wget -cO - ",
        "addpay": "payload",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "name": "",
        "x": 420,
        "y": 3140,
        "wires": [
            [
                "b56eeb28afd7b903"
            ],
            [
                "b56eeb28afd7b903"
            ],
            [
                "b56eeb28afd7b903",
                "5e26a60998e2c14e"
            ]
        ]
    },
    {
        "id": "f5c628fac390b678",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let myParam = flow.get(\"FW_Link\") + \" > /home/pi/.node-red/flows.json\";\n\nreturn { payload: myParam }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 220,
        "y": 3140,
        "wires": [
            [
                "fc771a88fc812e82"
            ]
        ]
    },
    {
        "id": "b56eeb28afd7b903",
        "type": "debug",
        "z": "483a6f631e7f69a7",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 3140,
        "wires": []
    },
    {
        "id": "5e26a60998e2c14e",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Alt i orden?",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 3220,
        "wires": [
            [
                "e4c0288adfa9a86f"
            ],
            [
                "343324275668efb1"
            ]
        ]
    },
    {
        "id": "40ed356cf71a23de",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 670,
        "y": 3220,
        "wires": []
    },
    {
        "id": "e4c0288adfa9a86f",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Programvare Oppdatert!",
        "func": "return { payload: \"Programvare Oppdatert! Omstart nødvendig for at endringene skal tre i kraft - kjører omstart nå...\" };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3220,
        "wires": [
            [
                "40ed356cf71a23de",
                "4b257f03fe785047"
            ]
        ]
    },
    {
        "id": "f2e8fe39856e80ef",
        "type": "restart",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 810,
        "y": 3260,
        "wires": []
    },
    {
        "id": "4b257f03fe785047",
        "type": "delay",
        "z": "483a6f631e7f69a7",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 640,
        "y": 3260,
        "wires": [
            [
                "f2e8fe39856e80ef"
            ]
        ]
    },
    {
        "id": "343324275668efb1",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Uff da... Dette gikk jo ikke.",
        "func": "return { payload: \"Uff da! Fikk ikke tak i Programvaren.\" + msg.payload.message };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3260,
        "wires": [
            [
                "40ed356cf71a23de"
            ]
        ]
    },
    {
        "id": "cd643db2d4e2dd54",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "Send konfigurasjonsendringer",
        "mode": "link",
        "links": [
            "19e1100a281a1a59"
        ],
        "x": 1495,
        "y": 1220,
        "wires": []
    },
    {
        "id": "54b12257f4a94b77",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "System Status/Overide",
        "info": "",
        "x": 160,
        "y": 360,
        "wires": []
    },
    {
        "id": "b478d0db2b70e8aa",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "manuellKjoring",
        "label": "Manuell kjøring",
        "tooltip": "",
        "group": "606946dd38893eaf",
        "order": 1,
        "width": 5,
        "height": 2,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 440,
        "y": 420,
        "wires": [
            [
                "0f6199f63595e02c",
                "33312b8bbafd2fbb"
            ]
        ]
    },
    {
        "id": "fc1097f1322444ad",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 220,
        "y": 420,
        "wires": [
            [
                "b478d0db2b70e8aa"
            ]
        ]
    },
    {
        "id": "0f6199f63595e02c",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": false,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 690,
        "y": 460,
        "wires": []
    },
    {
        "id": "33312b8bbafd2fbb",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myManuellKjoringState",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 420,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "2ef322e034f98afc",
        "type": "restart",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 610,
        "y": 1980,
        "wires": []
    },
    {
        "id": "0a58943a5119541a",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "1c31383f58ccd4f8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Omstart",
        "tooltip": "",
        "color": "white",
        "bgcolor": "red",
        "className": "",
        "icon": "close",
        "payload": "Trukk OK for omstart av systemmet. Hvis du ikke er sikker - trykk CANCEL nå!",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 120,
        "y": 1980,
        "wires": [
            [
                "db9e027392c5b21e"
            ]
        ]
    },
    {
        "id": "9e4b31212a818980",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Omstart",
        "info": "",
        "x": 110,
        "y": 1920,
        "wires": []
    },
    {
        "id": "db9e027392c5b21e",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "ADVARSEL",
        "name": "",
        "x": 290,
        "y": 1980,
        "wires": [
            [
                "91f87512e16887b3"
            ]
        ]
    },
    {
        "id": "91f87512e16887b3",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 450,
        "y": 1980,
        "wires": [
            [
                "2ef322e034f98afc"
            ]
        ]
    },
    {
        "id": "9c4441022fa25dc3",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "0",
        "op2": "",
        "op1type": "str",
        "op2type": "date",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1380,
        "y": 1200,
        "wires": [
            [],
            [
                "cd643db2d4e2dd54"
            ]
        ]
    },
    {
        "id": "f4038bea7eb1fed8",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Kalibreringsdata",
        "info": "",
        "x": 140,
        "y": 940,
        "wires": []
    },
    {
        "id": "da4a7c1b45b75c0f",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "Doseringspumperate",
        "label": "Doseringspumperate [ml/min]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "200",
        "max": "400",
        "step": 1,
        "className": "",
        "x": 460,
        "y": 1100,
        "wires": [
            [
                "9f32d5ce7313d3ad",
                "b9676a7df22dcad1"
            ]
        ]
    },
    {
        "id": "ce122265124b9c3c",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "bb52766f2efde479",
        "name": "myDoseringspumperate",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 220,
        "y": 1100,
        "wires": [
            [
                "da4a7c1b45b75c0f"
            ]
        ]
    },
    {
        "id": "9f32d5ce7313d3ad",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "bb52766f2efde479",
        "name": "myDoseringspumperate",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 770,
        "y": 1140,
        "wires": []
    },
    {
        "id": "b9676a7df22dcad1",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myDoseringspumperate",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 780,
        "y": 1100,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "10f95f9228800f5f",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "Doseringsrate",
        "label": "Doseringsrate [1:x]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "100",
        "max": "400",
        "step": "1",
        "className": "",
        "x": 440,
        "y": 1000,
        "wires": [
            [
                "be73428b0eb4c98f",
                "9a024f599eae2571"
            ]
        ]
    },
    {
        "id": "791248ed789d44fe",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "aec6327f36f37535",
        "name": "myDoseringsrate",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 1000,
        "wires": [
            [
                "10f95f9228800f5f"
            ]
        ]
    },
    {
        "id": "be73428b0eb4c98f",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "aec6327f36f37535",
        "name": "myDoseringsrate",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 750,
        "y": 1040,
        "wires": []
    },
    {
        "id": "9a024f599eae2571",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myDoseringsrate",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 1000,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "ed1f432ada0916a9",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "VanntankL",
        "label": "Lavnivå vanntank [l]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "6",
        "max": "20",
        "step": 1,
        "className": "",
        "x": 430,
        "y": 1200,
        "wires": [
            [
                "ede4ea58397b0243",
                "c37dfce774b0c2fe"
            ]
        ]
    },
    {
        "id": "7952214e34de3b5c",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "259591f290c2625d",
        "name": "myVanntankL",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 190,
        "y": 1200,
        "wires": [
            [
                "ed1f432ada0916a9"
            ]
        ]
    },
    {
        "id": "ede4ea58397b0243",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "259591f290c2625d",
        "name": "myVanntankL",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 740,
        "y": 1240,
        "wires": []
    },
    {
        "id": "c37dfce774b0c2fe",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myVanntankL",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 1200,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "7393f421de7c6555",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "BlandingsmengdeVanntank",
        "label": "Blandingsmengde vanntank [l]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "10",
        "max": "20",
        "step": 1,
        "className": "",
        "x": 480,
        "y": 1400,
        "wires": [
            [
                "7a8a1913677dcc37",
                "9666972dd3160d7b"
            ]
        ]
    },
    {
        "id": "3bc3f31f60c8eae7",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "158931d1d9af94a1",
        "name": "myBlandingsmengdeVanntank",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 1400,
        "wires": [
            [
                "7393f421de7c6555"
            ]
        ]
    },
    {
        "id": "7a8a1913677dcc37",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "158931d1d9af94a1",
        "name": "myBlandingsmengdeVanntank",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 790,
        "y": 1440,
        "wires": []
    },
    {
        "id": "9666972dd3160d7b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myBlandingsmengdeVanntank",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1400,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "2537bff4f216c786",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "AdditivtankL",
        "label": "Lavnivå Additivtank [l]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "0",
        "max": "15",
        "step": 1,
        "className": "",
        "x": 430,
        "y": 1500,
        "wires": [
            [
                "ca7e8d980417da08",
                "749cefb06a179ddf"
            ]
        ]
    },
    {
        "id": "0c7fb7a251173aaf",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "cddbfc2323f5cd0a",
        "name": "myAdditivtankL",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 1500,
        "wires": [
            [
                "2537bff4f216c786"
            ]
        ]
    },
    {
        "id": "ca7e8d980417da08",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "cddbfc2323f5cd0a",
        "name": "myAdditivtankL",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 740,
        "y": 1540,
        "wires": []
    },
    {
        "id": "749cefb06a179ddf",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myAdditivtankL",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 1500,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "8e64a3ce2cb998d0",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "VanntankLL",
        "label": "Kritisk lavnivå vanntank [l]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "5",
        "max": "20",
        "step": 1,
        "className": "",
        "x": 430,
        "y": 1300,
        "wires": [
            [
                "2ad873c9eae6cee2",
                "f55b053a188f9c9c"
            ]
        ]
    },
    {
        "id": "c4a89298555490b8",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "82cc6a349b8cbe40",
        "name": "myVanntankLL",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 1300,
        "wires": [
            [
                "8e64a3ce2cb998d0"
            ]
        ]
    },
    {
        "id": "2ad873c9eae6cee2",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "82cc6a349b8cbe40",
        "name": "myVanntankLL",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 740,
        "y": 1340,
        "wires": []
    },
    {
        "id": "f55b053a188f9c9c",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myVanntankLL",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 1300,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "f078e49b8d2b86c8",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "0e3b3721cba4786b",
        "name": "myTrippTeller",
        "triggerOnInit": true,
        "triggerOnChange": false,
        "x": 190,
        "y": 140,
        "wires": [
            [
                "ae79bc9ebefb1250"
            ]
        ]
    },
    {
        "id": "ae79bc9ebefb1250",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myBehandletVann",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 420,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "3b0c6695aa3d3dd9",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "713180c82aa959a2",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Tilbakestill tellerverk behandlet vann",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "replay",
        "payload": "Sikker på at du vil nullstille tellerverk for behandlet vann?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 200,
        "wires": [
            [
                "66c2f2140d690580"
            ]
        ]
    },
    {
        "id": "05b687ade53697c5",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "606946dd38893eaf",
        "order": 3,
        "width": 5,
        "height": 2,
        "passthru": false,
        "label": "Prime Additiv",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "get_app",
        "payload": "24",
        "payloadType": "num",
        "topic": "topic",
        "topicType": "msg",
        "x": 190,
        "y": 540,
        "wires": [
            [
                "9c5991550e9663ee"
            ]
        ]
    },
    {
        "id": "9c5991550e9663ee",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "24",
        "extend": false,
        "overrideDelay": true,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 370,
        "y": 540,
        "wires": [
            [
                "152fe6f8ed0cecd7"
            ]
        ]
    },
    {
        "id": "152fe6f8ed0cecd7",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Toggle P1On",
        "func": "(global.get(\"P1On\") === 1 ? global.set(\"P1On\", 0) : global.set(\"P1On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 540,
        "wires": [
            [
                "8662fe72203c39c5"
            ]
        ]
    },
    {
        "id": "8662fe72203c39c5",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "0fcd611ccaa43e46"
        ],
        "x": 675,
        "y": 540,
        "wires": []
    },
    {
        "id": "be7d33bc2da07ed2",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "0e3b3721cba4786b",
        "name": "myTrippTeller",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 860,
        "y": 260,
        "wires": []
    },
    {
        "id": "0bae7bdf80e46091",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "1f7d0f5a0f1e9dfc",
        "name": "myHWaddr",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 970,
        "y": 2200,
        "wires": []
    },
    {
        "id": "3d0a3603dfb62096",
        "type": "rbe",
        "z": "483a6f631e7f69a7",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "name",
        "topi": "topic",
        "x": 130,
        "y": 2220,
        "wires": [
            [
                "e465494834110f2d"
            ]
        ]
    },
    {
        "id": "66c2f2140d690580",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "OBS!",
        "name": "",
        "x": 530,
        "y": 200,
        "wires": [
            [
                "fd917a6b567d9f33"
            ]
        ]
    },
    {
        "id": "fd917a6b567d9f33",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 690,
        "y": 200,
        "wires": [
            [
                "e194e732b56ba25b"
            ]
        ]
    },
    {
        "id": "e194e732b56ba25b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Set global.myBehandletVann=0",
        "rules": [
            {
                "t": "set",
                "p": "myBehandletVann",
                "pt": "global",
                "to": "0",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 610,
        "y": 260,
        "wires": [
            [
                "be7d33bc2da07ed2"
            ]
        ]
    },
    {
        "id": "b44e6f961736b932",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "606946dd38893eaf",
        "order": 8,
        "width": 5,
        "height": 2,
        "passthru": false,
        "label": "Normaldrift",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "favorite",
        "payload": "Normaldrift",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 190,
        "y": 620,
        "wires": [
            [
                "c4e01a95ea8b363f"
            ]
        ]
    },
    {
        "id": "a32e859e94877a51",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "606946dd38893eaf",
        "order": 10,
        "width": 5,
        "height": 2,
        "passthru": false,
        "label": "Power clean",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "favorite_border",
        "payload": "PowerClean",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 190,
        "y": 700,
        "wires": [
            [
                "c4e01a95ea8b363f"
            ]
        ]
    },
    {
        "id": "9f4779bc6c994d08",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "606946dd38893eaf",
        "order": 12,
        "width": 5,
        "height": 2,
        "passthru": false,
        "label": "Spesialprogram",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "extension",
        "payload": "Spesialprogram",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 200,
        "y": 780,
        "wires": [
            [
                "c4e01a95ea8b363f"
            ]
        ]
    },
    {
        "id": "170397d6965c75d3",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "70f571b1b634e156",
        "name": "myDriftsmodus",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 740,
        "y": 700,
        "wires": []
    },
    {
        "id": "c4e01a95ea8b363f",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myDriftsmodus",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 510,
        "y": 700,
        "wires": [
            [
                "170397d6965c75d3",
                "bcd8e55efec5106b"
            ]
        ]
    },
    {
        "id": "dc1901a750413222",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "713180c82aa959a2",
        "order": 10,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Sett Normaldrift",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "favorite",
        "payload": "Normaldrift",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 200,
        "y": 1600,
        "wires": [
            [
                "bee6a3e19afc375c"
            ]
        ]
    },
    {
        "id": "0f26bc55424b043b",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "713180c82aa959a2",
        "order": 11,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Sett Power clean",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "favorite_border",
        "payload": "PowerClean",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 210,
        "y": 1680,
        "wires": [
            [
                "d93b3f95823093a0"
            ]
        ]
    },
    {
        "id": "d62a7736c129cebf",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "713180c82aa959a2",
        "order": 12,
        "width": 6,
        "height": 1,
        "passthru": false,
        "label": "Sett Spesialprogram",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "extension",
        "payload": "Spesialprogram",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 220,
        "y": 1760,
        "wires": [
            [
                "3aa2940fa21a2c5e"
            ]
        ]
    },
    {
        "id": "bee6a3e19afc375c",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Save Normaldrift",
        "func": "var myConfig = {};\n\nmyConfig[\"Doseringsrate\"] = global.get(\"myDoseringsrate\");\nmyConfig[\"Doseringspumperate\"] = global.get(\"myDoseringspumperate\");\nmyConfig[\"VanntankL\"] = global.get(\"myVanntankL\");\nmyConfig[\"VanntankLL\"] = global.get(\"myVanntankLL\");\nmyConfig[\"BlandingsmengdeVanntank\"] = global.get(\"myBlandingsmengdeVanntank\");\nmyConfig[\"AdditivtankL\"] = global.get(\"myAdditivtankL\");\n\nglobal.set(\"cfgNormaldrift\",myConfig);\n\nreturn {payload: myConfig};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1600,
        "wires": [
            [
                "a7f840171b998415"
            ]
        ]
    },
    {
        "id": "a7f840171b998415",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "cbc7ef1d70e24741",
        "name": "myCfgNormaldrift",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 750,
        "y": 1600,
        "wires": []
    },
    {
        "id": "d93b3f95823093a0",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Save PowerClean",
        "func": "var myConfig = {};\n\nmyConfig[\"Doseringsrate\"] = global.get(\"myDoseringsrate\");\nmyConfig[\"Doseringspumperate\"] = global.get(\"myDoseringspumperate\");\nmyConfig[\"VanntankL\"] = global.get(\"myVanntankL\");\nmyConfig[\"VanntankLL\"] = global.get(\"myVanntankLL\");\nmyConfig[\"BlandingsmengdeVanntank\"] = global.get(\"myBlandingsmengdeVanntank\");\nmyConfig[\"AdditivtankL\"] = global.get(\"myAdditivtankL\");\n\nglobal.set(\"cfgPowerClean\",myConfig);\n\nreturn {payload: myConfig};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 1680,
        "wires": [
            [
                "bc366a8ced9bdd9d"
            ]
        ]
    },
    {
        "id": "bc366a8ced9bdd9d",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "14f07955684d5ff1",
        "name": "myCfgPowerClean",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 750,
        "y": 1680,
        "wires": []
    },
    {
        "id": "3aa2940fa21a2c5e",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Save Spesialprogram",
        "func": "var myConfig = {};\n\nmyConfig[\"Doseringsrate\"] = global.get(\"myDoseringsrate\");\nmyConfig[\"Doseringspumperate\"] = global.get(\"myDoseringspumperate\");\nmyConfig[\"VanntankL\"] = global.get(\"myVanntankL\");\nmyConfig[\"VanntankLL\"] = global.get(\"myVanntankLL\");\nmyConfig[\"BlandingsmengdeVanntank\"] = global.get(\"myBlandingsmengdeVanntank\");\nmyConfig[\"AdditivtankL\"] = global.get(\"myAdditivtankL\");\n\nglobal.set(\"cfgSpesialprogram\",myConfig);\n\nreturn {payload: myConfig};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1760,
        "wires": [
            [
                "6ed51bd4635c6466"
            ]
        ]
    },
    {
        "id": "6ed51bd4635c6466",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "7a6ab2b2b7e8aae8",
        "name": "myCfgSpesialprogram",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 760,
        "y": 1760,
        "wires": []
    },
    {
        "id": "88298dd5ce529d45",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "70f571b1b634e156",
        "name": "myDriftsmodus",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 840,
        "wires": [
            [
                "c4e01a95ea8b363f"
            ]
        ]
    },
    {
        "id": "bcd8e55efec5106b",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Update CFG",
        "func": "let cfg = {};\n\nif (msg.payload == \"Spesialprogram\") {\n    cfg = global.get(\"cfgSpesialprogram\");\n} else if (msg.payload == \"PowerClean\") {\n    cfg = global.get(\"cfgPowerClean\");\n} else {\n    cfg = global.get(\"cfgNormaldrift\");\n}\n\n// Just use default if not defined..\nif( cfg.Doseringsrate === undefined ) {\n    cfg.Doseringsrate = 333;\n    cfg.Doseringspumperate = 285;\n    cfg.VanntankL = 12;\n    cfg.VanntankLL = 8;\n    cfg.BlandingsmengdeVanntank = 20;\n    cfg.AdditivtankL = 0;\n}\n\nreturn [\n    { payload: cfg.Doseringsrate },\n    { payload: cfg.Doseringspumperate },\n    { payload: cfg.VanntankL },\n    { payload: cfg.VanntankLL },\n    { payload: cfg.BlandingsmengdeVanntank },\n    { payload: cfg.AdditivtankL }\n];\n",
        "outputs": 6,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 820,
        "wires": [
            [
                "10f95f9228800f5f"
            ],
            [
                "da4a7c1b45b75c0f"
            ],
            [
                "ed1f432ada0916a9"
            ],
            [
                "8e64a3ce2cb998d0"
            ],
            [
                "7393f421de7c6555"
            ],
            [
                "2537bff4f216c786"
            ]
        ]
    },
    {
        "id": "6a63b433.e2a73c",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "cat /etc/dhcpcd.conf",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "name": "",
        "x": 476,
        "y": 179,
        "wires": [
            [
                "3239ea8.73a1016"
            ],
            [],
            []
        ]
    },
    {
        "id": "3239ea8.73a1016",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "parse response",
        "func": "var lines = msg.payload.split(\"\\n\");\nvar data = [];\n\nfor(var i=0; i< lines.length; i++){\n    if(lines[i].indexOf(\"interface eth0\") != -1)\n        break;\n}\n\n//check if interface eth0 is disabled\nif(i < lines.length && lines[i].indexOf(\"#\") >= 0) flow.set('disabled', true);\nelse flow.set('disabled', false);\n\nnode.send({topic:'interface eth0', payload:flow.get('disabled')})\n\ni++;\n\nfor(i; i< lines.length; i++){\n   \n   //new interface, not eth0\n   if(lines[i].indexOf(\"static\") == -1)\n    break;\n    \n    var tmp = lines[i].split(\"=\");\n    if(tmp.length==2){\n        var prop = tmp[0].split(' ')[1].trim();\n        var value = tmp[1].trim();\n        \n        flow.set(prop, value);\n        node.send({topic:prop, payload:value})\n    }\n} ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 716,
        "y": 166,
        "wires": [
            [
                "3e969ca3.142384"
            ]
        ]
    },
    {
        "id": "3e969ca3.142384",
        "type": "switch",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ip_address",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "routers",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "domain_name_servers",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "interface eth0",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 888,
        "y": 166,
        "wires": [
            [
                "2d434d1f.145822"
            ],
            [
                "502308c7.25bef8"
            ],
            [
                "6a605c6d.329194",
                "140df8ca.dea297"
            ],
            [
                "ba4f96ca.0f28b8"
            ]
        ]
    },
    {
        "id": "2d434d1f.145822",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "ip_address",
        "label": "Indirizzo IP",
        "group": "1cf52e38.3cfee2",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "ip_address",
        "x": 1130,
        "y": 120,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "502308c7.25bef8",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "router",
        "label": "Router",
        "group": "1cf52e38.3cfee2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "routers",
        "x": 1109,
        "y": 163,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "6a605c6d.329194",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "dns",
        "label": "DNS",
        "group": "1cf52e38.3cfee2",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "domain_name_servers",
        "x": 1109,
        "y": 206,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "9ae462fb.d924d",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "sudo sed -i ",
        "addpay": "payload",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 510,
        "y": 320,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "1b55bbd2.2f6a74",
        "type": "ui_button",
        "z": "2d2bd18e.3e4abe",
        "name": "reboot",
        "group": "1cf52e38.3cfee2",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Reboot",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "By pressing OK the device will be rebooted. If settings are wrong this may cause the device to be unreachable",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "846fb983.93f448"
            ]
        ]
    },
    {
        "id": "6da389d0.e8d598",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "sudo reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "name": "",
        "x": 650,
        "y": 480,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d0341b01.217ee8",
        "type": "ui_button",
        "z": "2d2bd18e.3e4abe",
        "name": "refresh",
        "group": "1cf52e38.3cfee2",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Update",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 111.44442749023438,
        "y": 247.33291149139404,
        "wires": [
            [
                "fb34e190.3926a",
                "c2728ad2.71ac48"
            ]
        ]
    },
    {
        "id": "fb34e190.3926a",
        "type": "delay",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "pauseType": "delay",
        "timeout": "300",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 278.8888740539551,
        "y": 247.44451141357422,
        "wires": [
            [
                "6a63b433.e2a73c"
            ]
        ]
    },
    {
        "id": "c2728ad2.71ac48",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "send commands",
        "func": "var properties = flow.get(\"properties\");\n\nvar disabled = flow.get(\"disabled\") ? '#' : '';\n\nif(disabled == '#'){\n    //enable interface (replace only first occurance)\n    var command = `'0,/#interface eth0/s//interface eth0/g;' /etc/dhcpcd.conf`;\n    node.send({payload: command})\n}\n\nfor(var i=0;i<properties.length;i++){\n    var p = properties[i];\n    \n    var old_value = flow.get(p);\n    var new_value = flow.get(p+\"_new\") || old_value;\n    \n    if(old_value && ((old_value != new_value) || disabled == '#'))\n    {\n        //enable interface (replace only first occurance)\n        var command = `'0,\\\\?${disabled}static ${p}=${old_value}?s??static ${p}=${new_value}?g;' /etc/dhcpcd.conf`;\n        node.send({payload: command})\n    }\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 320,
        "wires": [
            [
                "8d2915b0.eb5188",
                "9ae462fb.d924d"
            ]
        ]
    },
    {
        "id": "846fb983.93f448",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "ATTENTION",
        "name": "",
        "x": 330,
        "y": 480,
        "wires": [
            [
                "9f141047.ed494"
            ]
        ]
    },
    {
        "id": "9f141047.ed494",
        "type": "switch",
        "z": "2d2bd18e.3e4abe",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 480,
        "wires": [
            [
                "6da389d0.e8d598"
            ]
        ]
    },
    {
        "id": "a825b0e4.2a051",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "store new",
        "func": "flow.set(msg.topic+\"_new\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1419,
        "y": 161,
        "wires": [
            [
                "aef2e472.475238"
            ]
        ]
    },
    {
        "id": "b585fb60.e936a8",
        "type": "inject",
        "z": "2d2bd18e.3e4abe",
        "name": "init",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 122,
        "y": 91,
        "wires": [
            [
                "a6810bb0.a3e788"
            ]
        ]
    },
    {
        "id": "a6810bb0.a3e788",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "set properties",
        "func": "var properties = ['routers', 'ip_address', 'domain_name_servers'];\n\nflow.set(\"properties\", properties);\n\n//init properties\nfor(var i=0;i<properties.length;i++){\n    var p = properties[i];\n    flow.set(p, null);\n    flow.set(p+\"_new\", null);\n}\n\nnode.send({payload: true});\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 326,
        "y": 91,
        "wires": [
            [
                "6a63b433.e2a73c"
            ]
        ]
    },
    {
        "id": "8d2915b0.eb5188",
        "type": "debug",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 514,
        "y": 385,
        "wires": []
    },
    {
        "id": "fd5e6a37.bc5d38",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 1310,
        "y": 340,
        "wires": []
    },
    {
        "id": "140df8ca.dea297",
        "type": "change",
        "z": "2d2bd18e.3e4abe",
        "name": "set",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Settings updated. Reboot device to enable new ip",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1097,
        "y": 310,
        "wires": [
            [
                "fd5e6a37.bc5d38"
            ]
        ]
    },
    {
        "id": "ba4f96ca.0f28b8",
        "type": "ui_text",
        "z": "2d2bd18e.3e4abe",
        "group": "1cf52e38.3cfee2",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Static ip",
        "format": "{{!msg.payload}}",
        "layout": "row-spread",
        "x": 1120,
        "y": 248,
        "wires": []
    },
    {
        "id": "fea93690.140ec8",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1758,
        "y": 161,
        "wires": []
    },
    {
        "id": "aef2e472.475238",
        "type": "change",
        "z": "2d2bd18e.3e4abe",
        "name": "set",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "New setting stored ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1566,
        "y": 161,
        "wires": [
            [
                "fea93690.140ec8"
            ]
        ]
    },
    {
        "id": "4b72781d.d0e178",
        "type": "ui_text",
        "z": "2d2bd18e.3e4abe",
        "group": "1cf52e38.3cfee2",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "help",
        "label": "",
        "format": "To store the new value, once edited, press ENTER or TAB",
        "layout": "col-center",
        "x": 711,
        "y": 91,
        "wires": []
    },
    {
        "id": "cdf23f9bebad3d09",
        "type": "rpi-gpio out",
        "z": "389436610c6304c5",
        "name": "Heartbeat",
        "pin": "7",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 600,
        "y": 460,
        "wires": []
    },
    {
        "id": "0b15a252a73f9d20",
        "type": "trigger",
        "z": "389436610c6304c5",
        "name": "AlivePulse",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "100",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 430,
        "y": 460,
        "wires": [
            [
                "cdf23f9bebad3d09"
            ]
        ]
    },
    {
        "id": "a5c1a40f6aa5490b",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 440,
        "wires": [
            [
                "0b15a252a73f9d20",
                "d26ccf918054d530",
                "7d1e4bd56ce1c2fe"
            ]
        ]
    },
    {
        "id": "227377b89d9f05d3",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Sjekk State Machine med 1Hz",
        "info": "",
        "x": 180,
        "y": 360,
        "wires": []
    },
    {
        "id": "0373238bfae3876a",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Alive / Watchdog",
        "info": "",
        "x": 440,
        "y": 400,
        "wires": []
    },
    {
        "id": "140234849c844ca3",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Manuell modus?",
        "info": "",
        "x": 140,
        "y": 540,
        "wires": []
    },
    {
        "id": "d26ccf918054d530",
        "type": "switch",
        "z": "389436610c6304c5",
        "name": "Manuell Kjøring?",
        "property": "myManuellKjoringState",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 150,
        "y": 600,
        "wires": [
            [],
            [
                "282b728389f5a372",
                "71cbfcfd4969982d"
            ]
        ]
    },
    {
        "id": "599eecdb58c4791d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Normal drift",
        "info": "",
        "x": 130,
        "y": 700,
        "wires": []
    },
    {
        "id": "831fa092e98df8aa",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "global.MB01DigitalIn",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "MB01DigitalIn",
        "payloadType": "global",
        "x": 180,
        "y": 1120,
        "wires": [
            [
                "3c0cee5a5e7ffe83"
            ]
        ]
    },
    {
        "id": "8b703152eb4bd37d",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Splitt Bits",
        "func": "let septikL = (msg.payload & 0x0001 ? false : true);\nlet septikH = (msg.payload & 0x0002 ? false : true);\nlet septikHH = (msg.payload & 0x0004 ? false : true);\nlet filterH = (msg.payload & 0x0008 ? false : true);\nlet filterHH = (msg.payload & 0x0010 ? false : true);\nlet filter2H = (msg.payload & 0x0020 ? false : true);\nlet filter2HH = (msg.payload & 0x0040 ? false : true);\nlet sumpH = (msg.payload & 0x0080 ? false : true);\nlet fuseBlown1 = (msg.payload & 0x0400 ? 1 : 0);\nlet fuseBlown2 = (msg.payload & 0x0800 ? 1 : 0);\nlet fuseBlown3 = (msg.payload & 0x1000 ? 1 : 0);\nlet powerGood = (msg.payload & 0x8000 ? true : false);\n\nglobal.set(\"septikL\", septikL);\nglobal.set(\"septikH\", septikH);\nglobal.set(\"septikHH\", septikHH);\nglobal.set(\"filterH\", filterH);\nglobal.set(\"filterHH\", filterHH);\nglobal.set(\"filter2H\", filter2H);\nglobal.set(\"filter2HH\", filter2HH);\nglobal.set(\"sumpH\", sumpH);\nglobal.set(\"fuseBlown1\", fuseBlown1);\nglobal.set(\"fuseBlown2\", fuseBlown2);\nglobal.set(\"fuseBlown3\", fuseBlown3);\nglobal.set(\"powerGood\", powerGood);\n",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1120,
        "wires": []
    },
    {
        "id": "e35f186791f1cae4",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Digital inn",
        "info": "",
        "x": 120,
        "y": 1060,
        "wires": []
    },
    {
        "id": "f919e2e4e25acf1a",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Analog inn",
        "info": "global.set(\"MB01Septiklevel\", msg.payload[8]);\nglobal.set(\"MB01Bruksvannlevel\", msg.payload[9]);\n",
        "x": 120,
        "y": 1220,
        "wires": []
    },
    {
        "id": "3c0cee5a5e7ffe83",
        "type": "rbe",
        "z": "389436610c6304c5",
        "name": "Blokkere oppdatering ved ingen endring",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 480,
        "y": 1120,
        "wires": [
            [
                "8b703152eb4bd37d"
            ]
        ]
    },
    {
        "id": "eed6412019e0569e",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Alarmhåndtering",
        "info": "",
        "x": 140,
        "y": 1320,
        "wires": []
    },
    {
        "id": "d74b10123b69e8a9",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Styring av Innvann & Doseringspumpe",
        "info": "Funksjon:\n - Så lenge sumpH - kjør sumppumpe\n",
        "x": 210,
        "y": 860,
        "wires": []
    },
    {
        "id": "199fbf45b6f0067d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "System Oppstart",
        "info": "",
        "x": 140,
        "y": 80,
        "wires": []
    },
    {
        "id": "ff05082d402edd3c",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "100e44bf77834a1f",
                "cff4564a70b363a8"
            ]
        ]
    },
    {
        "id": "dc8e2bd53450658d",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "Update Position on startup",
        "mode": "link",
        "links": [
            "3bcdd38ce2c510ef",
            "21b15faa5147b037"
        ],
        "x": 435,
        "y": 200,
        "wires": []
    },
    {
        "id": "100e44bf77834a1f",
        "type": "delay",
        "z": "389436610c6304c5",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 320,
        "y": 200,
        "wires": [
            [
                "dc8e2bd53450658d"
            ]
        ]
    },
    {
        "id": "cff4564a70b363a8",
        "type": "change",
        "z": "389436610c6304c5",
        "name": "Set global.mySystemtype & Andre preset...",
        "rules": [
            {
                "t": "set",
                "p": "mySystemtype",
                "pt": "global",
                "to": "Ecowater001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "mySystemStatusIndikator",
                "pt": "global",
                "to": "G",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "P1On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "P2On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "P3On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "RL1On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "RL2On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "RL3On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "RL4On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "RL5On",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "myAdditivtanknivaaProsent",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "myBruksvanntanknivaaProsent",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "myDriftsmodus",
                "pt": "global",
                "to": "Normaldrift",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "282b728389f5a372",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "RL5On=ON om nok vann",
        "func": "let nokVann = (global.get(\"MB01RensetSortvann\") > global.get(\"myVanntankLL\") ? true : false);\nlet RL5On = global.get(\"RL5On\");\n\nif(!nokVann) {\n    global.set(\"RL5On\", 0);\n} else if(RL5On!=1) {\n    global.set(\"RL5On\",1);\n}\n\nreturn { payload: (RL5On != global.get(\"RL5On\")?true:false) };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 170,
        "y": 760,
        "wires": [
            [
                "624de9ef4c29f318"
            ]
        ]
    },
    {
        "id": "71cbfcfd4969982d",
        "type": "switch",
        "z": "389436610c6304c5",
        "name": "Vannventil åpnet?",
        "property": "P2On",
        "propertyType": "global",
        "rules": [
            {
                "t": "neq",
                "v": "1",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 150,
        "y": 920,
        "wires": [
            [
                "8cdd382819d185b8"
            ],
            [
                "65db038a519f4733"
            ]
        ]
    },
    {
        "id": "8cdd382819d185b8",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Vannivå lavt?",
        "func": "return { payload: (global.get(\"MB01RensetSortvann\") < global.get(\"myVanntankL\")?true:false)};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 920,
        "wires": [
            [
                "07e930c66f7f9856"
            ]
        ]
    },
    {
        "id": "07e930c66f7f9856",
        "type": "switch",
        "z": "389436610c6304c5",
        "name": "True?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 920,
        "wires": [
            [
                "e29f5a7b654f95c7",
                "290292b7953564cb"
            ]
        ]
    },
    {
        "id": "e29f5a7b654f95c7",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "P2On=1",
        "func": "global.set(\"P2On\",1);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 880,
        "wires": [
            [
                "7d1e4bd56ce1c2fe"
            ]
        ]
    },
    {
        "id": "65db038a519f4733",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Blandingsmengde nådd?",
        "func": "let Stopp = false;\n\nif ((global.get(\"DeltaV\")+0.4) >= global.get(\"myBlandingsmengdeVanntank\")) {\n    Stopp = true;\n}\n\nif (global.get(\"MB01RensetSortvann\") >= 36) {\n    Stopp = true;\n}\n\nreturn { payload: Stopp }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 390,
        "y": 980,
        "wires": [
            [
                "a2dde9ba9f2c2c86"
            ]
        ]
    },
    {
        "id": "a2dde9ba9f2c2c86",
        "type": "switch",
        "z": "389436610c6304c5",
        "name": "True?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 590,
        "y": 980,
        "wires": [
            [
                "7033bedfab589acf"
            ]
        ]
    },
    {
        "id": "7033bedfab589acf",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "P2On=0",
        "func": "global.set(\"P2On\",0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 1000,
        "wires": [
            [
                "7d1e4bd56ce1c2fe"
            ]
        ]
    },
    {
        "id": "7d1e4bd56ce1c2fe",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "Update P2On",
        "mode": "link",
        "links": [
            "0fcd611ccaa43e46"
        ],
        "x": 1275,
        "y": 880,
        "wires": []
    },
    {
        "id": "624de9ef4c29f318",
        "type": "switch",
        "z": "389436610c6304c5",
        "name": "Changed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 390,
        "y": 760,
        "wires": [
            [
                "7d1e4bd56ce1c2fe"
            ]
        ]
    },
    {
        "id": "0689295402ae0cc2",
        "type": "trigger",
        "z": "389436610c6304c5",
        "name": "",
        "op1": "1",
        "op2": "0",
        "op1type": "num",
        "op2type": "num",
        "duration": "250",
        "extend": false,
        "overrideDelay": true,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 940,
        "y": 940,
        "wires": [
            [
                "ac0d430d295c2df2"
            ]
        ]
    },
    {
        "id": "ac0d430d295c2df2",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "P1On 1/0",
        "func": "global.set(\"P1On\",msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 940,
        "wires": [
            [
                "7d1e4bd56ce1c2fe"
            ]
        ]
    },
    {
        "id": "290292b7953564cb",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Kjør Additiv!",
        "func": "let BlandingsmengdeVanntank = global.get(\"myBlandingsmengdeVanntank\");  // [l]\nlet Doseringsrate = global.get(\"myDoseringsrate\");  // 1:x\nlet Doseringspumperate = global.get(\"myDoseringspumperate\");  // [l/min]\n\nlet Doseringsmendge = BlandingsmengdeVanntank / Doseringsrate;  // [l]\n\nlet myBehandletVann = global.get(\"myBehandletVann\") + BlandingsmengdeVanntank;\n\n\nmsg.delay = Doseringsmendge / Doseringspumperate * 60 * 1000 * 1000;\n\n// Update behandlet vann\nglobal.set(\"myBehandletVann\", myBehandletVann); \n\nmsg.payload = myBehandletVann;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 940,
        "wires": [
            [
                "0689295402ae0cc2",
                "3d9a102104c9f9d2"
            ]
        ]
    },
    {
        "id": "3d9a102104c9f9d2",
        "type": "set-shared-state",
        "z": "389436610c6304c5",
        "state": "0e3b3721cba4786b",
        "name": "myTrippTeller",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 940,
        "y": 980,
        "wires": []
    },
    {
        "id": "a6501cef700abf01",
        "type": "get-shared-state",
        "z": "389436610c6304c5",
        "state": "1f7d0f5a0f1e9dfc",
        "name": "myHWaddr",
        "triggerOnInit": true,
        "triggerOnChange": false,
        "x": 120,
        "y": 260,
        "wires": [
            [
                "165f1e7274301451"
            ]
        ]
    },
    {
        "id": "165f1e7274301451",
        "type": "change",
        "z": "389436610c6304c5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HWaddr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "726055c7ee0f4398",
        "type": "function",
        "z": "48ec77456e967366",
        "name": "Parser for Data fra SortvannRegisterFra01 Register 9-23",
        "func": "let i = 0;\n\n// Parse melding til Globale variable \nglobal.set(\"MB01TimerInput\", msg.payload[0]);\nglobal.set(\"MB01DigitalIn\", msg.payload[1]);\nglobal.set(\"MB01DigitalIn2\", msg.payload[2]);\nglobal.set(\"MB01P1Temp\", msg.payload[3]);\nglobal.set(\"MB01P2Temp\", msg.payload[4]);\nglobal.set(\"MB01P3Temp\", msg.payload[5]);\nglobal.set(\"MB01Septiklevel\", msg.payload[6]);\nglobal.set(\"MB01RensetSortvannslevel\", msg.payload[7]);\nglobal.set(\"MB01Bruksvannlevel\", msg.payload[8]);\nglobal.set(\"MB01P1ARaw\", msg.payload[9]);\nglobal.set(\"MB01P2ARaw\", msg.payload[10]);\nglobal.set(\"MB01P3ARaw\", msg.payload[11]);\nglobal.set(\"MB01RL5ARaw\", msg.payload[12]);\n// global.set(\"MB01Regnvannlevel\", msg.payload[13]);\nglobal.set(\"MB01PulsFrekvens\", msg.payload[13]);\nglobal.set(\"MB01AvgPulsFrekvens\", msg.payload[14]);\n\n// Set Tanklevel\nconst ADV = [278,320,358,384,399,413,427,442,458,472,486,500,514,528,544,561,584,609,632,655,666,1000];\nconst VOLUM = [5,  7,  8,  9, 10, 11, 12, 13, 14, 15, 18, 20, 22, 23, 24, 25, 27, 29, 31, 33, 35,  35];\nfor(i=0; msg.payload[7] > ADV[i];i++ ) {\n    if(i==22) {\n        i=21;\n        break;\n    }\n}\nglobal.set(\"MB01RensetSortvann\", VOLUM[i]);\n\n// Set Additivtank\nconst ADV2 = [265,281,298,313,328,343,359,375,389,405,419,433,447,458,468,485,501,514,527,538,548,558,570,582,592,601,610,619,630,641,650,660,1000];\nconst VOLUM2 = [0,  1,  2,  3,  4,  5,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 26, 27, 28, 29, 30, 31, 32, 33,  34];\nfor (i = 0; msg.payload[6] > ADV2[i]; i++) {\n    if (i == 33) {\n        i = 32;\n        break;\n    }\n}\nglobal.set(\"MB01Additiv\", VOLUM2[i]);\n",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 320,
        "wires": []
    },
    {
        "id": "0311661c02c58102",
        "type": "comment",
        "z": "48ec77456e967366",
        "name": "MODBUS les Lokal (01) Register  9-22",
        "info": "",
        "x": 210,
        "y": 260,
        "wires": []
    },
    {
        "id": "bd79e1c13d55bd57",
        "type": "modbus-response",
        "z": "48ec77456e967366",
        "name": "",
        "registerShowMax": 20,
        "x": 430,
        "y": 360,
        "wires": []
    },
    {
        "id": "b9a89beb8f448a4f",
        "type": "modbus-write",
        "z": "48ec77456e967366",
        "name": "HR5 til Local-ID01",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "5",
        "quantity": "1",
        "server": "46c1561852cb3234",
        "emptyMsgOnFail": false,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 670,
        "y": 140,
        "wires": [
            [
                "a0034bd0751bdea7"
            ],
            []
        ]
    },
    {
        "id": "bbaed4261e8ae725",
        "type": "function",
        "z": "48ec77456e967366",
        "name": "Set pumper og releer",
        "func": "let myPayload = {};\n\nmyPayload[\"P1On\"] = global.get(\"P1On\");\nmyPayload[\"P2On\"] = global.get(\"P2On\");\nmyPayload[\"P3On\"] = global.get(\"P3On\");\nmyPayload[\"RL1On\"] = global.get(\"RL1On\");\nmyPayload[\"RL2On\"] = global.get(\"RL2On\");\nmyPayload[\"RL3On\"] = global.get(\"RL3On\");\nmyPayload[\"RL4On\"] = global.get(\"RL4On\");\nmyPayload[\"RL5On\"] = global.get(\"RL5On\");\n\nreturn {payload: myPayload};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 260,
        "y": 140,
        "wires": [
            [
                "d1e878c5b0616ba2"
            ]
        ]
    },
    {
        "id": "509724c843e0cbda",
        "type": "comment",
        "z": "48ec77456e967366",
        "name": "MODBUS skriv Lokal (01) Register 5",
        "info": "",
        "x": 200,
        "y": 80,
        "wires": []
    },
    {
        "id": "d1e878c5b0616ba2",
        "type": "bit-encode",
        "z": "48ec77456e967366",
        "name": "",
        "bits": "c17857ac55270dc4",
        "x": 470,
        "y": 140,
        "wires": [
            [
                "b9a89beb8f448a4f"
            ]
        ]
    },
    {
        "id": "a0034bd0751bdea7",
        "type": "modbus-response",
        "z": "48ec77456e967366",
        "name": "",
        "registerShowMax": 20,
        "x": 890,
        "y": 140,
        "wires": []
    },
    {
        "id": "8886ceae3801d8a4",
        "type": "modbus-read",
        "z": "48ec77456e967366",
        "name": "Lokal (01) HR9-23",
        "topic": "",
        "showStatusActivities": false,
        "logIOActivities": false,
        "showErrors": false,
        "showWarnings": true,
        "unitid": "1",
        "dataType": "HoldingRegister",
        "adr": "9",
        "quantity": "15",
        "rate": "250",
        "rateUnit": "ms",
        "delayOnStart": false,
        "startDelayTime": "",
        "server": "46c1561852cb3234",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": false,
        "x": 210,
        "y": 320,
        "wires": [
            [
                "726055c7ee0f4398",
                "bd79e1c13d55bd57"
            ],
            []
        ]
    },
    {
        "id": "0fcd611ccaa43e46",
        "type": "link in",
        "z": "48ec77456e967366",
        "name": "MODBUS Set pumper og releer",
        "links": [
            "3d7113abb12f1f48",
            "7d1e4bd56ce1c2fe",
            "8662fe72203c39c5"
        ],
        "x": 95,
        "y": 140,
        "wires": [
            [
                "bbaed4261e8ae725"
            ]
        ]
    },
    {
        "id": "666f969227948b43",
        "type": "comment",
        "z": "b1739a3211a017c8",
        "name": "SVG Flow Hjem",
        "info": "",
        "x": 140,
        "y": 80,
        "wires": []
    },
    {
        "id": "8a687d4223ac7c9a",
        "type": "inject",
        "z": "b1739a3211a017c8",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "0.5",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "fc5564f1d9e3f5d5",
                "b4d60d03f9afb846"
            ]
        ]
    },
    {
        "id": "7b6cbb0582dbc87e",
        "type": "ui_ui_control",
        "z": "b1739a3211a017c8",
        "name": "",
        "events": "all",
        "x": 140,
        "y": 360,
        "wires": [
            [
                "87e665b5fc8399f0"
            ]
        ]
    },
    {
        "id": "b67a13e16fb2969f",
        "type": "ui_svg_graphics",
        "z": "b1739a3211a017c8",
        "group": "95e5adfa6e36fd6e",
        "order": 1,
        "width": "22",
        "height": "13",
        "svgString": "<svg xmlns:inkscape=\"http://www.inkscape.org/namespaces/inkscape\" xmlns:sodipodi=\"http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\" width=\"740\" height=\"365\" version=\"1.1\" id=\"svg1775\" sodipodi:docname=\"HWTest.svg\" xml:space=\"preserve\" inkscape:version=\"1.2.1 (9c6d41e410, 2022-07-14)\" viewBox=\"134.5019989013672 0 456.49798583984375 336\" preserveAspectRatio=\"xMidYMid meet\">\n  <defs id=\"svgEditorDefs\">\n    <filter filterUnits=\"objectBoundingBox\" height=\"200%\" id=\"dropshadow\" width=\"200%\">\n      <feGaussianBlur in=\"SourceAlpha\" result=\"shadow\" stdDeviation=\"5\" />\n      <feOffset dx=\"10\" dy=\"10\" in=\"shadow\" result=\"shadowoffset\" />\n      <feFlood flood-color=\"rgba(0,0,0,0.6)\" />\n      <feComposite in2=\"shadowoffset\" operator=\"in\" />\n      <feMerge result=\"dropshadowresult\">\n        <feMergeNode />\n        <feMergeNode in=\"SourceGraphic\" />\n      </feMerge>\n    </filter>\n    <marker id=\"square10\" markerHeight=\"10\" markerUnits=\"strokeWidth\" markerWidth=\"10\" orient=\"auto\" refX=\"0\" refY=\"0\" viewBox=\"-5 -5 10 10\">\n      <rect height=\"10\" style=\"fill:black;stroke:none;\" width=\"10\" x=\"-5\" y=\"-5\" />\n    </marker>\n  </defs>\n  <rect id=\"svgEditorBackground\" x=\"134.5019989013672\" y=\"0\" width=\"456.49798583984375\" height=\"336\" style=\"fill:none;stroke:none\" />\n  <sodipodi:namedview id=\"namedview1777\" pagecolor=\"#333333\" bordercolor=\"#666666\" borderopacity=\"1.0\" inkscape:showpageshadow=\"2\" inkscape:pageopacity=\"0\" inkscape:pagecheckerboard=\"0\" inkscape:deskcolor=\"#d1d1d1\" showgrid=\"false\" inkscape:zoom=\"3.260274\" inkscape:cx=\"364.53992\" inkscape:cy=\"186.18067\" inkscape:window-width=\"3440\" inkscape:window-height=\"1377\" inkscape:window-x=\"3832\" inkscape:window-y=\"-8\" inkscape:window-maximized=\"1\" inkscape:current-layer=\"svg1775\" />\n  <defs id=\"defs1653\">\n    <path id=\"prefix__b\" d=\"M247.834-50.029h49.819v21.021h-49.819z\" />\n    <path id=\"prefix__d\" d=\"M247.834-50.029h49.819v21.021h-49.819z\" />\n    <path id=\"prefix__f\" d=\"M247.834-50.029h49.819v21.021h-49.819z\" />\n    <path id=\"prefix__h\" d=\"M247.834-50.029h49.819v21.021h-49.819z\" />\n    <path id=\"prefix__q\" d=\"M671.55 239.903h19.697v18.431H671.55z\" />\n    <path id=\"prefix__p\" d=\"M671.55 239.903h19.697v18.431H671.55z\" />\n    <path id=\"prefix__n\" d=\"M671.55 239.903h19.697v18.431H671.55z\" />\n    <path id=\"prefix__m\" d=\"M671.55 239.903h19.697v18.431H671.55z\" />\n    <path id=\"prefix__j\" d=\"M671.55 239.903h19.697v18.431H671.55z\" />\n    <path id=\"prefix__k\" d=\"M671.55 239.903h19.697v18.431H671.55z\" />\n    <filter id=\"prefix__a\" x=\"-0.022048208\" y=\"-0.068655494\" width=\"1.0440964\" height=\"1.137311\" color-interpolation-filters=\"sRGB\">\n      <feGaussianBlur stdDeviation=\"0.21 0.21\" result=\"blur\" id=\"feGaussianBlur1632\" />\n    </filter>\n    <filter id=\"prefix__c\" x=\"-0.022597856\" y=\"-0.068655494\" width=\"1.0451957\" height=\"1.137311\" color-interpolation-filters=\"sRGB\">\n      <feGaussianBlur stdDeviation=\"0.21 0.21\" result=\"blur\" id=\"feGaussianBlur1635\" />\n    </filter>\n    <filter id=\"prefix__e\" x=\"-0.022654739\" y=\"-0.068655494\" width=\"1.0453095\" height=\"1.137311\" color-interpolation-filters=\"sRGB\">\n      <feGaussianBlur stdDeviation=\"0.21 0.21\" result=\"blur\" id=\"feGaussianBlur1638\" />\n    </filter>\n    <filter id=\"prefix__g\" x=\"-0.02276834\" y=\"-0.068655494\" width=\"1.0455367\" height=\"1.137311\" color-interpolation-filters=\"sRGB\">\n      <feGaussianBlur stdDeviation=\"0.21 0.21\" result=\"blur\" id=\"feGaussianBlur1641\" />\n    </filter>\n    <filter id=\"prefix__o\" x=\"-0.059057884\" y=\"-0.057991023\" width=\"1.1181158\" height=\"1.115982\" color-interpolation-filters=\"sRGB\">\n      <feGaussianBlur stdDeviation=\"0.21 0.21\" result=\"blur\" id=\"feGaussianBlur1644\" />\n    </filter>\n    <filter id=\"prefix__l\" x=\"-0.059057884\" y=\"-0.057991023\" width=\"1.1181158\" height=\"1.115982\" color-interpolation-filters=\"sRGB\">\n      <feGaussianBlur stdDeviation=\"0.21 0.21\" result=\"blur\" id=\"feGaussianBlur1647\" />\n    </filter>\n    <filter id=\"prefix__i\" x=\"-0.059057884\" y=\"-0.057991023\" width=\"1.1181158\" height=\"1.115982\" color-interpolation-filters=\"sRGB\">\n      <feGaussianBlur stdDeviation=\"0.21 0.21\" result=\"blur\" id=\"feGaussianBlur1650\" />\n    </filter>\n  </defs>\n  <image width=\"420.10959\" height=\"312.9863\" preserveAspectRatio=\"none\" xlink:href=\"BakgrunnHW.jpg\" id=\"HWTestbakgrunn\" x=\"140\" y=\"0\" inkscape:label=\"#HWTestbakgrunn\" inkscape:svg-dpi=\"1\" sodipodi:insensitive=\"true\" /><text transform=\"matrix(1.00836 0 0 1.0113 -143.887 15.271)\" x=\"671.551\" y=\"254.013\" font-weight=\"400\" font-size=\"15.467\" font-family=\"Verdana\" id=\"text1707\" />\n  <path d=\"m 172.17326,240.5038 -17.196,0.177 m 17.595,24.465 h -18.66 m 17.729,-26.238 -0.355,26.947\" fill=\"none\" stroke=\"#c00000\" stroke-width=\"3.546\" stroke-miterlimit=\"8\" id=\"path1725\" />\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"450\" y=\"31\" id=\"sensor3\">3000</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"450\" y=\"83\" id=\"sensor2\">2000</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"450\" y=\"130\" id=\"sensor1\">1000</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"450\" y=\"173\" id=\"sensor4\">4000</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"521.876\" y=\"256.847\" id=\"TempP1\">24</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"467.807\" y=\"256.847\" id=\"TempP2\">24</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"410.233\" y=\"256.847\" id=\"TempP3\">24</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"488.893\" y=\"295.444\" id=\"currentP1\">1A</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"434.825\" y=\"295.444\" id=\"currentP2\">2A</text>\n  <text style=\"fill:black;font-family:Verdana;font-size:12px\" x=\"379.357\" y=\"295.444\" id=\"currentP3\">3A</text>\n  <text style=\"fill:white;font-family:Verdana;font-size:12px\" x=\"200\" y=\"240\" id=\"currentRL5\">5A</text>\n  <g id=\"RL1OnBtn\">\n    <rect x=\"61.144882\" y=\"32.953274\" style=\"stroke: rgb(255, 0, 0); stroke-width: 1px;\" id=\"RL1On\" width=\"78.247002\" height=\"37.194\" fill=\"#FFFFFF\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"74.478882\" y=\"48.396576\" id=\"e2_texte\">\n      <tspan x=\"66.053879\" id=\"tspan33\">RL1</tspan>\n      <tspan x=\"68.51088\" dy=\"15\" id=\"tspan35\"></tspan>\n    </text>\n  </g>\n  <g id=\"RL2OnBtn\">\n    <rect x=\"60.67181\" y=\"77.097443\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"RL2On\" width=\"78.247002\" height=\"37.194\" fill=\"#FFFFFF\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"74.005806\" y=\"99.905128\" id=\"e2_texte-6\">\n      <tspan x=\"68.037804\" id=\"tspan35-9\">RL2</tspan>\n    </text>\n  </g>\n  <g id=\"RL3OnBtn\">\n    <rect x=\"61.081783\" y=\"121.56226\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"RL3On\" width=\"78.247002\" height=\"37.194\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"74.415787\" y=\"144.36992\" id=\"e2_texte-9\">\n      <tspan x=\"65.990784\" id=\"tspan33-1\">RL3</tspan>\n    </text>\n  </g>\n  <g id=\"RL4OnBtn\">\n    <rect x=\"60.811035\" y=\"165.60928\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"RL4On\" width=\"78.247002\" height=\"37.194\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"74.145035\" y=\"188.41698\" id=\"e2_texte-65\">\n      <tspan x=\"65.720032\" id=\"tspan33-14\">RL4</tspan>\n    </text>\n  </g>\n  <g id=\"RL5OnBtn\">\n    <rect x=\"60.722073\" y=\"215.27629\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"RL5On\" width=\"78.247002\" height=\"37.194\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"72.214973\" y=\"230.71959\" id=\"e2_texte-61\">\n      <tspan x=\"63.78997\" id=\"tspan33-9\" dy=\"0 0 0 0 0\">Trykkpumpe</tspan>\n      <tspan sodipodi:role=\"line\" x=\"63.78997\" y=\"245.71959\" id=\"tspan553\">vann ut</tspan>\n    </text>\n  </g>\n  <g id=\"PWR\">\n    <rect x=\"61.379601\" y=\"254.75156\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"PWR2\" width=\"78.247002\" height=\"37.194\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"74.7136\" y=\"275.71814\" id=\"e2_texte-2\">\n      <tspan sodipodi:role=\"line\" id=\"tspan583\" x=\"66.288597\" y=\"275.71814\">\n        <tspan x=\"66.288597\" id=\"tspan33-4\">+12V </tspan>(15A)\n      </tspan>\n    </text>\n  </g>\n  <g id=\"P1OnBtn\">\n    <rect x=\"510.7496\" y=\"298.21844\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"P1On\" width=\"78.247002\" height=\"37.194\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"529.60693\" y=\"313.66174\" id=\"e2_texte-8\">\n      <tspan sodipodi:role=\"line\" id=\"tspan713\" x=\"500\" y=\"314\">\n        <tspan x=\"520\" id=\"tspan35-7\">Doserings-</tspan>\n      </tspan>\n      <tspan sodipodi:role=\"line\" id=\"tspan715\" x=\"520\" y=\"328\">pumpe</tspan>\n    </text>\n  </g>\n  <g id=\"P2OnBtn\">\n    <rect x=\"429.31631\" y=\"298.83334\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"P2On\" width=\"78.247002\" height=\"37.194\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"451.85577\" y=\"312.43558\" id=\"e2_texte-4\">\n      <tspan sodipodi:role=\"line\" id=\"tspan681\" x=\"430\" y=\"314\">\n        <tspan x=\"440\" id=\"tspan33-6\">Ventil</tspan>\n      </tspan>\n      <tspan sodipodi:role=\"line\" id=\"tspan683\" x=\"430\" y=\"328\">\n        <tspan x=\"440\" dy=\"0 0 0 0 0\" id=\"tspan685\">vann inn</tspan>\n      </tspan>\n    </text>\n  </g>\n  <g id=\"P3OnBtn\">\n    <rect x=\"348.15213\" y=\"298.61682\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:1px\" id=\"P3On\" width=\"78.247002\" height=\"37.194\" />\n    <text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"357.80377\" y=\"308.53683\" id=\"e2_texte-94\">\n      <tspan x=\"360\" y=\"314\" id=\"tspan33-3\" dy=\"0 0 0 0 0 0 0 0 0 0\">P3</tspan>\n      <tspan sodipodi:role=\"line\" x=\"360\" y=\"328\" id=\"tspan747\"></tspan>\n    </text>\n    <text xml:space=\"preserve\" style=\"font-size:7.36438px;line-height:1.05;font-family:Verdana;-inkscape-font-specification:'Verdana, Normal';letter-spacing:0px;word-spacing:0px;stroke-width:0.920548;fill:#000000\" x=\"348.87701\" y=\"332.32941\" id=\"text753\">\n      <tspan sodipodi:role=\"line\" id=\"tspan751\" style=\"stroke-width:0.920548;fill:#000000\" x=\"348.87701\" y=\"332.32941\"></tspan>\n    </text>\n  </g>\n  <rect x=\"173.41902\" y=\"17.261293\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI1\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"194.53181\" y=\"29.18927\" id=\"e2_texte-7\">\n    <tspan x=\"186.1068\" id=\"tspan33-8\">DI1</tspan>\n  </text>\n  <rect x=\"173.55444\" y=\"33.900757\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI2\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"192.82614\" y=\"45.828735\" id=\"e2_texte-7-0\">\n    <tspan x=\"184.40112\" id=\"tspan33-8-9\">DI2</tspan>\n  </text>\n  <rect x=\"173.55444\" y=\"52.311707\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI3\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"183.62067\" y=\"64.239685\" id=\"e2_texte-7-6\">\n    <tspan x=\"175.19565\" id=\"tspan33-8-95\">DI3</tspan>\n  </text>\n  <rect x=\"173.55444\" y=\"70.722656\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI4\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"194.66724\" y=\"82.650635\" id=\"e2_texte-7-4\">\n    <tspan x=\"186.24222\" id=\"tspan33-8-5\">DI4</tspan>\n  </text>\n  <rect x=\"172.56041\" y=\"89.377312\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI5\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"184.46773\" y=\"101.30529\" id=\"e2_texte-7-4-9\">\n    <tspan x=\"176.04271\" id=\"tspan33-8-5-8\">DI5</tspan>\n  </text>\n  <rect x=\"173.55444\" y=\"107.54456\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI6\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"185.46176\" y=\"119.47253\" id=\"e2_texte-7-1\">\n    <tspan x=\"177.03674\" id=\"tspan33-8-57\">DI6</tspan>\n  </text>\n  <rect x=\"173.55444\" y=\"124.11442\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI7\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"181.77957\" y=\"136.04239\" id=\"e2_texte-7-16\">\n    <tspan x=\"173.35455\" id=\"tspan33-8-1\">DI7</tspan>\n  </text>\n  <rect x=\"173.55444\" y=\"142.52538\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"DI8\" width=\"89.874847\" height=\"14.374791\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"196.50833\" y=\"154.45334\" id=\"e2_texte-7-04\">\n    <tspan x=\"188.08331\" id=\"tspan33-8-91\">DI8</tspan>\n  </text>\n  <g id=\"g1431\">\n    <rect x=\"333\" y=\"43\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"e1_rectangle-3-9\" width=\"114\" height=\"15\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"345\" y=\"55\" id=\"e2_texte-7-2\">\n      <tspan x=\"336\" id=\"tspan33-8-51\">Sensor3</tspan>\n    </text>\n  </g>\n  <g id=\"g1426\">\n    <rect x=\"333\" y=\"61\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.666269px\" id=\"e1_rectangle-3-2-9\" width=\"114\" height=\"15\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"345\" y=\"72\" id=\"e2_texte-7-0-2\">\n      <tspan x=\"336\" id=\"tspan33-8-9-0\">Nivåmåler vann</tspan>\n    </text>\n  </g>\n  <g id=\"g1421\">\n    <rect x=\"333\" y=\"80\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.745776px\" id=\"e1_rectangle-3-8-2\" width=\"114\" height=\"15\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"345\" y=\"92\" id=\"e2_texte-7-6-3\">\n      <tspan x=\"336\" id=\"tspan33-8-95-0\">Nivåmåler additiv</tspan>\n    </text>\n  </g>\n  <g id=\"g1416\">\n    <rect x=\"333\" y=\"116\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.700008px\" id=\"e1_rectangle-3-81-6\" width=\"114\" height=\"15\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"345\" y=\"128\" id=\"e2_texte-7-4-8\">\n      <tspan x=\"336\" id=\"tspan33-8-5-0\">Flowmeter</tspan>\n    </text>\n  </g>\n  <g id=\"g1411\">\n    <rect x=\"353.59406\" y=\"158.84285\" style=\"fill:#ffffff;stroke:#ff0000;stroke-width:0.571477px\" id=\"e1_rectangle-3-9-2\"\n      width=\"65.687286\" height=\"14.469584\" /><text style=\"font-size:12px;font-family:Verdana;fill:#000000\" x=\"365.54877\"\n      y=\"170.81821\" id=\"e2_texte-7-2-8\">\n      <tspan x=\"357.12375\" id=\"tspan33-8-51-6\">Enhets ID</tspan>\n    </text>\n  </g>  <path d=\"M104.000015,-143.999881h32v56l32,-72h-32v-56Z\" style=\"fill: red; stroke: black; vector-effect: non-scaling-stroke; stroke-width: 1px; fill-opacity: 0.7; filter: url(#dropshadow);\" id=\"fuseP3\" transform=\"matrix(0.180784 0 0 0.180784 366.257 254.079)\" />\n  <path d=\"M406.32786865868013,-143.999881h32v56l32,-72h-32v-56Z\" style=\"fill:red;stroke:black;vector-effect:non-scaling-stroke;stroke-width:1px;fill-opacity:0.7;filter:url(#dropshadow)\" id=\"fuseP2\" transform=\"matrix(0.180784 0 0 0.180784 366.257 254.079)\" />\n  <path d=\"M701.0307925241758,-143.999881h32v56l32,-72h-32v-56Z\" style=\"fill:red;stroke:black;vector-effect:non-scaling-stroke;stroke-width:1px;fill-opacity:0.7;filter:url(#dropshadow)\" id=\"fuseP1\" transform=\"matrix(0.180784 0 0 0.180784 366.257 254.079)\" />\n</svg>",
        "clickableShapes": [
            {
                "targetId": "#RL1OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL1OnMD\",\"action\":\"start\",\"function\":\"RL1OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL1OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL1OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL2OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL2OnMD\",\"action\":\"start\",\"function\":\"RL2OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL2OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL2OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL3OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL3OnMD\",\"action\":\"start\",\"function\":\"RL3OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL3OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL3OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL4OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL4OnMD\",\"action\":\"start\",\"function\":\"RL4OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL4OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL4OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL5OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL5OnMD\",\"action\":\"start\",\"function\":\"RL5OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#RL5OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#RL5OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#P1OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#P1OnMD\",\"action\":\"start\",\"function\":\"P1OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#P1OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#P1OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#P2OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#P2OnMD\",\"action\":\"start\",\"function\":\"P2OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#P2OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#P2OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#P3OnBtn",
                "action": "mousedown",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#P3OnMD\",\"action\":\"start\",\"function\":\"P3OnToggle\"}",
                "payloadType": "json",
                "topic": ""
            },
            {
                "targetId": "#P3OnBtn",
                "action": "mouseup",
                "payload": "{\"command\":\"trigger_animation\",\"selector\":\"#P3OnMU\",\"action\":\"start\"}",
                "payloadType": "json",
                "topic": ""
            }
        ],
        "javascriptHandlers": [],
        "smilAnimations": [
            {
                "id": "RL1OnMD",
                "targetId": "RL1OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL1OnMU",
                "targetId": "RL1OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL2OnMD",
                "targetId": "RL2OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL2OnMU",
                "targetId": "RL2OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL3OnMD",
                "targetId": "RL3OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL3OnMU",
                "targetId": "RL3OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL4OnMD",
                "targetId": "RL4OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL4OnMU",
                "targetId": "RL4OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL5OnMD",
                "targetId": "RL5OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "RL5OnMU",
                "targetId": "RL5OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "P1OnMD",
                "targetId": "P1OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "P1OnMU",
                "targetId": "P1OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "P2OnMD",
                "targetId": "P2OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "P2OnMU",
                "targetId": "P2OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "P3OnMD",
                "targetId": "P3OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "1",
                "toValue": "0.5",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            },
            {
                "id": "P3OnMU",
                "targetId": "P3OnBtn",
                "classValue": "",
                "attributeName": "opacity",
                "transformType": "rotate",
                "fromValue": "0.5",
                "toValue": "1",
                "trigger": "msg",
                "duration": "1",
                "durationUnit": "s",
                "repeatCount": "1",
                "end": "freeze",
                "delay": "1",
                "delayUnit": "s",
                "custom": ""
            }
        ],
        "bindings": [],
        "showCoordinates": false,
        "autoFormatAfterEdit": false,
        "showBrowserErrors": false,
        "showBrowserEvents": false,
        "enableJsDebugging": false,
        "sendMsgWhenLoaded": false,
        "noClickWhenDblClick": false,
        "outputField": "payload",
        "editorUrl": "//drawsvg.org/drawsvg.html",
        "directory": "",
        "panning": "disabled",
        "zooming": "disabled",
        "panOnlyWhenZoomed": false,
        "doubleClickZoomEnabled": false,
        "mouseWheelZoomEnabled": false,
        "dblClickZoomPercentage": 150,
        "cssString": "div.ui-svg svg{\n    color: var(--nr-dashboard-widgetColor);\n    fill: currentColor !important;\n}\ndiv.ui-svg path {\n    fill: inherit;\n}",
        "name": "SVG - Hardware test",
        "x": 820,
        "y": 300,
        "wires": [
            [
                "c705f86ede16ae3a",
                "abf33683b839ac02"
            ]
        ]
    },
    {
        "id": "ee76e0bc4b84fafe",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "SVG-Background change",
        "func": "// Convert the (base64 encoded) image as a data URL\nvar imageAsBuffer = Buffer.from(msg.payload);\nvar imageAsBase64 = imageAsBuffer.toString('base64');\nvar imageAsDataUrl = \"data:image/jpg;base64,\" + imageAsBase64;\n\n// Update the data URL of the image element in the SVG\nmsg = {\n    payload: {\n        \"command\": \"set_attribute\",\n        \"selector\": \"#HWTestbakgrunn\",\n        \"attributeName\": \"xlink:href\",\n        \"attributeValue\": imageAsDataUrl\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 360,
        "wires": [
            [
                "b67a13e16fb2969f"
            ]
        ]
    },
    {
        "id": "fc5564f1d9e3f5d5",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "SVG-Data innsett",
        "func": "let myP1ARaw = global.get(\"MB01P1ARaw\");\nlet myP2ARaw = global.get(\"MB01P2ARaw\");\nlet myP3ARaw = global.get(\"MB01P3ARaw\");\nlet myRL5ARaw = global.get(\"MB01RL5ARaw\");\n\nlet Pulser = global.get(\"MB01TimerInput\");\nlet f = global.get(\"MB01AvgPulsFrekvens\");\n//let Q = 0.0894 * f + 4.3105; // [l/min]\nlet Q = 0.1058 * f + 1.7264; // [l/min]\nlet t = (f > 0 ? Pulser / f : 0);\nlet V = Math.round(100 * (t / 60) * Q) / 100;\nglobal.set(\"DeltaV\",V);\n\nlet flowInfo = V + \"l/\" + f + \"/\" + Pulser;\n\n\n// P1 A\nmyP1ARaw /= 4096;\nmyP1ARaw *= 3.376;\nlet myV = 2.448 - myP1ARaw;\nlet myP1A = myV * 15.02;\n\n// P2 A\nmyP2ARaw /= 4096;\nmyP2ARaw *= 3.376;\nmyV = 2.448 - myP2ARaw;\nlet myP2A = myV * 15.02;\n\n// P3 A\nmyP3ARaw /= 4096;\nmyP3ARaw *= 3.376;\nmyV = 2.448 - myP3ARaw;\nlet myP3A = myV * 15.02;\n\n// RL5 A\nmyRL5ARaw /= 4096;\nmyRL5ARaw *= 3.376;\nmyV = 2.5 - myRL5ARaw;\nlet myRL5A = myV * 15.02;\n\n// Cleanup\nmyP1A = (myP1A < 0 ? 0 : myP1A);\nmyP2A = (myP2A < 0 ? 0 : myP2A);\nmyP1A = (myP3A < 0 ? 0 : myP3A);\nmyRL5A = (myRL5A < 0 ? 0 : myRL5A);\n\n/*\nglobal.set(\"fuseBlown1\", fuseBlown1);\nglobal.set(\"fuseBlown2\", fuseBlown2);\nglobal.set(\"fuseBlown3\", fuseBlown3);\n\n*/\n\nreturn {\n    payload:\n        [\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#sensor1\",\n                \"textContent\": global.get(\"MB01Additiv\") + \"l/\" + global.get(\"MB01Septiklevel\")\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#sensor2\",\n                \"textContent\": global.get(\"MB01RensetSortvann\") + \"l/\" + global.get(\"MB01RensetSortvannslevel\")\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#sensor3\",\n                \"textContent\": global.get(\"MB01Bruksvannlevel\")\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#sensor4\",\n                \"textContent\": flowInfo\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#TempP1\",\n                \"textContent\": global.get(\"MB01P1Temp\")\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#TempP2\",\n                \"textContent\": global.get(\"MB01P2Temp\")\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#TempP3\",\n                \"textContent\": global.get(\"MB01P3Temp\")\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#currentP1\",\n                \"textContent\": Math.round(myP1A) + \"A\"\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#currentP2\",\n                \"textContent\": Math.round(myP2A) + \"A\"\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#currentP3\",\n                \"textContent\": Math.round(myP3A) + \"A\"\n            },\n            {\n                \"command\": \"update_text\",\n                \"selector\": \"#currentRL5\",\n                \"textContent\": Math.round(myRL5A) + \"A\"\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#RL1On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"RL1On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#RL2On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"RL2On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#RL3On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"RL3On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#RL4On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"RL4On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#RL5On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"RL5On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#P1On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"P1On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#P2On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"P2On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#P3On\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"P3On\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI1\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"septikkL\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI2\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"septikkH\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI3\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"septikkHH\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI4\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"filterH\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI5\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"filterHH\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI6\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"filter2H\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI7\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"filter2HH\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#DI8\",\n                \"attributeName\": \"fill\",\n                \"attributeValue\": (global.get(\"sumpH\") ? \"lightgreen\" : \"lightgray\")\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#fuseP1\",\n                \"attributeName\": \"opacity\",\n                \"attributeValue\": (global.get(\"fuseBlown1\") ? 0.4 : 1)\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#fuseP2\",\n                \"attributeName\": \"opacity\",\n                \"attributeValue\": (global.get(\"fuseBlown2\") ? 0.4 : 1)\n            },\n            {\n                \"command\": \"update_style\",\n                \"selector\": \"#fuseP3\",\n                \"attributeName\": \"opacity\",\n                \"attributeValue\": (global.get(\"fuseBlown3\") ? 0.4 : 1)\n            }\n        ]\n};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 300,
        "wires": [
            [
                "abf33683b839ac02"
            ]
        ]
    },
    {
        "id": "87e665b5fc8399f0",
        "type": "file in",
        "z": "b1739a3211a017c8",
        "name": "BakgrunnHW.jpg",
        "filename": "BakgrunnHW.jpg",
        "filenameType": "str",
        "format": "stream",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 330,
        "y": 360,
        "wires": [
            [
                "ee76e0bc4b84fafe"
            ]
        ]
    },
    {
        "id": "abf33683b839ac02",
        "type": "rbe",
        "z": "b1739a3211a017c8",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 630,
        "y": 300,
        "wires": [
            [
                "b67a13e16fb2969f"
            ]
        ]
    },
    {
        "id": "c705f86ede16ae3a",
        "type": "switch",
        "z": "b1739a3211a017c8",
        "name": "",
        "property": "payload.function",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "P1OnToggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "P2OnToggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "P3OnToggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RL1OnToggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RL2OnToggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RL3OnToggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RL4OnToggle",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "RL5OnToggle",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 1010,
        "y": 360,
        "wires": [
            [
                "98e1c11b28ebcce4"
            ],
            [
                "1525322fb789e709"
            ],
            [
                "df5e98c11bf361f8"
            ],
            [
                "ed563357e3e9829f"
            ],
            [
                "f615a17346a450be"
            ],
            [
                "6c17e03840e05417"
            ],
            [
                "328e52cb32ad521b"
            ],
            [
                "dbbcfdd242ede0c1"
            ]
        ]
    },
    {
        "id": "ed563357e3e9829f",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle RL1On",
        "func": "(global.get(\"RL1On\") === 1 ? global.set(\"RL1On\", 0) : global.set(\"RL1On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 360,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "f615a17346a450be",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle RL2On",
        "func": "(global.get(\"RL2On\") === 1 ? global.set(\"RL2On\", 0) : global.set(\"RL2On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 400,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "6c17e03840e05417",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle RL3On",
        "func": "(global.get(\"RL3On\") === 1 ? global.set(\"RL3On\", 0) : global.set(\"RL3On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 440,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "328e52cb32ad521b",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle RL4On",
        "func": "(global.get(\"RL4On\") === 1 ? global.set(\"RL4On\", 0) : global.set(\"RL4On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 480,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "dbbcfdd242ede0c1",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle RL5On",
        "func": "(global.get(\"RL5On\") === 1 ? global.set(\"RL5On\", 0) : global.set(\"RL5On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 520,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "98e1c11b28ebcce4",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle P1On",
        "func": "(global.get(\"P1On\") === 1 ? global.set(\"P1On\", 0) : global.set(\"P1On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 240,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "1525322fb789e709",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle P2On",
        "func": "(global.get(\"P2On\") === 1 ? global.set(\"P2On\", 0) : global.set(\"P2On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 280,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "df5e98c11bf361f8",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Toggle P3On",
        "func": "(global.get(\"P3On\") === 1 ? global.set(\"P3On\", 0) : global.set(\"P3On\",1));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 320,
        "wires": [
            [
                "3d7113abb12f1f48"
            ]
        ]
    },
    {
        "id": "2c93d249b38bcab9",
        "type": "comment",
        "z": "b1739a3211a017c8",
        "name": "SVG Flow HW",
        "info": "",
        "x": 130,
        "y": 240,
        "wires": []
    },
    {
        "id": "3d7113abb12f1f48",
        "type": "link out",
        "z": "b1739a3211a017c8",
        "name": "Update Pumper og Releer",
        "mode": "link",
        "links": [
            "0fcd611ccaa43e46"
        ],
        "x": 1455,
        "y": 360,
        "wires": []
    },
    {
        "id": "b4d60d03f9afb846",
        "type": "function",
        "z": "b1739a3211a017c8",
        "name": "Update URL-Data",
        "func": "let Additiv = global.get(\"MB01Additiv\");\nlet myManuellKjoringState = global.get(\"myManuellKjoringState\");\n\n//msg.url = \"http://ecowater001/?vann=23550&additiv=18\";\nmsg.url = \"http://localhost/?vann=\" + global.get(\"myBehandletVann\") + \"&additiv=\" + Additiv;\n\n// Med at systemmet står i SERVICE MODUS\nif (myManuellKjoringState) {\n    msg.payload = \"-=>SERVICE MODUS<=-\"\n} else {\n    msg.payload = global.get(\"myDriftsmodus\");\n}\n\nif (Additiv <= global.get(\"myAdditivtankL\")) {\n    msg.payload = msg.payload + \", LAVT ADDITIV NIVÅ!\"\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 140,
        "wires": [
            [
                "601b9d1e0f0ef2d3",
                "84bc7c055c02e168"
            ]
        ]
    },
    {
        "id": "601b9d1e0f0ef2d3",
        "type": "rbe",
        "z": "b1739a3211a017c8",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "url",
        "topi": "topic",
        "x": 630,
        "y": 140,
        "wires": [
            [
                "56bbbd42148f648a"
            ]
        ]
    },
    {
        "id": "56bbbd42148f648a",
        "type": "ui_iframe",
        "z": "b1739a3211a017c8",
        "group": "8fb401a08da32934",
        "name": "ScreenSaver",
        "order": 1,
        "width": 22,
        "height": "12",
        "url": "",
        "origin": "*",
        "scale": "125",
        "x": 790,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "239468f68fa3e4b7",
        "type": "ui_text",
        "z": "b1739a3211a017c8",
        "group": "8fb401a08da32934",
        "order": 1,
        "width": "18",
        "height": "1",
        "name": "",
        "label": "Status: ",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 780,
        "y": 200,
        "wires": []
    },
    {
        "id": "84bc7c055c02e168",
        "type": "rbe",
        "z": "b1739a3211a017c8",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "payload",
        "topi": "topic",
        "x": 630,
        "y": 200,
        "wires": [
            [
                "239468f68fa3e4b7"
            ]
        ]
    },
    {
        "id": "9d2cd34151d9a265",
        "type": "mqtt out",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f2615cba8578655a",
        "x": 710,
        "y": 300,
        "wires": []
    },
    {
        "id": "bdf10b8e21cfdee3",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater posisjon",
        "func": "var myTopic = \"EWdata/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myGeometric = {};\nvar myLat = global.get(\"myLat\");\nvar myLon = global.get(\"myLon\");\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyGeometric[\"type\"] = \"Point\"; // myGeo.geometry.type;\nmyGeometric[\"coordinates\"] = [myLon, myLat];  // myGeo.geometry.coordinate;\n\nmyPayload[\"geometry\"] = myGeometric;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 140,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "7852d349bce530f1",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send oppstartsmelding med tid og posisjon",
        "info": "",
        "x": 220,
        "y": 80,
        "wires": []
    },
    {
        "id": "3bcdd38ce2c510ef",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater posisjon",
        "links": [
            "66075e03ab09b9bf",
            "dc8e2bd53450658d",
            "f0da8ba54ddf95de"
        ],
        "x": 185,
        "y": 140,
        "wires": [
            [
                "bdf10b8e21cfdee3"
            ]
        ]
    },
    {
        "id": "096736127f61bc2e",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater konfigurasjon",
        "func": "var myTopic = \"EWdata/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myConfig = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyConfig[\"hostname\"] = global.get(\"hostname\");\nmyConfig[\"Systemtype\"] = global.get(\"mySystemtype\");\nmyConfig[\"BuzzerDisabled\"] = global.get(\"BuzzerDisabled\");\nmyConfig[\"Doseringsrate\"] = global.get(\"myDoseringsrate\");\nmyConfig[\"Doseringspumperate\"] = global.get(\"myDoseringspumperate\");\nmyConfig[\"VanntankL\"] = global.get(\"myVanntankL\");\nmyConfig[\"VanntankLL\"] = global.get(\"myVanntankLL\");\nmyConfig[\"BlandingsmengdeVanntank\"] = global.get(\"myBlandingsmengdeVanntank\");\nmyConfig[\"AdditivtankL\"] = global.get(\"myAdditivtankL\");\n\nmyPayload[\"config\"] = myConfig;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 300,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "b370efcdefd7ecd6",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send konfigurasjonsendringer",
        "info": "",
        "x": 180,
        "y": 240,
        "wires": []
    },
    {
        "id": "19e1100a281a1a59",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater konfigurasjon",
        "links": [
            "1bb45da5f98ef2a2",
            "ec97a38cfde26961",
            "cd643db2d4e2dd54"
        ],
        "x": 185,
        "y": 300,
        "wires": [
            [
                "096736127f61bc2e"
            ]
        ]
    },
    {
        "id": "2ea22bfed3861ec2",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send prosessdata",
        "info": "",
        "x": 150,
        "y": 400,
        "wires": []
    },
    {
        "id": "f4748bd882951979",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater prosessdata",
        "func": "var myTopic = \"EWdata/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myStatus = (global.get(\"myManuellKjoringState\")?\"M\":\"A\") + global.get(\"mySystemStatusIndikator\");  // Status[0] = <A,O,M> (Auto, Off, Manuell), Status[1] = <-,G,g,Y,y,R,r> (Off,Grønn,grønnblink,Gul,gulblink,Rød, rødblink)  \nvar myData = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\nmyPayload[\"status\"] = myStatus;\n\nmyData[\"P1Fuse\"] = global.get(\"myP1Fuse\");\nmyData[\"MB01P1Temp\"] = global.get(\"MB01P1Temp\");\nmyData[\"MB01P1ARaw\"] = global.get(\"MB01P1ARaw\");\nmyData[\"P2Fuse\"] = global.get(\"myP2Fuse\");\nmyData[\"MB01P2Temp\"] = global.get(\"MB01P2Temp\");\nmyData[\"MB01P2ARaw\"] = global.get(\"MB01P2ARaw\");\nmyData[\"P3Fuse\"] = global.get(\"myP3Fuse\");\nmyData[\"MB01P3Temp\"] = global.get(\"MB01P3Temp\");\nmyData[\"MB01P3ARaw\"] = global.get(\"MB01P3ARaw\");\nmyData[\"MB01DigitalIn\"] = global.get(\"MB01DigitalIn\");\nmyData[\"BehandletVann\"] = global.get(\"myBehandletVann\");\nmyData[\"MB01Additiv\"] = global.get(\"MB01Additiv\");\n\nmyPayload[\"data\"] = myData;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 460,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "bb177e98cd2da314",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater Prosessdata",
        "links": [
            "a6ae04c8e40eb804",
            "867f354c7f729c72"
        ],
        "x": 185,
        "y": 460,
        "wires": [
            [
                "f4748bd882951979"
            ]
        ]
    },
    {
        "id": "e7d5308ff8080842",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Prosess inndata",
        "info": "",
        "x": 140,
        "y": 560,
        "wires": []
    },
    {
        "id": "5ff552d33d303762",
        "type": "mqtt in",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "f2615cba8578655a",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 350,
        "y": 680,
        "wires": [
            [
                "df70cc9af0041d36"
            ]
        ]
    },
    {
        "id": "746b0006df813a46",
        "type": "inject",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 620,
        "wires": [
            [
                "0f9268e9eb004f16"
            ]
        ]
    },
    {
        "id": "0f9268e9eb004f16",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Set topic med HWAddr",
        "func": "let myTopic = \"EW_cmd/\" + global.get(\"HWaddr\");\n\nreturn {\"action\": \"subscribe\", \"topic\": myTopic};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 680,
        "wires": [
            [
                "5ff552d33d303762"
            ]
        ]
    },
    {
        "id": "df70cc9af0041d36",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Tolke innkommende data",
        "func": "let getStatus = null;\nlet getConfig = null;\nlet getPos = null;\nlet setManuellKjoringState = null; \nlet setLat = null;\nlet setLon = null;\nlet setSSID = null;\nlet setWifiPassword = null;\n\n\n// Command (cmd)\nif ((msg.payload.cmd === \"Status\") || (msg.payload.cmd === \"status\") || (msg.payload.cmd === \"STATUS\")) {\n    getStatus = true;\n} else if ((msg.payload.cmd === \"Konfig\") || (msg.payload.cmd === \"konfig\") || (msg.payload.cmd === \"KONFIG\")\n    || (msg.payload.cmd === \"Config\") || (msg.payload.cmd === \"config\") || (msg.payload.cmd === \"CONFIG\")) {\n    getConfig = true;\n} else if ((msg.payload.cmd === \"Pos\") || (msg.payload.cmd === \"pos\") || (msg.payload.cmd === \"POS\")\n    || (msg.payload.cmd === \"gps\") || (msg.payload.cmd === \"GPS\")) {\n    getPos = true;\n}\n\n// ManuellKjoringState\nif ((msg.payload.ManuellKjoringState === true) || (msg.payload.ManuellKjoringState === 1)) {\n    setManuellKjoringState = true;\n} else if ((msg.payload.ManuellKjoringState === false) || (msg.payload.ManuellKjoringState === 0)) {\n    setManuellKjoringState = false;\n}\n\n// Lat\nif (msg.payload.Lat !== undefined) {\n    setLat = msg.payload.Lat;\n}\n\n// Lon\nif (msg.payload.Lon !== undefined) {\n    setLon = msg.payload.Lon;\n}\n\n// SSID\nif (msg.payload.SSID !== undefined) {\n    setSSID = msg.payload.SSID;\n}\n\n// WifiPassword\nif (msg.payload.WifiPassword !== undefined) {\n    setWifiPassword = msg.payload.WifiPassword;\n}\n\n// P1\nif ((msg.payload.P1 === true) || (msg.payload.P1 === 1)) {\n    global.set(\"P1On\",1);\n} else if ((msg.payload.P1 === false) || (msg.payload.P1 === 0)) {\n    global.set(\"P1On\", 0);\n}\n\n// P2\nif ((msg.payload.P2 === true) || (msg.payload.P2 === 1)) {\n    global.set(\"P2On\", 1);\n} else if ((msg.payload.P2 === false) || (msg.payload.P2 === 0)) {\n    global.set(\"P2On\", 0);\n}\n\n// P3\nif ((msg.payload.P3 === true) || (msg.payload.P3 === 1)) {\n    global.set(\"P3On\", 1);\n} else if ((msg.payload.P3 === false) || (msg.payload.P3 === 0)) {\n    global.set(\"P3On\", 0);\n}\n\n// RL1\nif ((msg.payload.RL1 === true) || (msg.payload.RL1 === 1)) {\n    global.set(\"RL1On\", 1);\n} else if ((msg.payload.RL1 === false) || (msg.payload.RL1 === 0)) {\n    global.set(\"RL1On\", 0);\n}\n\n// RL2\nif ((msg.payload.RL2 === true) || (msg.payload.RL2 === 1)) {\n    global.set(\"RL2On\", 1);\n} else if ((msg.payload.RL2 === false) || (msg.payload.RL2 === 0)) {\n    global.set(\"RL2On\", 0);\n}\n\n// RL3\nif ((msg.payload.RL3 === true) || (msg.payload.RL3 === 1)) {\n    global.set(\"RL3On\", 1);\n} else if ((msg.payload.RL3 === false) || (msg.payload.RL3 === 0)) {\n    global.set(\"RL3On\", 0);\n}\n\n// RL4\nif ((msg.payload.RL4 === true) || (msg.payload.RL4 === 1)) {\n    global.set(\"RL4On\", 1);\n} else if ((msg.payload.RL4 === false) || (msg.payload.RL4 === 0)) {\n    global.set(\"RL4On\", 0);\n}\n\n// RL5\nif ((msg.payload.RL5 === true) || (msg.payload.RL4 === 1)) {\n    global.set(\"RL5On\", 1);\n} else if ((msg.payload.RL5 === false) || (msg.payload.RL5 === 0)) {\n    global.set(\"RL5On\", 0);\n}\n\n\n\nreturn [\n    { payload: getStatus },\n    { payload: getConfig },\n    { payload: getPos },\n    { payload: setManuellKjoringState },\n    { payload: setLat },\n    { payload: setLon },\n    { payload: setSSID },\n    { payload: setWifiPassword }\n];",
        "outputs": 8,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 1020,
        "wires": [
            [
                "759cd29b3e825093"
            ],
            [
                "dec5ae09f4f715be"
            ],
            [
                "2054e2989f4561d8"
            ],
            [
                "517fe687ab2af65d"
            ],
            [
                "28c0d9274d4fbd18"
            ],
            [
                "130354b9a59ee94e"
            ],
            [
                "76251ae28fcb562e"
            ],
            [
                "bdf4358a52864a4e"
            ]
        ]
    },
    {
        "id": "759cd29b3e825093",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner prosessdata",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 740,
        "wires": [
            [
                "867f354c7f729c72"
            ]
        ]
    },
    {
        "id": "dec5ae09f4f715be",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner konfigurasjonsdata",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 760,
        "y": 780,
        "wires": [
            [
                "ec97a38cfde26961"
            ]
        ]
    },
    {
        "id": "867f354c7f729c72",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "bb177e98cd2da314"
        ],
        "x": 935,
        "y": 740,
        "wires": []
    },
    {
        "id": "ec97a38cfde26961",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "19e1100a281a1a59"
        ],
        "x": 935,
        "y": 780,
        "wires": []
    },
    {
        "id": "2054e2989f4561d8",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner posisjon",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 820,
        "wires": [
            [
                "f0da8ba54ddf95de"
            ]
        ]
    },
    {
        "id": "f0da8ba54ddf95de",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "3bcdd38ce2c510ef"
        ],
        "x": 935,
        "y": 820,
        "wires": []
    },
    {
        "id": "517fe687ab2af65d",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set ManuellKjoringState",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 900,
        "wires": [
            [
                "831d01bfc3dde3a0"
            ]
        ]
    },
    {
        "id": "831d01bfc3dde3a0",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": false,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 1090,
        "y": 900,
        "wires": []
    },
    {
        "id": "28c0d9274d4fbd18",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lat",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 980,
        "wires": [
            [
                "7ec59ce7537fe97d"
            ]
        ]
    },
    {
        "id": "7ec59ce7537fe97d",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 1030,
        "y": 980,
        "wires": []
    },
    {
        "id": "130354b9a59ee94e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lon",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1040,
        "wires": [
            [
                "407d6e7c6cdf834a"
            ]
        ]
    },
    {
        "id": "407d6e7c6cdf834a",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 1030,
        "y": 1040,
        "wires": []
    },
    {
        "id": "76251ae28fcb562e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set SSID",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1120,
        "wires": [
            [
                "bd09041f1951af61"
            ]
        ]
    },
    {
        "id": "bdf4358a52864a4e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set WifiPassword",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1160,
        "wires": [
            [
                "0fa5e2f74c05ad92"
            ]
        ]
    },
    {
        "id": "bd09041f1951af61",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out SSID",
        "mode": "link",
        "links": [
            "43a334e28706087c"
        ],
        "x": 995,
        "y": 1120,
        "wires": []
    },
    {
        "id": "0fa5e2f74c05ad92",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out WifiPassword",
        "mode": "link",
        "links": [
            "13a7ca5bd49cdb11"
        ],
        "x": 995,
        "y": 1160,
        "wires": []
    },
    {
        "id": "1936b658.43326a",
        "type": "ui_button",
        "z": "197f0510870cb1e6",
        "name": "",
        "group": "160ddf0a.756f41",
        "order": 0,
        "width": 0,
        "height": 0,
        "passthru": true,
        "label": "Adgangskontroll",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "lock",
        "payload": "true",
        "payloadType": "bool",
        "topic": "show",
        "topicType": "str",
        "x": 140,
        "y": 200,
        "wires": [
            [
                "67060ec.9d7f1f"
            ]
        ]
    },
    {
        "id": "67060ec.9d7f1f",
        "type": "ui_template",
        "z": "197f0510870cb1e6",
        "group": "4f3d9279.22b82c",
        "name": "PIN",
        "order": 0,
        "width": "0",
        "height": "0",
        "format": "<div ng-init=\"init()\" id=\"pin_insert\" class=\"dialog\">\n    \n    <div class=\"dialog_content\">\n        \n        <div class=\"dialog_header\">\n            <span ng-click=\"closeDialog()\" class=\"close\">&times;</span>\n            <h2 style=\"margin:10px\">PIN:</h2>\n        </div>\n        \n        <div class=\"dialog_body\">\n\n           <div layout=\"row\" layout-align=\"center\">\n                <div class=\"number_placeholder\">\n                    {{passcode2.substring(0, 1)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode2.substring(1, 2)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode2.substring(2, 3)}}\n                </div>\n                <div class=\"number_placeholder\">\n                    {{passcode2.substring(3, 4)}}\n                </div>\n            </div>\n            \n            <div layout=\"column\" layout-align=\"center\" style=\"margin-top: 10px\">\n                <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(1)\">1</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(2)\">2</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(3)\">3</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(4)\">4</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(5)\">5</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(6)\">6</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(7)\">7</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(8)\">8</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(9)\">9</md-button>\n                    </div>\n                </div>\n                 <div layout=\"row\" layout-align=\"center\">\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"confirm()\">\n                            <ng-md-icon icon=\"done\" style=\"color:#fff;\"></ng-md-icon>\n                        </md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"add(0)\">0</md-button>\n                    </div>\n                    <div class=\"number_box\">\n                        <md-button class=\"pin\" ng-click=\"delete()\">\n                            <ng-md-icon icon=\"arrow_back\" style=\"color:#fff;\"></ng-md-icon>\n                        </md-button>\n                    </div>\n                </div>\n            </div> \n          \n        </div> <!--dialog_body-->\n    </div> <!--dialog_content-->\n</div>  <!--dialog-->\n\n\n<style>\n\n/* The Dialog (background) */\n.dialog {\n    display: none; /* Hidden by default */\n    position: fixed; /* Stay in place */\n    z-index: 9999; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    overflow: auto; /* Enable scroll if needed */\n    background-color: rgb(0,0,0); /* Fallback color */\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    -webkit-transform: translateZ(0px);\n    -webkit-transform: translate3d(0,0,0);\n    -webkit-perspective: 1000;\n}\n\n.dialog_content {\n    position: absolute;\n    background-color: #fff;\n    left: calc(50% - 170px);\n    top: 30px;\n    border-radius: 10px;\n    padding: 0;\n    width: 340px;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\n    -webkit-animation-name: animatetop;\n    animation-name: animatetop;\n    animation-duration: 0.4s;\n}\n\n/* Media query for smartphones (to Fix?) */\n@media only screen and (min-device-width : 375px) and (max-device-width : 667px) { \n    .dialog_content {\n    margin-top: 5%;\n    margin-left: 5%;\n}\n}\n\n/* Add Animation */\n@-webkit-keyframes animatetop {\n    from {top: -300px; opacity: 0} \n    to {top: 0; opacity: 1}\n}\n\n@keyframes animatetop {\n    from {top: -300px; opacity: 0}\n    to {top: 0; opacity: 1}\n}\n\n/* Dialog Header */\n.dialog_header {\n    padding: 2px 16px;\n    background-color: #097479;\n    border-radius: 10px 10px 0 0;\n    color: white;\n}\n\n/* Dialog Body */\n.dialog_body {padding: 5px;}\n\n/* The Close Button */\n.close {\n    color: #fff;\n    float: right;\n    font-size: 28px;\n    font-weight: bold;\n    cursor: pointer;\n}\n\n.close:hover,\n.close:focus {\n    color: #157479;\n    text-decoration: none;\n    cursor: pointer;\n}\n\n/* __ */\n.number_placeholder{\n    width: 50px;\n    height: 34px;\n    margin: 10px;\n    font-size: 20pt;\n    text-align: center;\n    border-bottom: 1px solid black;\n}\n\n/* Number container */\n.number_box{\n    margin: 5px;\n}\n\n/* Buttons style */\n.pin {\n    min-height: 50px;\n    min-width: 50px;\n    font-weight: bold;\n    margin: 0px 10px 10px 0px;\n    box-shadow: 4px 4px 6px 0 #dadada;\n    background-color: #097479;\n    color: #fff;\n}\n\n.pin:not([disabled]):hover {\n    background-color: #299499;\n}\n\n.btn1 {\n  color : rgb(49, 46, 46);\n  background-color: rgba(255, 222, 121, 0.96);\n  border-radius: 10px 0 0 10px;\n  font-size: 16px;\n}\n\n.btn1:not([disabled]):hover {\n  background-color: rgba(107, 103, 91, 0.96);\n  color: white;\n}\n\n.btn1[disabled] {\n  color : rgb(187, 187, 187);\n  background-color: rgba(230, 230, 229, 0.96);\n}\n\n</style>\n\n<script>\n\n/**\n * pin_dialog.js\n * Node-Red UI template for Node-Red Dashboard. \n * Custom dialog that asks for a PIN to allow actions\n * Enjoy it :). \n * -- Daniel\n *\n *\n * @license The Unlicense, http://unlicense.org/\n * @version 0.2\n * @author  Daniel Lando, https://github.com/robertsLando\n * @updated 2019-03-18\n * @link    ----\n *\n *\n */\n\nvar dialog;\n\n/* ==== */\n(function(scope) {\n    \n    scope.passcode = \"\";\n    scope.passcode2 = \"\";\n    scope.payload = \"\";\n    scope.inited = false;\n    \n    scope.init = function() {\n        scope.passcode = \"\";\n        scope.passcode2 = \"\";\n        //Hide the md-panel\n        $('#pin_insert').parent().parent().css(\"display\", \"none\");\n        //This trick make it works on smartphones too :)\n        dialog = $('#pin_insert').detach();\n        //remove any previously added pin dialog\n        $('.dialog').remove();\n    }\n    \n    scope.showDialog = function() {\n        dialog.appendTo(document.body);\n        dialog.css(\"display\", \"block\");\n    }\n    \n    scope.closeDialog = function(){\n        dialog.css(\"display\", \"none\");\n    }\n    \n    scope.add = function(value) {\n        if(scope.passcode.length < 4) {\n            scope.passcode = scope.passcode + value;\n            scope.passcode2 = scope.passcode2 + \"*\";\n            if(scope.passcode.length == 4) {\n                console.log(\"The four digit code was entered\");\n                   \n            }\n        }\n    }\n \n    scope.delete = function() {\n        if(scope.passcode.length > 0) {\n            scope.passcode = scope.passcode.substring(0, scope.passcode.length - 1);\n            scope.passcode2 = scope.passcode2.substring(0, scope.passcode2.length - 1);\n        }\n    }\n    \n    scope.confirm = function() {\n        if(scope.passcode.length == 4) {\n            scope.send({passcode: scope.passcode, payload : scope.payload});\n            scope.closeDialog();\n            scope.passcode = \"\";\n            scope.passcode2 = \"\";\n            scope.payload = \"\";\n        }\n    }\n\n    scope.$watch('msg', function(data) {\n        if(data && data.topic){\n            switch(data.topic){\n               case \"show\":\n                   if(scope.inited){\n                        scope.payload = data.payload;\n                        scope.showDialog();\n                   }\n                   else\n                        scope.inited = true;\n                break;\n                case \"close\": \n                    scope.closeDialog(); \n                break;\n            }\n        }\n    });\n})(scope);\n\n</script>\n",
        "storeOutMessages": false,
        "fwdInMessages": false,
        "resendOnRefresh": false,
        "templateScope": "local",
        "className": "",
        "x": 310,
        "y": 200,
        "wires": [
            [
                "797ddf5e.2b5ab"
            ]
        ]
    },
    {
        "id": "797ddf5e.2b5ab",
        "type": "function",
        "z": "197f0510870cb1e6",
        "name": "PIN-sjekk",
        "func": "var pins = [\"5315\"];\nvar verified = false;\n\nfor(var i=0;i<pins.length;i++){\n    if(msg.passcode == pins[i]){\n        verified = true;\n        break;\n    }\n}\n\nmsg.verified = verified;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 200,
        "wires": [
            [
                "41443642.dd9aa8"
            ]
        ]
    },
    {
        "id": "41443642.dd9aa8",
        "type": "switch",
        "z": "197f0510870cb1e6",
        "name": "OK?",
        "property": "verified",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "true"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 200,
        "wires": [
            [
                "29df5bb2a98d3bd1"
            ],
            [
                "470caf0351ee102e"
            ]
        ]
    },
    {
        "id": "bdf19ea537ccda1f",
        "type": "ui_ui_control",
        "z": "197f0510870cb1e6",
        "name": "",
        "events": "change",
        "x": 120,
        "y": 140,
        "wires": [
            [
                "9c921e4c8c58e7dd"
            ]
        ]
    },
    {
        "id": "a89b99bc6fa5eb48",
        "type": "switch",
        "z": "197f0510870cb1e6",
        "name": "",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ECOWATER",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Adgangskontroll",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 610,
        "y": 140,
        "wires": [
            [
                "29df5bb2a98d3bd1"
            ],
            []
        ]
    },
    {
        "id": "acecca58136c3193",
        "type": "comment",
        "z": "197f0510870cb1e6",
        "name": "Adgangskontroll",
        "info": "",
        "x": 140,
        "y": 80,
        "wires": []
    },
    {
        "id": "470caf0351ee102e",
        "type": "change",
        "z": "197f0510870cb1e6",
        "name": "Vis settings",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tabs\":{\"show\":[\"Oppsett\",\"HW Test\"],\"hide\":[\"Adgangskontroll\"]},\"tab\":\"Oppsett\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 830,
        "y": 240,
        "wires": [
            [
                "aa78d461f6632adb"
            ]
        ]
    },
    {
        "id": "29df5bb2a98d3bd1",
        "type": "change",
        "z": "197f0510870cb1e6",
        "name": "Skjul settings",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"tabs\":{\"hide\":[\"Oppsett\",\"HW Test\"],\"show\":[\"Adgangskontroll\"]},\"tab\":\"ECOWATER\"}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 830,
        "y": 200,
        "wires": [
            [
                "aa78d461f6632adb"
            ]
        ]
    },
    {
        "id": "aa78d461f6632adb",
        "type": "ui_ui_control",
        "z": "197f0510870cb1e6",
        "name": "",
        "events": "change",
        "x": 1000,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "9c921e4c8c58e7dd",
        "type": "rbe",
        "z": "197f0510870cb1e6",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "septopics": true,
        "property": "tab",
        "topi": "topic",
        "x": 470,
        "y": 140,
        "wires": [
            [
                "a89b99bc6fa5eb48"
            ]
        ]
    }
]