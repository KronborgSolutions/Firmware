[{"id":"483a6f631e7f69a7","type":"tab","label":"Oppsett","disabled":false,"info":"","env":[]},{"id":"abfb29b7fe98de5f","type":"tab","label":"Hjem","disabled":false,"info":"","env":[]},{"id":"56a22929a6befff3","type":"tab","label":"Panel","disabled":false,"info":"","env":[]},{"id":"38519fcf62fceae2","type":"tab","label":"MQTT","disabled":false,"info":"","env":[]},{"id":"ec28d8db3689b1f5","type":"tab","label":"MODBUS","disabled":false,"info":"","env":[]},{"id":"79e8e825dbfbe749","type":"tab","label":"Panlegger","disabled":false,"info":"","env":[]},{"id":"b2590d1d879b30f0","type":"group","z":"abfb29b7fe98de5f","name":"System","style":{"stroke":"#92d04f","label":true,"color":"#000000"},"nodes":["18676fc92dec75b3","778b6afb06e3d8b8","fa1460efeca4a892","4730bde001160d21","7c800b43bcc1367d","ef57d13459406072","318a9b3cb2760c34","1f38fb7ad94d5774","438e47f2cab73553","782e1f60e60d73e6","40970db1d04002d7","a087e9abb1098415","1d1c05193a7bd2cc","dfdabc7132da9634","bfbdca53ae2a50da","1f8a82c1c83d8d4b","42e339b84a696b47","8bbb699ccca61343","2a376b1eb9b49d76","90dffa8443fcdae9","96d452d4031bede7","508e9b3ed6e18b7d","34c68dee52198693","4f276b60d6fcf57d","d251178b3bb1d305","a8555faf709767e5","d402b30dd3246378","6980d683220aeec6","7e255baabc20967b","7a1b96c51d2c3503","9206e2182f2c1ae9","cd22ce2233734f46","a89fb3154f922761","c82a3bd95487c916","45ed53406547bbec","d2944ce2935e80a2","f7cfe9820952f851","0963c6cf33312ba6","094a2f15142b1939","4ce786e495e98b64","e5695479e114b53f","dd4283b2a4aadb50","22b90d75e4c42a3a","3fd196f03881ef02","b3fc5fb4f1348ec5","118422cb32dcbdae","1b6ae0af71143060","c9f3fd99e28b794a","5d5d9b6841ecee28","0bcc47a9e661021e","96f3bd76c1244db3","5a362992ea8a3eb3","4bc7cdc853aec945","7a9505bb7a7327e5","585d663bdfaca460","6e9d0a69642e98b2","d21702da7db612b7","f8bef1fde9688288","114f9d442d7099db","361f625e107ad8b1","b215f93c679bba12","2af26b7c25ef445d","6b08cff41e317d5e","c7acdc1e62c55259","a42e3850811c7534","974d5c3c66ce7aae","7f9235d1cda708ed","1ab2c2ab2eafd076","4b906f5de6520ca5","e5383ecd4d503251","851b3ff8b084d58c","5aa8faa50173b79a","5377d56e592a5792","4137d7f599c2445c","5f1ac4d4ff38773e","13b35d334c2c4ea8","e7f3c994874fb4b4","612bee73e37ec395","bb888bd270ee626d","2929a0bb661e6a11","d2c18952143856aa","64bc1288f32443bd","8f7e178f5ee2fdf5","40298948c9f78390","313a5c23a8223fbe","2d099517c8cd041e","d4b40338a39b16f0","cf3ca3d2395df141","1b47f0c787042a33","6222b49c9a44de4d","3e03d92366c84295","1e8b14e8743bed8e","1eaab67d19f52cd9","6d2e53afe6b33465","8dd114446b7f9b9a","8573f896e2529220","52e7a7115c307b9a","d0d27308ddf29d73","f5ecbe3717d225fe","e5dd4d85199f119d","0fdd7ecb1d358211","30b854341070ec0c","ab6e797f8268c8f5","153d4b996be25815","b24f5b2a56d66de0","c39abfe8ef8a9864","40fccdad9529eb5e","466b67ba65495190","e5ea516ca8eaf91f","6eb4d41ded3679c7","cce142e8b32badfe","3f7df1f3e3097b4e","bb9a31d826e81da1","b9659d7aa0dc0974","c366d4aa87173d5a","d253f18dc3ecba16","1c7d36f25e1f50fc","197aefef27cafaec","4d91d95cec1a80c9","44ff6546fb41f53a","2374e27bc872630c","4ddf7e17e4abd5a7","d67613c807af0236","d1cd08c9da2704e4","5c4ecd35924bb957","5b0455b0262e2b2b","7bc2dde05b0ad241","65c7c45fac7f143a","f73ee60cae72bee0","817d8bfd7062cce3","80dcc40938f7d516","52cad65716da43ae","4689279f4194cf5e","8d44851113f7cd2a","f0cb6585541f6a33","bcc6acbfbbafa9d5","62744e6bd03f61c0","da23764e66cc882a","ce6adf3bedeaf406","b4854091b84a4d86","a794a54047982e1d","3f6b42cd52a2161d","f6b0cbef0b12395d","e75e860cc6c5abe7","f570d2bc0a4fb1dd"],"x":54,"y":59,"w":1272,"h":2662},{"id":"f89014669a905f2e","type":"group","z":"38519fcf62fceae2","name":"","style":{"stroke":"#ffC000","label":true},"nodes":["941e97387d6bf838","ad1f6f9242f22b62","9a1bad8c603cc5f4","9096739f9495f3d7","046a02568bf18ef0","8d828dadf12808fb","b5fec1b6a60c2a7f","ef1d815e8d0197ce","f7ecdac73d72b68e","e16a8ac076e9c512","960b91115ecf9ca9","ae96ad273b218805","ca05588391bf5d1a","68f50cf5dd8c8649","d1d8b48c3480aaf7","9aa1eedc3a3b0a77","058ab1a67d75cbbb","daba8a8939fa1277","9be447f74a5659c4","8c50d6755452ae51","2ce6dec427f1cd19","7526ba3cdc721460","7b45edf016708260","e0d29919df131947","395464eafa7c018a","b82fbe23fb632e05","cdd65025750dc4f8","c75d7d77b0f5f25e","0b857c92470a61a0","2fe46eac7c22eae5","8ca4edc11fb4728d","b4d917b0862ca05d","b8b4950c74be40ab","02f057e13ba0aa0f","e5f1eea9521533bd","b5d9b643d3018dc5","f159c4c478441d87","211e2a685b25cddf","409f01307431e555","5aa5ed662bbbed2c","bb9e550cf9bde718"],"x":34,"y":699,"w":1282,"h":1182},{"id":"2d1d117a9c036920","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["415279b36a1b260b","9446bd4891094586","942d34ae8956f965","0658f9f3b5b365fe","66075e03ab09b9bf","d3a04c2a524f335d","cc41947dcd6a7447","136cbb4d09d53679","f559be213ad80699","18c63098db69cf72","f81448d7f550ebbc","da4cacf8edb1c8a9","4c77654823d5de0a","4595ec88724471a6","26d5a4c3ccdb01a7","43f165b8eba7f10c","4f802ed4ce33568c","027804cdc3789503","2739f21be7eddf68","9268ccab22454e4c"],"x":34,"y":2819,"w":1102,"h":362},{"id":"63d9e95b7e27f8c0","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["9652c9e68944c869","8606686a.ef7008","52753337.7b5a8c","7274cbde085522a1","8672e44b8c93e04e","f378c2eb37bccb2e","e6597813fd0ae3f4","54b06a2d2d3f7da9","89718a34befe08cc","c7f54ee0b2f3a63a","c14bb127b5df1c7b","fefea0960b0e5ccf","e465494834110f2d","1b2a342569d2a26e","42dc6006f9fea2f4","4137c932c634e85c","8a75d5bd744e8a34","f08261ebfc7c4153","e4b41e99e4495c4e","585fb6d440aca651","43a334e28706087c","13a7ca5bd49cdb11","99221ed0b3ff9b78","5d6762f0715ad17d","f55d92b93a2bc9ab","d993607f45ebee6f","e416f00314dba446","2103052d12fe2218","3b9eea01f3cb8a9c","10f66669a4c75868","088dfb1014c70f1f"],"x":34,"y":2199,"w":1392,"h":582},{"id":"ac4ead5e8e82fb90","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["9e4b31212a818980","91f87512e16887b3","2ef322e034f98afc","7ba5e248b170868f","99c9f669af88ec05","f32f136301a0888e","e225bb78d03d91c6","7a09ac512fd3f1b4"],"x":34,"y":1979,"w":872,"h":182},{"id":"a7ae0748491944ae","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["54b12257f4a94b77","fc1097f1322444ad","0f6199f63595e02c","89b54d26a3e7cba6","8b015a56cadba954","7a36369141d9ca06","43735253926b7632","6a3ad87467ada1af","bf153915c27f022e","5b2c9afa7a04d7c4","a82d45d441548f1c","cd027137a9cb7f6d","b09e593e3f0451bc","edc591dc30d01fab","63f772c7d1f6eb4e","e845695292441400","e92924a556371408","2088cab7f0e749da","82755f298050f509","3152a11911f1f43a","dc885fc40db59680","ea1ab23a16b7e844","d386110d80a3025c","b0f92b3a450f88f8","d663db8a765434e1"],"x":34,"y":1239,"w":982,"h":702},{"id":"db562037527b0503","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ead8f956c53ebd34","da8e8ea18dc47c69","1ac3755c818bbb14","d78dcfddd87ec46b","b35b12e3c51bd86a","b4daa565f7d18b63","f0b8619a95c18428","4f19a906966b33c4","2ff74425e33e6373","62f7b48dcbda874c","8f3b748b72912b3b","4af1e2fca77db38a","0d0333cce94a1861","a4d0915da9164c50","cca950337b0e4cd6","d92b02fa08482154","ea3c66bf77880b2e","6d4ac23763231581","4be8e5f68a4abfe9","80772545d1e55244","4240b58247da8662","3ce9de1f03152b4b","2c8782f46aa80988","592ea8cc15e1b674","e0eb3af760b09bea","3712339da3876688","0cbf0addbfdd9a47","2134736d5ec127c5","b2d43b7aae3c1b2f","c43bcc64b8743202","1bf3075e5bc680b7","b283553d411bf7b9","e41e9b2efca2b2df","036fe9570bd1280c","2463515280e7bef8","0beb7fc68551a8f6","064ac8a0b9a446f5","0b989a0b56f00f63","39e728ed3ead71f9","eb2e0eabb27d6b8a","ed1b54b719e8bd37","7c39f660c1ae3e9b","72d41e10e83b7747","538f53838f1c56ee","aebd9e4b4d167fb4","0fd156bd44369080","ac5c21d921f345a6","55ed41f1a1508d9e","326a6450f1d62c5a","3e396febbc546701","9eae6ea6cb719e16","3d9f6c422ee65ffc","9c9e1af865d6292c","8b0da6409caa0b93","537caf641205eb56","e215359b90ecb91d","840a3d99ab049e04","f41096f9b85689db","440797e1bf305abe","144e60bacf342e5b","fa1b597a26f66834","0bd92f96a190128b","29f1405febae376a","533a9d0945502f69","5e3e0aa8a62ca041","09d3b446412c901a","a0106a72b4813096","9f1465e4dd0aad50","dc6199605ff6cc33","ab5ea6139ac07353","03d99e4472e4fca8","f77cc4f7067ac099"],"x":34,"y":159,"w":1502,"h":1042},{"id":"2ff03b1965fc68a7","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["8fde0dfa8a0ed61b","771572d3499dac92","778312ef779bcbdd","2844a24cd9cd909b","d6d10dfd2db4c6e1","84c18d7af6b031e0","bdcd1c829c7a36f6","0cad7d26bfef7f80","3d64a96a0737a125","d4bbc81d1cdd2b6f","0d0c2166a291ddee","821c3fb925c59b71","de056491db24879f","e5483949691ac136","e19e990d4b204329","96d1bcb3d1b22559","f586077a647ee992","2de1376b97559a60","e72c59841c91e4ac","2a1efc1f283b12c7","c2fa2bc083d84c6a","398aef823b0963c4","9e0cebdac8ca63dc","df475d358257d10a","d11c18e736296c14","88438c3f5c594a7c","ec48a822e2716876","9bf2139cc00988d4","d0df03cae5b7c353","28ed411c360ec636","ad30acc07c6db622","5a5e55ba23ab00f0","5964aeb968bc1c43","aa6f370a2b8ec3ef","64d1006a38878da1","04a82a164dbef682","0b78a79d6e589c26","ad01b9468379d716","008ac704a1c1c03a"],"x":34,"y":3759,"w":1282,"h":542},{"id":"1e428712aecf6d9b","type":"group","z":"ec28d8db3689b1f5","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["6c126e970403fcff","8823cb8729815af4","2e98ae0def3f8971","9f5dbe8983d70841","40e13278d3e52632","30b8cc7f00513770","2e90502c9e60db36","8d65543ae2db6c45","1efcdb7b91e37854","7e55e72f2d47252a","a361919615a1cc26","cc7b0aa5ef28e9a2","97609632057df6e7","0164c672efb85f86","d674df4c1bc373ff","53740e1295c0a793","5a4e37f3e88c5dc8","2fb6d54a5ff9118e","42834b135f7c5ec4","9a508b6b9eb43835","3808f26374d3410d","bd37d092edde9951"],"x":34,"y":1459,"w":1132,"h":622},{"id":"b8b150c06f3a9076","type":"group","z":"ec28d8db3689b1f5","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c4c8967622b3601a","f166ceed6221b02f","fb617cf78d913d32","d58b167b3d633716","bacc3dc050c302ea","a70267820ff566f5","f9a488d9ce1e31f1","bbdff27ebf33aa92","732b642fa86bb6fe","afc0124ae2b4de98","a7e8e53a7d9fe513","cfa67075a0bda41d","b9584062e67cb6ab","e66011d888adee35","55296d6f8737b7cd","65baaacb9b852b56","d3f9f89d687df097","2888a749934b883f","fff7c6bcef83fb07","ce1f91caaed2df6d","742b42c3e8451df2","8648574ea83e3466","f14a1cfc04b3e96a","59fb85a7f74023e9","bd0b77b768989b3c","75c1677095ad4799","b5664075264aa2a3","bd62395d57ec59e0","17d4dd54afa63911","272e6f97f31b38da","36fa1f72a2ad9ff9","33a9e62e909c32de","5f4a94f084b1069f","849cf52aa2a378fa","383de0c50c72aa55"],"x":34,"y":39,"w":1132,"h":1402},{"id":"b7ac32e3ce7e3a2e","type":"group","z":"56a22929a6befff3","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["f8234035c1102617","232e1bd3c0337d7f","5e04324166d97655","838d66358b114764","0da0d71069b5b7f3","89657707357da688","47f7db55ffd4a18e","b82ef4fac43b42e8","f1da07013ec03217","75b3a4915df81ca5","2a88c7a4d6403b15","ea7909646c8d0c3d","8ecd42ee4e431d0c","41e650e71e591599","b29b5734ec540eeb","d8d50b4f0044aad5","63474e8ce6190a52","0559ea9b907b5e87","a8465dcdc49200ae","0b170f7fd451c41e","93089d2796f378bf","0cb76ba058af601c","38ebe0311e6bdc2a","a0ce570afed14a8d","981b138d56a342a1","b92ee649d741c20f","b1d68f1fe1b35806","05d53d8a3221f9f9","af1860db05dca164","b6bc419e735896a1","130d1b309a8fe4b9","41ed58f0641cf7fd","1ea1c5224e43b9ce","aa9aba60326e34be","ec2d195300a2c034","b0339c65754e972f","72d1447dbe82ddab","90d62064705f73f1","e24005ae6dc43ec4","13f274d193788451","e69de5184b231a94","d27f65d1d23d242c","325eaf833ee5cce3","875442658bad3c4f","f72b8945e0d6e7c8","de6093ed3c849c91","1462c26ff18a9b14","aeeac0cf1fdd9830","7cfdc7454169e917","ee8be4810504bc8b","5543a516269ff258","3db2309c96c9b9f8","128a7cc3e49f98e8","c9a98c15c2d75c54","45c1f52baa120d44","7dac5a5545e70d53","eb89eeb130ec345d"],"x":94,"y":919,"w":552,"h":1042},{"id":"f5c87a406c2a2913","type":"group","z":"56a22929a6befff3","name":"Buzzer","style":{"label":true},"nodes":["21e843f1141f2812","c82a7a9cf53b6766","85dc1d4df05984f5","cb5e22bab4fd99a0"],"x":94,"y":1999,"w":532,"h":122},{"id":"5ef1898fd1dfa0be","type":"group","z":"56a22929a6befff3","name":"Reset µC's","style":{"label":true},"nodes":["52448ca093f78ede","f50714910682243f","03211c9df0de1676","d89cc656e9940fac","0a09fa988785a4e7","3d8a82ff5252af97","bb741bfdc1a28d2f","863a43e520dabbb7","19cc4d5b860d4539","86ad116678314ab4"],"x":94,"y":2159,"w":552,"h":242},{"id":"28b056b664db7e80","type":"group","z":"56a22929a6befff3","name":"Keycontrol","style":{"label":true},"nodes":["f727bd199c4fb768","d5e98713ea88e6fd","a1ddf172bb91138b","e5eab9d52f7a0086","48249a3cc4ab1fd4","039b2e92a9b9d472","82d6222d68c28e03","f2d93e245ff5cdf7","6c09cd4ea603abf6","ee50c16135371407","97ebbc9b4b847917","d29d0ecfede9d169","578692bfdfd312f9","9059050ea1a9717c","6da92f3df123c7b4","e8515c5a2a53679b","588a640468dc8aca","6cc6a9240dcf8388","4e2df3c7014b798d","b233f13c3c0e9134","02058f1a917cd966","298584d94781070a","132243cc94758b3b","b363c9039d3a2aa1","e12d9cd04acd6ddc","5046eaa39240a5bc","60fde80910767087","9d299c7841f6b7e3","5064484f529a2a7b","6a126674d482ab85","2180b854cbe50558","a8780f5f789efc06","be9d9329642bb66e","8ecc145e5b6e6808","cb824308557a262c","197f53a221848a40","4c7049ed79454c16","275915e3ae53883a","c742ff045f3172e6","0ca498f4c0687239","18d3e06fd08c190c","fb0b31803db83fad","c866476a4c8e984c","e8e645424a931ec2","193bcb010d48fde0","2c756f954bc08d41","bf3011f72f55c205","fdcfa9fe617e8e09","01181ddbbe2e4a89","27b17c5189e23f72","5352bf734e1b7dde","c1ac9021c1a090c7","627ec3cd91405d19","02642554e8f0311a","f8cad5b4500b8284","11bd5c78693e02cc","a71cc94cf1f9d106","c3a33ee604dcfeab","7501793c6f97f616","fe12ea7cc2ba245f","8846d68d6ad482c9","88123d924c6beeb2","1f2b89c78652d669","6d33baf83b0ae862","05f2267785a07392","bcd16fbf465b0682","ee9d07f595030620","94275ecbace0a38e","48437680f05a6dfc","f04a9d414327e70d"],"x":94,"y":59,"w":1122,"h":822},{"id":"41881c375950137d","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b13ec189cc79f6ba","87af758445f14285","fc771a88fc812e82","f5c628fac390b678","b56eeb28afd7b903","5e26a60998e2c14e","e4c0288adfa9a86f","4b257f03fe785047","343324275668efb1","73b0e388477c6a78","d276a4a2ddf4962d","f2e8fe39856e80ef","ed48a33732eee3a2","f815e316967f8aad","a475fa7038733191","b4c390b2ca2c11f4","fab272a802e81139","56271a130596dd6d","1d0b42dc4ec0277b","02b5e41e6a321d89","46e6bcef5c2750c0"],"x":34,"y":3219,"w":892,"h":502},{"id":"c9d74377db386d63","type":"group","z":"38519fcf62fceae2","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c9a7edf8de9c9a12","2a35df0d9aac55b9","a7adcd8a1f04f80c"],"x":34,"y":39,"w":412,"h":142},{"id":"095c9fc37fe60475","type":"group","z":"ec28d8db3689b1f5","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b6c7c689db133e6f","e429bfc69f8361ef","1eb24fd9e8c54ca1","7d05b988fa029f15","48b53ecc9d2cbcee","df785422119516a2","7f13a0e4741c5f10","c304cb29c28fee2b","8706795d32a56f5e","0a66d049f17159cf","9fe3e88b55baa35a","52b60206a5161ddd","3c9c2452fdd9c49d","5f8fcbdd3c172cc1","f88fff264ab7a90a","673070a71cf05177","3e0ea15432e39316","b8a89e5ed43bea39","822a18bf78f3e28b","2388d7e5b228fecd","0707bbd3f04095b8","3858b59dcd113c99","b4c89cbb292cb99c","143c61cbd9726e37","ab06e604e9978a8c","5d40a81d5589a9d4","8f75fe51e9fc247d","1727ef9883fee027","fe263f0177bbfada","49d3ca1e016d78f6","54abc4ec1d88e8e6"],"x":34,"y":2119,"w":912,"h":822},{"id":"e69de5184b231a94","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1100,"wires":[["232e1bd3c0337d7f","d27f65d1d23d242c","de6093ed3c849c91"]]},{"id":"d27f65d1d23d242c","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1220,"wires":[["5e04324166d97655","325eaf833ee5cce3"]]},{"id":"325eaf833ee5cce3","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1340,"wires":[["0da0d71069b5b7f3","875442658bad3c4f"]]},{"id":"875442658bad3c4f","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1460,"wires":[["47f7db55ffd4a18e","f72b8945e0d6e7c8"]]},{"id":"f72b8945e0d6e7c8","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1580,"wires":[["f1da07013ec03217","2a88c7a4d6403b15"]]},{"id":"de6093ed3c849c91","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1100,"wires":[["f8234035c1102617","1462c26ff18a9b14"]]},{"id":"1462c26ff18a9b14","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1220,"wires":[["41e650e71e591599","aeeac0cf1fdd9830"]]},{"id":"aeeac0cf1fdd9830","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1340,"wires":[["838d66358b114764","7cfdc7454169e917"]]},{"id":"7cfdc7454169e917","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1460,"wires":[["89657707357da688","ee8be4810504bc8b"]]},{"id":"ee8be4810504bc8b","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1580,"wires":[["b82ef4fac43b42e8","5543a516269ff258"]]},{"id":"5543a516269ff258","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1700,"wires":[["75b3a4915df81ca5","7dac5a5545e70d53"]]},{"id":"c2fa2bc083d84c6a","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":820,"y":4100,"wires":[["2a1efc1f283b12c7","008ac704a1c1c03a"]]},{"id":"398aef823b0963c4","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":780,"y":4260,"wires":[["2a1efc1f283b12c7","008ac704a1c1c03a"]]},{"id":"9e0cebdac8ca63dc","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":1040,"y":3920,"wires":[["2a1efc1f283b12c7","008ac704a1c1c03a"]]},{"id":"df475d358257d10a","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":640,"y":4260,"wires":[["398aef823b0963c4"]]},{"id":"01181ddbbe2e4a89","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":1040,"y":120,"wires":[["6da92f3df123c7b4"]]},{"id":"27b17c5189e23f72","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":1040,"y":200,"wires":[["6da92f3df123c7b4"]]},{"id":"5352bf734e1b7dde","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":1040,"y":280,"wires":[["6da92f3df123c7b4"]]},{"id":"c1ac9021c1a090c7","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":1040,"y":360,"wires":[["6da92f3df123c7b4"]]},{"id":"627ec3cd91405d19","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":1040,"y":440,"wires":[["6da92f3df123c7b4"]]},{"id":"02642554e8f0311a","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":1040,"y":520,"wires":[["6da92f3df123c7b4"]]},{"id":"45c1f52baa120d44","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1840,"wires":[["ea7909646c8d0c3d"]]},{"id":"d0d27308ddf29d73","type":"junction","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","x":100,"y":940,"wires":[["52e7a7115c307b9a","f5ecbe3717d225fe","e5dd4d85199f119d","0fdd7ecb1d358211","30b854341070ec0c","ab6e797f8268c8f5","b24f5b2a56d66de0","466b67ba65495190","cce142e8b32badfe","d253f18dc3ecba16","44ff6546fb41f53a","d1cd08c9da2704e4"]]},{"id":"027804cdc3789503","type":"junction","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","x":240,"y":2920,"wires":[["43f165b8eba7f10c","4f802ed4ce33568c"]]},{"id":"058ab1a67d75cbbb","type":"junction","z":"38519fcf62fceae2","g":"f89014669a905f2e","x":900,"y":900,"wires":[["9aa1eedc3a3b0a77","9be447f74a5659c4"]]},{"id":"211e2a685b25cddf","type":"junction","z":"38519fcf62fceae2","g":"f89014669a905f2e","x":600,"y":1120,"wires":[["b5d9b643d3018dc5"]]},{"id":"974608b50ff5df9c","type":"modbus-client","name":"","clienttype":"serial","bufferCommands":true,"stateLogEnabled":true,"queueLogEnabled":false,"failureLogEnabled":true,"tcpHost":"127.0.0.1","tcpPort":502,"tcpType":"DEFAULT","serialPort":"/dev/ttyAMA0","serialType":"RTU-BUFFERD","serialBaudrate":"115200","serialDatabits":8,"serialStopbits":1,"serialParity":"none","serialConnectionDelay":"100","serialAsciiResponseStartDelimiter":"0x3A","unit_id":1,"commandDelay":200,"clientTimeout":"300","reconnectOnTimeout":false,"reconnectTimeout":1000,"parallelUnitIdsAllowed":false,"showErrors":true,"showWarnings":true,"showLogs":true},{"id":"a34efc6669e0b23a","type":"ui-base","name":"Neva Marine","path":"/dashboard","appIcon":"","includeClientData":true,"acceptsClientConfig":["ui-notification","ui-control"],"showPathInSidebar":false,"headerContent":"dashpage","navigationStyle":"default","titleBarStyle":"default","showReconnectNotification":true,"notificationDisplayTime":1,"showDisconnectNotification":true,"allowInstall":true},{"id":"07b472da491cc459","type":"PCA9685","deviceNumber":1,"address":"95","frequency":50},{"id":"7151a80ba6b123df","type":"ui-theme","name":"Neva Marine AS","colors":{"surface":"#097479","primary":"#097479","bgPage":"#111111","groupBg":"#333333","groupOutline":"#555555"},"sizes":{"density":"comfortable","pagePadding":"6px","groupGap":"6px","groupBorderRadius":"4px","widgetGap":"6px"}},{"id":"ff4d78a12d1c8a98","type":"ui-page","name":"Hjem","ui":"a34efc6669e0b23a","path":"/hjem","icon":"home","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":1,"className":"","visible":"true","disabled":"false"},{"id":"fb3fabef7f732e4f","type":"serial-port","name":"","serialport":"/dev/ttyAMA3","serialbaud":"9600","databits":8,"parity":"none","stopbits":1,"waitfor":"$","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":10000},{"id":"689d59762dda24eb","type":"ui-page","name":"Vær","ui":"a34efc6669e0b23a","path":"/vaer","icon":"weather-windy-variant","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":4,"className":"","visible":"true","disabled":"false"},{"id":"67e67d3ec5cedac0","type":"ui-group","name":"Trykk","page":"689d59762dda24eb","width":6,"height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"a75df0de71f5b033","type":"ui-page","name":"Rapporter","ui":"a34efc6669e0b23a","path":"/reports","icon":"test-tube","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":5,"className":"","visible":"true","disabled":"false"},{"id":"43f83edaea29acf4","type":"ui-group","name":"Lampe 1","page":"a75df0de71f5b033","width":6,"height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"884e0b0f934ba909","type":"shared-state","name":"myLat","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"6","numMin":"-90","numMax":"90","unit":"deg","saveInterval":"0"},{"id":"407e7742e8b9f1bc","type":"shared-state","name":"myLon","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"6","numMin":"-180","numMax":"180","unit":"deg","saveInterval":"0"},{"id":"d5e8bd2b1115be28","type":"shared-state","name":"FW_Link","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"7f2169e2cb92802f","type":"shared-state","name":"myManuellKjoringState","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"1","unit":"","saveInterval":"0"},{"id":"6e1e834c24242472","type":"shared-state","name":"Lampe1En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"dbd084ce70a3aca9","type":"shared-state","name":"Lampe2En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"3ebac7f92155048a","type":"shared-state","name":"Lampe3En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"b2b0acad0fd02e0a","type":"shared-state","name":"Lampe4En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"78fee3bd300e2412","type":"shared-state","name":"Lampe5En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"dcbeac56928b2456","type":"shared-state","name":"Lampe6En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"984d640ef763cab4","type":"shared-state","name":"myHWaddr","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"8d055d0c1bc7c0f9","type":"shared-state","name":"Stigetid","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"65000","unit":"","saveInterval":"0"},{"id":"3000022b053cc228","type":"shared-state","name":"Dimmetid","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"65000","unit":"","saveInterval":"0"},{"id":"d2c111101b508bb4","type":"shared-state","name":"MaxDriverTemperatur","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"0","numMin":"30","numMax":"100","unit":"C","saveInterval":"0"},{"id":"2ae0878ed3a6804b","type":"shared-state","name":"DriverCoolDownPWM","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"0","numMin":"0","numMax":"100","unit":"","saveInterval":"0"},{"id":"94dfd7648f9e7446","type":"ui-page","name":"Oppsett","ui":"a34efc6669e0b23a","path":"/Oppsett","icon":"tune","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":3,"className":"","visible":"true","disabled":"false"},{"id":"abb155b2a3b51c32","type":"ui-group","name":"System","page":"ff4d78a12d1c8a98","width":6,"height":1,"order":7,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"8085ac2cfd9fe232","type":"ui-group","name":"Nettverk","page":"94dfd7648f9e7446","width":"3","height":1,"order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"2fc0f99eeddfe6d3","type":"mqtt-broker","name":"BIO3000","broker":"128.199.38.63","port":1883,"clientid":"","autoConnect":false,"usetls":false,"protocolVersion":4,"keepalive":60,"cleansession":true,"autoUnsubscribe":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willRetain":"false","willPayload":"","willMsg":{},"userProps":"","sessionExpiry":""},{"id":"b141066593e2150a","type":"ui-group","name":"Prosessoppsett","page":"94dfd7648f9e7446","width":"3","height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"e31ead2e4f213bbe","type":"ui-spacer","group":"b141066593e2150a","name":"spacer","tooltip":"","order":9,"width":"3","height":1,"className":""},{"id":"3851858da9cbf137","type":"ui-group","name":"Lampe 2","page":"a75df0de71f5b033","width":6,"height":1,"order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"8154b0c2d333ea5c","type":"ui-group","name":"Lampe 3","page":"a75df0de71f5b033","width":6,"height":1,"order":3,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"7e38435dec7f5cbb","type":"ui-group","name":"Lampe 4","page":"a75df0de71f5b033","width":6,"height":1,"order":4,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"bdd1ccedc4b38339","type":"ui-group","name":"Lampe 5","page":"a75df0de71f5b033","width":6,"height":1,"order":5,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"0f4fff2dc12465d5","type":"ui-group","name":"Lampe 6","page":"a75df0de71f5b033","width":6,"height":1,"order":6,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"a6ecfbc58fb32627","type":"ui-spacer","group":"b141066593e2150a","name":"spacer","tooltip":"","order":14,"width":"3","height":1,"className":""},{"id":"b7e9fe26a8d71a7f","type":"ui-group","name":"Programvare","page":"94dfd7648f9e7446","width":6,"height":1,"order":3,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"753e473c87c30a73","type":"ui-page","name":"Planlegger","ui":"a34efc6669e0b23a","path":"/planlegger","icon":"sun-clock","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":2,"className":"","visible":"true","disabled":"false"},{"id":"a1dad4848328d607","type":"ui-group","name":"Klokke","page":"753e473c87c30a73","width":2,"height":1,"order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"7a607f334ec9b0f4","type":"ui-spacer","group":"b7e9fe26a8d71a7f","name":"spacer","order":2,"width":4,"height":1,"className":""},{"id":"7a6083bedb444feb","type":"ui-spacer","group":"b7e9fe26a8d71a7f","name":"spacer","order":5,"width":2,"height":1,"className":""},{"id":"7a6336245f88bec2","type":"ui-spacer","group":"abb155b2a3b51c32","name":"spacer","order":2,"width":4,"height":2,"className":""},{"id":"62590983c81c41b7","type":"ui-group","name":"Lampe 1","page":"ff4d78a12d1c8a98","width":2,"height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"c23fd74778b4bb27","type":"ui-group","name":"Lampe 3","page":"ff4d78a12d1c8a98","width":2,"height":1,"order":3,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"fb6829bb7da38322","type":"ui-group","name":"Lampe 4","page":"ff4d78a12d1c8a98","width":2,"height":1,"order":4,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"9218f50a17d33476","type":"ui-group","name":"Lampe 5","page":"ff4d78a12d1c8a98","width":2,"height":1,"order":5,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"ad19bd75069cf79a","type":"ui-group","name":"Lampe 6","page":"ff4d78a12d1c8a98","width":2,"height":1,"order":6,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"7a7142f656fbaae4","type":"ui-spacer","group":"8085ac2cfd9fe232","name":"spacer","order":5,"width":3,"height":1,"className":""},{"id":"b3f3b42fdbb5c530","type":"ui-spacer","group":"b141066593e2150a","name":"spacer","tooltip":"","order":16,"width":"3","height":1,"className":""},{"id":"7a77957df73dc5c6","type":"ui-spacer","group":"b141066593e2150a","name":"spacer","order":7,"width":3,"height":1,"className":""},{"id":"96fd324a2cd5c563","type":"ui-group","name":"Lampe 2","page":"ff4d78a12d1c8a98","width":"2","height":1,"order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"7ac45349c80dbe06","type":"ui-spacer","group":"abb155b2a3b51c32","name":"spacer","order":7,"width":2,"height":1,"className":""},{"id":"9a249443a9769895","type":"ui-group","name":"Kjøreplan","page":"753e473c87c30a73","width":4,"height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"ee932add205df226","type":"shared-state","name":"planleggerTabell","lbl":"","tags":"","historyCount":2,"dataType":"obj","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"2f521b541baf3461","type":"ui-group","name":"MODBUS fc 6","page":"94dfd7648f9e7446","width":3,"height":1,"order":4,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"8480dcd196a6edca","type":"ui-group","name":"Demo","page":"753e473c87c30a73","width":"12","height":1,"order":-1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"e616d2d6976d58de","type":"shared-state","name":"myDemoState","lbl":"","tags":"","historyCount":2,"dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"ead8f956c53ebd34","type":"comment","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Prosessoppsett","info":"","x":140,"y":200,"wires":[]},{"id":"9652c9e68944c869","type":"comment","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"Hent Hostname og MAC og IP","info":"","x":180,"y":2240,"wires":[]},{"id":"8606686a.ef7008","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract HWaddr","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ether \") + 6; // Offset the start of the address from \"ether \"\nlet addr = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nreturn { payload : addr }; // return the address as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":2360,"wires":[["54b06a2d2d3f7da9","d993607f45ebee6f"]]},{"id":"52753337.7b5a8c","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"ifconfig eth0","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":370,"y":2380,"wires":[["8606686a.ef7008","f378c2eb37bccb2e"],[],[]]},{"id":"7274cbde085522a1","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract Hostname","func":"let hostname = msg.payload; // Save the payload string to a more convenient variable name\n\nreturn { payload : hostname.trim() };","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":2300,"wires":[["89718a34befe08cc","3b9eea01f3cb8a9c"]]},{"id":"8672e44b8c93e04e","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"hostname","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":380,"y":2300,"wires":[["7274cbde085522a1"],[],[]]},{"id":"f378c2eb37bccb2e","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract IP","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":2440,"wires":[["10f66669a4c75868"]]},{"id":"e6597813fd0ae3f4","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"ifconfig wlan0","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":360,"y":2500,"wires":[["fefea0960b0e5ccf"],[],[]]},{"id":"54b06a2d2d3f7da9","type":"change","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","rules":[{"t":"set","p":"HWaddr","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":2360,"wires":[["99221ed0b3ff9b78"]]},{"id":"415279b36a1b260b","type":"change","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"","rules":[{"t":"set","p":"myLat","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":2960,"wires":[["d3a04c2a524f335d"]]},{"id":"9446bd4891094586","type":"inject","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"59.321648","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"59.321648","payloadType":"num","x":160,"y":2940,"wires":[["4c77654823d5de0a"]]},{"id":"942d34ae8956f965","type":"change","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"","rules":[{"t":"set","p":"myLon","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":3080,"wires":[["d3a04c2a524f335d"]]},{"id":"0658f9f3b5b365fe","type":"inject","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"10.496234","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"10.496234","payloadType":"num","x":160,"y":3040,"wires":[["4595ec88724471a6"]]},{"id":"66075e03ab09b9bf","type":"link out","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"Send position update","mode":"link","links":[],"x":1095,"y":3040,"wires":[]},{"id":"d3a04c2a524f335d","type":"trigger","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"","op1":"0","op2":"","op1type":"str","op2type":"date","duration":"10","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":2,"x":970,"y":3020,"wires":[[],["66075e03ab09b9bf"]]},{"id":"89718a34befe08cc","type":"change","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","rules":[{"t":"set","p":"hostname","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":2280,"wires":[[]]},{"id":"c7f54ee0b2f3a63a","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"cat /etc/wpa_supplicant/wpa_supplicant.conf","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":270,"y":2680,"wires":[["1b2a342569d2a26e","42dc6006f9fea2f4"],[],[]]},{"id":"c14bb127b5df1c7b","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract available SSID","func":"let myArray = msg.payload;\nlet mySSIDs = \"SSID(s):\";\n\n// List all SSIDs\nfor(let i=0;i<myArray.length;i++) {\n    mySSIDs = mySSIDs + \" \" + myArray[i].ssid;\n}\n\nreturn { payload : mySSIDs }; // return the SSIDs found as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":2560,"wires":[["e416f00314dba446"]]},{"id":"fefea0960b0e5ccf","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract IP","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":2500,"wires":[["088dfb1014c70f1f"]]},{"id":"e465494834110f2d","type":"switch","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","property":"name","propertyType":"msg","rules":[{"t":"eq","v":"Oppsett","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":150,"y":2440,"wires":[["8672e44b8c93e04e","52753337.7b5a8c","e6597813fd0ae3f4","c7f54ee0b2f3a63a","5d6762f0715ad17d"]]},{"id":"1b2a342569d2a26e","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract SSID","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ssid=\") + 6; // Offset the start of the SSID \"\nlet mySSID = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgSSID\", mySSID);\n\nreturn { payload: mySSID }; // return the SSID as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":2660,"wires":[[]]},{"id":"42dc6006f9fea2f4","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract psk","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"psk=\") + 5; // Offset the start of the psk \"\nlet myPSK = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgPSK\", myPSK);\n\n\nreturn { payload: myPSK }; // return the PSK as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":2700,"wires":[[]]},{"id":"4137c932c634e85c","type":"switch","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"Endring?","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"orgSSID","vt":"flow"}],"checkall":"true","repair":false,"outputs":1,"x":960,"y":2660,"wires":[["f08261ebfc7c4153"]]},{"id":"8a75d5bd744e8a34","type":"switch","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"Endring?","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"orgPSK","vt":"flow"}],"checkall":"true","repair":false,"outputs":1,"x":960,"y":2700,"wires":[["585fb6d440aca651"]]},{"id":"f08261ebfc7c4153","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"send commands","func":"let newValue = msg.payload;\nlet orgValue = flow.get(\"orgSSID\"); \n\nlet command = `'s?ssid=\"${orgValue}\"?ssid=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgSSID\",newValue);\n\nreturn {payload: command};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2660,"wires":[["e4b41e99e4495c4e"]]},{"id":"e4b41e99e4495c4e","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"sudo sed -i ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"","x":1330,"y":2680,"wires":[[],[],[]]},{"id":"585fb6d440aca651","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"send commands","func":"let newValue = msg.payload;\nlet orgValue = flow.get(\"orgPSK\"); \n\nlet command = `'s?psk=\"${orgValue}\"?psk=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgPSK\",newValue);\n\nreturn {payload: command};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2700,"wires":[["e4b41e99e4495c4e"]]},{"id":"43a334e28706087c","type":"link in","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"link in SSID","links":[],"x":605,"y":2620,"wires":[[]]},{"id":"13a7ca5bd49cdb11","type":"link in","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"link in WifiPassword","links":[],"x":605,"y":2740,"wires":[[]]},{"id":"54b12257f4a94b77","type":"comment","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"System Status/Overide","info":"","x":160,"y":1280,"wires":[]},{"id":"9e4b31212a818980","type":"comment","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"Omstart","info":"","x":110,"y":2020,"wires":[]},{"id":"91f87512e16887b3","type":"switch","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"OK ?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"confirm_clicked","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":490,"y":2080,"wires":[["e225bb78d03d91c6","7a09ac512fd3f1b4"]]},{"id":"da8e8ea18dc47c69","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe1En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":260,"wires":[["4f19a906966b33c4"]]},{"id":"1ac3755c818bbb14","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe2En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":360,"wires":[["2ff74425e33e6373"]]},{"id":"d78dcfddd87ec46b","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe3En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":460,"wires":[["62f7b48dcbda874c"]]},{"id":"b35b12e3c51bd86a","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe4En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":560,"wires":[["8f3b748b72912b3b"]]},{"id":"b4daa565f7d18b63","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe5En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":660,"wires":[["4af1e2fca77db38a"]]},{"id":"f0b8619a95c18428","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe6En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":760,"wires":[["0d0333cce94a1861"]]},{"id":"4f19a906966b33c4","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":260,"wires":[[],["537caf641205eb56"]]},{"id":"2ff74425e33e6373","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":360,"wires":[[],["840a3d99ab049e04"]]},{"id":"62f7b48dcbda874c","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":460,"wires":[[],["440797e1bf305abe"]]},{"id":"8f3b748b72912b3b","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":560,"wires":[[],["fa1b597a26f66834"]]},{"id":"4af1e2fca77db38a","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":660,"wires":[[],["29f1405febae376a"]]},{"id":"0d0333cce94a1861","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":760,"wires":[[],["5e3e0aa8a62ca041"]]},{"id":"cc41947dcd6a7447","type":"get-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"884e0b0f934ba909","name":"myLat","triggerOnInit":true,"triggerOnChange":true,"x":170,"y":2980,"wires":[["4c77654823d5de0a"]]},{"id":"136cbb4d09d53679","type":"get-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"407e7742e8b9f1bc","name":"myLon","triggerOnInit":true,"triggerOnChange":true,"x":170,"y":3080,"wires":[["4595ec88724471a6"]]},{"id":"fc1097f1322444ad","type":"get-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"7f2169e2cb92802f","name":"myManuellKjoringState","triggerOnInit":true,"triggerOnChange":true,"x":200,"y":1340,"wires":[["2088cab7f0e749da"]]},{"id":"a4d0915da9164c50","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"6e1e834c24242472","name":"Lampe1En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":260,"wires":[["ac5c21d921f345a6"]]},{"id":"cca950337b0e4cd6","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dbd084ce70a3aca9","name":"Lampe2En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":360,"wires":[["55ed41f1a1508d9e"]]},{"id":"d92b02fa08482154","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3ebac7f92155048a","name":"Lampe3En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":460,"wires":[["326a6450f1d62c5a"]]},{"id":"ea3c66bf77880b2e","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"b2b0acad0fd02e0a","name":"Lampe4En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":560,"wires":[["3e396febbc546701"]]},{"id":"6d4ac23763231581","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"78fee3bd300e2412","name":"Lampe5En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":660,"wires":[["9eae6ea6cb719e16"]]},{"id":"4be8e5f68a4abfe9","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dcbeac56928b2456","name":"Lampe6En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":760,"wires":[["3d9f6c422ee65ffc"]]},{"id":"f559be213ad80699","type":"set-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"884e0b0f934ba909","name":"myLat","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":710,"y":3000,"wires":[]},{"id":"18c63098db69cf72","type":"set-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"407e7742e8b9f1bc","name":"myLon","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":710,"y":3120,"wires":[]},{"id":"0f6199f63595e02c","type":"set-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"7f2169e2cb92802f","name":"myManuellKjoringState","triggerOnInit":false,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":730,"y":1380,"wires":[]},{"id":"99221ed0b3ff9b78","type":"set-shared-state","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","state":"984d640ef763cab4","name":"myHWaddr","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":990,"y":2360,"wires":[]},{"id":"80772545d1e55244","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"6e1e834c24242472","name":"Lampe1En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":300,"wires":[]},{"id":"4240b58247da8662","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dbd084ce70a3aca9","name":"Lampe2En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":400,"wires":[]},{"id":"3ce9de1f03152b4b","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3ebac7f92155048a","name":"Lampe3En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":500,"wires":[]},{"id":"2c8782f46aa80988","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"b2b0acad0fd02e0a","name":"Lampe4En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":600,"wires":[]},{"id":"592ea8cc15e1b674","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"78fee3bd300e2412","name":"Lampe5En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":700,"wires":[]},{"id":"e0eb3af760b09bea","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dcbeac56928b2456","name":"Lampe6En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":800,"wires":[]},{"id":"5d6762f0715ad17d","type":"wifiscan","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","x":370,"y":2560,"wires":[["c14bb127b5df1c7b"]]},{"id":"2ef322e034f98afc","type":"restart","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"","x":810,"y":2080,"wires":[]},{"id":"3712339da3876688","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Stigetid","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":940,"wires":[["2463515280e7bef8"]]},{"id":"0cbf0addbfdd9a47","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"8d055d0c1bc7c0f9","name":"Stigetid","triggerOnInit":false,"triggerOnChange":true,"x":150,"y":940,"wires":[["9c9e1af865d6292c"]]},{"id":"2134736d5ec127c5","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"8d055d0c1bc7c0f9","name":"Stigetid","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":560,"y":980,"wires":[]},{"id":"b2d43b7aae3c1b2f","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3000022b053cc228","name":"Dimmetid","triggerOnInit":false,"triggerOnChange":true,"x":160,"y":1120,"wires":[["8b0da6409caa0b93"]]},{"id":"c43bcc64b8743202","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3000022b053cc228","name":"Dimmetid","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":560,"y":1160,"wires":[]},{"id":"1bf3075e5bc680b7","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Dimmetid","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":1120,"wires":[["0beb7fc68551a8f6"]]},{"id":"b283553d411bf7b9","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Set Stigetid","func":"return [\n    { payload: { 'unitid': 11, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 12, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 13, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 14, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 15, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 16, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } }\n    ];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1290,"y":940,"wires":[["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"]]},{"id":"e41e9b2efca2b2df","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Se Dimmetid","func":"return [\n    { payload: { 'unitid': 11, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 12, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 13, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 14, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 15, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 16, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } }\n    ];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1290,"y":1120,"wires":[["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"]]},{"id":"036fe9570bd1280c","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Update Stige og Dimme settings","mode":"link","links":["53740e1295c0a793"],"x":1495,"y":1020,"wires":[]},{"id":"2463515280e7bef8","type":"trigger","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"1","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":920,"y":940,"wires":[["39e728ed3ead71f9"]]},{"id":"0beb7fc68551a8f6","type":"trigger","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"1","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":920,"y":1120,"wires":[["eb2e0eabb27d6b8a"]]},{"id":"064ac8a0b9a446f5","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Set Stigetid","links":["2fe46eac7c22eae5"],"x":165,"y":980,"wires":[["9c9e1af865d6292c"]]},{"id":"0b989a0b56f00f63","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Set Dimmetid","links":["8ca4edc11fb4728d"],"x":175,"y":1160,"wires":[["8b0da6409caa0b93"]]},{"id":"39e728ed3ead71f9","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Stigetid","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":940,"wires":[["b283553d411bf7b9"]]},{"id":"eb2e0eabb27d6b8a","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Dimmetid","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":1120,"wires":[["e41e9b2efca2b2df"]]},{"id":"f81448d7f550ebbc","type":"comment","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"POSISJON","info":"","x":130,"y":2860,"wires":[]},{"id":"40382b50765dbe43","type":"comment","z":"483a6f631e7f69a7","name":"System","info":"","x":110,"y":80,"wires":[]},{"id":"7ba5e248b170868f","type":"link in","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"link in Reset","links":["daba8a8939fa1277"],"x":685,"y":2120,"wires":[["2ef322e034f98afc"]]},{"id":"ed1b54b719e8bd37","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe1En","links":["8d828dadf12808fb"],"x":135,"y":320,"wires":[["ac5c21d921f345a6"]]},{"id":"7c39f660c1ae3e9b","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe2En","links":["b5fec1b6a60c2a7f"],"x":125,"y":420,"wires":[["55ed41f1a1508d9e"]]},{"id":"72d41e10e83b7747","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe3En","links":["ef1d815e8d0197ce"],"x":125,"y":520,"wires":[["326a6450f1d62c5a"]]},{"id":"538f53838f1c56ee","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe4En","links":["f7ecdac73d72b68e"],"x":125,"y":620,"wires":[["3e396febbc546701"]]},{"id":"aebd9e4b4d167fb4","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe5En","links":["e16a8ac076e9c512"],"x":125,"y":720,"wires":[["9eae6ea6cb719e16"]]},{"id":"0fd156bd44369080","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe6En","links":["960b91115ecf9ca9"],"x":125,"y":820,"wires":[["3d9f6c422ee65ffc"]]},{"id":"89b54d26a3e7cba6","type":"get-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"d2c111101b508bb4","name":"MaxDriverTemperatur","triggerOnInit":true,"triggerOnChange":true,"x":200,"y":1560,"wires":[["ea1ab23a16b7e844"]]},{"id":"8b015a56cadba954","type":"set-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"d2c111101b508bb4","name":"MaxDriverTemperatur","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":800,"y":1600,"wires":[]},{"id":"7a36369141d9ca06","type":"change","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","rules":[{"t":"set","p":"MaxDriverTemperatur","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":830,"y":1560,"wires":[[]]},{"id":"43735253926b7632","type":"link in","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link in MaxDriverTemperatur","links":["b4d917b0862ca05d"],"x":245,"y":1620,"wires":[["ea1ab23a16b7e844"]]},{"id":"6a3ad87467ada1af","type":"get-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"2ae0878ed3a6804b","name":"DriverCoolDownPWM","triggerOnInit":true,"triggerOnChange":true,"x":200,"y":1680,"wires":[["d386110d80a3025c"]]},{"id":"bf153915c27f022e","type":"set-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"2ae0878ed3a6804b","name":"DriverCoolDownPWM","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":720,"y":1720,"wires":[]},{"id":"5b2c9afa7a04d7c4","type":"change","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","rules":[{"t":"set","p":"DriverCoolDownPWM","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1680,"wires":[[]]},{"id":"a82d45d441548f1c","type":"link in","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link in Cool Down PWM","links":["b8b4950c74be40ab"],"x":285,"y":1720,"wires":[["d386110d80a3025c"]]},{"id":"f55d92b93a2bc9ab","type":"ui-control","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","ui":"a34efc6669e0b23a","events":"change","x":140,"y":2400,"wires":[["e465494834110f2d"]]},{"id":"d993607f45ebee6f","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":2,"width":0,"height":0,"name":"ShowHWaddr","label":"MAC:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":780,"y":2400,"wires":[]},{"id":"e416f00314dba446","type":"ui-notification","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","ui":"a34efc6669e0b23a","position":"top right","colorDefault":true,"color":"#000000","displayTime":"10","showCountdown":true,"outputs":1,"allowDismiss":true,"dismissText":"Close","allowConfirm":false,"confirmText":"Confirm","raw":false,"className":"","name":"","x":810,"y":2560,"wires":[[]]},{"id":"7bb569857b3fb41a","type":"ui-template","z":"483a6f631e7f69a7","group":"","page":"","ui":"a34efc6669e0b23a","name":"","order":0,"width":0,"height":0,"head":"","format":"/* Set Background picture */\n.v-main {\n    background-image: url(\"/Background.png\");\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n}\n\n/* Styling for all the groups */\nui-card-panel {\n    box-shadow: rgba(0, 0, 0, 0.55) 0px 15px 25px !important;\n    border-radius: 5px;\n    background: rgba(50, 50, 50, 0.75) !important;\n}\n\n/* Styling for all the lelements in the groups */\nui-card-panel * {\n    border-radius: 2.5px;\n}\n\n/* Styling */\nmd-card {\n    background: rgba(50, 50, 50, 0.75) !important;\n}\n\n/* Styling of the Group Title */\n.nr-dashboard-cardtitle {\n    font-weight: bold !important;\n}","storeOutMessages":true,"passthru":true,"resendOnRefresh":true,"templateScope":"site:style","className":"","x":120,"y":120,"wires":[[]]},{"id":"2103052d12fe2218","type":"inject","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":2320,"wires":[["52753337.7b5a8c","8672e44b8c93e04e","e6597813fd0ae3f4"]]},{"id":"ac5c21d921f345a6","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 1","group":"b141066593e2150a","order":1,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":260,"wires":[["da8e8ea18dc47c69","80772545d1e55244"]]},{"id":"55ed41f1a1508d9e","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 2","group":"b141066593e2150a","order":2,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":360,"wires":[["1ac3755c818bbb14","4240b58247da8662"]]},{"id":"326a6450f1d62c5a","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 3","group":"b141066593e2150a","order":3,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":460,"wires":[["d78dcfddd87ec46b","3ce9de1f03152b4b"]]},{"id":"3e396febbc546701","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 4","group":"b141066593e2150a","order":4,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":560,"wires":[["b35b12e3c51bd86a","2c8782f46aa80988"]]},{"id":"9eae6ea6cb719e16","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 5","group":"b141066593e2150a","order":5,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":660,"wires":[["b4daa565f7d18b63","592ea8cc15e1b674"]]},{"id":"3d9f6c422ee65ffc","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 6","group":"b141066593e2150a","order":6,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":760,"wires":[["f0b8619a95c18428","e0eb3af760b09bea"]]},{"id":"3b9eea01f3cb8a9c","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":1,"width":0,"height":0,"name":"ShowHostname","label":"Hostname:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":780,"y":2320,"wires":[]},{"id":"10f66669a4c75868","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":3,"width":0,"height":0,"name":"","label":"eth0 IP:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":760,"y":2440,"wires":[]},{"id":"088dfb1014c70f1f","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":4,"width":0,"height":0,"name":"","label":"wlan0 IP:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":760,"y":2500,"wires":[]},{"id":"9c9e1af865d6292c","type":"ui-number-input","z":"483a6f631e7f69a7","g":"db562037527b0503","group":"b141066593e2150a","name":"Stigetid","label":"Stigetid 0-100% [s]","order":10,"width":"","height":"","topic":"topic","topicType":"msg","min":0,"max":"65000","step":"15","tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":320,"y":940,"wires":[["2134736d5ec127c5","dc6199605ff6cc33"]]},{"id":"8b0da6409caa0b93","type":"ui-number-input","z":"483a6f631e7f69a7","g":"db562037527b0503","group":"b141066593e2150a","name":"Dimmetid","label":"Dimmetid 0-100% [s]","order":11,"width":null,"height":null,"topic":"topic","topicType":"msg","min":0,"max":"65000","step":"15","tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":320,"y":1120,"wires":[["c43bcc64b8743202","f77cc4f7067ac099"]]},{"id":"537caf641205eb56","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"// Clear Lampe1Data\nglobal.set(\"Lampe1Data\", undefined);\n\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":260,"wires":[["e215359b90ecb91d"]]},{"id":"e215359b90ecb91d","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 1","mode":"link","links":["2af26b7c25ef445d"],"x":1235,"y":260,"wires":[]},{"id":"840a3d99ab049e04","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"// Clear Lampe2Data\nglobal.set(\"Lampe2Data\", undefined);\n\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":360,"wires":[["f41096f9b85689db"]]},{"id":"f41096f9b85689db","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 2","mode":"link","links":["6b08cff41e317d5e"],"x":1235,"y":360,"wires":[]},{"id":"440797e1bf305abe","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"// Clear Lampe3Data\nglobal.set(\"Lampe3Data\", undefined);\n\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":460,"wires":[["144e60bacf342e5b"]]},{"id":"144e60bacf342e5b","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 3","mode":"link","links":["c7acdc1e62c55259"],"x":1235,"y":460,"wires":[]},{"id":"fa1b597a26f66834","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"// Clear Lampe4Data\nglobal.set(\"Lampe4Data\", undefined);\n\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":560,"wires":[["0bd92f96a190128b"]]},{"id":"0bd92f96a190128b","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 4","mode":"link","links":["a42e3850811c7534"],"x":1235,"y":560,"wires":[]},{"id":"29f1405febae376a","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"// Clear Lampe5Data\nglobal.set(\"Lampe5Data\", undefined);\n\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":660,"wires":[["533a9d0945502f69"]]},{"id":"533a9d0945502f69","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 5","mode":"link","links":["974d5c3c66ce7aae"],"x":1235,"y":660,"wires":[]},{"id":"5e3e0aa8a62ca041","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"// Clear Lampe6Data\nglobal.set(\"Lampe6Data\", undefined);\n\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1120,"y":760,"wires":[["09d3b446412c901a"]]},{"id":"09d3b446412c901a","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 6","mode":"link","links":["7f9235d1cda708ed"],"x":1235,"y":760,"wires":[]},{"id":"cd027137a9cb7f6d","type":"ui-button-group","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"Reset Lampe MODBUS adresse (use only in installation)","group":"b141066593e2150a","order":15,"width":null,"height":null,"label":"Reset Lampe MODBUS adresse","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"Lampe 1","icon":"sun","value":"11","valueType":"num","color":"#009933"},{"label":"Lampe 2","icon":"sun","value":"12","valueType":"num","color":"#999999"},{"label":"Lampe 3","icon":"sun","value":"13","valueType":"num","color":"#ff6666"},{"label":"Lampe 4","icon":"sun","value":"14","valueType":"num","color":"#009999"},{"label":"Lampe 5","icon":"sun","value":"15","valueType":"num","color":"#cccc00"},{"label":"Lampe 6","icon":"sun","value":"16","valueType":"num","color":"#ff33cc"}],"topic":"topic","topicType":"msg","x":310,"y":1840,"wires":[["63f772c7d1f6eb4e"]]},{"id":"b09e593e3f0451bc","type":"function","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"clear","func":"\nreturn {payload: []};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1900,"wires":[["cd027137a9cb7f6d"]]},{"id":"edc591dc30d01fab","type":"delay","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":160,"y":1900,"wires":[["b09e593e3f0451bc"]]},{"id":"8fde0dfa8a0ed61b","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all Lamps out","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":170,"y":4140,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"771572d3499dac92","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"101","func":"msg.payload.unitid = 101;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":4140,"wires":[["c2fa2bc083d84c6a","778312ef779bcbdd"]]},{"id":"778312ef779bcbdd","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"102","func":"msg.payload.unitid = 102;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":4160,"wires":[["c2fa2bc083d84c6a","64d1006a38878da1"]]},{"id":"2844a24cd9cd909b","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all Lamps in","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"3","payloadType":"num","x":170,"y":4180,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"d6d10dfd2db4c6e1","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Cleanup IDs","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":100,\"fc\":6,\"unitid\":100,\"address\":1,\"quantity\":1}","payloadType":"json","x":190,"y":4260,"wires":[["64d1006a38878da1"]]},{"id":"84c18d7af6b031e0","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"101","func":"msg.payload.unitid = 101;\nmsg.payload.value = 101;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":4220,"wires":[["bdcd1c829c7a36f6","df475d358257d10a"]]},{"id":"bdcd1c829c7a36f6","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"102","func":"msg.payload.unitid = 102;\nmsg.payload.value = 102;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":4220,"wires":[["398aef823b0963c4"]]},{"id":"0cad7d26bfef7f80","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 1","props":[{"p":"payload"},{"p":"topic","v":"11","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":1,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3860,"wires":[["ec48a822e2716876"]]},{"id":"3d64a96a0737a125","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 2","props":[{"p":"payload"},{"p":"topic","v":"12","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":2,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3900,"wires":[["9bf2139cc00988d4"]]},{"id":"d4bbc81d1cdd2b6f","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 3","props":[{"p":"payload"},{"p":"topic","v":"13","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":1,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3940,"wires":[["d0df03cae5b7c353"]]},{"id":"0d0c2166a291ddee","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 4","props":[{"p":"payload"},{"p":"topic","v":"14","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":2,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3980,"wires":[["28ed411c360ec636"]]},{"id":"821c3fb925c59b71","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 5","props":[{"p":"payload"},{"p":"topic","v":"15","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":1,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":4020,"wires":[["ad30acc07c6db622"]]},{"id":"de056491db24879f","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 6","props":[{"p":"payload"},{"p":"topic","v":"16","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":2,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":4060,"wires":[["5a5e55ba23ab00f0"]]},{"id":"e5483949691ac136","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Upload x","func":"return { payload: { 'value': msg.topic, 'fc': 6, 'unitid': 0, 'address': 1, 'quantity': 1 }, topic: msg.topic }; ","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":3860,"wires":[["9e0cebdac8ca63dc","2de1376b97559a60"]]},{"id":"e19e990d4b204329","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Change ID","func":"return { payload: { \"value\": 98, \"fc\": 6, \"unitid\": 0, \"address\": 99, \"quantity\": 1 }, topic: msg.topic }; ","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":3920,"wires":[["f586077a647ee992","9e0cebdac8ca63dc"]]},{"id":"96d1bcb3d1b22559","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Save EE","func":"return { payload: { 'value': 1, 'fc': 6, 'unitid': msg.topic, 'address': 99, 'quantity': 1 } }; ","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":3980,"wires":[["9e0cebdac8ca63dc","ad01b9468379d716"]]},{"id":"f586077a647ee992","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":720,"y":3980,"wires":[["96d1bcb3d1b22559"]]},{"id":"2de1376b97559a60","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":720,"y":3920,"wires":[["e19e990d4b204329"]]},{"id":"e72c59841c91e4ac","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":720,"y":3860,"wires":[["e5483949691ac136"]]},{"id":"2a1efc1f283b12c7","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 1","mode":"link","links":["53740e1295c0a793"],"x":1275,"y":4100,"wires":[]},{"id":"d11c18e736296c14","type":"comment","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Lamp MODBUS id changes","info":"","x":180,"y":3800,"wires":[]},{"id":"88438c3f5c594a7c","type":"link in","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link in MODBUS Lamp Addr update","links":["28ed411c360ec636","5a5e55ba23ab00f0","9bf2139cc00988d4","ad30acc07c6db622","d0df03cae5b7c353","ec48a822e2716876","e845695292441400"],"x":425,"y":3840,"wires":[["e72c59841c91e4ac","5964aeb968bc1c43","04a82a164dbef682"]]},{"id":"ec48a822e2716876","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 2","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3860,"wires":[]},{"id":"9bf2139cc00988d4","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 3","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3900,"wires":[]},{"id":"d0df03cae5b7c353","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 4","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3940,"wires":[]},{"id":"28ed411c360ec636","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 5","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3980,"wires":[]},{"id":"ad30acc07c6db622","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 6","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":4020,"wires":[]},{"id":"5a5e55ba23ab00f0","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 7","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":4060,"wires":[]},{"id":"5964aeb968bc1c43","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":540,"y":3980,"wires":[["c2fa2bc083d84c6a"]]},{"id":"aa6f370a2b8ec3ef","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"100","func":"return {payload : {\"value\":msg.payload,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1} };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":4120,"wires":[["771572d3499dac92","c2fa2bc083d84c6a"]]},{"id":"64d1006a38878da1","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"100","func":"return { payload: {\"value\":100,\"fc\":6,\"unitid\":100,\"address\":1,\"quantity\":1} }","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":4260,"wires":[["84c18d7af6b031e0","df475d358257d10a"]]},{"id":"04a82a164dbef682","type":"change","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all out","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":4040,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"0b78a79d6e589c26","type":"change","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all in","rules":[{"t":"set","p":"payload","pt":"msg","to":"3","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":4040,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"ad01b9468379d716","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":900,"y":4040,"wires":[["0b78a79d6e589c26"]]},{"id":"008ac704a1c1c03a","type":"debug","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"debug 6","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1100,"y":4240,"wires":[]},{"id":"63f772c7d1f6eb4e","type":"switch","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","property":"payload","propertyType":"msg","rules":[{"t":"istype","v":"number","vt":"number"}],"checkall":"true","repair":false,"outputs":1,"x":610,"y":1840,"wires":[["edc591dc30d01fab","e92924a556371408"]]},{"id":"e845695292441400","type":"link out","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link out MODBUS Lamp Addr update","mode":"link","links":["88438c3f5c594a7c"],"x":975,"y":1840,"wires":[]},{"id":"e92924a556371408","type":"function","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"Setup macro messages","func":"let respons = {};\n\nswitch(msg.payload) {\n    case 11: \n        respons = {\"value\":1,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1};\n        break;\n    case 12: \n        respons = {\"value\":2,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1};\n        break;\n    case 13: \n        respons = {\"value\":1,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1};\n        break;\n    case 14: \n        respons = {\"value\":2,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1};\n        break;\n    case 15: \n        respons = {\"value\":1,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1};\n        break;\n    case 16: \n        respons = {\"value\":2,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1};\n        break;\n}\n\nreturn {topic: msg.payload, payload: respons};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":1840,"wires":[["e845695292441400"]]},{"id":"99c9f669af88ec05","type":"ui-button","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","group":"b7e9fe26a8d71a7f","name":"","label":"Omstart","order":6,"width":2,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"","iconPosition":"left","payload":"<h3>Trykk OK for omstart av systemmet. Hvis du ikke er sikker - trykk CANCEL nå!</h3>","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":120,"y":2080,"wires":[["f32f136301a0888e"]]},{"id":"f32f136301a0888e","type":"ui-notification","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"300","showCountdown":false,"outputs":1,"allowDismiss":true,"dismissText":"Cancel","allowConfirm":true,"confirmText":"OK","raw":true,"className":"","name":"","x":310,"y":2080,"wires":[["91f87512e16887b3"]]},{"id":"e225bb78d03d91c6","type":"delay","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":640,"y":2080,"wires":[["2ef322e034f98afc"]]},{"id":"7a09ac512fd3f1b4","type":"link out","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"link out Reset µC's","mode":"link","links":["86ad116678314ab4"],"x":595,"y":2040,"wires":[]},{"id":"b13ec189cc79f6ba","type":"change","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"","rules":[{"t":"set","p":"FW_Link","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":3380,"wires":[[]]},{"id":"87af758445f14285","type":"switch","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"OK ?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"confirm_clicked","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":630,"y":3480,"wires":[["f5c628fac390b678"]]},{"id":"fc771a88fc812e82","type":"exec","z":"483a6f631e7f69a7","g":"41881c375950137d","command":"sudo wget -cO - ","addpay":"payload","append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":530,"y":3560,"wires":[["b56eeb28afd7b903"],["b56eeb28afd7b903"],["b56eeb28afd7b903","5e26a60998e2c14e"]]},{"id":"f5c628fac390b678","type":"function","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"send commands","func":"let myParam = flow.get(\"FW_Link\") + \" > /home/pi/.node-red/flows.json\";\n\nreturn { payload: myParam }","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":3560,"wires":[["fc771a88fc812e82"]]},{"id":"b56eeb28afd7b903","type":"debug","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"debug 1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":720,"y":3560,"wires":[]},{"id":"5e26a60998e2c14e","type":"switch","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"Alt i orden?","property":"payload.code","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"neq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":210,"y":3640,"wires":[["e4c0288adfa9a86f"],["343324275668efb1"]]},{"id":"e4c0288adfa9a86f","type":"function","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"Programvare Oppdatert!","func":"return { payload: \"Programvare Oppdatert! Omstart nødvendig for at endringene skal tre i kraft - kjører omstart nå...\" };\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":3640,"wires":[["4b257f03fe785047","56271a130596dd6d"]]},{"id":"4b257f03fe785047","type":"delay","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":660,"y":3680,"wires":[["f2e8fe39856e80ef"]]},{"id":"343324275668efb1","type":"function","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"Uff da... Dette gikk jo ikke.","func":"return { payload: \"Uff da! Fikk ikke tak i Programvaren.\" + msg.payload.message };\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":3680,"wires":[["56271a130596dd6d"]]},{"id":"73b0e388477c6a78","type":"get-shared-state","z":"483a6f631e7f69a7","g":"41881c375950137d","state":"d5e8bd2b1115be28","name":"FW_Link","triggerOnInit":true,"triggerOnChange":true,"x":150,"y":3380,"wires":[["a475fa7038733191"]]},{"id":"d276a4a2ddf4962d","type":"set-shared-state","z":"483a6f631e7f69a7","g":"41881c375950137d","state":"d5e8bd2b1115be28","name":"FW_Link","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":530,"y":3420,"wires":[]},{"id":"f2e8fe39856e80ef","type":"restart","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"","x":830,"y":3680,"wires":[]},{"id":"ed48a33732eee3a2","type":"comment","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"FW Upgrade","info":"","x":130,"y":3260,"wires":[]},{"id":"f815e316967f8aad","type":"link in","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"link in runFWUpgrade","links":["8c50d6755452ae51"],"x":205,"y":3560,"wires":[["f5c628fac390b678"]]},{"id":"a475fa7038733191","type":"ui-text-input","z":"483a6f631e7f69a7","g":"41881c375950137d","group":"b7e9fe26a8d71a7f","name":"","label":"FW link:","order":3,"width":0,"height":0,"topic":"topic","topicType":"msg","mode":"text","tooltip":"","delay":300,"passthru":true,"sendOnDelay":false,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"sendOnClear":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","x":330,"y":3380,"wires":[["b13ec189cc79f6ba","d276a4a2ddf4962d"]]},{"id":"b4c390b2ca2c11f4","type":"ui-button","z":"483a6f631e7f69a7","g":"41881c375950137d","group":"b7e9fe26a8d71a7f","name":"","label":"Oppdater programvare","order":4,"width":2,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"","iconPosition":"left","payload":"<h3>Er du sikker på at du vil oppdatere programvare nå?</h3>","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":230,"y":3480,"wires":[["fab272a802e81139"]]},{"id":"fab272a802e81139","type":"ui-notification","z":"483a6f631e7f69a7","g":"41881c375950137d","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"300","showCountdown":true,"outputs":1,"allowDismiss":true,"dismissText":"Nei","allowConfirm":true,"confirmText":"Ja","raw":true,"className":"","name":"","x":450,"y":3480,"wires":[["87af758445f14285"]]},{"id":"56271a130596dd6d","type":"ui-notification","z":"483a6f631e7f69a7","g":"41881c375950137d","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"10","showCountdown":true,"outputs":1,"allowDismiss":false,"dismissText":"Nei","allowConfirm":false,"confirmText":"Ja","raw":true,"className":"","name":"","x":690,"y":3640,"wires":[[]]},{"id":"1d0b42dc4ec0277b","type":"ui-text","z":"483a6f631e7f69a7","g":"41881c375950137d","group":"b7e9fe26a8d71a7f","order":1,"width":2,"height":0,"name":"FW version","label":"FW version:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":590,"y":3320,"wires":[]},{"id":"02b5e41e6a321d89","type":"inject","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"Set FW version","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"v. 3.0.11","payloadType":"str","x":160,"y":3320,"wires":[["46e6bcef5c2750c0"]]},{"id":"46e6bcef5c2750c0","type":"change","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"","rules":[{"t":"set","p":"FWversion","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":3320,"wires":[["1d0b42dc4ec0277b"]]},{"id":"da4cacf8edb1c8a9","type":"ui-text","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","group":"8085ac2cfd9fe232","order":6,"width":1,"height":"1","name":"","label":"Position: ","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":540,"y":2960,"wires":[]},{"id":"4c77654823d5de0a","type":"ui-text-input","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","group":"8085ac2cfd9fe232","name":"","label":"Lat: ","order":7,"width":1,"height":0,"topic":"topic","topicType":"msg","mode":"text","tooltip":"","delay":300,"passthru":true,"sendOnDelay":false,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"sendOnClear":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","x":530,"y":3000,"wires":[["f559be213ad80699","415279b36a1b260b"]]},{"id":"4595ec88724471a6","type":"ui-text-input","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","group":"8085ac2cfd9fe232","name":"","label":"Lon: ","order":8,"width":1,"height":0,"topic":"topic","topicType":"msg","mode":"text","tooltip":"","delay":300,"passthru":true,"sendOnDelay":false,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"sendOnClear":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","x":530,"y":3040,"wires":[["942d34ae8956f965","18c63098db69cf72"]]},{"id":"2088cab7f0e749da","type":"ui-switch","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","label":"Manuell kjøring","group":"b141066593e2150a","order":8,"width":"","height":"","passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"0","onvalueType":"num","onicon":"","oncolor":"","offvalue":"1","offvalueType":"num","officon":"","offcolor":"","x":460,"y":1340,"wires":[["0f6199f63595e02c","82755f298050f509"]]},{"id":"82755f298050f509","type":"link out","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link out Manuell/Auto","mode":"link","links":["88123d924c6beeb2"],"x":635,"y":1340,"wires":[]},{"id":"3152a11911f1f43a","type":"link in","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link in myModeSelector","links":["bf3011f72f55c205","f159c4c478441d87"],"x":125,"y":1400,"wires":[["dc885fc40db59680"]]},{"id":"dc885fc40db59680","type":"change","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"myModeSelector","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":1400,"wires":[["2088cab7f0e749da"]]},{"id":"26d5a4c3ccdb01a7","type":"inject","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"120","topic":"","payload":"","payloadType":"date","x":330,"y":2860,"wires":[["027804cdc3789503"]]},{"id":"43f165b8eba7f10c","type":"change","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"Store Lat","rules":[{"t":"set","p":"payload","pt":"msg","to":"myLat","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":2920,"wires":[["4c77654823d5de0a"]]},{"id":"4f802ed4ce33568c","type":"change","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"Store Lon","rules":[{"t":"set","p":"payload","pt":"msg","to":"myLon","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":3020,"wires":[["4595ec88724471a6"]]},{"id":"ea1ab23a16b7e844","type":"ui-number-input","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","group":"b141066593e2150a","name":"","label":"Max. Driver Temperatur [°C] (100=disable)","order":12,"width":0,"height":0,"topic":"topic","topicType":"msg","min":"30","max":"100","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":500,"y":1560,"wires":[["7a36369141d9ca06","8b015a56cadba954"]]},{"id":"d386110d80a3025c","type":"ui-number-input","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","group":"b141066593e2150a","name":"","label":"Driver cool down PWM [%]","order":13,"width":0,"height":0,"topic":"topic","topicType":"msg","min":0,"max":"100","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":460,"y":1680,"wires":[["5b2c9afa7a04d7c4","bf153915c27f022e"]]},{"id":"2739f21be7eddf68","type":"link in","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"link in Lat","links":["0b857c92470a61a0"],"x":405,"y":3100,"wires":[["4c77654823d5de0a"]]},{"id":"9268ccab22454e4c","type":"link in","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"link in Lon","links":["c75d7d77b0f5f25e"],"x":405,"y":3140,"wires":[["4595ec88724471a6"]]},{"id":"b0f92b3a450f88f8","type":"link in","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link in Set Lampe MODBUS ID","links":["02f057e13ba0aa0f","05f2267785a07392"],"x":645,"y":1800,"wires":[["e92924a556371408","d663db8a765434e1"]]},{"id":"d663db8a765434e1","type":"debug","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"debug 3","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":820,"y":1780,"wires":[]},{"id":"a0106a72b4813096","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Stigetid","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":880,"wires":[["9c9e1af865d6292c"]]},{"id":"9f1465e4dd0aad50","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"8d055d0c1bc7c0f9","name":"Stigetid","triggerOnInit":true,"triggerOnChange":false,"x":150,"y":880,"wires":[["a0106a72b4813096"]]},{"id":"dc6199605ff6cc33","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"Stigetid","vt":"global"}],"checkall":"true","repair":false,"outputs":1,"x":550,"y":940,"wires":[["3712339da3876688"]]},{"id":"ab5ea6139ac07353","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3000022b053cc228","name":"Dimmetid","triggerOnInit":true,"triggerOnChange":false,"x":160,"y":1060,"wires":[["03d99e4472e4fca8"]]},{"id":"03d99e4472e4fca8","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Dimmetid","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":350,"y":1060,"wires":[["8b0da6409caa0b93"]]},{"id":"f77cc4f7067ac099","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"Dimmetid","vt":"global"}],"checkall":"true","repair":false,"outputs":1,"x":550,"y":1120,"wires":[["1bf3075e5bc680b7"]]},{"id":"ae03f87a3fbb055a","type":"i2c scan","z":"abfb29b7fe98de5f","name":"","busno":"1","x":1540,"y":360,"wires":[["45d881a9305003dd"],[]]},{"id":"12c8bcfc73668956","type":"inject","z":"abfb29b7fe98de5f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1540,"y":300,"wires":[["ae03f87a3fbb055a"]]},{"id":"45d881a9305003dd","type":"debug","z":"abfb29b7fe98de5f","name":"debug 5","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1540,"y":420,"wires":[]},{"id":"18676fc92dec75b3","type":"serial in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","serial":"fb3fabef7f732e4f","x":210,"y":2160,"wires":[["fa1460efeca4a892"]]},{"id":"778b6afb06e3d8b8","type":"nmea","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","property":"payload","outputProperty":"payload","x":510,"y":2160,"wires":[["4730bde001160d21"]]},{"id":"fa1460efeca4a892","type":"switch","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"RMC","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":370,"y":2160,"wires":[["778b6afb06e3d8b8"]]},{"id":"4730bde001160d21","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Extract Lat-Lon","func":"if( msg.payload.status == \"valid\" ) {\n    if(msg.payload.latPole != \"N\") {\n        msg.payload.lat = -msg.payload.lat;\n    }\n    if(msg.payload.lonPole != \"E\") {\n        msg.payload.lon = -msg.payload.lon;\n    }\n    node.status(\"Lat: \" + msg.payload.lat + \" Lon: \" + msg.payload.lon);\n    return [\n        { payload : msg.payload.lat },\n        { payload : msg.payload.lon } \n    ];\n} else {\n    node.status(\"Not valid\");\n}","outputs":2,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":680,"y":2160,"wires":[["7c800b43bcc1367d"],["ef57d13459406072"]]},{"id":"7c800b43bcc1367d","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"myLat","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":920,"y":2140,"wires":[[]]},{"id":"ef57d13459406072","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"myLon","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":2180,"wires":[[]]},{"id":"318a9b3cb2760c34","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"GPS","info":"","x":130,"y":2100,"wires":[]},{"id":"1f38fb7ad94d5774","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Read Raspberry Pi core temperature","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"","payloadType":"date","x":290,"y":2320,"wires":[["438e47f2cab73553"]]},{"id":"438e47f2cab73553","type":"exec","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","command":"vcgencmd measure_temp","addpay":"","append":"","useSpawn":"","timer":"","winHide":false,"oldrc":false,"name":"","x":590,"y":2320,"wires":[["782e1f60e60d73e6"],[],[]]},{"id":"782e1f60e60d73e6","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Remove temp=","func":"let str = msg.payload;\nlet arr = str.split(\"=\");\narr.shift();\nstr = arr.join(\"=\");\nlet CPU = parseFloat(str)\nglobal.set(\"CPU\", CPU);\nnode.status({text: \"CPU: \" + CPU + \"°C\"})\nreturn { payload: CPU };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":820,"y":2320,"wires":[["40970db1d04002d7"]]},{"id":"40970db1d04002d7","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"CPU","group":"abb155b2a3b51c32","order":3,"width":"2","height":"3","gtype":"gauge-half","gstyle":"needle","title":"CPU","units":"°C","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#5cd65c"},{"from":"60","color":"#ffc800"},{"from":"75","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":990,"y":2320,"wires":[]},{"id":"a087e9abb1098415","type":"rpi-gpio in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pin":"10","intype":"up","debounce":"25","read":true,"bcm":true,"x":200,"y":1920,"wires":[["dfdabc7132da9634","f7cfe9820952f851"]]},{"id":"1d1c05193a7bd2cc","type":"rpi-gpio in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pin":"27","intype":"up","debounce":"25","read":true,"bcm":true,"x":200,"y":2000,"wires":[["1f8a82c1c83d8d4b","0963c6cf33312ba6"]]},{"id":"dfdabc7132da9634","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":6,"width":2,"height":"1","label":"AC I","labelPlacement":"right","labelAlignment":"flex-start","states":[{"value":"1","valueType":"num","color":"#ff0000"},{"value":"0","valueType":"num","color":"#00ff00"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":350,"y":1940,"wires":[]},{"id":"bfbdca53ae2a50da","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"AC detection","info":"","x":150,"y":1860,"wires":[]},{"id":"1f8a82c1c83d8d4b","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":8,"width":2,"height":"1","label":"AC II","labelPlacement":"right","labelAlignment":"flex-start","states":[{"value":"1","valueType":"num","color":"#ff0000"},{"value":"0","valueType":"num","color":"#00ff00"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":350,"y":2020,"wires":[]},{"id":"42e339b84a696b47","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Raspberry pi CPU temp.","info":"","x":190,"y":2260,"wires":[]},{"id":"8bbb699ccca61343","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Control Card","info":"","x":150,"y":2400,"wires":[]},{"id":"2a376b1eb9b49d76","type":"i2c in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"0","count":"4","x":670,"y":2520,"wires":[["96d452d4031bede7","96f3bd76c1244db3"]]},{"id":"90dffa8443fcdae9","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Get all I2C","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"","payloadType":"date","x":190,"y":2520,"wires":[["508e9b3ed6e18b7d"]]},{"id":"96d452d4031bede7","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Dump Temp & Hum.","func":"let myArray = msg.payload;\n\nlet A = (myArray[1] << 8) | myArray[0];\nlet B = (myArray[3] << 8) | myArray[2];\n\nlet temp = (A/65536)*165 - 40.5;\nlet hum = (B/65536)*100;\n\nnode.status({text:\"Temp: \" + temp.toFixed(0) + \"°C Hum:\" + hum.toFixed(0) + \"%\"});\n\nglobal.set(\"CardTemp\", temp.toFixed(1));\nglobal.set(\"CardHum\", hum.toFixed(1));\n\nreturn { payload: temp.toFixed(1) };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":860,"y":2520,"wires":[["094a2f15142b1939"]]},{"id":"508e9b3ed6e18b7d","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"15","payload":"1","payloadType":"num","count":"1","x":350,"y":2520,"wires":[["34c68dee52198693"]]},{"id":"34c68dee52198693","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":510,"y":2520,"wires":[["2a376b1eb9b49d76"]]},{"id":"4f276b60d6fcf57d","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"14","payload":"-128","payloadType":"num","count":"1","x":370,"y":2460,"wires":[["7e255baabc20967b"]]},{"id":"d251178b3bb1d305","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Init HDC2080","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":2460,"wires":[["4f276b60d6fcf57d"]]},{"id":"a8555faf709767e5","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"15","payload":"3","payloadType":"num","count":"1","x":690,"y":2460,"wires":[["d402b30dd3246378"]]},{"id":"d402b30dd3246378","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"14","payload":"1","payloadType":"num","count":"1","x":830,"y":2460,"wires":[["6980d683220aeec6"]]},{"id":"6980d683220aeec6","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"15","payload":"1","payloadType":"num","count":"1","x":970,"y":2460,"wires":[[]]},{"id":"7e255baabc20967b","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"25","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":530,"y":2460,"wires":[["a8555faf709767e5"]]},{"id":"7a1b96c51d2c3503","type":"i2c in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"109","command":"6","count":"3","x":170,"y":2600,"wires":[["a89fb3154f922761","5a362992ea8a3eb3"]]},{"id":"9206e2182f2c1ae9","type":"i2c in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"109","command":"9","count":"3","x":170,"y":2680,"wires":[["cd22ce2233734f46"]]},{"id":"cd22ce2233734f46","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Temperature","func":"let dat = (msg.payload[0]<<16) + (msg.payload[1]<<8) + msg.payload[2];\nlet fadc = dat;\nif(dat & 0x800000) {\n    fadc = dat-16777216.0;\n}\nlet temp = 25.0 + (fadc / 65536.0); \nnode.status(\"Temp: \" + temp.toFixed(0) + \"°C\");\nglobal.set(\"systemTemp\", temp.toFixed(1));\n\nreturn { payload: temp.toFixed(1)};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":2680,"wires":[["4ce786e495e98b64"]]},{"id":"a89fb3154f922761","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Pressure","func":"let dat = (msg.payload[0]<<16) + (msg.payload[1]<<8) + msg.payload[2];\nlet fadc = dat;\nif(dat & 0x800000) {\n    fadc = dat-16777216.0;\n} \n//let ADC = 3.3*fadc/8388608.0;\n//let ADC = 3.3*fadc/14278572.0;\n//let Upper_Range_limit = 700;\n//let Lower_Range_Limit = 0;\n//let Range = Upper_Range_limit - Lower_Range_Limit;\n//return { payload: (Range * (ADC-0.5)/2.0)+Lower_Range_Limit};\n//return { payload: fadc/100000.0 -16.03};\nlet hPa = ((5775*fadc)/4194304 -750);\nnode.status(\"Trykk: \" + hPa.toFixed(0) + \" hPa\");\n\nreturn { payload: hPa};\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":2600,"wires":[["45ed53406547bbec"]]},{"id":"c82a3bd95487c916","type":"ui-chart","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"67e67d3ec5cedac0","name":"","label":"chart","order":1,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"","ymax":"","bins":10,"action":"append","stackSeries":false,"pointShape":"false","pointRadius":4,"showLegend":true,"removeOlder":1,"removeOlderUnit":"3600","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":8,"className":"","interpolation":"linear","x":830,"y":2600,"wires":[[]]},{"id":"45ed53406547bbec","type":"smooth","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","property":"payload","action":"mean","count":"60","round":"1","mult":"single","reduce":false,"x":480,"y":2600,"wires":[["d2944ce2935e80a2"]]},{"id":"d2944ce2935e80a2","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Logg Pressure","func":"let hPa = msg.payload.toFixed(0);\nglobal.set(\"Pressure\", hPa);\nnode.status(\"Trykk: \" + hPa + \" hPa\");\nreturn {payload: hPa, topic: \"[hPa]\"};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2600,"wires":[["c82a3bd95487c916"]]},{"id":"f7cfe9820952f851","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"nAC1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":1900,"wires":[[]]},{"id":"0963c6cf33312ba6","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"nAC2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":380,"y":1980,"wires":[[]]},{"id":"094a2f15142b1939","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":4,"width":"2","height":"3","gtype":"gauge-half","gstyle":"needle","title":"PCB","units":"°C","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#5cd65c"},{"from":"60","color":"#ffc800"},{"from":"75","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":1050,"y":2520,"wires":[]},{"id":"4ce786e495e98b64","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":5,"width":"2","height":"3","gtype":"gauge-half","gstyle":"needle","title":"Skap","units":"°C","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#5cd65c"},{"from":"60","color":"#ffc800"},{"from":"75","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":490,"y":2680,"wires":[]},{"id":"e5695479e114b53f","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampestatus","info":"","x":150,"y":460,"wires":[]},{"id":"dd4283b2a4aadb50","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"1s timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":200,"y":520,"wires":[["22b90d75e4c42a3a","7a9505bb7a7327e5","b9659d7aa0dc0974"]]},{"id":"22b90d75e4c42a3a","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Update Lampestatus (Round Robin)","func":"let RR = flow.get(\"RR\");\nif (global.get(\"myDemoState\") == \"None\") {\n    node.status({ fill: \"green\", shape: \"ring\", text: RR });\n    switch (RR) {\n\n        case 1:\n            flow.set(\"RR\", 2);\n            if (global.get(\"Lampe1En\")) {\n                return { payload: { \"fc\": 3, \"unitid\": 11, \"address\": 1, \"quantity\": 45 } };\n            }\n            break;\n\n        case 2:\n            flow.set(\"RR\", 3);\n            if (global.get(\"Lampe2En\")) {\n                return { payload: { \"fc\": 3, \"unitid\": 12, \"address\": 1, \"quantity\": 45 } };\n            }\n            break;\n\n        case 3:\n            flow.set(\"RR\", 4);\n            if (global.get(\"Lampe3En\")) {\n                return { payload: { \"fc\": 3, \"unitid\": 13, \"address\": 1, \"quantity\": 45 } };\n            }\n            break;\n\n        case 4:\n            flow.set(\"RR\", 5);\n            if (global.get(\"Lampe4En\")) {\n                return { payload: { \"fc\": 3, \"unitid\": 14, \"address\": 1, \"quantity\": 45 } };\n            }\n            break;\n\n        case 5:\n            flow.set(\"RR\", 6);\n            if (global.get(\"Lampe5En\")) {\n                return { payload: { \"fc\": 3, \"unitid\": 15, \"address\": 1, \"quantity\": 45 } };\n            }\n            break;\n\n        case 6:\n        default:\n            flow.set(\"RR\", 1);\n            if (global.get(\"Lampe6En\")) {\n                return { payload: { \"fc\": 3, \"unitid\": 16, \"address\": 1, \"quantity\": 45 } };\n            }\n            break;\n    }\n}\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":450,"y":520,"wires":[["0bcc47a9e661021e"]]},{"id":"3fd196f03881ef02","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Get data","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"5","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"{\"fc\":3,\"unitid\":100,\"address\":1,\"quantity\":9}","payloadType":"json","x":200,"y":340,"wires":[["1b6ae0af71143060","118422cb32dcbdae","b3fc5fb4f1348ec5"]]},{"id":"b3fc5fb4f1348ec5","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"102","func":"let L5En = global.get(\"Lampe5En\");\nlet L6En = global.get(\"Lampe6En\");\nif((L5En || L6En) && (global.get(\"myDemoState\")==\"None\")) {\n    msg.payload.unitid = 102;\n    return msg;\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":380,"wires":[["c9f3fd99e28b794a"]]},{"id":"118422cb32dcbdae","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"102","func":"let L3En = global.get(\"Lampe3En\");\nlet L4En = global.get(\"Lampe4En\");\nif((L3En || L4En) && (global.get(\"myDemoState\")==\"None\")) {\n    msg.payload.unitid = 101;\n    return msg;\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":340,"wires":[["c9f3fd99e28b794a"]]},{"id":"1b6ae0af71143060","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"100","func":"let L1En = global.get(\"Lampe1En\");\nlet L2En = global.get(\"Lampe2En\");\nif((L1En || L2En) && (global.get(\"myDemoState\")==\"None\")) {\n    msg.payload.unitid = 100;\n    return msg;\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":300,"wires":[["c9f3fd99e28b794a"]]},{"id":"c9f3fd99e28b794a","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out MODBUS get 100, 101 and 102 ","mode":"link","links":["a70267820ff566f5"],"x":455,"y":340,"wires":[]},{"id":"5d5d9b6841ecee28","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Get system cluster status","info":"","x":190,"y":240,"wires":[]},{"id":"0bcc47a9e661021e","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out MODBUS get Lamp status","mode":"link","links":["a70267820ff566f5"],"x":655,"y":520,"wires":[]},{"id":"96f3bd76c1244db3","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":190,"y":2560,"wires":[["7a1b96c51d2c3503"]]},{"id":"5a362992ea8a3eb3","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":170,"y":2640,"wires":[["9206e2182f2c1ae9"]]},{"id":"4bc7cdc853aec945","type":"rpi-gpio out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Alive","pin":"7","set":"","level":"0","freq":"","out":"out","bcm":true,"x":530,"y":580,"wires":[]},{"id":"7a9505bb7a7327e5","type":"trigger","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Alive pulse","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"50","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":370,"y":580,"wires":[["4bc7cdc853aec945"]]},{"id":"585d663bdfaca460","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"43f83edaea29acf4","order":2,"width":"","height":"","label":"Lampe 1 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L1","topicType":"str","x":300,"y":1280,"wires":[["1ab2c2ab2eafd076"]]},{"id":"6e9d0a69642e98b2","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 1","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe1Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe1Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe1Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe1Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe1Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":100,\"address\":8,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1280,"wires":[["f6b0cbef0b12395d"],["4137d7f599c2445c"],["5f1ac4d4ff38773e"]]},{"id":"d21702da7db612b7","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"3851858da9cbf137","order":2,"width":null,"height":null,"label":"Lampe 2 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L2","topicType":"str","x":300,"y":1340,"wires":[["4b906f5de6520ca5"]]},{"id":"f8bef1fde9688288","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"8154b0c2d333ea5c","order":2,"width":null,"height":null,"label":"Lampe 3 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L3","topicType":"str","x":300,"y":1400,"wires":[["e5383ecd4d503251"]]},{"id":"114f9d442d7099db","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"7e38435dec7f5cbb","order":2,"width":null,"height":null,"label":"Lampe 4 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L4","topicType":"str","x":300,"y":1460,"wires":[["851b3ff8b084d58c"]]},{"id":"361f625e107ad8b1","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"bdd1ccedc4b38339","order":2,"width":null,"height":null,"label":"Lampe 5 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L5","topicType":"str","x":300,"y":1520,"wires":[["5aa8faa50173b79a"]]},{"id":"b215f93c679bba12","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"0f4fff2dc12465d5","order":2,"width":null,"height":null,"label":"Lampe 6 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L6","topicType":"str","x":300,"y":1580,"wires":[["5377d56e592a5792"]]},{"id":"2af26b7c25ef445d","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 1 FB","links":["8d65543ae2db6c45","e215359b90ecb91d","a7e8e53a7d9fe513"],"x":145,"y":1280,"wires":[["585d663bdfaca460"]]},{"id":"6b08cff41e317d5e","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 2 FB","links":["1efcdb7b91e37854","f41096f9b85689db","e66011d888adee35"],"x":145,"y":1340,"wires":[["d21702da7db612b7"]]},{"id":"c7acdc1e62c55259","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 3 FB","links":["7e55e72f2d47252a","144e60bacf342e5b","d3f9f89d687df097"],"x":145,"y":1400,"wires":[["f8bef1fde9688288"]]},{"id":"a42e3850811c7534","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 4 FB","links":["cc7b0aa5ef28e9a2","0bd92f96a190128b","ce1f91caaed2df6d"],"x":145,"y":1460,"wires":[["114f9d442d7099db"]]},{"id":"974d5c3c66ce7aae","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 5 FB","links":["0164c672efb85f86","533a9d0945502f69","f14a1cfc04b3e96a"],"x":145,"y":1520,"wires":[["361f625e107ad8b1"]]},{"id":"7f9235d1cda708ed","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 6 FB","links":["97609632057df6e7","09d3b446412c901a","75c1677095ad4799"],"x":145,"y":1580,"wires":[["b215f93c679bba12"]]},{"id":"1ab2c2ab2eafd076","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":490,"y":1280,"wires":[["6e9d0a69642e98b2"]]},{"id":"4b906f5de6520ca5","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":490,"y":1340,"wires":[["13b35d334c2c4ea8"]]},{"id":"e5383ecd4d503251","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":490,"y":1400,"wires":[["bb888bd270ee626d"]]},{"id":"851b3ff8b084d58c","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":490,"y":1460,"wires":[["40298948c9f78390"]]},{"id":"5aa8faa50173b79a","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":490,"y":1520,"wires":[["d4b40338a39b16f0"]]},{"id":"5377d56e592a5792","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":490,"y":1580,"wires":[["cf3ca3d2395df141"]]},{"id":"4137d7f599c2445c","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L1G","mode":"link","links":["0559ea9b907b5e87"],"x":875,"y":1260,"wires":[]},{"id":"5f1ac4d4ff38773e","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L1R","mode":"link","links":["0b170f7fd451c41e"],"x":925,"y":1280,"wires":[]},{"id":"13b35d334c2c4ea8","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 2","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe2Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe2Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe2Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe2Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe2Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":100,\"address\":9,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1340,"wires":[["f6b0cbef0b12395d"],["e7f3c994874fb4b4"],["612bee73e37ec395"]]},{"id":"e7f3c994874fb4b4","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L2G","mode":"link","links":["38ebe0311e6bdc2a"],"x":875,"y":1320,"wires":[]},{"id":"612bee73e37ec395","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L2R","mode":"link","links":["a0ce570afed14a8d"],"x":925,"y":1340,"wires":[]},{"id":"bb888bd270ee626d","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 3","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe3Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe3Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe3Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe3Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe3Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":101,\"address\":8,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1400,"wires":[["f6b0cbef0b12395d"],["2929a0bb661e6a11"],["d2c18952143856aa"]]},{"id":"2929a0bb661e6a11","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L3G","mode":"link","links":["b1d68f1fe1b35806"],"x":875,"y":1380,"wires":[]},{"id":"d2c18952143856aa","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L3R","mode":"link","links":["05d53d8a3221f9f9"],"x":925,"y":1400,"wires":[]},{"id":"64bc1288f32443bd","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L4G","mode":"link","links":["130d1b309a8fe4b9"],"x":875,"y":1440,"wires":[]},{"id":"8f7e178f5ee2fdf5","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L4R","mode":"link","links":["41ed58f0641cf7fd"],"x":915,"y":1460,"wires":[]},{"id":"40298948c9f78390","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 4","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe4Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe4Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe4Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe4Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe4Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":101,\"address\":9,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1460,"wires":[["f6b0cbef0b12395d"],["64bc1288f32443bd"],["8f7e178f5ee2fdf5"]]},{"id":"313a5c23a8223fbe","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L5G","mode":"link","links":["ec2d195300a2c034"],"x":875,"y":1500,"wires":[]},{"id":"2d099517c8cd041e","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L5R","mode":"link","links":["b0339c65754e972f"],"x":915,"y":1520,"wires":[]},{"id":"d4b40338a39b16f0","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 5","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe5Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe5Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe5Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe5Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe5Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":102,\"address\":8,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1520,"wires":[["f6b0cbef0b12395d"],["313a5c23a8223fbe"],["2d099517c8cd041e"]]},{"id":"cf3ca3d2395df141","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 6","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe6Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe6Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe6Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe6Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe6Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":102,\"address\":9,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":670,"y":1580,"wires":[["f6b0cbef0b12395d"],["1b47f0c787042a33"],["6222b49c9a44de4d"]]},{"id":"1b47f0c787042a33","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L6G","mode":"link","links":["e24005ae6dc43ec4"],"x":875,"y":1560,"wires":[]},{"id":"6222b49c9a44de4d","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L6R","mode":"link","links":["13f274d193788451"],"x":915,"y":1580,"wires":[]},{"id":"3e03d92366c84295","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"System Status LED","group":"abb155b2a3b51c32","order":1,"width":"2","height":"2","label":"","labelPlacement":"left","labelAlignment":"flex-start","states":[{"value":"R","valueType":"str","color":"#ff0000"},{"value":"r","valueType":"str","color":"#af0000"},{"value":"Y","valueType":"str","color":"#ffff00"},{"value":"G","valueType":"str","color":"#00ff00"},{"value":"g","valueType":"str","color":"#329632"},{"value":"ÿ","valueType":"str","color":"#000000"},{"value":"y","valueType":"str","color":"#969600"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":650,"y":660,"wires":[]},{"id":"1e8b14e8743bed8e","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 1 Status LED","group":"62590983c81c41b7","order":1,"width":2,"height":"1","label":"","labelPlacement":"left","labelAlignment":"flex-start","states":[{"value":"R","valueType":"str","color":"#ff0000"},{"value":"r","valueType":"str","color":"#af0000"},{"value":"Y","valueType":"str","color":"#ffff00"},{"value":"G","valueType":"str","color":"#00ff00"},{"value":"g","valueType":"str","color":"#329632"},{"value":"ÿ","valueType":"str","color":"#000000"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":540,"y":720,"wires":[]},{"id":"1eaab67d19f52cd9","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 3 Status LED","group":"c23fd74778b4bb27","order":1,"width":2,"height":"1","label":"","labelPlacement":"left","labelAlignment":"flex-start","states":[{"value":"R","valueType":"str","color":"#ff0000"},{"value":"r","valueType":"str","color":"#af0000"},{"value":"Y","valueType":"str","color":"#ffff00"},{"value":"G","valueType":"str","color":"#00ff00"},{"value":"g","valueType":"str","color":"#329632"},{"value":"ÿ","valueType":"str","color":"#000000"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":540,"y":880,"wires":[]},{"id":"6d2e53afe6b33465","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 4 Status LED","group":"fb6829bb7da38322","order":1,"width":2,"height":"1","label":"","labelPlacement":"left","labelAlignment":"flex-start","states":[{"value":"R","valueType":"str","color":"#ff0000"},{"value":"r","valueType":"str","color":"#af0000"},{"value":"Y","valueType":"str","color":"#ffff00"},{"value":"G","valueType":"str","color":"#00ff00"},{"value":"g","valueType":"str","color":"#329632"},{"value":"ÿ","valueType":"str","color":"#000000"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":540,"y":960,"wires":[]},{"id":"8dd114446b7f9b9a","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 5 Status LED","group":"9218f50a17d33476","order":1,"width":2,"height":"1","label":"","labelPlacement":"left","labelAlignment":"flex-start","states":[{"value":"R","valueType":"str","color":"#ff0000"},{"value":"r","valueType":"str","color":"#af0000"},{"value":"Y","valueType":"str","color":"#ffff00"},{"value":"G","valueType":"str","color":"#00ff00"},{"value":"g","valueType":"str","color":"#329632"},{"value":"ÿ","valueType":"str","color":"#000000"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":540,"y":1040,"wires":[]},{"id":"8573f896e2529220","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 6 Status LED","group":"ad19bd75069cf79a","order":1,"width":2,"height":"1","label":"","labelPlacement":"left","labelAlignment":"flex-start","states":[{"value":"R","valueType":"str","color":"#ff0000"},{"value":"r","valueType":"str","color":"#af0000"},{"value":"Y","valueType":"str","color":"#ffff00"},{"value":"G","valueType":"str","color":"#00ff00"},{"value":"g","valueType":"str","color":"#329632"},{"value":"ÿ","valueType":"str","color":"#000000"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":540,"y":1120,"wires":[]},{"id":"52e7a7115c307b9a","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe1Status","rules":[{"t":"set","p":"payload","pt":"msg","to":"Lampe1Status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":720,"wires":[["1e8b14e8743bed8e"]]},{"id":"f5ecbe3717d225fe","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe2Status","rules":[{"t":"set","p":"payload","pt":"msg","to":"Lampe2Status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":800,"wires":[["7bc2dde05b0ad241"]]},{"id":"e5dd4d85199f119d","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe3Status","rules":[{"t":"set","p":"payload","pt":"msg","to":"Lampe3Status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":880,"wires":[["1eaab67d19f52cd9"]]},{"id":"0fdd7ecb1d358211","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe4Status","rules":[{"t":"set","p":"payload","pt":"msg","to":"Lampe4Status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":960,"wires":[["6d2e53afe6b33465"]]},{"id":"30b854341070ec0c","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe5Status","rules":[{"t":"set","p":"payload","pt":"msg","to":"Lampe5Status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":1040,"wires":[["8dd114446b7f9b9a"]]},{"id":"ab6e797f8268c8f5","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe6Status","rules":[{"t":"set","p":"payload","pt":"msg","to":"Lampe6Status","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":1120,"wires":[["8573f896e2529220"]]},{"id":"153d4b996be25815","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lys 1","group":"62590983c81c41b7","order":2,"width":2,"height":"4","gtype":"gauge-34","gstyle":"needle","title":"Lys 1","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#646464"},{"from":"1000","color":"#e1e1e1"},{"from":"9000","color":"#ffffff"}],"min":0,"max":"10000","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":490,"y":760,"wires":[]},{"id":"b24f5b2a56d66de0","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"myL1PWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"myL1PWM","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":760,"wires":[["153d4b996be25815"]]},{"id":"c39abfe8ef8a9864","type":"ui-number-input","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"62590983c81c41b7","name":"","label":"Setpoint L1","order":3,"width":2,"height":"1","topic":"topic","topicType":"msg","min":0,"max":"10000","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":870,"y":740,"wires":[["40fccdad9529eb5e"]]},{"id":"40fccdad9529eb5e","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 1 telegram","func":"global.set(\"mySetPL1PWM\",msg.payload);\nreturn { payload: { \"value\": msg.payload, \"fc\": 6, \"unitid\": 11, \"address\": 3, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":740,"wires":[["e75e860cc6c5abe7"]]},{"id":"466b67ba65495190","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"myL2PWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"myL2PWM","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":840,"wires":[["65c7c45fac7f143a"]]},{"id":"e5ea516ca8eaf91f","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 2 telegram","func":"global.set(\"mySetPL2PWM\",msg.payload);\nreturn { payload: { \"value\": msg.payload, \"fc\": 6, \"unitid\": 12, \"address\": 3, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":820,"wires":[["e75e860cc6c5abe7"]]},{"id":"6eb4d41ded3679c7","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lys 3","group":"c23fd74778b4bb27","order":2,"width":2,"height":"4","gtype":"gauge-34","gstyle":"needle","title":"Lys 3","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#646464"},{"from":"1000","color":"#e1e1e1"},{"from":"9000","color":"#ffffff"}],"min":0,"max":"10000","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":490,"y":920,"wires":[]},{"id":"cce142e8b32badfe","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"myL3PWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"myL3PWM","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":920,"wires":[["6eb4d41ded3679c7"]]},{"id":"3f7df1f3e3097b4e","type":"ui-number-input","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"c23fd74778b4bb27","name":"","label":"Setpoint L3","order":3,"width":2,"height":"1","topic":"topic","topicType":"msg","min":0,"max":"10000","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":870,"y":900,"wires":[["bb9a31d826e81da1"]]},{"id":"bb9a31d826e81da1","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 3 telegram","func":"global.set(\"mySetPL3PWM\",msg.payload);\nreturn { payload: { \"value\": msg.payload, \"fc\": 6, \"unitid\": 13, \"address\": 3, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":900,"wires":[["e75e860cc6c5abe7"]]},{"id":"b9659d7aa0dc0974","type":"switch","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"RR==1","property":"RR","propertyType":"flow","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":140,"y":660,"wires":[["d0d27308ddf29d73","817d8bfd7062cce3"]]},{"id":"c366d4aa87173d5a","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lys 4","group":"fb6829bb7da38322","order":2,"width":2,"height":"4","gtype":"gauge-34","gstyle":"needle","title":"Lys 4","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#646464"},{"from":"1000","color":"#e1e1e1"},{"from":"9000","color":"#ffffff"}],"min":0,"max":"10000","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":490,"y":1000,"wires":[]},{"id":"d253f18dc3ecba16","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"myL4PWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"myL4PWM","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":1000,"wires":[["c366d4aa87173d5a"]]},{"id":"1c7d36f25e1f50fc","type":"ui-number-input","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"fb6829bb7da38322","name":"","label":"Setpoint L4","order":3,"width":2,"height":"1","topic":"topic","topicType":"msg","min":0,"max":"10000","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":870,"y":980,"wires":[["197aefef27cafaec"]]},{"id":"197aefef27cafaec","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 4 telegram","func":"global.set(\"mySetPL4PWM\",msg.payload);\nreturn { payload: { \"value\": msg.payload, \"fc\": 6, \"unitid\": 14, \"address\": 3, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":980,"wires":[["e75e860cc6c5abe7"]]},{"id":"4d91d95cec1a80c9","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lys 5","group":"9218f50a17d33476","order":2,"width":2,"height":"4","gtype":"gauge-34","gstyle":"needle","title":"Lys 5","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#646464"},{"from":"1000","color":"#e1e1e1"},{"from":"9000","color":"#ffffff"}],"min":0,"max":"10000","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":490,"y":1080,"wires":[]},{"id":"44ff6546fb41f53a","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"myL5PWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"myL5PWM","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":1080,"wires":[["4d91d95cec1a80c9"]]},{"id":"2374e27bc872630c","type":"ui-number-input","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"9218f50a17d33476","name":"","label":"Setpoint L5","order":3,"width":2,"height":"1","topic":"topic","topicType":"msg","min":0,"max":"10000","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":870,"y":1060,"wires":[["4ddf7e17e4abd5a7"]]},{"id":"4ddf7e17e4abd5a7","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 5 telegram","func":"global.set(\"mySetPL5PWM\",msg.payload);\nreturn { payload: { \"value\": msg.payload, \"fc\": 6, \"unitid\": 15, \"address\": 3, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":1060,"wires":[["e75e860cc6c5abe7"]]},{"id":"d67613c807af0236","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lys 6","group":"ad19bd75069cf79a","order":2,"width":2,"height":"4","gtype":"gauge-34","gstyle":"needle","title":"Lys 6","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#646464"},{"from":"1000","color":"#e1e1e1"},{"from":"9000","color":"#ffffff"}],"min":0,"max":"10000","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":490,"y":1160,"wires":[]},{"id":"d1cd08c9da2704e4","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"myL6PWM","rules":[{"t":"set","p":"payload","pt":"msg","to":"myL6PWM","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":1160,"wires":[["d67613c807af0236"]]},{"id":"5c4ecd35924bb957","type":"ui-number-input","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"ad19bd75069cf79a","name":"","label":"Setpoint L6","order":3,"width":2,"height":"1","topic":"topic","topicType":"msg","min":0,"max":"10000","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":870,"y":1140,"wires":[["5b0455b0262e2b2b"]]},{"id":"5b0455b0262e2b2b","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 6 telegram","func":"global.set(\"mySetPL6PWM\",msg.payload);\nreturn { payload: { \"value\": msg.payload, \"fc\": 6, \"unitid\": 16, \"address\": 3, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1070,"y":1140,"wires":[["e75e860cc6c5abe7"]]},{"id":"7bc2dde05b0ad241","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampe 2 Status LED","group":"96fd324a2cd5c563","order":1,"width":2,"height":"1","label":"","labelPlacement":"left","labelAlignment":"flex-start","states":[{"value":"R","valueType":"str","color":"#ff0000"},{"value":"r","valueType":"str","color":"#af0000"},{"value":"Y","valueType":"str","color":"#ffff00"},{"value":"G","valueType":"str","color":"#00ff00"},{"value":"g","valueType":"str","color":"#329632"},{"value":"ÿ","valueType":"str","color":"#000000"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":540,"y":800,"wires":[]},{"id":"65c7c45fac7f143a","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lys 2","group":"96fd324a2cd5c563","order":2,"width":2,"height":"4","gtype":"gauge-34","gstyle":"needle","title":"Lys 2","units":"units","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#646464"},{"from":"1000","color":"#e1e1e1"},{"from":"9000","color":"#ffffff"}],"min":0,"max":"10000","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":490,"y":840,"wires":[]},{"id":"f73ee60cae72bee0","type":"ui-number-input","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"96fd324a2cd5c563","name":"","label":"Setpoint L2","order":3,"width":"2","height":"1","topic":"topic","topicType":"msg","min":0,"max":"10000","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":870,"y":820,"wires":[["e5ea516ca8eaf91f"]]},{"id":"817d8bfd7062cce3","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Handle mySystemStatusIndikator","func":"/*\nTower Status Summer\n*/\nfunction myStatusSummer(status, newStatus) {\n\n    // Off?\n    if (status == \"ÿ\") {\n        return newStatus;\n    }\n\n    // Alarm?\n    if(newStatus == \"r\") {\n            return \"r\";\n    }\n    if ((newStatus == \"R\") || (status == \"R\") || (status == \"r\")) {\n        if ((status == \"R\") || (status == \"r\")) {\n            return \"r\";\n        } else {\n            return \"R\";\n        }\n    }\n\n    // Warning?\n    if (newStatus == \"y\") {\n        return \"y\";\n    }\n    if ((newStatus == \"Y\") || (status == \"Y\") || (status == \"y\")) {\n        if ((status == \"Y\") || (status == \"y\")) {\n            return \"y\";\n        } else {\n            return \"Y\";\n        }\n    }\n\n    // OK/in progress?\n    if ((newStatus == \"g\") || (status == \"g\"))  {\n        return \"g\";\n    }\n    if (newStatus == \"G\") {\n        return \"G\";\n    }\n\n    // Disabled/Off?\n    if(newStatus == \"ÿ\") {\n        return status;  // return system Status unchanges\n    }\n\n    return \"ÿ\";\n}\n\nlet LampeStatus = \"ÿ\";\nLampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe1Status\"));\nLampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe2Status\"));\nLampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe3Status\"));\nLampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe4Status\"));\nLampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe5Status\"));\nLampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe6Status\"));\n\nif (global.get(\"mySystemStatusIndikator\") != LampeStatus) {\n    global.set(\"mySystemStatusIndikator\", LampeStatus);\n}\n\nreturn { payload: LampeStatus };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":380,"y":660,"wires":[["3e03d92366c84295"]]},{"id":"80dcc40938f7d516","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"System Temperature Watch","info":"","x":200,"y":1680,"wires":[]},{"id":"52cad65716da43ae","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"15","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":210,"y":1760,"wires":[["4689279f4194cf5e"]]},{"id":"4689279f4194cf5e","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Handle Temp. watch","func":"let myOverideMsg = [null,null,null,null,null,null];\nlet MaxDriverTemperatur = global.get(\"MaxDriverTemperatur\");\nlet DriverCoolDownPWM = global.get(\"DriverCoolDownPWM\")*100;\nlet CPU = global.get(\"CPU\");\n\n// Lampe 1\nlet setpoint1 = global.get(\"mySetPL1PWM\");\nif ( (MaxDriverTemperatur < CPU) && (MaxDriverTemperatur<100) ) {\n    if (setpoint1 > DriverCoolDownPWM) {\n        flow.set(\"L1ranHot\",true);\n        myOverideMsg[0] = { payload: {\"value\":DriverCoolDownPWM,\"fc\":6,\"unitid\":11,\"address\":3,\"quantity\":1} }; \n    }\n} else if ((flow.get(\"L1ranHot\") === true) && (MaxDriverTemperatur > (CPU+5)) ) {\n    myOverideMsg[0] = { payload: { \"value\": setpoint1, \"fc\": 6, \"unitid\": 11, \"address\": 3, \"quantity\": 1 } }; \n    flow.set(\"L1ranHot\",false);\n}\n\n// Lampe 2\nlet setpoint2 = global.get(\"mySetPL2PWM\");\nif ((MaxDriverTemperatur < CPU) && (MaxDriverTemperatur < 100)) {\n    if (setpoint2 > DriverCoolDownPWM) {\n        flow.set(\"L2ranHot\", true);\n        myOverideMsg[1] = { payload: { \"value\": DriverCoolDownPWM, \"fc\": 6, \"unitid\": 12, \"address\": 3, \"quantity\": 1 } };\n    }\n} else if( (flow.get(\"L2ranHot\") === true) && (MaxDriverTemperatur > (CPU + 5)) ) {\n    myOverideMsg[1] = { payload: { \"value\": setpoint2, \"fc\": 6, \"unitid\": 12, \"address\": 3, \"quantity\": 1 } };\n    flow.set(\"L2ranHot\", false);\n}\n\n// Lampe 3\nlet setpoint3 = global.get(\"mySetPL3PWM\");\nif ((MaxDriverTemperatur < CPU) && (MaxDriverTemperatur < 100)) {\n    if (setpoint3 > DriverCoolDownPWM) {\n        flow.set(\"L3ranHot\", true);\n        myOverideMsg[2] = { payload: { \"value\": DriverCoolDownPWM, \"fc\": 6, \"unitid\": 13, \"address\": 3, \"quantity\": 1 } };\n    }\n} else if ((flow.get(\"L3ranHot\") === true) && (MaxDriverTemperatur > (CPU + 5)) ) {\n    myOverideMsg[2] = { payload: { \"value\": setpoint3, \"fc\": 6, \"unitid\": 13, \"address\": 3, \"quantity\": 1 } };\n    flow.set(\"L3ranHot\", false);\n}\n\n// Lampe 4\nlet setpoint4 = global.get(\"mySetPL4PWM\");\nif ((MaxDriverTemperatur < CPU) && (MaxDriverTemperatur < 100)) {\n    if (setpoint4 > DriverCoolDownPWM) {\n        flow.set(\"L4ranHot\", true);\n        myOverideMsg[3] = { payload: { \"value\": DriverCoolDownPWM, \"fc\": 6, \"unitid\": 14, \"address\": 3, \"quantity\": 1 } };\n    }\n} else if ((flow.get(\"L4ranHot\") === true) && (MaxDriverTemperatur > (CPU + 5)) ) {\n    myOverideMsg[3] = { payload: { \"value\": setpoint4, \"fc\": 6, \"unitid\": 14, \"address\": 3, \"quantity\": 1 } };\n    flow.set(\"L4ranHot\", false);\n}\n\n// Lampe 5\nlet setpoint5 = global.get(\"mySetPL5PWM\");\nif ((MaxDriverTemperatur < CPU) && (MaxDriverTemperatur < 100)) {\n    if (setpoint5 > DriverCoolDownPWM) {\n        flow.set(\"L5ranHot\", true);\n        myOverideMsg[4] = { payload: { \"value\": DriverCoolDownPWM, \"fc\": 6, \"unitid\": 15, \"address\": 3, \"quantity\": 1 } };\n    }\n} else if ((flow.get(\"L5ranHot\") === true) && (MaxDriverTemperatur > (CPU + 5)) ) {\n    myOverideMsg[4] = { payload: { \"value\": setpoint5, \"fc\": 6, \"unitid\": 15, \"address\": 3, \"quantity\": 1 } };\n    flow.set(\"L5ranHot\", false);\n}\n\n// Lampe 6\nlet setpoint6 = global.get(\"mySetPL6PWM\");\nif ((MaxDriverTemperatur < CPU) && (MaxDriverTemperatur < 100)) {\n    if (setpoint6 > DriverCoolDownPWM) {\n        flow.set(\"L6ranHot\", true);\n        myOverideMsg[5] = { payload: { \"value\": DriverCoolDownPWM, \"fc\": 6, \"unitid\": 16, \"address\": 3, \"quantity\": 1 } };\n    }\n} else if ((flow.get(\"L6ranHot\") === true) && (MaxDriverTemperatur > (CPU + 5)) ) {\n    myOverideMsg[5] = { payload: { \"value\": setpoint6, \"fc\": 6, \"unitid\": 16, \"address\": 3, \"quantity\": 1 } };\n    flow.set(\"L6ranHot\", false);\n}\n\nnode.status({ fill: (((MaxDriverTemperatur < CPU) && (MaxDriverTemperatur < 100)) ? \"red\" : \"green\"), shape: \"ring\", text: \"Green OK, Red Hot\"});\n\nreturn myOverideMsg;","outputs":6,"timeout":0,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is started.\nflow.set(\"L1ranHot\", false);\nflow.set(\"L2ranHot\", false);\nflow.set(\"L3ranHot\", false);\nflow.set(\"L4ranHot\", false);\nflow.set(\"L5ranHot\", false);\nflow.set(\"L6ranHot\", false);\n","finalize":"","libs":[],"x":420,"y":1760,"wires":[["f570d2bc0a4fb1dd"],["f570d2bc0a4fb1dd"],["f570d2bc0a4fb1dd"],["f570d2bc0a4fb1dd"],["f570d2bc0a4fb1dd"],["f570d2bc0a4fb1dd"]]},{"id":"8d44851113f7cd2a","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Logg","info":"","x":130,"y":100,"wires":[]},{"id":"f0cb6585541f6a33","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Send out MQTT data","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3600","crontab":"","once":true,"onceDelay":"15","topic":"","payload":"","payloadType":"date","x":240,"y":160,"wires":[["bcc6acbfbbafa9d5"]]},{"id":"bcc6acbfbbafa9d5","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out MQTT Data Logg","mode":"link","links":["ff04b81d5c38fd80"],"x":395,"y":160,"wires":[]},{"id":"62744e6bd03f61c0","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Setpoint 1","links":["7526ba3cdc721460","b3d841ff2a5da79f"],"x":745,"y":740,"wires":[["c39abfe8ef8a9864"]]},{"id":"da23764e66cc882a","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Setpoint 2","links":["7b45edf016708260","65c98456bb852b52"],"x":745,"y":820,"wires":[["f73ee60cae72bee0"]]},{"id":"ce6adf3bedeaf406","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Setpoint 3","links":["e0d29919df131947","221454fc7a88a20b"],"x":745,"y":900,"wires":[["3f7df1f3e3097b4e"]]},{"id":"b4854091b84a4d86","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Setpoint 4","links":["395464eafa7c018a","595abf0e9bebb09b"],"x":745,"y":980,"wires":[["1c7d36f25e1f50fc"]]},{"id":"a794a54047982e1d","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Setpoint 5","links":["b82fbe23fb632e05","37ba21893069e17a"],"x":745,"y":1060,"wires":[["2374e27bc872630c"]]},{"id":"3f6b42cd52a2161d","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Setpoint 6","links":["cdd65025750dc4f8","45dc9bcf3ced4b6d"],"x":745,"y":1140,"wires":[["5c4ecd35924bb957"]]},{"id":"f6b0cbef0b12395d","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out LAMPE x Feedback","mode":"link","links":["53740e1295c0a793"],"x":1015,"y":1420,"wires":[]},{"id":"e75e860cc6c5abe7","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out LAMPE x Feedback","mode":"link","links":["53740e1295c0a793"],"x":1285,"y":940,"wires":[]},{"id":"f570d2bc0a4fb1dd","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out LAMPE x Feedback","mode":"link","links":["53740e1295c0a793"],"x":595,"y":1760,"wires":[]},{"id":"f727bd199c4fb768","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"AUTO","pin":"17","intype":"down","debounce":"25","read":true,"bcm":true,"x":170,"y":780,"wires":[["e8e645424a931ec2"]]},{"id":"d5e98713ea88e6fd","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN","pin":"18","intype":"down","debounce":"25","read":true,"bcm":true,"x":170,"y":720,"wires":[["fdcfa9fe617e8e09"]]},{"id":"a1ddf172bb91138b","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"ON/OFF","pin":"20","intype":"down","debounce":"25","read":true,"bcm":true,"x":180,"y":640,"wires":[["8846d68d6ad482c9"]]},{"id":"e5eab9d52f7a0086","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE6","pin":"26","intype":"down","debounce":"25","read":true,"bcm":true,"x":180,"y":520,"wires":[["fe12ea7cc2ba245f"]]},{"id":"48249a3cc4ab1fd4","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE5","pin":"25","intype":"down","debounce":"25","read":true,"bcm":true,"x":180,"y":440,"wires":[["7501793c6f97f616"]]},{"id":"039b2e92a9b9d472","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE4","pin":"24","intype":"down","debounce":"25","read":true,"bcm":true,"x":180,"y":360,"wires":[["c3a33ee604dcfeab"]]},{"id":"82d6222d68c28e03","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE3","pin":"23","intype":"down","debounce":"25","read":true,"bcm":true,"x":180,"y":280,"wires":[["a71cc94cf1f9d106"]]},{"id":"f2d93e245ff5cdf7","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE2","pin":"22","intype":"down","debounce":"25","read":true,"bcm":true,"x":180,"y":200,"wires":[["11bd5c78693e02cc"]]},{"id":"6c09cd4ea603abf6","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE1","pin":"21","intype":"down","debounce":"25","read":true,"bcm":true,"x":180,"y":120,"wires":[["f8cad5b4500b8284"]]},{"id":"f8234035c1102617","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH0","pca9685":"07b472da491cc459","channel":"0","payload":"","unit":"percent","onStep":"2000","x":570,"y":1080,"wires":[]},{"id":"232e1bd3c0337d7f","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH1","pca9685":"07b472da491cc459","channel":"1","payload":"","unit":"percent","onStep":"2000","x":570,"y":1120,"wires":[]},{"id":"5e04324166d97655","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH3","pca9685":"07b472da491cc459","channel":"3","payload":"","unit":"percent","onStep":"2000","x":570,"y":1240,"wires":[]},{"id":"838d66358b114764","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH4","pca9685":"07b472da491cc459","channel":"4","payload":"","unit":"percent","onStep":"2000","x":570,"y":1320,"wires":[]},{"id":"0da0d71069b5b7f3","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH5","pca9685":"07b472da491cc459","channel":"5","payload":"","unit":"percent","onStep":"2000","x":570,"y":1360,"wires":[]},{"id":"89657707357da688","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH6","pca9685":"07b472da491cc459","channel":"6","payload":"","unit":"percent","onStep":"2000","x":570,"y":1440,"wires":[]},{"id":"47f7db55ffd4a18e","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH7","pca9685":"07b472da491cc459","channel":"7","payload":"","unit":"percent","onStep":"2000","x":570,"y":1480,"wires":[]},{"id":"b82ef4fac43b42e8","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH8","pca9685":"07b472da491cc459","channel":"8","payload":"","unit":"percent","onStep":"2000","x":570,"y":1560,"wires":[]},{"id":"f1da07013ec03217","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH9","pca9685":"07b472da491cc459","channel":"9","payload":"","unit":"percent","onStep":"2000","x":570,"y":1600,"wires":[]},{"id":"75b3a4915df81ca5","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH10","pca9685":"07b472da491cc459","channel":"10","payload":"","unit":"percent","onStep":"2000","x":570,"y":1680,"wires":[]},{"id":"2a88c7a4d6403b15","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH11","pca9685":"07b472da491cc459","channel":"11","payload":"","unit":"percent","onStep":"2000","x":570,"y":1720,"wires":[]},{"id":"ea7909646c8d0c3d","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH12","pca9685":"07b472da491cc459","channel":"12","payload":"","unit":"percent","onStep":"2000","x":570,"y":1840,"wires":[]},{"id":"8ecd42ee4e431d0c","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH13","pca9685":"07b472da491cc459","channel":"13","payload":"","unit":"percent","onStep":"2000","x":570,"y":1800,"wires":[]},{"id":"41e650e71e591599","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH2","pca9685":"07b472da491cc459","channel":"2","payload":"","unit":"percent","onStep":"2000","x":570,"y":1200,"wires":[]},{"id":"b29b5734ec540eeb","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH14","pca9685":"07b472da491cc459","channel":"14","payload":"","unit":"percent","onStep":"2000","x":570,"y":1880,"wires":[]},{"id":"d8d50b4f0044aad5","type":"inject","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"","props":[{"p":"payload"},{"p":"topic","v":"100","vt":"num"}],"repeat":"","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"100","payloadType":"num","x":250,"y":1020,"wires":[["e69de5184b231a94"]]},{"id":"ee50c16135371407","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":120,"wires":[["97ebbc9b4b847917","18d3e06fd08c190c"]]},{"id":"63474e8ce6190a52","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L1G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1080,"wires":[["f8234035c1102617"]]},{"id":"0559ea9b907b5e87","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L1G","links":["4137d7f599c2445c"],"x":145,"y":1080,"wires":[["63474e8ce6190a52"]]},{"id":"21e843f1141f2812","type":"rpi-gpio out","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"","pin":"16","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":540,"y":2080,"wires":[]},{"id":"c82a7a9cf53b6766","type":"inject","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":2040,"wires":[["85dc1d4df05984f5"]]},{"id":"85dc1d4df05984f5","type":"trigger","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2080,"wires":[["21e843f1141f2812"]]},{"id":"f50714910682243f","type":"rpi-gpio out","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"RESET_uC1","pin":"11","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":550,"y":2240,"wires":[]},{"id":"03211c9df0de1676","type":"inject","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":190,"y":2240,"wires":[["d89cc656e9940fac"]]},{"id":"d89cc656e9940fac","type":"trigger","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2240,"wires":[["f50714910682243f"]]},{"id":"0a09fa988785a4e7","type":"rpi-gpio out","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"RESET_uC2","pin":"6","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":550,"y":2300,"wires":[]},{"id":"3d8a82ff5252af97","type":"inject","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":190,"y":2300,"wires":[["52448ca093f78ede"]]},{"id":"52448ca093f78ede","type":"trigger","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2300,"wires":[["0a09fa988785a4e7"]]},{"id":"bb741bfdc1a28d2f","type":"rpi-gpio out","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"RESET_uC3","pin":"13","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":550,"y":2360,"wires":[]},{"id":"863a43e520dabbb7","type":"inject","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":190,"y":2360,"wires":[["19cc4d5b860d4539"]]},{"id":"19cc4d5b860d4539","type":"trigger","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2360,"wires":[["bb741bfdc1a28d2f"]]},{"id":"a8465dcdc49200ae","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L1R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1120,"wires":[["232e1bd3c0337d7f"]]},{"id":"0b170f7fd451c41e","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L1R","links":["5f1ac4d4ff38773e"],"x":145,"y":1120,"wires":[["a8465dcdc49200ae"]]},{"id":"93089d2796f378bf","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L2G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1200,"wires":[["41e650e71e591599"]]},{"id":"0cb76ba058af601c","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L2R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1240,"wires":[["5e04324166d97655"]]},{"id":"38ebe0311e6bdc2a","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L2G","links":["e7f3c994874fb4b4"],"x":145,"y":1200,"wires":[["93089d2796f378bf"]]},{"id":"a0ce570afed14a8d","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L2R","links":["612bee73e37ec395"],"x":145,"y":1240,"wires":[["0cb76ba058af601c"]]},{"id":"981b138d56a342a1","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L3G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1320,"wires":[["838d66358b114764"]]},{"id":"b92ee649d741c20f","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L3R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1360,"wires":[["0da0d71069b5b7f3"]]},{"id":"b1d68f1fe1b35806","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L3G","links":["2929a0bb661e6a11"],"x":145,"y":1320,"wires":[["981b138d56a342a1"]]},{"id":"05d53d8a3221f9f9","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L3R","links":["d2c18952143856aa"],"x":145,"y":1360,"wires":[["b92ee649d741c20f"]]},{"id":"af1860db05dca164","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L4G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1440,"wires":[["89657707357da688"]]},{"id":"b6bc419e735896a1","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L4R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1480,"wires":[["47f7db55ffd4a18e"]]},{"id":"130d1b309a8fe4b9","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L4G","links":["64bc1288f32443bd"],"x":145,"y":1440,"wires":[["af1860db05dca164"]]},{"id":"41ed58f0641cf7fd","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L4R","links":["8f7e178f5ee2fdf5"],"x":145,"y":1480,"wires":[["b6bc419e735896a1"]]},{"id":"1ea1c5224e43b9ce","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L5G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1560,"wires":[["b82ef4fac43b42e8"]]},{"id":"aa9aba60326e34be","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L5R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1600,"wires":[["f1da07013ec03217"]]},{"id":"ec2d195300a2c034","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L5G","links":["313a5c23a8223fbe"],"x":145,"y":1560,"wires":[["1ea1c5224e43b9ce"]]},{"id":"b0339c65754e972f","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L5R","links":["2d099517c8cd041e"],"x":145,"y":1600,"wires":[["aa9aba60326e34be"]]},{"id":"72d1447dbe82ddab","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L6G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1680,"wires":[["75b3a4915df81ca5"]]},{"id":"90d62064705f73f1","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L6R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1720,"wires":[["2a88c7a4d6403b15"]]},{"id":"e24005ae6dc43ec4","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L6G","links":["1b47f0c787042a33"],"x":145,"y":1680,"wires":[["72d1447dbe82ddab"]]},{"id":"13f274d193788451","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L6R","links":["6222b49c9a44de4d"],"x":145,"y":1720,"wires":[["90d62064705f73f1"]]},{"id":"97ebbc9b4b847917","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe1En","property":"Lampe1En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":630,"y":120,"wires":[["d29d0ecfede9d169"]]},{"id":"3db2309c96c9b9f8","type":"comment","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"Front LED's","info":"","x":190,"y":960,"wires":[]},{"id":"d29d0ecfede9d169","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"mySetPL1PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":120,"wires":[["578692bfdfd312f9"],["9059050ea1a9717c"]]},{"id":"578692bfdfd312f9","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":11,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL1PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":100,"wires":[["01181ddbbe2e4a89"]]},{"id":"9059050ea1a9717c","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":11,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL1PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":140,"wires":[["01181ddbbe2e4a89"]]},{"id":"6da92f3df123c7b4","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out Buttons","mode":"link","links":["53740e1295c0a793"],"x":1175,"y":300,"wires":[]},{"id":"e8515c5a2a53679b","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":200,"wires":[["588a640468dc8aca","18d3e06fd08c190c"]]},{"id":"588a640468dc8aca","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe2En","property":"Lampe2En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":630,"y":200,"wires":[["6cc6a9240dcf8388"]]},{"id":"6cc6a9240dcf8388","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"mySetPL2PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":200,"wires":[["4e2df3c7014b798d"],["b233f13c3c0e9134"]]},{"id":"4e2df3c7014b798d","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":12,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL2PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":180,"wires":[["27b17c5189e23f72"]]},{"id":"b233f13c3c0e9134","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":12,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL2PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":220,"wires":[["27b17c5189e23f72"]]},{"id":"02058f1a917cd966","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":280,"wires":[["298584d94781070a","18d3e06fd08c190c"]]},{"id":"298584d94781070a","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe3En","property":"Lampe3En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":630,"y":280,"wires":[["132243cc94758b3b"]]},{"id":"132243cc94758b3b","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"mySetPL3PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":280,"wires":[["b363c9039d3a2aa1"],["e12d9cd04acd6ddc"]]},{"id":"b363c9039d3a2aa1","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":13,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL3PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":260,"wires":[["5352bf734e1b7dde"]]},{"id":"e12d9cd04acd6ddc","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":13,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL3PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":300,"wires":[["5352bf734e1b7dde"]]},{"id":"5046eaa39240a5bc","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":360,"wires":[["60fde80910767087","18d3e06fd08c190c"]]},{"id":"60fde80910767087","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe4En","property":"Lampe4En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":630,"y":360,"wires":[["9d299c7841f6b7e3"]]},{"id":"9d299c7841f6b7e3","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"mySetPL4PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":360,"wires":[["5064484f529a2a7b"],["6a126674d482ab85"]]},{"id":"5064484f529a2a7b","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":14,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL4PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":340,"wires":[["c1ac9021c1a090c7"]]},{"id":"6a126674d482ab85","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":14,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL4PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":380,"wires":[["c1ac9021c1a090c7"]]},{"id":"2180b854cbe50558","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":440,"wires":[["a8780f5f789efc06","18d3e06fd08c190c"]]},{"id":"a8780f5f789efc06","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe5En","property":"Lampe5En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":630,"y":440,"wires":[["be9d9329642bb66e"]]},{"id":"be9d9329642bb66e","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"mySetPL5PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":440,"wires":[["8ecc145e5b6e6808"],["cb824308557a262c"]]},{"id":"8ecc145e5b6e6808","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":15,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL5PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":420,"wires":[["627ec3cd91405d19"]]},{"id":"cb824308557a262c","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":15,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL5PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":460,"wires":[["627ec3cd91405d19"]]},{"id":"197f53a221848a40","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":520,"wires":[["4c7049ed79454c16","18d3e06fd08c190c"]]},{"id":"4c7049ed79454c16","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe6En","property":"Lampe6En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":630,"y":520,"wires":[["275915e3ae53883a"]]},{"id":"275915e3ae53883a","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"mySetPL6PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":520,"wires":[["c742ff045f3172e6"],["0ca498f4c0687239"]]},{"id":"c742ff045f3172e6","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":16,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL6PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":500,"wires":[["02642554e8f0311a"]]},{"id":"0ca498f4c0687239","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":16,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"mySetPL6PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":940,"y":540,"wires":[["02642554e8f0311a"]]},{"id":"cb5e22bab4fd99a0","type":"link in","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"link in Buzzer","links":["18d3e06fd08c190c"],"x":225,"y":2080,"wires":[["85dc1d4df05984f5"]]},{"id":"18d3e06fd08c190c","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out Buzzer","mode":"link","links":["cb5e22bab4fd99a0"],"x":725,"y":320,"wires":[]},{"id":"fb0b31803db83fad","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":640,"wires":[["18d3e06fd08c190c","bcd16fbf465b0682"]]},{"id":"c866476a4c8e984c","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":490,"y":720,"wires":[["18d3e06fd08c190c","2c756f954bc08d41"]]},{"id":"e8e645424a931ec2","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":780,"wires":[["18d3e06fd08c190c","193bcb010d48fde0"]]},{"id":"86ad116678314ab4","type":"link in","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"link in Reset µC's","links":["7a09ac512fd3f1b4","9aa1eedc3a3b0a77"],"x":215,"y":2200,"wires":[["19cc4d5b860d4539","52448ca093f78ede","d89cc656e9940fac"]]},{"id":"193bcb010d48fde0","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","rules":[{"t":"set","p":"myModeSelector","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":780,"wires":[["bf3011f72f55c205"]]},{"id":"2c756f954bc08d41","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","rules":[{"t":"set","p":"myModeSelector","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":720,"wires":[["bf3011f72f55c205"]]},{"id":"128a7cc3e49f98e8","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in myModeSelector","links":["bf3011f72f55c205","6d33baf83b0ae862","f159c4c478441d87"],"x":155,"y":1820,"wires":[["c9a98c15c2d75c54"]]},{"id":"c9a98c15c2d75c54","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"myModeSelector","func":"if(global.get(\"myModeSelector\") == 1) {\n    return [\n        { payload: 0 },\n        { payload: 100 }\n    ]\n} else {\n    return [\n        { payload: 100 },\n        { payload: 0 }\n    ]\n}\n        ","outputs":2,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1820,"wires":[["8ecd42ee4e431d0c"],["45c1f52baa120d44"]]},{"id":"bf3011f72f55c205","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out myModeSelector","mode":"link","links":["128a7cc3e49f98e8","3152a11911f1f43a"],"x":975,"y":740,"wires":[]},{"id":"fdcfa9fe617e8e09","type":"trigger","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","op1":"0","op2":"","op1type":"num","op2type":"payl","duration":"5","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":340,"y":720,"wires":[["c866476a4c8e984c"]]},{"id":"f8cad5b4500b8284","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":120,"wires":[["ee50c16135371407"]]},{"id":"11bd5c78693e02cc","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":200,"wires":[["e8515c5a2a53679b"]]},{"id":"a71cc94cf1f9d106","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":280,"wires":[["02058f1a917cd966"]]},{"id":"c3a33ee604dcfeab","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":360,"wires":[["5046eaa39240a5bc"]]},{"id":"7501793c6f97f616","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":440,"wires":[["2180b854cbe50558"]]},{"id":"fe12ea7cc2ba245f","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":520,"wires":[["197f53a221848a40"]]},{"id":"8846d68d6ad482c9","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":330,"y":640,"wires":[["fb0b31803db83fad"]]},{"id":"7dac5a5545e70d53","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"Init On","func":"\nreturn 0;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":1880,"wires":[["b29b5734ec540eeb"]]},{"id":"88123d924c6beeb2","type":"link in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link in Manuell/Auto","links":["82755f298050f509"],"x":535,"y":840,"wires":[["1f2b89c78652d669"]]},{"id":"1f2b89c78652d669","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","rules":[{"t":"set","p":"myModeSelector","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":840,"wires":[["6d33baf83b0ae862"]]},{"id":"6d33baf83b0ae862","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out myModeSelector","mode":"link","links":["128a7cc3e49f98e8"],"x":975,"y":840,"wires":[]},{"id":"05f2267785a07392","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out MBIDs","mode":"link","links":["b0f92b3a450f88f8"],"x":1075,"y":580,"wires":[]},{"id":"bcd16fbf465b0682","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"11","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":640,"wires":[["05f2267785a07392","94275ecbace0a38e","48437680f05a6dfc"]]},{"id":"ee9d07f595030620","type":"function","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"12-16","func":"node.status(msg.payload+1);\nif(msg.payload < 16) {\n    return { payload: msg.payload+1};\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":970,"y":640,"wires":[["05f2267785a07392","94275ecbace0a38e","48437680f05a6dfc"]]},{"id":"94275ecbace0a38e","type":"delay","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","pauseType":"delay","timeout":"10","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":820,"y":640,"wires":[["ee9d07f595030620"]]},{"id":"eb89eeb130ec345d","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in OnOffLED","links":["f04a9d414327e70d"],"x":465,"y":1920,"wires":[["b29b5734ec540eeb"]]},{"id":"48437680f05a6dfc","type":"trigger","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","op1":"100","op2":"0","op1type":"num","op2type":"str","duration":"9","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":1060,"y":700,"wires":[["f04a9d414327e70d"]]},{"id":"f04a9d414327e70d","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out OnOffLED","mode":"link","links":["eb89eeb130ec345d"],"x":1115,"y":780,"wires":[]},{"id":"c9a7edf8de9c9a12","type":"mqtt in","z":"38519fcf62fceae2","g":"c9d74377db386d63","name":"","topic":"","qos":"2","datatype":"auto-detect","broker":"2fc0f99eeddfe6d3","nl":false,"rap":true,"rh":0,"inputs":1,"x":370,"y":140,"wires":[[]]},{"id":"2a35df0d9aac55b9","type":"comment","z":"38519fcf62fceae2","g":"c9d74377db386d63","name":"Connect","info":"","x":120,"y":80,"wires":[]},{"id":"a7adcd8a1f04f80c","type":"inject","z":"38519fcf62fceae2","g":"c9d74377db386d63","name":"Connect to Broker","props":[{"p":"action","v":"connect","vt":"str"},{"p":"broker","v":"{\"broker\":\"128.199.38.63\",\"port\":1883,\"username\":\"bio3000\",\"password\":\"Joy53606\"}","vt":"json"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","x":190,"y":140,"wires":[["c9a7edf8de9c9a12"]]},{"id":"77bceff0b8fd48b4","type":"comment","z":"38519fcf62fceae2","name":"Ping med Posisjon","info":"","x":150,"y":260,"wires":[]},{"id":"1e23e26fe9b3e9c8","type":"function","z":"38519fcf62fceae2","name":"Format geometry-telegram","func":"let myTopic = \"data/\" + global.get(\"HWaddr\");\nlet myPayload = {};\nlet myGeometric = {};\nlet myLat = global.get(\"myLat\");\nlet myLon = global.get(\"myLon\");\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyGeometric[\"type\"] = \"Point\"; // myGeo.geometry.type;\nmyGeometric[\"coordinates\"] = [myLon, myLat];  // myGeo.geometry.coordinate;\n\nmyPayload[\"geometry\"] = myGeometric;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":320,"wires":[["883e86dcfaa6d5a5"]]},{"id":"14cf84e811a02a85","type":"link in","z":"38519fcf62fceae2","name":"link in Geometry-telegram","links":["ae96ad273b218805","0802a0b44bdddb3c"],"x":185,"y":320,"wires":[["1e23e26fe9b3e9c8"]]},{"id":"883e86dcfaa6d5a5","type":"mqtt out","z":"38519fcf62fceae2","name":"","topic":"","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"2fc0f99eeddfe6d3","x":590,"y":460,"wires":[]},{"id":"941e97387d6bf838","type":"inject","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"","payloadType":"date","x":150,"y":800,"wires":[["ad1f6f9242f22b62"]]},{"id":"ad1f6f9242f22b62","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Set topic: ktas_cmd/<HWaddr>","func":"let myTopic = \"ktas_cmd/\" + global.get(\"HWaddr\");\n\nnode.status({fill:\"green\",shape:\"ring\",text:myTopic});\n\nreturn {\"action\": \"subscribe\", \"topic\": myTopic};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":210,"y":860,"wires":[["9a1bad8c603cc5f4"]]},{"id":"9a1bad8c603cc5f4","type":"mqtt in","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"","topic":"","qos":"2","datatype":"auto-detect","broker":"2fc0f99eeddfe6d3","nl":false,"rap":true,"rh":0,"inputs":1,"x":430,"y":860,"wires":[["9096739f9495f3d7","e5f1eea9521533bd"]]},{"id":"9096739f9495f3d7","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Parse incoming System data","func":"let getStatus = null;\nlet getConfig = null;\nlet getPos = null;\nlet setReset = null;\nlet setRunFWUpgrade = null;\nlet setLat = null;\nlet setLon = null;\nlet setMAN = null;\nlet setAUTO = null;\nlet planleggerTabell = null;\n\n\n// Command (cmd)\nif ((msg.payload.cmd === \"Status\") || (msg.payload.cmd === \"status\") || (msg.payload.cmd === \"STATUS\")) {\n    getStatus = true;\n} else if ((msg.payload.cmd === \"Konfig\") || (msg.payload.cmd === \"konfig\") || (msg.payload.cmd === \"KONFIG\")\n    || (msg.payload.cmd === \"Config\") || (msg.payload.cmd === \"config\") || (msg.payload.cmd === \"CONFIG\")) {\n    getConfig = true;\n} else if ((msg.payload.cmd === \"Pos\") || (msg.payload.cmd === \"pos\") || (msg.payload.cmd === \"POS\")\n    || (msg.payload.cmd === \"gps\") || (msg.payload.cmd === \"GPS\")) {\n    getPos = true;\n} else if ((msg.payload.cmd === \"Reset\") || (msg.payload.cmd === \"reset\") || (msg.payload.cmd === \"RESET\")) {\n    setReset = true;\n} else if ((msg.payload.cmd === \"RunFWUpgrade\") || (msg.payload.cmd === \"runfwupgrade\") || (msg.payload.cmd === \"Run FW upgrade\") || (msg.payload.cmd === \"RUNFWUPGRADE\")) {\n    setRunFWUpgrade = true;\n} else if ((msg.payload.cmd === \"MAN\") || (msg.payload.cmd === \"man\") || (msg.payload.cmd === \"Manuell\") || (msg.payload.cmd === \"manuell\") ) {\n    setMAN = true;\n} else if ((msg.payload.cmd === \"AUTO\") || (msg.payload.cmd === \"auto\") || (msg.payload.cmd === \"Auto\") ) {\n    setAUTO = true;\n}\n\n\n// Lat\nif (msg.payload.Lat !== undefined) {\n    setLat = msg.payload.Lat;\n}\n\n// Lon\nif (msg.payload.Lon !== undefined) {\n    setLon = msg.payload.Lon;\n}\n\n// planlegger Tabell\nif (msg.payload.planleggerTabell !== undefined) {\n    if (Array.isArray(msg.payload.planleggerTabell)) {\n        if ( (msg.payload.planleggerTabell.length === 0)\n          || ( (msg.payload.planleggerTabell[0].Tid !== undefined) \n            && (msg.payload.planleggerTabell[0].Lys !== undefined) \n            && (msg.payload.planleggerTabell[0].Lamper !== undefined) ) \n        ) {\n            planleggerTabell = msg.payload.planleggerTabell;\n        }\n    }\n}\n\nreturn [\n    ( getStatus === null ? null : { payload: getStatus } ),\n    ( getConfig === null ? null : { payload: getConfig } ),\n    ( getPos === null ? null : { payload: getPos } ),\n    ( setReset === null ? null : { payload: setReset } ),\n    ( setRunFWUpgrade === null ? null : { payload: setRunFWUpgrade } ),\n    ( msg.payload.Stigetid === undefined ? null : { payload: msg.payload.Stigetid } ),\n    ( msg.payload.Dimmetid === undefined ? null : { payload: msg.payload.Dimmetid } ),\n    ( msg.payload.MaxDriverTemperatur === undefined ? null : { payload: msg.payload.MaxDriverTemperatur } ),\n    ( msg.payload.DriverCoolDownPWM === undefined ? null : { payload: msg.payload.DriverCoolDownPWM } ),\n    ( setLat === null ? null : { payload: setLat } ),\n    ( setLon === null ? null : { payload: setLon } ),\n    ( setMAN === null ? null : { payload: 0 } ),\n    ( setAUTO === null ? null : { payload: 1 } ),\n    ( planleggerTabell === null ? null : { payload: planleggerTabell } )\n];","outputs":14,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1040,"wires":[["d1d8b48c3480aaf7"],["ca05588391bf5d1a"],["ae96ad273b218805"],["058ab1a67d75cbbb"],["8c50d6755452ae51"],["2fe46eac7c22eae5"],["8ca4edc11fb4728d"],["b4d917b0862ca05d"],["b8b4950c74be40ab"],["0b857c92470a61a0"],["c75d7d77b0f5f25e"],["211e2a685b25cddf"],["211e2a685b25cddf"],["5aa5ed662bbbed2c"]]},{"id":"046a02568bf18ef0","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Set Lampe x Enable","func":"node.status({'text': \"Lampe \" + msg.payload.Lampe + \": \" + msg.payload.Enable});\nreturn [ \n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==1)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==2)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==3)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==4)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==5)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==6)) ? { payload: msg.payload.Enable}:null)\n];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1040,"y":1660,"wires":[["8d828dadf12808fb"],["b5fec1b6a60c2a7f"],["ef1d815e8d0197ce"],["f7ecdac73d72b68e"],["e16a8ac076e9c512"],["960b91115ecf9ca9"]]},{"id":"8d828dadf12808fb","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe1En","mode":"link","links":["ed1b54b719e8bd37"],"x":1195,"y":1600,"wires":[]},{"id":"b5fec1b6a60c2a7f","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe2En","mode":"link","links":["7c39f660c1ae3e9b"],"x":1235,"y":1620,"wires":[]},{"id":"ef1d815e8d0197ce","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe3En","mode":"link","links":["72d41e10e83b7747"],"x":1275,"y":1640,"wires":[]},{"id":"f7ecdac73d72b68e","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe4En","mode":"link","links":["538f53838f1c56ee"],"x":1275,"y":1680,"wires":[]},{"id":"e16a8ac076e9c512","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe5En","mode":"link","links":["aebd9e4b4d167fb4"],"x":1235,"y":1700,"wires":[]},{"id":"960b91115ecf9ca9","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe6En","mode":"link","links":["0fd156bd44369080"],"x":1195,"y":1720,"wires":[]},{"id":"ae96ad273b218805","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out GNSS","mode":"link","links":["14cf84e811a02a85"],"x":955,"y":880,"wires":[]},{"id":"cdc566247c5fbc4c","type":"link in","z":"38519fcf62fceae2","name":"link in Oppdater konfigurasjon","links":["ca05588391bf5d1a","0802a0b44bdddb3c"],"x":185,"y":460,"wires":[["bc65bd0441382528"]]},{"id":"bc65bd0441382528","type":"function","z":"38519fcf62fceae2","name":"Oppdater konfigurasjon","func":"var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myConfig = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\nmyPayload[\"NodeRedFW\"] = global.get(\"FWversion\");\n\nmyConfig[\"hostname\"] = global.get(\"hostname\");\nmyConfig[\"Stigetid\"] = global.get(\"Stigetid\");\nmyConfig[\"Dimmetid\"] = global.get(\"Dimmetid\");\nmyConfig[\"MaxDriverTemp\"] = global.get(\"MaxDriverTemperatur\");\nmyConfig[\"DriverCoolDownPWM\"] = global.get(\"DriverCoolDownPWM\");\nmyConfig[\"Lampe1En\"] = global.get(\"Lampe1En\");\nmyConfig[\"Lampe2En\"] = global.get(\"Lampe2En\");\nmyConfig[\"Lampe3En\"] = global.get(\"Lampe3En\");\nmyConfig[\"Lampe4En\"] = global.get(\"Lampe4En\");\nmyConfig[\"Lampe5En\"] = global.get(\"Lampe5En\");\nmyConfig[\"Lampe6En\"] = global.get(\"Lampe6En\");\nmyConfig[\"planleggerTabell\"] = global.get(\"planleggerTabell\");\n\nmyPayload[\"config\"] = myConfig;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":460,"wires":[["883e86dcfaa6d5a5"]]},{"id":"ca05588391bf5d1a","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Get Config","mode":"link","links":["cdc566247c5fbc4c"],"x":955,"y":840,"wires":[]},{"id":"68f50cf5dd8c8649","type":"comment","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Prosess inndata","info":"","x":140,"y":740,"wires":[]},{"id":"0b5b51e133119388","type":"comment","z":"38519fcf62fceae2","name":"Send konfigurasjonsendringer","info":"","x":180,"y":400,"wires":[]},{"id":"8a7d7ddbfcf9ee62","type":"comment","z":"38519fcf62fceae2","name":"Send prosessdata","info":"","x":150,"y":540,"wires":[]},{"id":"ff04b81d5c38fd80","type":"link in","z":"38519fcf62fceae2","name":"link in Oppdater prosessdata","links":["d1d8b48c3480aaf7","bcc6acbfbbafa9d5"],"x":185,"y":600,"wires":[["aabc4b73c43590e4"]]},{"id":"aabc4b73c43590e4","type":"function","z":"38519fcf62fceae2","name":"Oppdater prosessdata","func":"var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myStatus = (global.get(\"myModeSelector\") == 0 ? \"M\" : \"A\") + global.get(\"mySystemStatusIndikator\");  // Status[0] = <A,O,M> (Auto, Off, Manuell), Status[1] = <ÿ,G,g,Y,y,R,r> (Off,Grønn,grønnblink,Gul,gulblink,Rød, rødblink)\nvar mySystem = {};\nvar myData = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\n//mySystem[\"driverTemp\"] = global.get(\"DriverTemperatur\");\nmySystem[\"CPU\"] = global.get(\"CPU\");\nmySystem[\"CardTemp\"] = parseFloat(global.get(\"CardTemp\"));\nmySystem[\"CardHum\"] = parseFloat(global.get(\"CardHum\"));\nmySystem[\"systemTemp\"] = parseFloat(global.get(\"systemTemp\"));\n\n\nmyPayload[\"status\"] = myStatus;\n\nmyData[\"System\"] = mySystem;\nmyData[\"Lampe1Data\"] = global.get(\"Lampe1Data\");\nmyData[\"Lampe2Data\"] = global.get(\"Lampe2Data\");\nmyData[\"Lampe3Data\"] = global.get(\"Lampe3Data\");\nmyData[\"Lampe4Data\"] = global.get(\"Lampe4Data\");\nmyData[\"Lampe5Data\"] = global.get(\"Lampe5Data\");\nmyData[\"Lampe6Data\"] = global.get(\"Lampe6Data\");\n\nmyPayload[\"data\"] = myData;\n\nlet d = new Date(Date.now());\nlet myFilename = '/home/pi/logg/' + d.getFullYear() + '/' + (d.getMonth() + 1) + '.txt';\n\nreturn { \"topic\": myTopic, \"payload\": myPayload, \"filename\": myFilename };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":340,"y":600,"wires":[["883e86dcfaa6d5a5"]]},{"id":"d1d8b48c3480aaf7","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Get Status","mode":"link","links":["ff04b81d5c38fd80"],"x":955,"y":800,"wires":[]},{"id":"9aa1eedc3a3b0a77","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Reset","mode":"link","links":["86ad116678314ab4"],"x":955,"y":920,"wires":[]},{"id":"daba8a8939fa1277","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Reboot","mode":"link","links":["7ba5e248b170868f"],"x":1175,"y":900,"wires":[]},{"id":"9be447f74a5659c4","type":"delay","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":1060,"y":900,"wires":[["daba8a8939fa1277"]]},{"id":"8c50d6755452ae51","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out FWUpdate","mode":"link","links":["f815e316967f8aad"],"x":955,"y":980,"wires":[]},{"id":"2ce6dec427f1cd19","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Set Lampe x PWM","func":"node.status({'text': msg.payload.Lampe + \" \" + msg.payload.setPWM});\nreturn [ \n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==1)) ? { payload: msg.payload.setPWM} : null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==2)) ? { payload: msg.payload.setPWM} : null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==3)) ? { payload: msg.payload.setPWM} : null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==4)) ? { payload: msg.payload.setPWM} : null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==5)) ? { payload: msg.payload.setPWM} : null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==6)) ? { payload: msg.payload.setPWM} : null)\n];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1030,"y":1500,"wires":[["7526ba3cdc721460"],["7b45edf016708260"],["e0d29919df131947"],["395464eafa7c018a"],["b82fbe23fb632e05"],["cdd65025750dc4f8"]]},{"id":"7526ba3cdc721460","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Setpoint 1","mode":"link","links":["62744e6bd03f61c0"],"x":1175,"y":1440,"wires":[]},{"id":"7b45edf016708260","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Setpoint 2","mode":"link","links":["da23764e66cc882a"],"x":1215,"y":1460,"wires":[]},{"id":"e0d29919df131947","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Setpoint 3","mode":"link","links":["ce6adf3bedeaf406"],"x":1255,"y":1480,"wires":[]},{"id":"395464eafa7c018a","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Setpoint 4","mode":"link","links":["b4854091b84a4d86"],"x":1255,"y":1520,"wires":[]},{"id":"b82fbe23fb632e05","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Setpoint 5","mode":"link","links":["a794a54047982e1d"],"x":1215,"y":1540,"wires":[]},{"id":"cdd65025750dc4f8","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Setpoint 6","mode":"link","links":["3f6b42cd52a2161d"],"x":1175,"y":1560,"wires":[]},{"id":"c75d7d77b0f5f25e","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Set Lon","mode":"link","links":["9268ccab22454e4c"],"x":955,"y":1220,"wires":[]},{"id":"0b857c92470a61a0","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out set Lat","mode":"link","links":["2739f21be7eddf68"],"x":955,"y":1180,"wires":[]},{"id":"2fe46eac7c22eae5","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Stigetid","mode":"link","links":["064ac8a0b9a446f5"],"x":955,"y":1020,"wires":[]},{"id":"8ca4edc11fb4728d","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Dimmetid","mode":"link","links":["0b989a0b56f00f63"],"x":955,"y":1060,"wires":[]},{"id":"b4d917b0862ca05d","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out MaxDriverTemperatur","mode":"link","links":["43735253926b7632"],"x":955,"y":1100,"wires":[]},{"id":"b8b4950c74be40ab","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out DriverCoolDownPWM","mode":"link","links":["a82d45d441548f1c"],"x":955,"y":1140,"wires":[]},{"id":"02f057e13ba0aa0f","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out MBID","mode":"link","links":["b0f92b3a450f88f8"],"x":955,"y":1760,"wires":[]},{"id":"e5f1eea9521533bd","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Parse incoming Lampe data","func":"let Lampe = null;\nlet setPWM = null;\nlet setEnable = null;\nlet setMBID = null;\nlet setREP0E = null;\nlet sendMB6 = null;\n\n\n// Lampe?\nif ((msg.payload.Lampe !== undefined) && (msg.payload.Lampe >= 0) && (msg.payload.Lampe <= 6)) {\n    Lampe = msg.payload.Lampe;\n    if ((msg.payload.setPWM !== undefined) && (msg.payload.setPWM >= 0) && (msg.payload.setPWM <= 10000)) {\n        setPWM = msg.payload.setPWM;\n    }\n    if (msg.payload.Enable !== undefined) {\n        setEnable = msg.payload.Enable;\n    }\n    if (msg.payload.enable !== undefined) {\n        setEnable = msg.payload.enable;\n    }\n    if (msg.payload.ENABLE !== undefined) {\n        setEnable = msg.payload.ENABLE;\n    }\n    // payload: { \"value\": msg.payload, \"fc\": 6, \"unitid\": 11, \"address\": 3, \"quantity\": 1 }\n    if ( (msg.payload.Lampe > 0) && (msg.payload.value !== undefined) && (msg.payload.fc !== undefined) && (msg.payload.address !== undefined) ) {\n        if((msg.payload.value >= 0) && (msg.payload.value <= 65535) && (msg.payload.fc == 6) && (msg.payload.address > 0) && (msg.payload.address < 250) ) {\n            sendMB6 = msg.payload.fc;\n        }\n    }\n\n}\n\n// MODBUS ID\nif (msg.payload.MBID !== undefined) {\n  if ((msg.payload.MBID > 10) && (msg.payload.MBID < 17) ) {\n    setMBID = msg.payload.MBID;\n  }\n}\n\n// REP0E - Repair 0-error\nif (msg.payload.REP0E !== undefined) {\n  if ((msg.payload.REP0E > 10) && (msg.payload.REP0E < 17) ) {\n    setREP0E = msg.payload.REP0E;\n  }\n}\n\nreturn [\n    ( setPWM === null ? null : { payload: { \"Lampe\": Lampe, \"setPWM\": setPWM } }),\n    ( setEnable === null ? null : { payload: { \"Lampe\": Lampe, \"Enable\": setEnable } } ),\n    ( setMBID === null ? null : { payload: setMBID } ),\n    ( sendMB6 === null ? null : { payload: { \"value\": msg.payload.value, \"fc\": 6, \"unitid\": 10+msg.payload.Lampe, \"address\": msg.payload.address, \"quantity\": 1 } } ),\n    ( setREP0E === null ? null : { payload: setREP0E } )\n];","outputs":5,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":420,"y":1500,"wires":[["2ce6dec427f1cd19"],["046a02568bf18ef0"],["02f057e13ba0aa0f"],["409f01307431e555"],["bb9e550cf9bde718"]]},{"id":"b5d9b643d3018dc5","type":"change","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"","rules":[{"t":"set","p":"myModeSelector","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1060,"y":1260,"wires":[["f159c4c478441d87"]]},{"id":"f159c4c478441d87","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out myModeSelector","mode":"link","links":["128a7cc3e49f98e8","3152a11911f1f43a"],"x":1235,"y":1260,"wires":[]},{"id":"409f01307431e555","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out MODBUS fc 6","mode":"link","links":["53740e1295c0a793"],"x":955,"y":1800,"wires":[]},{"id":"5aa5ed662bbbed2c","type":"set-shared-state","z":"38519fcf62fceae2","g":"f89014669a905f2e","state":"ee932add205df226","name":"planleggerTabell","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":1020,"y":1300,"wires":[]},{"id":"bb9e550cf9bde718","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Repair 0-error","mode":"link","links":["49d3ca1e016d78f6"],"x":955,"y":1840,"wires":[]},{"id":"c4c8967622b3601a","type":"modbus-flex-getter","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"","showStatusActivities":false,"showErrors":true,"showWarnings":true,"logIOActivities":false,"server":"974608b50ff5df9c","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"delayOnStart":false,"startDelayTime":"","x":190,"y":240,"wires":[["f166ceed6221b02f","bbdff27ebf33aa92"],[]]},{"id":"f166ceed6221b02f","type":"modbus-response","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"","registerShowMax":20,"x":430,"y":220,"wires":[]},{"id":"fb617cf78d913d32","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"100 - L1, L2","func":"let V = msg.payload[2]*3.3/4096*88/3;\nlet A1 = (msg.payload[3]-2048)*3.3/4096 / 0.066;\nlet A2 = (2048-msg.payload[4])*3.3/4096 / 0.066;\nlet L1L2 = V.toFixed(1) + \"V, L1: \" + A1.toFixed(1) + \"A, L2: \" + A2.toFixed(1) + \"A\";\nglobal.set(\"L1L2\",L1L2); \nnode.status({text: L1L2});\nreturn { payload: L1L2};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":1280,"wires":[["5f4a94f084b1069f"]]},{"id":"d58b167b3d633716","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"101 - L3, L4","func":"let V = msg.payload[2]*3.3/4096*88/3;\nlet A1 = (msg.payload[3]-2048)*3.3/4096 / 0.066;\nlet A2 = (2048-msg.payload[4])*3.3/4096 / 0.066;\nlet L3L4 = V.toFixed(1) + \"V, L3: \" + A1.toFixed(1) + \"A, L4: \" + A2.toFixed(1) + \"A\";\nglobal.set(\"L3L4\", L3L4);\nnode.status({ text: L3L4 });\nreturn { payload: L3L4};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":1340,"wires":[["849cf52aa2a378fa"]]},{"id":"bacc3dc050c302ea","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"102 - L5, L6","func":"let V = msg.payload[2]*3.3/4096*88/3;\nlet A1 = (msg.payload[3]-2048)*3.3/4096 / 0.066;\nlet A2 = (2048-msg.payload[4])*3.3/4096 / 0.066;\nlet L5L6 = V.toFixed(1) + \"V, L5: \" + A1.toFixed(1) + \"A, L6: \" + A2.toFixed(1) + \"A\";\nglobal.set(\"L5L6\", L5L6);\nnode.status({ text: L5L6 });\nreturn { payload: L5L6};\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":390,"y":1400,"wires":[["383de0c50c72aa55"]]},{"id":"a70267820ff566f5","type":"link in","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link in MODBUS READ","links":["0bcc47a9e661021e","c9f3fd99e28b794a"],"x":185,"y":160,"wires":[["c4c8967622b3601a"]]},{"id":"f9a488d9ce1e31f1","type":"comment","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"MODBUS Read nodes","info":"","x":160,"y":80,"wires":[]},{"id":"6c126e970403fcff","type":"modbus-queue-info","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"","topic":"","unitid":1,"queueReadIntervalTime":1000,"lowLowLevel":"10","lowLevel":"20","highLevel":"30","highHighLevel":"40","server":"974608b50ff5df9c","errorOnHighLevel":true,"showStatusActivities":true,"updateOnAllQueueChanges":false,"updateOnAllUnitQueues":true,"x":870,"y":1720,"wires":[["9f5dbe8983d70841"]]},{"id":"8823cb8729815af4","type":"catch","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Modbus timeout handler","scope":["c4c8967622b3601a","40e13278d3e52632"],"uncaught":false,"x":180,"y":1720,"wires":[["a361919615a1cc26"]]},{"id":"2e98ae0def3f8971","type":"debug","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"debug 4","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":200,"y":2000,"wires":[]},{"id":"9f5dbe8983d70841","type":"debug","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"debug 2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1060,"y":1720,"wires":[]},{"id":"bbdff27ebf33aa92","type":"switch","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Switch on unitId","property":"unitId","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"12","vt":"num"},{"t":"eq","v":"13","vt":"num"},{"t":"eq","v":"14","vt":"num"},{"t":"eq","v":"15","vt":"num"},{"t":"eq","v":"16","vt":"num"},{"t":"eq","v":"100","vt":"num"},{"t":"eq","v":"101","vt":"num"},{"t":"eq","v":"102","vt":"num"}],"checkall":"true","repair":false,"outputs":9,"x":180,"y":760,"wires":[["732b642fa86bb6fe"],["cfa67075a0bda41d"],["55296d6f8737b7cd"],["2888a749934b883f"],["742b42c3e8451df2"],["59fb85a7f74023e9"],["fb617cf78d913d32"],["d58b167b3d633716"],["bacc3dc050c302ea"]]},{"id":"732b642fa86bb6fe","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 1 Feedback","func":"if (msg.payload.length == 45) {\n\n    // Store Data\n    let LampeData = {};\n    LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n    LampeData[\"status\"] = global.get(\"Lampe1Status\");\n    LampeData[\"data\"] = msg.payload;\n    global.set(\"Lampe1Data\", LampeData);\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n    global.set(\"myL1PWM\",sum);\n\n    if (global.get(\"mySetPL1PWM\") === undefined) {\n        global.set(\"mySetPL1PWM\", msg.payload[2]);\n    }\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9]/1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\"  + msg.payload[6] + \"%\";\n    node.status({ text: status+ \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":420,"wires":[["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["b5664075264aa2a3"],["a7e8e53a7d9fe513"]]},{"id":"afc0124ae2b4de98","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"43f83edaea29acf4","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":400,"wires":[[]]},{"id":"40e13278d3e52632","type":"modbus-flex-write","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"","showStatusActivities":true,"showErrors":true,"showWarnings":true,"server":"974608b50ff5df9c","emptyMsgOnFail":false,"keepMsgProperties":false,"delayOnStart":false,"startDelayTime":"","x":330,"y":1560,"wires":[["30b8cc7f00513770"],[]]},{"id":"30b8cc7f00513770","type":"modbus-response","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"","registerShowMax":20,"x":550,"y":1540,"wires":[]},{"id":"2e90502c9e60db36","type":"switch","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Switch on unitId","property":"unitId","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"12","vt":"num"},{"t":"eq","v":"13","vt":"num"},{"t":"eq","v":"14","vt":"num"},{"t":"eq","v":"15","vt":"num"},{"t":"eq","v":"16","vt":"num"},{"t":"eq","v":"100","vt":"num"},{"t":"eq","v":"101","vt":"num"},{"t":"eq","v":"102","vt":"num"}],"checkall":"true","repair":false,"outputs":9,"x":400,"y":1900,"wires":[["5a4e37f3e88c5dc8"],["2fb6d54a5ff9118e"],["42834b135f7c5ec4"],["9a508b6b9eb43835"],["3808f26374d3410d"],["bd37d092edde9951"],[],[],[]]},{"id":"8d65543ae2db6c45","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 1","mode":"link","links":["2af26b7c25ef445d"],"x":925,"y":1840,"wires":[]},{"id":"1efcdb7b91e37854","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 2","mode":"link","links":["6b08cff41e317d5e"],"x":925,"y":1880,"wires":[]},{"id":"7e55e72f2d47252a","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 3","mode":"link","links":["c7acdc1e62c55259"],"x":925,"y":1920,"wires":[]},{"id":"a361919615a1cc26","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"YELLOW respons","func":"msg.payload = 257;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":190,"y":1900,"wires":[["2e90502c9e60db36","2e98ae0def3f8971"]]},{"id":"cc7b0aa5ef28e9a2","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 4","mode":"link","links":["a42e3850811c7534"],"x":925,"y":1960,"wires":[]},{"id":"97609632057df6e7","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 6","mode":"link","links":["7f9235d1cda708ed"],"x":925,"y":2040,"wires":[]},{"id":"0164c672efb85f86","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 5","mode":"link","links":["974d5c3c66ce7aae"],"x":925,"y":2000,"wires":[]},{"id":"a7e8e53a7d9fe513","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 1","mode":"link","links":["2af26b7c25ef445d"],"x":1015,"y":480,"wires":[]},{"id":"d674df4c1bc373ff","type":"comment","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"MODBUS Write nodes","info":"","x":160,"y":1500,"wires":[]},{"id":"53740e1295c0a793","type":"link in","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link in MODBUS WRITE","links":["f6b0cbef0b12395d","2a1efc1f283b12c7","6da92f3df123c7b4","036fe9570bd1280c","e75e860cc6c5abe7","f570d2bc0a4fb1dd","298fe60c58734dc2","409f01307431e555","52b60206a5161ddd","3e0ea15432e39316"],"x":185,"y":1600,"wires":[["40e13278d3e52632"]]},{"id":"cfa67075a0bda41d","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 2 Feedback","func":"if (msg.payload.length == 45) {\n\n    // Store Data\n    let LampeData = {};\n    LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n    LampeData[\"data\"] = msg.payload;\n    LampeData[\"status\"] = global.get(\"Lampe2Status\"); \n    global.set(\"Lampe2Data\", LampeData);\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n    global.set(\"myL2PWM\", sum);\n\n    if (global.get(\"mySetPL2PWM\") === undefined) {\n        global.set(\"mySetPL2PWM\", msg.payload[2]);\n    }\n\n    let status = 0;\n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":600,"wires":[["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["bd62395d57ec59e0"],["e66011d888adee35"]]},{"id":"b9584062e67cb6ab","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"3851858da9cbf137","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":580,"wires":[[]]},{"id":"e66011d888adee35","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 2","mode":"link","links":["6b08cff41e317d5e"],"x":1055,"y":660,"wires":[]},{"id":"55296d6f8737b7cd","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 3 Feedback","func":"if (msg.payload.length == 45) {\n\n    // Store Data\n    let LampeData = {};\n    LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n    LampeData[\"data\"] = msg.payload;\n    LampeData[\"status\"] = global.get(\"Lampe3Status\");\n    global.set(\"Lampe3Data\", LampeData);\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n    global.set(\"myL3PWM\",sum);\n\n    if (global.get(\"mySetPL3PWM\") === undefined) {\n        global.set(\"mySetPL3PWM\", msg.payload[2]);\n    }\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":780,"wires":[["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["17d4dd54afa63911"],["d3f9f89d687df097"]]},{"id":"65baaacb9b852b56","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"8154b0c2d333ea5c","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":740,"wires":[[]]},{"id":"d3f9f89d687df097","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 3","mode":"link","links":["c7acdc1e62c55259"],"x":1055,"y":820,"wires":[]},{"id":"2888a749934b883f","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 4 Feedback","func":"if (msg.payload.length == 45) {\n\n    // Store Data\n    let LampeData = {};\n    LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n    LampeData[\"data\"] = msg.payload;\n    LampeData[\"status\"] = global.get(\"Lampe4Status\");\n    global.set(\"Lampe4Data\", LampeData);\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n    global.set(\"myL4PWM\",sum);\n\n    if (global.get(\"mySetPL4PWM\") === undefined) {\n        global.set(\"mySetPL4PWM\", msg.payload[2]);\n    }\n\n    let status = 0;\n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":960,"wires":[["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["36fa1f72a2ad9ff9"],["ce1f91caaed2df6d"]]},{"id":"fff7c6bcef83fb07","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"7e38435dec7f5cbb","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":920,"wires":[[]]},{"id":"ce1f91caaed2df6d","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 4","mode":"link","links":["a42e3850811c7534"],"x":1055,"y":1000,"wires":[]},{"id":"742b42c3e8451df2","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 5 Feedback","func":"if (msg.payload.length == 45) {\n\n    // Store Data\n    let LampeData = {};\n    LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n    LampeData[\"data\"] = msg.payload;\n    LampeData[\"status\"] = global.get(\"Lampe5Status\");\n    global.set(\"Lampe5Data\", LampeData);\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n    global.set(\"myL5PWM\", sum);\n\n    if (global.get(\"mySetPL5PWM\") === undefined) {\n        global.set(\"mySetPL5PWM\", msg.payload[2]);\n    }\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":1140,"wires":[["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["33a9e62e909c32de"],["f14a1cfc04b3e96a"]]},{"id":"8648574ea83e3466","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"bdd1ccedc4b38339","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":1100,"wires":[[]]},{"id":"f14a1cfc04b3e96a","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 5","mode":"link","links":["974d5c3c66ce7aae"],"x":1055,"y":1180,"wires":[]},{"id":"59fb85a7f74023e9","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 6 Feedback","func":"if (msg.payload.length == 45) {\n\n    // Store Data\n    let LampeData = {};\n    LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n    LampeData[\"data\"] = msg.payload;\n    LampeData[\"status\"] = global.get(\"Lampe6Status\");\n    global.set(\"Lampe6Data\", LampeData);\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n    global.set(\"myL6PWM\",sum);\n\n    if (global.get(\"mySetPL6PWM\") === undefined) {\n        global.set(\"mySetPL6PWM\", msg.payload[2]);\n    }\n\n    let status = 0;\n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":1320,"wires":[["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["272e6f97f31b38da"],["75c1677095ad4799"]]},{"id":"bd0b77b768989b3c","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"0f4fff2dc12465d5","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":1280,"wires":[[]]},{"id":"75c1677095ad4799","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 6","mode":"link","links":["7f9235d1cda708ed"],"x":1055,"y":1380,"wires":[]},{"id":"b5664075264aa2a3","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"43f83edaea29acf4","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":440,"wires":[]},{"id":"bd62395d57ec59e0","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"3851858da9cbf137","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":620,"wires":[]},{"id":"17d4dd54afa63911","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"8154b0c2d333ea5c","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":780,"wires":[]},{"id":"272e6f97f31b38da","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"0f4fff2dc12465d5","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":1320,"wires":[]},{"id":"36fa1f72a2ad9ff9","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"7e38435dec7f5cbb","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":960,"wires":[]},{"id":"33a9e62e909c32de","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"bdd1ccedc4b38339","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":1140,"wires":[]},{"id":"5f4a94f084b1069f","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"abb155b2a3b51c32","order":9,"width":2,"height":0,"name":"L1L2","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":550,"y":1280,"wires":[]},{"id":"849cf52aa2a378fa","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"abb155b2a3b51c32","order":10,"width":2,"height":0,"name":"L3L4","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":550,"y":1340,"wires":[]},{"id":"383de0c50c72aa55","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"abb155b2a3b51c32","order":11,"width":2,"height":0,"name":"L5L6","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":550,"y":1400,"wires":[]},{"id":"5a4e37f3e88c5dc8","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Mark Lampe1Data","func":"global.set(\"Lampe1Status\", \"r\");\n\n// Store Data\nlet LampeData = {};\nLampeData[\"epoch\"] = Math.round(Date.now() / 1000);\nLampeData[\"status\"] = \"r\";\n\nglobal.set(\"Lampe1Data\", LampeData);\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":1840,"wires":[["8d65543ae2db6c45"]]},{"id":"2fb6d54a5ff9118e","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Mark Lampe2Data","func":"global.set(\"Lampe2Status\", \"r\");\n\n// Store Data\nlet LampeData = {};\nLampeData[\"epoch\"] = Math.round(Date.now() / 1000);\nLampeData[\"status\"] = \"r\";\n\nglobal.set(\"Lampe2Data\", LampeData);\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":1880,"wires":[["1efcdb7b91e37854"]]},{"id":"42834b135f7c5ec4","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Mark Lampe3Data","func":"global.set(\"Lampe3Status\", \"r\");\n\n// Store Data\nlet LampeData = {};\nLampeData[\"epoch\"] = Math.round(Date.now() / 1000);\nLampeData[\"status\"] = \"r\";\n\nglobal.set(\"Lampe3Data\", LampeData);\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":1920,"wires":[["7e55e72f2d47252a"]]},{"id":"9a508b6b9eb43835","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Mark Lampe4Data","func":"global.set(\"Lampe4Status\", \"r\");\n\n// Store Data\nlet LampeData = {};\nLampeData[\"epoch\"] = Math.round(Date.now() / 1000);\nLampeData[\"status\"] = \"r\";\n\nglobal.set(\"Lampe4Data\", LampeData);\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":1960,"wires":[["cc7b0aa5ef28e9a2"]]},{"id":"3808f26374d3410d","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Mark Lampe5Data","func":"global.set(\"Lampe5Status\", \"r\");\n\n// Store Data\nlet LampeData = {};\nLampeData[\"epoch\"] = Math.round(Date.now() / 1000);\nLampeData[\"status\"] = \"r\";\n\nglobal.set(\"Lampe5Data\", LampeData);\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":2000,"wires":[["0164c672efb85f86"]]},{"id":"bd37d092edde9951","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Mark Lampe6Data","func":"global.set(\"Lampe6Status\", \"r\");\n\n// Store Data\nlet LampeData = {};\nLampeData[\"epoch\"] = Math.round(Date.now() / 1000);\nLampeData[\"status\"] = \"r\";\n\nglobal.set(\"Lampe6Data\", LampeData);\n\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":770,"y":2040,"wires":[["97609632057df6e7"]]},{"id":"b6c7c689db133e6f","type":"comment","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send General purpose MODBUS fc 6 telegrams  ","info":"","x":240,"y":2160,"wires":[]},{"id":"e429bfc69f8361ef","type":"ui-number-input","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","group":"2f521b541baf3461","name":"","label":"unitid","order":1,"width":1,"height":0,"topic":"topic","topicType":"msg","min":0,"max":"250","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":130,"y":2240,"wires":[["7d05b988fa029f15"]]},{"id":"1eb24fd9e8c54ca1","type":"ui-number-input","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","group":"2f521b541baf3461","name":"","label":"address","order":2,"width":1,"height":0,"topic":"topic","topicType":"msg","min":"1","max":"250","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":140,"y":2300,"wires":[["48b53ecc9d2cbcee"]]},{"id":"7d05b988fa029f15","type":"change","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","rules":[{"t":"set","p":"unitid","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2240,"wires":[[]]},{"id":"48b53ecc9d2cbcee","type":"change","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","rules":[{"t":"set","p":"address","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2300,"wires":[[]]},{"id":"df785422119516a2","type":"ui-number-input","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","group":"2f521b541baf3461","name":"","label":"value","order":3,"width":1,"height":0,"topic":"topic","topicType":"msg","min":"0","max":"65535","step":1,"tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":130,"y":2360,"wires":[["7f13a0e4741c5f10"]]},{"id":"7f13a0e4741c5f10","type":"change","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","rules":[{"t":"set","p":"value","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":2360,"wires":[[]]},{"id":"c304cb29c28fee2b","type":"ui-button","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","group":"2f521b541baf3461","name":"","label":"Send","order":4,"width":3,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"","iconPosition":"left","payload":"<h3>Er du sikker på at du vil sende dette ut på MODBUS nå?</h3>","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":130,"y":2420,"wires":[["0a66d049f17159cf"]]},{"id":"8706795d32a56f5e","type":"switch","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"OK ?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"confirm_clicked","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":490,"y":2420,"wires":[["9fe3e88b55baa35a"]]},{"id":"0a66d049f17159cf","type":"ui-notification","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"300","showCountdown":true,"outputs":1,"allowDismiss":true,"dismissText":"Nei","allowConfirm":true,"confirmText":"Ja","raw":true,"className":"","name":"","x":310,"y":2420,"wires":[["8706795d32a56f5e"]]},{"id":"9fe3e88b55baa35a","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6","func":"return { payload: { \"value\": flow.get(\"value\"), \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": flow.get(\"address\"), \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":2420,"wires":[["52b60206a5161ddd"]]},{"id":"52b60206a5161ddd","type":"link out","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"link out fc 6","mode":"link","links":["53740e1295c0a793"],"x":755,"y":2420,"wires":[]},{"id":"3c9c2452fdd9c49d","type":"ui-button","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","group":"2f521b541baf3461","name":"","label":"Repair 0-error","order":5,"width":3,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"","iconPosition":"left","payload":"<h3>Er du sikker på at du vil sende dette ut på MODBUS nå?</h3>","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":160,"y":2480,"wires":[["f88fff264ab7a90a"]]},{"id":"5f8fcbdd3c172cc1","type":"switch","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"OK ?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"confirm_clicked","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":490,"y":2540,"wires":[["ab06e604e9978a8c"]]},{"id":"f88fff264ab7a90a","type":"ui-notification","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"300","showCountdown":true,"outputs":1,"allowDismiss":true,"dismissText":"Nei","allowConfirm":true,"confirmText":"Ja","raw":true,"className":"","name":"","x":370,"y":2480,"wires":[["5f8fcbdd3c172cc1"]]},{"id":"673070a71cf05177","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6 - 19","func":"return { payload: { \"value\": 65283, \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": 19, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2660,"wires":[["3e0ea15432e39316","b8a89e5ed43bea39"]]},{"id":"3e0ea15432e39316","type":"link out","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"link out fc 6","mode":"link","links":["53740e1295c0a793"],"x":905,"y":2680,"wires":[]},{"id":"b8a89e5ed43bea39","type":"delay","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":480,"y":2720,"wires":[["822a18bf78f3e28b"]]},{"id":"822a18bf78f3e28b","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6 - 20","func":"return { payload: { \"value\": 65280, \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": 20, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2720,"wires":[["3e0ea15432e39316","2388d7e5b228fecd"]]},{"id":"2388d7e5b228fecd","type":"delay","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":480,"y":2780,"wires":[["0707bbd3f04095b8"]]},{"id":"0707bbd3f04095b8","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6 - 25","func":"return { payload: { \"value\": 50, \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": 25, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2780,"wires":[["3e0ea15432e39316","3858b59dcd113c99"]]},{"id":"3858b59dcd113c99","type":"delay","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":480,"y":2840,"wires":[["b4c89cbb292cb99c"]]},{"id":"b4c89cbb292cb99c","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6 - 26","func":"return { payload: { \"value\": 70, \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": 26, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2840,"wires":[["3e0ea15432e39316","1727ef9883fee027"]]},{"id":"143c61cbd9726e37","type":"delay","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":480,"y":2660,"wires":[["673070a71cf05177"]]},{"id":"ab06e604e9978a8c","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6 - 28","func":"return { payload: { \"value\": 300, \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": 28, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2540,"wires":[["3e0ea15432e39316","8f75fe51e9fc247d"]]},{"id":"5d40a81d5589a9d4","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6 - 29","func":"return { payload: { \"value\": 300, \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": 29, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2600,"wires":[["3e0ea15432e39316","143c61cbd9726e37"]]},{"id":"8f75fe51e9fc247d","type":"delay","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":480,"y":2600,"wires":[["5d40a81d5589a9d4"]]},{"id":"1727ef9883fee027","type":"delay","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":480,"y":2900,"wires":[["fe263f0177bbfada"]]},{"id":"fe263f0177bbfada","type":"function","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"Send fc 6 - 26","func":"return { payload: { \"value\": 8, \"fc\": 6, \"unitid\": flow.get(\"unitid\"), \"address\": 27, \"quantity\": 1 } };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":2900,"wires":[["3e0ea15432e39316"]]},{"id":"49d3ca1e016d78f6","type":"link in","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"link in Repair 0-error","links":["bb9e550cf9bde718"],"x":625,"y":2480,"wires":[["e429bfc69f8361ef","54abc4ec1d88e8e6"]]},{"id":"54abc4ec1d88e8e6","type":"delay","z":"ec28d8db3689b1f5","g":"095c9fc37fe60475","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":760,"y":2480,"wires":[["ab06e604e9978a8c"]]},{"id":"0c9d26ede36117d7","type":"ui-text","z":"79e8e825dbfbe749","group":"a1dad4848328d607","order":1,"width":"1","height":"1","name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":true,"font":"","fontSize":"24","color":"#ffffff","wrapText":false,"className":"","x":510,"y":320,"wires":[]},{"id":"5bad66062568b5e3","type":"inject","z":"79e8e825dbfbe749","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"30","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":130,"y":320,"wires":[["06220eca13d8f0b1"]]},{"id":"6b8481f40325a89c","type":"comment","z":"79e8e825dbfbe749","name":"System Oppstart","info":"","x":140,"y":80,"wires":[]},{"id":"810b4f0d5d43abec","type":"inject","z":"79e8e825dbfbe749","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":140,"wires":[["72cafcef6103da55","64964f45b2394312"]]},{"id":"72cafcef6103da55","type":"change","z":"79e8e825dbfbe749","name":"Preset globale variabler...","rules":[{"t":"set","p":"mySystemStatusIndikator","pt":"global","to":"G","tot":"str"},{"t":"set","p":"myModeSelector","pt":"global","to":"1","tot":"num"},{"t":"set","p":"Lamp1Status","pt":"global","to":"ÿ","tot":"str"},{"t":"set","p":"Lamp2Status","pt":"global","to":"ÿ","tot":"str"},{"t":"set","p":"Lamp3Status","pt":"msg","to":"ÿ","tot":"str"},{"t":"set","p":"Lamp4Status","pt":"msg","to":"ÿ","tot":"str"},{"t":"set","p":"Lamp5Status","pt":"msg","to":"ÿ","tot":"str"},{"t":"set","p":"Lamp6Status","pt":"msg","to":"ÿ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":370,"y":140,"wires":[[]]},{"id":"64964f45b2394312","type":"delay","z":"79e8e825dbfbe749","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"minutes","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":140,"y":200,"wires":[["0802a0b44bdddb3c"]]},{"id":"0802a0b44bdddb3c","type":"link out","z":"79e8e825dbfbe749","name":"link out Update Position, Config an Prosessdata on startup","mode":"link","links":["14cf84e811a02a85","cdc566247c5fbc4c"],"x":255,"y":200,"wires":[]},{"id":"02cb076f403f92d2","type":"ui-table","z":"79e8e825dbfbe749","group":"9a249443a9769895","name":"Kjøreplan","label":"","order":1,"width":"","height":"","maxrows":0,"passthru":false,"autocols":true,"showSearch":false,"deselect":true,"selectionType":"none","columns":[],"mobileBreakpoint":"sm","mobileBreakpointType":"defaults","action":"replace","x":560,"y":500,"wires":[[]]},{"id":"73ead93f6fa6bb56","type":"ui-button","z":"79e8e825dbfbe749","d":true,"group":"9a249443a9769895","name":"","label":"Laste opp","order":2,"width":2,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"file-upload","iconPosition":"left","payload":"","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":100,"y":620,"wires":[[]]},{"id":"3c7de12b67e451ac","type":"ui-button","z":"79e8e825dbfbe749","d":true,"group":"9a249443a9769895","name":"","label":"Lagre kopi","order":3,"width":2,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"storefront-edit","iconPosition":"left","payload":"","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":350,"y":620,"wires":[[]]},{"id":"06220eca13d8f0b1","type":"function","z":"79e8e825dbfbe749","name":"Get Time HH:MM","func":"// Get the current time and convert it to text\nvar now = new Date();\n\nlet localDate = new Date(now.toLocaleString('en-US', { timeZone: \"Europe/Budapest\" }));\nlet offset = now.getTime() - localDate.getTime();\nnow.setTime( now.getTime() + offset );\n\nvar yyyy = now.getFullYear();\nvar mm = now.getMonth() < 9 ? \"0\" + (now.getMonth() + 1) : (now.getMonth() + 1); // getMonth() is zero-based\nvar dd  = now.getDate() < 10 ? \"0\" + now.getDate() : now.getDate();\nvar hh = now.getHours() < 10 ? \"0\" + now.getHours() : now.getHours();\nvar mmm  = now.getMinutes() < 10 ? \"0\" + now.getMinutes() : now.getMinutes();\nvar ss  = now.getSeconds() < 10 ? \"0\" + now.getSeconds() : now.getSeconds();\n\nnode.status({fill:\"grey\",shape:\"dot\",text:yyyy+\".\"+mm+\".\"+dd+\" \"+hh+\":\"+mmm+\":\"+ss});\n\nreturn { payload: hh + \":\" + mmm };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":320,"wires":[["0c9d26ede36117d7","8e73150f0b8de0ae"]]},{"id":"695cf3f3e4350b99","type":"change","z":"79e8e825dbfbe749","name":"","rules":[{"t":"set","p":"planleggerTabell","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":340,"y":500,"wires":[["02cb076f403f92d2","196f277a10b6a2fa"]]},{"id":"8e73150f0b8de0ae","type":"function","z":"79e8e825dbfbe749","name":"parse planlegger","func":"let myNewSetpointsMsg = [null,null,null,null,null,null];\nlet planlegger = global.get(\"planleggerTabell\");\n\nif( planlegger.length>0 ) {\n    node.status({ fill: \"green\", shape: \"ring\", text: \"Standby...\" });\n    planlegger.forEach(function(plan) {\n        // Check if time match scheduler\n        if(plan.Tid==msg.payload) {\n            for(let Lampe = 1;Lampe < 7; Lampe++) {\n                if(plan.Lamper.includes(Lampe.toString())) {\n                    myNewSetpointsMsg[Lampe-1] = { payload: { \"value\": plan.Lys*100, \"fc\": 6, \"unitid\": 10+Lampe, \"address\": 3, \"quantity\": 1 } };\n                }\n            }\n            node.status({ fill: \"green\", shape: \"ring\", text: \"Plan: \" + plan.Tid });    \n        }\n    });\n    \n//    node.status({ fill: \"green\", shape: \"ring\", text: \"Planlegger \" + planlegger.length + \" eventer\" });    \n} else {\n    node.status({fill:\"red\",shape:\"ring\",text:\"No data\"});\n}\n\nreturn myNewSetpointsMsg;","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":400,"wires":[["298fe60c58734dc2"],["298fe60c58734dc2"],["298fe60c58734dc2"],["298fe60c58734dc2"],["298fe60c58734dc2"],["298fe60c58734dc2"]]},{"id":"49cad39f1f3d34b7","type":"inject","z":"79e8e825dbfbe749","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"[]","payloadType":"json","x":130,"y":560,"wires":[["695cf3f3e4350b99"]]},{"id":"298fe60c58734dc2","type":"link out","z":"79e8e825dbfbe749","name":"link out LAMPE x Feedback","mode":"link","links":["53740e1295c0a793"],"x":695,"y":400,"wires":[]},{"id":"196f277a10b6a2fa","type":"set-shared-state","z":"79e8e825dbfbe749","state":"ee932add205df226","name":"planleggerTabell","triggerOnInit":true,"triggerOnChange":true,"provideOutput":true,"outputs":1,"x":580,"y":540,"wires":[[]]},{"id":"01514661843d1c2f","type":"get-shared-state","z":"79e8e825dbfbe749","state":"ee932add205df226","name":"planleggerTabell","triggerOnInit":true,"triggerOnChange":true,"x":100,"y":500,"wires":[["695cf3f3e4350b99"]]},{"id":"79c0146fcd52d442","type":"comment","z":"79e8e825dbfbe749","name":"Demo","info":"","x":90,"y":720,"wires":[]},{"id":"ff2a4a271706025b","type":"ui-radio-group","z":"79e8e825dbfbe749","group":"8480dcd196a6edca","name":"","label":"Demo mode:","order":0,"width":0,"height":0,"columns":1,"passthru":true,"options":[{"label":"Av","value":"None","type":"str"},{"label":"Liten Bølge","value":"LB","type":"str"},{"label":"Stor Bølge","value":"SB","type":"str"},{"label":"Flash","value":"Flash","type":"str"}],"payload":"","topic":"topic","topicType":"msg","className":"","x":290,"y":780,"wires":[["aede1b9a369c0e37","df53eac6203f3e2f"]]},{"id":"ef200fd799d5f10c","type":"get-shared-state","z":"79e8e825dbfbe749","state":"e616d2d6976d58de","name":"myDemoState","triggerOnInit":true,"triggerOnChange":true,"x":110,"y":780,"wires":[["ff2a4a271706025b"]]},{"id":"aede1b9a369c0e37","type":"set-shared-state","z":"79e8e825dbfbe749","state":"e616d2d6976d58de","name":"myDemoState","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":500,"y":820,"wires":[]},{"id":"df53eac6203f3e2f","type":"change","z":"79e8e825dbfbe749","name":"","rules":[{"t":"set","p":"myDemoState","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":530,"y":780,"wires":[[]]},{"id":"dfb8d5e803f43ff3","type":"inject","z":"79e8e825dbfbe749","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"2","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":170,"y":1040,"wires":[["75f14b3c50e27040"]]},{"id":"75f14b3c50e27040","type":"function","z":"79e8e825dbfbe749","name":"function 1","func":"let myDemoState = global.get(\"myDemoState\");\n\nif (myDemoState == \"None\") {\n    node.status({ text: \"None\"});\n    return [null, null, null, null, null, null];\n} else if (myDemoState == \"LB\") {\n    let LB = [\n      // 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\n        [0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 7, 6, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 7, 6, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 7, 6, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 7, 6, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 7, 6, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 7, 6, 5, 4, 3, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    ]\n\n    let myDemoIndex = flow.get(\"myDemoIndex\") + 1;\n    if (myDemoIndex > 28 - 1) {\n        myDemoIndex = 0;\n    }\n    flow.set(\"myDemoIndex\", myDemoIndex);\n\n    node.status({ text: myDemoIndex });\n\n    return [\n        { payload: LB[0][myDemoIndex] },\n        { payload: LB[1][myDemoIndex] },\n        { payload: LB[2][myDemoIndex] },\n        { payload: LB[3][myDemoIndex] },\n        { payload: LB[4][myDemoIndex] },\n        { payload: LB[5][myDemoIndex] }\n    ];\n} else if (myDemoState == \"SB\") {\n    let SB = [\n        // 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8\n        [0, 0, 0, 0, 0, 0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n        [0, 1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    ]\n\n    let myDemoIndex = flow.get(\"myDemoIndex\") + 1;\n    if (myDemoIndex > 28 - 1) {\n        myDemoIndex = 0;\n    }\n    flow.set(\"myDemoIndex\", myDemoIndex);\n\n    node.status({ text: myDemoIndex });\n\n    return [\n        { payload: SB[0][myDemoIndex] },\n        { payload: SB[1][myDemoIndex] },\n        { payload: SB[2][myDemoIndex] },\n        { payload: SB[3][myDemoIndex] },\n        { payload: SB[4][myDemoIndex] },\n        { payload: SB[5][myDemoIndex] }\n    ];\n}","outputs":6,"timeout":0,"noerr":0,"initialize":"// Code added here will be run once\n// whenever the node is started.\nflow.set(\"myDemoIndex\", 0);","finalize":"","libs":[],"x":480,"y":1040,"wires":[["b3d841ff2a5da79f"],["65c98456bb852b52"],["221454fc7a88a20b"],["595abf0e9bebb09b"],["37ba21893069e17a"],["45dc9bcf3ced4b6d"]]},{"id":"b3d841ff2a5da79f","type":"link out","z":"79e8e825dbfbe749","name":"link out Set Lamp 1","mode":"link","links":["62744e6bd03f61c0"],"x":685,"y":920,"wires":[]},{"id":"65c98456bb852b52","type":"link out","z":"79e8e825dbfbe749","name":"link out Set Lamp 2","mode":"link","links":["da23764e66cc882a"],"x":685,"y":960,"wires":[]},{"id":"221454fc7a88a20b","type":"link out","z":"79e8e825dbfbe749","name":"link out Set Lamp 3","mode":"link","links":["ce6adf3bedeaf406"],"x":685,"y":1000,"wires":[]},{"id":"595abf0e9bebb09b","type":"link out","z":"79e8e825dbfbe749","name":"link out Set Lamp 4","mode":"link","links":["b4854091b84a4d86"],"x":685,"y":1040,"wires":[]},{"id":"37ba21893069e17a","type":"link out","z":"79e8e825dbfbe749","name":"link out Set Lamp 5","mode":"link","links":["a794a54047982e1d"],"x":685,"y":1080,"wires":[]},{"id":"45dc9bcf3ced4b6d","type":"link out","z":"79e8e825dbfbe749","name":"link out Set Lamp 6","mode":"link","links":["3f6b42cd52a2161d"],"x":685,"y":1120,"wires":[]}]