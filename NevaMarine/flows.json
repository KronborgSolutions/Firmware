[
    {
        "id": "483a6f631e7f69a7",
        "type": "tab",
        "label": "Oppsett",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "389436610c6304c5",
        "type": "tab",
        "label": "State Machine",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ec96b8f08fb0c19e",
        "type": "tab",
        "label": "MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2d2bd18e.3e4abe",
        "type": "tab",
        "label": "IP Settings",
        "disabled": true,
        "info": ""
    },
    {
        "id": "bf782cbf60794af0",
        "type": "tab",
        "label": "Lampe 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "88be0e5091306a90",
        "type": "tab",
        "label": "Lampe 2",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ca1e3fc7ee28f5a2",
        "type": "tab",
        "label": "Lampe 3",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "02e68394143357bb",
        "type": "tab",
        "label": "Lampe 4",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "82a9216af09bde7a",
        "type": "tab",
        "label": "Lampe 5",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "937e7cf0ac72c745",
        "type": "tab",
        "label": "Lampe 6",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e7722a256c713090",
        "type": "subflow",
        "name": "Lampe Kommunikasjon",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 80,
                "y": 180,
                "wires": [
                    {
                        "id": "6f5ac5f6c36105a3"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 940,
                "y": 660,
                "wires": [
                    {
                        "id": "836f29e3fdea1105",
                        "port": 0
                    },
                    {
                        "id": "26be3e9f33b3ae29",
                        "port": 0
                    }
                ]
            },
            {
                "x": 940,
                "y": 720,
                "wires": [
                    {
                        "id": "8a7e684034ba0f4a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "module": "LampeCOM",
            "version": "1.0.0",
            "author": "Ole Petter Ruud <ole@torka.no>"
        },
        "color": "#E9967A",
        "icon": "node-red-contrib-modbus/modbus-icon.png",
        "status": {
            "x": 940,
            "y": 480,
            "wires": [
                {
                    "id": "1eb2f71161ca1410",
                    "port": 2
                },
                {
                    "id": "870e8b76fd0472b0",
                    "port": 0
                },
                {
                    "id": "5313def2edfb882c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "aa95de13d0ae7341",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Neva Marine - Aqua Solar",
            "hideToolbar": "false",
            "allowSwipe": "true",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 36,
                "sy": 36,
                "gx": 5,
                "gy": 5,
                "cx": 3,
                "cy": 3,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "bf34d136a8669896",
        "type": "ui_tab",
        "name": "Oppsett",
        "icon": "settings",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1cf52e38.3cfee2",
        "type": "ui_group",
        "name": "IP Settings",
        "tab": "be53a269.02ec3",
        "order": 1,
        "disp": true,
        "width": 16,
        "collapse": false
    },
    {
        "id": "be53a269.02ec3",
        "type": "ui_tab",
        "name": "Settings",
        "icon": "settings",
        "order": 3
    },
    {
        "id": "713180c82aa959a2",
        "type": "ui_group",
        "name": "Prosessoppsett",
        "tab": "bf34d136a8669896",
        "order": 1,
        "disp": true,
        "width": "12",
        "collapse": true,
        "className": ""
    },
    {
        "id": "5dd95ee166991007",
        "type": "ui_group",
        "name": "Nettverk",
        "tab": "bf34d136a8669896",
        "order": 3,
        "disp": true,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f2615cba8578655a",
        "type": "mqtt-broker",
        "name": "",
        "broker": "128.199.38.63",
        "port": "1883",
        "clientid": "",
        "autoConnect": false,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "f00a67f94951c24d",
        "type": "ui_spacer",
        "z": "2d2bd18e.3e4abe",
        "name": "spacer",
        "group": "1cf52e38.3cfee2",
        "order": 8,
        "width": 10,
        "height": 1
    },
    {
        "id": "1c31383f58ccd4f8",
        "type": "ui_group",
        "name": "Programvare",
        "tab": "bf34d136a8669896",
        "order": 4,
        "disp": true,
        "width": "18",
        "collapse": true,
        "className": ""
    },
    {
        "id": "8fb401a08da32934",
        "type": "ui_group",
        "name": "System",
        "tab": "d5f639bc116dce5e",
        "order": 7,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "d5f639bc116dce5e",
        "type": "ui_tab",
        "name": "Hjem",
        "icon": "mi-hub",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6419184378ff1692",
        "type": "ui_group",
        "name": "Lampe 1",
        "tab": "d5f639bc116dce5e",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "8bb3fa33612b5685",
        "type": "ui_group",
        "name": "Lampe 2",
        "tab": "d5f639bc116dce5e",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "f735df78474bdbad",
        "type": "ui_group",
        "name": "Lampe 3",
        "tab": "d5f639bc116dce5e",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "d96855d5801a8206",
        "type": "ui_group",
        "name": "Lampe 4",
        "tab": "d5f639bc116dce5e",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "051ab72180dfa122",
        "type": "ui_group",
        "name": "Lampe 5",
        "tab": "d5f639bc116dce5e",
        "order": 5,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "977d9c659b3c9fb3",
        "type": "ui_group",
        "name": "Lampe 6",
        "tab": "d5f639bc116dce5e",
        "order": 6,
        "disp": true,
        "width": "6",
        "collapse": true,
        "className": ""
    },
    {
        "id": "26c2ba69e9d72b9e",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 13,
        "width": "0",
        "height": "0"
    },
    {
        "id": "8840cd4845491c62",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "5dd95ee166991007",
        "order": 11,
        "width": "0",
        "height": "0"
    },
    {
        "id": "c3237125d4f73087",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "5dd95ee166991007",
        "order": 7,
        "width": "0",
        "height": "0"
    },
    {
        "id": "94c42d35e9d544d4",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "1c31383f58ccd4f8",
        "order": 6,
        "width": "0",
        "height": "0"
    },
    {
        "id": "ec40c28ec39359c3",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "1c31383f58ccd4f8",
        "order": 4,
        "width": "0",
        "height": "0"
    },
    {
        "id": "5f750cad81ef8ff6",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "1c31383f58ccd4f8",
        "order": 2,
        "width": "0",
        "height": "0"
    },
    {
        "id": "6e960e88aa2ff62b",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 7,
        "width": "0",
        "height": "0"
    },
    {
        "id": "46c1561852cb3234",
        "type": "modbus-client",
        "name": "LocalBUS",
        "clienttype": "simpleser",
        "bufferCommands": true,
        "stateLogEnabled": true,
        "queueLogEnabled": true,
        "failureLogEnabled": false,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyS0",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "115200",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "250",
        "clientTimeout": "200",
        "reconnectOnTimeout": false,
        "reconnectTimeout": "1000",
        "parallelUnitIdsAllowed": true,
        "showErrors": true,
        "showWarnings": false,
        "showLogs": false
    },
    {
        "id": "7f2169e2cb92802f",
        "type": "shared-state",
        "name": "myManuellKjoringState",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "884e0b0f934ba909",
        "type": "shared-state",
        "name": "myLat",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "6",
        "numMin": "-90",
        "numMax": "90",
        "unit": "deg",
        "saveInterval": "0"
    },
    {
        "id": "407e7742e8b9f1bc",
        "type": "shared-state",
        "name": "myLon",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "6",
        "numMin": "-180",
        "numMax": "180",
        "unit": "deg",
        "saveInterval": "0"
    },
    {
        "id": "9eb895dadc67bea0",
        "type": "shared-state",
        "name": "myBuzzerDisabled",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "d5e8bd2b1115be28",
        "type": "shared-state",
        "name": "FW_Link",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "str",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "984d640ef763cab4",
        "type": "shared-state",
        "name": "myHWaddr",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "str",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "6e1e834c24242472",
        "type": "shared-state",
        "name": "Lampe1En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "dbd084ce70a3aca9",
        "type": "shared-state",
        "name": "Lampe2En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "3ebac7f92155048a",
        "type": "shared-state",
        "name": "Lampe3En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "b2b0acad0fd02e0a",
        "type": "shared-state",
        "name": "Lampe4En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "78fee3bd300e2412",
        "type": "shared-state",
        "name": "Lampe5En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "dcbeac56928b2456",
        "type": "shared-state",
        "name": "Lampe6En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "269e17ffddb211c4",
        "type": "shared-state",
        "name": "Lampe1PWM",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "0",
        "numMin": "0",
        "numMax": "100",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "eb3215e684fcb092",
        "type": "shared-state",
        "name": "Lampe2PWM",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "100",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "edb4d845d6735ccc",
        "type": "shared-state",
        "name": "Lampe3PWM",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "100",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "6276b0fa49d00b90",
        "type": "shared-state",
        "name": "Lampe4PWM",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "100",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "32d2cc555bb82017",
        "type": "shared-state",
        "name": "Lampe5PWM",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "100",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "1f0b74adb1422ff1",
        "type": "shared-state",
        "name": "Lampe6PWM",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "100",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "8d055d0c1bc7c0f9",
        "type": "shared-state",
        "name": "Stigetid",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "65000",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "3000022b053cc228",
        "type": "shared-state",
        "name": "Dimmetid",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "0",
        "numMax": "65000",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "18f4f5499049fc9e",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 16,
        "width": "0",
        "height": "0"
    },
    {
        "id": "d2c111101b508bb4",
        "type": "shared-state",
        "name": "MaxDriverTemperatur",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "0",
        "numMin": "30",
        "numMax": "90",
        "unit": "C",
        "saveInterval": "0"
    },
    {
        "id": "4b402b374c92aeb7",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 9,
        "width": "0",
        "height": "0"
    },
    {
        "id": "b8a200aeeefe5dbd",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 11,
        "width": "0",
        "height": "0"
    },
    {
        "id": "ac4a87428d288525",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Setup MUX",
        "info": "",
        "x": 210,
        "y": 300,
        "wires": []
    },
    {
        "id": "1eb2f71161ca1410",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Pipe MUX",
        "func": "// PIPE MUX\nlet MUX = 0\nswitch (msg.payload.lampe) {\n    case 1:\n    {\n        MUX = 1;\n        msg.payload[\"unitid\"] = 10;\n        break;\n    }\n    case 2:\n    {\n        MUX = 1;\n        msg.payload[\"unitid\"] = 11;\n        break;\n    }\n    case 3:\n    {\n        MUX = 2;\n        msg.payload[\"unitid\"] = 10;\n        break;\n    }\n    case 4:\n    {\n        MUX = 2;\n        msg.payload[\"unitid\"] = 11;\n        break;\n    }\n    case 5:\n    {\n        MUX = 3;\n        msg.payload[\"unitid\"] = 10;\n        break;\n    }\n    case 6:\n    {\n        MUX = 3;\n        msg.payload[\"unitid\"] = 11;\n        break;\n    }\n    default:\n    {\n        MUX = 0;\n        msg.payload[\"unitid\"] = 1;\n        break;\n    }\n}\n\n\nreturn [\n    { payload: (MUX & 0x1 ? 1 : 0) },\n    { payload: (MUX & 0x2 ? 1 : 0) },\n    { payload: { fill: \"green\", shape: \"dot\", text: \"COM: \" + (msg.payload.lampe != 100 ? \"Lampe \" + msg.payload.lampe : \"System\") + \" FC: \" + msg.payload.fc }},\n    msg\n]",
        "outputs": 4,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 440,
        "wires": [
            [
                "f00dd78de521a5b6"
            ],
            [
                "e17d5fc2c5732a04"
            ],
            [],
            [
                "fa260155b62ca90e"
            ]
        ]
    },
    {
        "id": "16b1e324925b874c",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Handle all MODBUS communication between RPi vs. CTRL-Card vs. Lamps",
        "info": "",
        "x": 330,
        "y": 80,
        "wires": []
    },
    {
        "id": "979b6f996bfd67a7",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Get or Set data?",
        "info": "",
        "x": 220,
        "y": 600,
        "wires": []
    },
    {
        "id": "60a71c44128a3e3c",
        "type": "switch",
        "z": "e7722a256c713090",
        "name": "",
        "property": "payload.fc",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 190,
        "y": 660,
        "wires": [
            [
                "836f29e3fdea1105"
            ],
            [
                "8a7e684034ba0f4a"
            ]
        ]
    },
    {
        "id": "fa260155b62ca90e",
        "type": "delay",
        "z": "e7722a256c713090",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 210,
        "y": 520,
        "wires": [
            [
                "60a71c44128a3e3c"
            ]
        ]
    },
    {
        "id": "6f5ac5f6c36105a3",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "If Array => Array[0]  and set enable flag",
        "func": "if(Array.isArray(msg.payload)) {\n    msg.payload = msg.payload[0];\n}\n\nlet lampe = 100;\nif(msg.payload.lampe !== undefined) {\n    lampe = msg.payload.lampe;\n} else {\n    msg.payload[\"lampe\"] = 100;\n}\n\nmsg.topic = lampe;\nmsg[\"enabled\"] = true;\n\nswitch(lampe) {\n    case 1:\n    {\n        msg.enabled = global.get(\"Lampe1En\");\n        break;\n    }\n    case 2:\n    {\n        msg.enabled = global.get(\"Lampe2En\");\n        break;\n    }\n    case 3:\n    {\n        msg.enabled = global.get(\"Lampe3En\");\n        break;\n    }\n    case 4:\n    {\n        msg.enabled = global.get(\"Lampe4En\");\n        break;\n    }\n    case 5:\n    {\n        msg.enabled = global.get(\"Lampe5En\");\n        break;\n    }\n    case 6:\n    {\n        msg.enabled = global.get(\"Lampe6En\");\n        break;\n    }\n    default:\n    {\n        break;\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 180,
        "wires": [
            [
                "411cba2e789dd038"
            ]
        ]
    },
    {
        "id": "0df49946869f682f",
        "type": "switch",
        "z": "e7722a256c713090",
        "name": "Error?",
        "property": "error",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 560,
        "wires": [
            [
                "870e8b76fd0472b0"
            ]
        ]
    },
    {
        "id": "870e8b76fd0472b0",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Report Error in Status",
        "func": "return { payload: { fill: \"red\", shape: \"dot\", text: \"COM: \" + (msg.topic != 0 ? \"Lampe \" + msg.topic : \"System\") + \" \" + msg.error }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "411cba2e789dd038",
        "type": "switch",
        "z": "e7722a256c713090",
        "name": "Enabled?",
        "property": "enabled",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 380,
        "y": 240,
        "wires": [
            [
                "5313def2edfb882c"
            ],
            [
                "6955d54260b89ebb"
            ]
        ]
    },
    {
        "id": "c6bf9f5cb1d25036",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Enabled?",
        "info": "",
        "x": 200,
        "y": 120,
        "wires": []
    },
    {
        "id": "5313def2edfb882c",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Report Disabled",
        "func": "return { topic: msg.topic, payload: { fill: \"yellow\", shape: \"dot\", text: \"COM: \" + (msg.topic != 100 ? \"Lampe \" + msg.topic : \"System\") + \" Disabled\" }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 240,
        "wires": [
            [
                "26be3e9f33b3ae29"
            ]
        ]
    },
    {
        "id": "26be3e9f33b3ae29",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Empty",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "836f29e3fdea1105",
        "type": "modbus-flex-getter",
        "z": "e7722a256c713090",
        "name": "",
        "showStatusActivities": true,
        "showErrors": false,
        "showWarnings": false,
        "logIOActivities": false,
        "server": "46c1561852cb3234",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": true,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 370,
        "y": 660,
        "wires": [
            [
                "0df49946869f682f"
            ],
            []
        ]
    },
    {
        "id": "8a7e684034ba0f4a",
        "type": "modbus-flex-write",
        "z": "e7722a256c713090",
        "name": "",
        "showStatusActivities": true,
        "showErrors": false,
        "showWarnings": false,
        "server": "46c1561852cb3234",
        "emptyMsgOnFail": true,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 370,
        "y": 720,
        "wires": [
            [
                "0df49946869f682f"
            ],
            []
        ]
    },
    {
        "id": "f00dd78de521a5b6",
        "type": "rpi-gpio out",
        "z": "e7722a256c713090",
        "name": "MUX0",
        "pin": "4",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 550,
        "y": 360,
        "wires": []
    },
    {
        "id": "e17d5fc2c5732a04",
        "type": "rpi-gpio out",
        "z": "e7722a256c713090",
        "name": "MUX1",
        "pin": "5",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 550,
        "y": 420,
        "wires": []
    },
    {
        "id": "6955d54260b89ebb",
        "type": "delay",
        "z": "e7722a256c713090",
        "name": "",
        "pauseType": "delay",
        "timeout": "50",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 210,
        "y": 360,
        "wires": [
            [
                "1eb2f71161ca1410"
            ]
        ]
    },
    {
        "id": "ead8f956c53ebd34",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Prosessoppsett",
        "info": "",
        "x": 140,
        "y": 260,
        "wires": []
    },
    {
        "id": "9652c9e68944c869",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Hent Hostname og MAC og IP",
        "info": "",
        "x": 180,
        "y": 1820,
        "wires": []
    },
    {
        "id": "8606686a.ef7008",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract HWaddr",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ether \") + 6; // Offset the start of the address from \"ether \"\nlet addr = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nreturn { payload : addr }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1940,
        "wires": [
            [
                "b4ef47649e9c4759",
                "54b06a2d2d3f7da9"
            ]
        ]
    },
    {
        "id": "52753337.7b5a8c",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "ifconfig eth0",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 370,
        "y": 1960,
        "wires": [
            [
                "8606686a.ef7008",
                "f378c2eb37bccb2e"
            ],
            [],
            []
        ]
    },
    {
        "id": "7274cbde085522a1",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract Hostname",
        "func": "let hostname = msg.payload; // Save the payload string to a more convenient variable name\n\nreturn { payload : hostname.trim() };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 1880,
        "wires": [
            [
                "7f0574c4b0c6d150",
                "89718a34befe08cc"
            ]
        ]
    },
    {
        "id": "8672e44b8c93e04e",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "hostname",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 380,
        "y": 1880,
        "wires": [
            [
                "7274cbde085522a1"
            ],
            [],
            []
        ]
    },
    {
        "id": "7f0574c4b0c6d150",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Show Hostname",
        "label": "Hostname:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 780,
        "y": 1900,
        "wires": []
    },
    {
        "id": "b4ef47649e9c4759",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Show HW addr",
        "label": "MAC:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 780,
        "y": 1980,
        "wires": []
    },
    {
        "id": "f378c2eb37bccb2e",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract IP",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2020,
        "wires": [
            [
                "c1effe7692196d3b"
            ]
        ]
    },
    {
        "id": "c1effe7692196d3b",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Show eth0 IP",
        "label": "eth0 IP:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 770,
        "y": 2020,
        "wires": []
    },
    {
        "id": "e6597813fd0ae3f4",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "ifconfig wlan0",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 360,
        "y": 2080,
        "wires": [
            [
                "fefea0960b0e5ccf"
            ],
            [],
            []
        ]
    },
    {
        "id": "096f2f794a85bfda",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Show wlan0 IP",
        "label": "wlan0 IP:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 780,
        "y": 2080,
        "wires": []
    },
    {
        "id": "54b06a2d2d3f7da9",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HWaddr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 1940,
        "wires": [
            [
                "99221ed0b3ff9b78"
            ]
        ]
    },
    {
        "id": "415279b36a1b260b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myLat",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 540,
        "y": 2500,
        "wires": [
            [
                "d3a04c2a524f335d"
            ]
        ]
    },
    {
        "id": "9446bd4891094586",
        "type": "inject",
        "z": "483a6f631e7f69a7",
        "name": "59.321648",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "59.321648",
        "payloadType": "num",
        "x": 160,
        "y": 2460,
        "wires": [
            [
                "bd2bf422b00f4ea1"
            ]
        ]
    },
    {
        "id": "bd2bf422b00f4ea1",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Lat:",
        "tooltip": "",
        "group": "5dd95ee166991007",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 310,
        "y": 2500,
        "wires": [
            [
                "415279b36a1b260b",
                "f559be213ad80699"
            ]
        ]
    },
    {
        "id": "942d34ae8956f965",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myLon",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 550,
        "y": 2620,
        "wires": [
            [
                "d3a04c2a524f335d"
            ]
        ]
    },
    {
        "id": "0658f9f3b5b365fe",
        "type": "inject",
        "z": "483a6f631e7f69a7",
        "name": "10.496234",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10.496234",
        "payloadType": "num",
        "x": 160,
        "y": 2580,
        "wires": [
            [
                "f4894c4f1c847f1c"
            ]
        ]
    },
    {
        "id": "f4894c4f1c847f1c",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Lon:",
        "tooltip": "",
        "group": "5dd95ee166991007",
        "order": 10,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 310,
        "y": 2620,
        "wires": [
            [
                "942d34ae8956f965",
                "18c63098db69cf72"
            ]
        ]
    },
    {
        "id": "6ce543380d8075b6",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 8,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Position:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 320,
        "y": 2460,
        "wires": []
    },
    {
        "id": "66075e03ab09b9bf",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "Send position update",
        "mode": "link",
        "links": [
            "3bcdd38ce2c510ef"
        ],
        "x": 1075,
        "y": 2560,
        "wires": []
    },
    {
        "id": "d3a04c2a524f335d",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "0",
        "op2": "",
        "op1type": "str",
        "op2type": "date",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 950,
        "y": 2540,
        "wires": [
            [],
            [
                "66075e03ab09b9bf"
            ]
        ]
    },
    {
        "id": "89718a34befe08cc",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hostname",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "fbd47f18eb2c1b2e",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Deaktivere alarmlyd",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 15,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 420,
        "y": 1360,
        "wires": [
            [
                "1c1f9e4030ad8e36",
                "89fad0d68ea4aea0"
            ]
        ]
    },
    {
        "id": "1c1f9e4030ad8e36",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "BuzzerDisabled",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 1360,
        "wires": [
            []
        ]
    },
    {
        "id": "85d582adbda505d5",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "WifiPassword",
        "label": "Nettverkspassord:",
        "tooltip": "Avslutt med Enter eller Tab for å endre.",
        "group": "5dd95ee166991007",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "password",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 780,
        "y": 2280,
        "wires": [
            [
                "8a75d5bd744e8a34"
            ]
        ]
    },
    {
        "id": "92f50ec9494dca41",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "SSID",
        "label": "Nettverksnavn (SSID):",
        "tooltip": "Avslutt med Enter eller Tab for å endre.",
        "group": "5dd95ee166991007",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 750,
        "y": 2240,
        "wires": [
            [
                "4137c932c634e85c"
            ]
        ]
    },
    {
        "id": "c7f54ee0b2f3a63a",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "cat /etc/wpa_supplicant/wpa_supplicant.conf",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 270,
        "y": 2260,
        "wires": [
            [
                "1b2a342569d2a26e",
                "42dc6006f9fea2f4"
            ],
            [],
            []
        ]
    },
    {
        "id": "4bbd09c9d61fa90a",
        "type": "ui_ui_control",
        "z": "483a6f631e7f69a7",
        "name": "",
        "events": "change",
        "x": 160,
        "y": 1880,
        "wires": [
            [
                "e465494834110f2d"
            ]
        ]
    },
    {
        "id": "e3fa8f4d8f0e2257",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 810,
        "y": 2140,
        "wires": []
    },
    {
        "id": "c14bb127b5df1c7b",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract available SSID",
        "func": "let myArray = msg.payload;\nlet mySSIDs = \"SSID(s):\";\n\n// List all SSIDs\nfor(let i=0;i<myArray.length;i++) {\n    mySSIDs = mySSIDs + \" \" + myArray[i].ssid;\n}\n\nreturn { payload : mySSIDs }; // return the SSIDs found as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 2140,
        "wires": [
            [
                "e3fa8f4d8f0e2257"
            ]
        ]
    },
    {
        "id": "fefea0960b0e5ccf",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract IP",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 2080,
        "wires": [
            [
                "096f2f794a85bfda"
            ]
        ]
    },
    {
        "id": "e465494834110f2d",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Oppsett",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 150,
        "y": 2020,
        "wires": [
            [
                "8672e44b8c93e04e",
                "52753337.7b5a8c",
                "e6597813fd0ae3f4",
                "c7f54ee0b2f3a63a",
                "5d6762f0715ad17d"
            ]
        ]
    },
    {
        "id": "1b2a342569d2a26e",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract SSID",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ssid=\") + 6; // Offset the start of the SSID \"\nlet mySSID = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgSSID\", mySSID);\n\nreturn { payload: mySSID }; // return the SSID as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 2240,
        "wires": [
            [
                "92f50ec9494dca41"
            ]
        ]
    },
    {
        "id": "42dc6006f9fea2f4",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract psk",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"psk=\") + 5; // Offset the start of the psk \"\nlet myPSK = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgPSK\", myPSK);\n\n\nreturn { payload: myPSK }; // return the PSK as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 2280,
        "wires": [
            [
                "85d582adbda505d5"
            ]
        ]
    },
    {
        "id": "4137c932c634e85c",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Endring?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "orgSSID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 960,
        "y": 2240,
        "wires": [
            [
                "f08261ebfc7c4153"
            ]
        ]
    },
    {
        "id": "8a75d5bd744e8a34",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Endring?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "orgPSK",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 960,
        "y": 2280,
        "wires": [
            [
                "585fb6d440aca651"
            ]
        ]
    },
    {
        "id": "f08261ebfc7c4153",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let newValue = msg.payload;\nlet orgValue = flow.get(\"orgSSID\"); \n\nlet command = `'s?ssid=\"${orgValue}\"?ssid=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgSSID\",newValue);\n\nreturn {payload: command};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 2240,
        "wires": [
            [
                "e4b41e99e4495c4e"
            ]
        ]
    },
    {
        "id": "e4b41e99e4495c4e",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "sudo sed -i ",
        "addpay": true,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1330,
        "y": 2260,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "585fb6d440aca651",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let newValue = msg.payload;\nlet orgValue = flow.get(\"orgPSK\"); \n\nlet command = `'s?psk=\"${orgValue}\"?psk=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgPSK\",newValue);\n\nreturn {payload: command};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 2280,
        "wires": [
            [
                "e4b41e99e4495c4e"
            ]
        ]
    },
    {
        "id": "43a334e28706087c",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in SSID",
        "links": [
            "bd09041f1951af61"
        ],
        "x": 605,
        "y": 2200,
        "wires": [
            [
                "92f50ec9494dca41"
            ]
        ]
    },
    {
        "id": "13a7ca5bd49cdb11",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in WifiPassword",
        "links": [
            "0fa5e2f74c05ad92"
        ],
        "x": 605,
        "y": 2320,
        "wires": [
            [
                "85d582adbda505d5"
            ]
        ]
    },
    {
        "id": "bf46220a5ddc0c5a",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "FW link:",
        "tooltip": "",
        "group": "1c31383f58ccd4f8",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 340,
        "y": 2820,
        "wires": [
            [
                "d276a4a2ddf4962d",
                "b13ec189cc79f6ba"
            ]
        ]
    },
    {
        "id": "b13ec189cc79f6ba",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "FW_Link",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 2820,
        "wires": [
            []
        ]
    },
    {
        "id": "5d8c74fd4da28a7d",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "1c31383f58ccd4f8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Oppdater programvare",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Sikker på at du vil oppdatere programvare nå?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 200,
        "y": 2920,
        "wires": [
            [
                "b97564d416dc3d4b"
            ]
        ]
    },
    {
        "id": "b97564d416dc3d4b",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "OBS!",
        "name": "",
        "x": 410,
        "y": 2920,
        "wires": [
            [
                "87af758445f14285"
            ]
        ]
    },
    {
        "id": "87af758445f14285",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2920,
        "wires": [
            [
                "f5c628fac390b678"
            ]
        ]
    },
    {
        "id": "fc771a88fc812e82",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "sudo wget -cO - ",
        "addpay": "payload",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "name": "",
        "x": 520,
        "y": 3000,
        "wires": [
            [
                "b56eeb28afd7b903"
            ],
            [
                "b56eeb28afd7b903"
            ],
            [
                "b56eeb28afd7b903",
                "5e26a60998e2c14e"
            ]
        ]
    },
    {
        "id": "f5c628fac390b678",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let myParam = flow.get(\"FW_Link\") + \" > /home/pi/.node-red/flows.json\";\n\nreturn { payload: myParam }",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 3000,
        "wires": [
            [
                "fc771a88fc812e82"
            ]
        ]
    },
    {
        "id": "b56eeb28afd7b903",
        "type": "debug",
        "z": "483a6f631e7f69a7",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 3000,
        "wires": []
    },
    {
        "id": "5e26a60998e2c14e",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Alt i orden?",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 3080,
        "wires": [
            [
                "e4c0288adfa9a86f"
            ],
            [
                "343324275668efb1"
            ]
        ]
    },
    {
        "id": "40ed356cf71a23de",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 670,
        "y": 3080,
        "wires": []
    },
    {
        "id": "e4c0288adfa9a86f",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Programvare Oppdatert!",
        "func": "return { payload: \"Programvare Oppdatert! Omstart nødvendig for at endringene skal tre i kraft - kjører omstart nå...\" };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3080,
        "wires": [
            [
                "40ed356cf71a23de",
                "4b257f03fe785047"
            ]
        ]
    },
    {
        "id": "4b257f03fe785047",
        "type": "delay",
        "z": "483a6f631e7f69a7",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 640,
        "y": 3120,
        "wires": [
            [
                "f2e8fe39856e80ef"
            ]
        ]
    },
    {
        "id": "343324275668efb1",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Uff da... Dette gikk jo ikke.",
        "func": "return { payload: \"Uff da! Fikk ikke tak i Programvaren.\" + msg.payload.message };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 3120,
        "wires": [
            [
                "40ed356cf71a23de"
            ]
        ]
    },
    {
        "id": "54b12257f4a94b77",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "System Status/Overide",
        "info": "",
        "x": 160,
        "y": 1200,
        "wires": []
    },
    {
        "id": "b478d0db2b70e8aa",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "DeaktiverBryter",
        "label": "Deaktivere Bryter (Man/Av/Auto)",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 14,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 420,
        "y": 1260,
        "wires": [
            [
                "0f6199f63595e02c",
                "33312b8bbafd2fbb"
            ]
        ]
    },
    {
        "id": "33312b8bbafd2fbb",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myManuellKjoringState",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 1260,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "0a58943a5119541a",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "1c31383f58ccd4f8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Omstart",
        "tooltip": "",
        "color": "white",
        "bgcolor": "red",
        "className": "",
        "icon": "close",
        "payload": "Trukk OK for omstart av systemmet. Hvis du ikke er sikker - trykk CANCEL nå!",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 160,
        "y": 1720,
        "wires": [
            [
                "db9e027392c5b21e"
            ]
        ]
    },
    {
        "id": "9e4b31212a818980",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Omstart",
        "info": "",
        "x": 110,
        "y": 1660,
        "wires": []
    },
    {
        "id": "db9e027392c5b21e",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "ADVARSEL",
        "name": "",
        "x": 330,
        "y": 1720,
        "wires": [
            [
                "91f87512e16887b3"
            ]
        ]
    },
    {
        "id": "91f87512e16887b3",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1720,
        "wires": [
            [
                "2ef322e034f98afc"
            ]
        ]
    },
    {
        "id": "9c4441022fa25dc3",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "0",
        "op2": "",
        "op1type": "str",
        "op2type": "date",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1020,
        "y": 1260,
        "wires": [
            [],
            [
                "142ac5ca21618d51"
            ]
        ]
    },
    {
        "id": "142ac5ca21618d51",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "link out Manuell Kjoring",
        "mode": "link",
        "links": [
            "19e1100a281a1a59",
            "bb177e98cd2da314"
        ],
        "x": 1145,
        "y": 1280,
        "wires": []
    },
    {
        "id": "5b2f4d4e11e164f2",
        "type": "ui_template",
        "z": "483a6f631e7f69a7",
        "group": "8fb401a08da32934",
        "name": "",
        "order": 3,
        "width": 0,
        "height": 0,
        "format": "<div ng-bind-html=\"msg.payload\"></div>\n<style>\n    \n    /* Set Background picture */\n    body {\n        background-image: url(\"/Background.png\");\n        background-repeat: no-repeat;\n        background-position: center;\n        background-size: contain;\n    }\n\n    /* Styling for all the groups */\n    ui-card-panel {\n        box-shadow: rgba(0,0,0,0.55) 0px 15px 25px !important;\n        border-radius: 5px;\n        background: rgba(50,50,50,0.75) !important;\n    }\n    \n    /* Styling for all the lelements in the groups */\n    ui-card-panel * {\n        border-radius: 2.5px;\n    }\n\n    /* Styling */\n    md-card {\n        background: rgba(50,50,50,0.75) !important;\n    }\n\n    /* Styling of the Group Title */\n    .nr-dashboard-cardtitle {\n        font-weight: bold !important;\n    }\n\n</style>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "global",
        "className": "",
        "x": 160,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "7a113f2f974a1dae",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": " Aktivere Lampe 1",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 320,
        "wires": [
            [
                "80772545d1e55244",
                "da8e8ea18dc47c69"
            ]
        ]
    },
    {
        "id": "da8e8ea18dc47c69",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe1En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 320,
        "wires": [
            [
                "4f19a906966b33c4"
            ]
        ]
    },
    {
        "id": "9888f53a4dba56d9",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Aktivere Lampe 2",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 420,
        "wires": [
            [
                "4240b58247da8662",
                "1ac3755c818bbb14"
            ]
        ]
    },
    {
        "id": "1ac3755c818bbb14",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe2En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 420,
        "wires": [
            [
                "2ff74425e33e6373"
            ]
        ]
    },
    {
        "id": "ebf6b44764fc7b05",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": " Aktivere Lampe 3",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 520,
        "wires": [
            [
                "3ce9de1f03152b4b",
                "d78dcfddd87ec46b"
            ]
        ]
    },
    {
        "id": "d78dcfddd87ec46b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe3En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 520,
        "wires": [
            [
                "62f7b48dcbda874c"
            ]
        ]
    },
    {
        "id": "5a17ca09c4ea4a62",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Aktivere Lampe 4",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 620,
        "wires": [
            [
                "2c8782f46aa80988",
                "b35b12e3c51bd86a"
            ]
        ]
    },
    {
        "id": "b35b12e3c51bd86a",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe4En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 620,
        "wires": [
            [
                "8f3b748b72912b3b"
            ]
        ]
    },
    {
        "id": "9be8d603c2f9a2a3",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": " Aktivere Lampe 5",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 720,
        "wires": [
            [
                "592ea8cc15e1b674",
                "b4daa565f7d18b63"
            ]
        ]
    },
    {
        "id": "b4daa565f7d18b63",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe5En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 720,
        "wires": [
            [
                "4af1e2fca77db38a"
            ]
        ]
    },
    {
        "id": "ea9b30ce8736a6c1",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Aktivere Lampe 6",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 820,
        "wires": [
            [
                "e0eb3af760b09bea",
                "f0b8619a95c18428"
            ]
        ]
    },
    {
        "id": "f0b8619a95c18428",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe6En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 600,
        "y": 820,
        "wires": [
            [
                "0d0333cce94a1861"
            ]
        ]
    },
    {
        "id": "4f19a906966b33c4",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 320,
        "wires": [
            [
                "b0678749530ae61c"
            ],
            [
                "e21c0ddaf8225231"
            ]
        ]
    },
    {
        "id": "b0678749530ae61c",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_1\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 300,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "e21c0ddaf8225231",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_1\"]}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "Lampe1Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 340,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "03d2fa616f31f01c",
        "type": "ui_ui_control",
        "z": "483a6f631e7f69a7",
        "name": "",
        "events": "change",
        "x": 1280,
        "y": 580,
        "wires": [
            [
                "b91ba79f1ead1054",
                "2463515280e7bef8",
                "0beb7fc68551a8f6"
            ]
        ]
    },
    {
        "id": "2ff74425e33e6373",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 420,
        "wires": [
            [
                "f4a7b993c97da077"
            ],
            [
                "8b535299319578d1"
            ]
        ]
    },
    {
        "id": "f4a7b993c97da077",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_2\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 400,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "8b535299319578d1",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_2\"]}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "Lampe2Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 440,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "62f7b48dcbda874c",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 520,
        "wires": [
            [
                "cd736e5ef3766df0"
            ],
            [
                "b784750d653c40a7"
            ]
        ]
    },
    {
        "id": "cd736e5ef3766df0",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_3\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 500,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "b784750d653c40a7",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_3\"]}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "Lampe3Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 540,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "8f3b748b72912b3b",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 620,
        "wires": [
            [
                "b9c3dfd449c2ea9b"
            ],
            [
                "961ae798fe59177d"
            ]
        ]
    },
    {
        "id": "b9c3dfd449c2ea9b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_4\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 600,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "961ae798fe59177d",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_4\"]}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "Lampe4Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 640,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "4af1e2fca77db38a",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 720,
        "wires": [
            [
                "e646a1a7a8d503f9"
            ],
            [
                "f5b858411fdadf50"
            ]
        ]
    },
    {
        "id": "e646a1a7a8d503f9",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_5\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 700,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "f5b858411fdadf50",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_5\"]}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "Lampe5Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 740,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "0d0333cce94a1861",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 790,
        "y": 820,
        "wires": [
            [
                "216f18c5df9a42e0"
            ],
            [
                "c334077b933c4c7e"
            ]
        ]
    },
    {
        "id": "216f18c5df9a42e0",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_6\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 800,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "c334077b933c4c7e",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_6\"]}}",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "Lampe6Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 930,
        "y": 840,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "cc41947dcd6a7447",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 170,
        "y": 2500,
        "wires": [
            [
                "bd2bf422b00f4ea1"
            ]
        ]
    },
    {
        "id": "136cbb4d09d53679",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 170,
        "y": 2620,
        "wires": [
            [
                "f4894c4f1c847f1c"
            ]
        ]
    },
    {
        "id": "39950418cf657b21",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "9eb895dadc67bea0",
        "name": "myBuzzerDisabled",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 190,
        "y": 1360,
        "wires": [
            [
                "fbd47f18eb2c1b2e"
            ]
        ]
    },
    {
        "id": "73b0e388477c6a78",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d5e8bd2b1115be28",
        "name": "FW_Link",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 2820,
        "wires": [
            [
                "bf46220a5ddc0c5a"
            ]
        ]
    },
    {
        "id": "fc1097f1322444ad",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 1260,
        "wires": [
            [
                "b478d0db2b70e8aa"
            ]
        ]
    },
    {
        "id": "a4d0915da9164c50",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "6e1e834c24242472",
        "name": "Lampe1En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 320,
        "wires": [
            [
                "7a113f2f974a1dae"
            ]
        ]
    },
    {
        "id": "cca950337b0e4cd6",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dbd084ce70a3aca9",
        "name": "Lampe2En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 420,
        "wires": [
            [
                "9888f53a4dba56d9"
            ]
        ]
    },
    {
        "id": "d92b02fa08482154",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "3ebac7f92155048a",
        "name": "Lampe3En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 520,
        "wires": [
            [
                "ebf6b44764fc7b05"
            ]
        ]
    },
    {
        "id": "ea3c66bf77880b2e",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "b2b0acad0fd02e0a",
        "name": "Lampe4En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 620,
        "wires": [
            [
                "5a17ca09c4ea4a62"
            ]
        ]
    },
    {
        "id": "6d4ac23763231581",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "78fee3bd300e2412",
        "name": "Lampe5En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 720,
        "wires": [
            [
                "9be8d603c2f9a2a3"
            ]
        ]
    },
    {
        "id": "4be8e5f68a4abfe9",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dcbeac56928b2456",
        "name": "Lampe6En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 820,
        "wires": [
            [
                "ea9b30ce8736a6c1"
            ]
        ]
    },
    {
        "id": "f559be213ad80699",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 510,
        "y": 2540,
        "wires": []
    },
    {
        "id": "18c63098db69cf72",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 510,
        "y": 2660,
        "wires": []
    },
    {
        "id": "89fad0d68ea4aea0",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "9eb895dadc67bea0",
        "name": "myBuzzerDisabled",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 710,
        "y": 1400,
        "wires": []
    },
    {
        "id": "d276a4a2ddf4962d",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d5e8bd2b1115be28",
        "name": "FW_Link",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 540,
        "y": 2860,
        "wires": []
    },
    {
        "id": "0f6199f63595e02c",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": false,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 770,
        "y": 1300,
        "wires": []
    },
    {
        "id": "99221ed0b3ff9b78",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "984d640ef763cab4",
        "name": "myHWaddr",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 990,
        "y": 1940,
        "wires": []
    },
    {
        "id": "80772545d1e55244",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "6e1e834c24242472",
        "name": "Lampe1En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 570,
        "y": 360,
        "wires": []
    },
    {
        "id": "4240b58247da8662",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dbd084ce70a3aca9",
        "name": "Lampe2En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 570,
        "y": 460,
        "wires": []
    },
    {
        "id": "3ce9de1f03152b4b",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "3ebac7f92155048a",
        "name": "Lampe3En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 570,
        "y": 560,
        "wires": []
    },
    {
        "id": "2c8782f46aa80988",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "b2b0acad0fd02e0a",
        "name": "Lampe4En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 570,
        "y": 660,
        "wires": []
    },
    {
        "id": "592ea8cc15e1b674",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "78fee3bd300e2412",
        "name": "Lampe5En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 570,
        "y": 760,
        "wires": []
    },
    {
        "id": "e0eb3af760b09bea",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dcbeac56928b2456",
        "name": "Lampe6En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 570,
        "y": 860,
        "wires": []
    },
    {
        "id": "5d6762f0715ad17d",
        "type": "wifiscan",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 370,
        "y": 2140,
        "wires": [
            [
                "c14bb127b5df1c7b"
            ]
        ]
    },
    {
        "id": "f2e8fe39856e80ef",
        "type": "restart",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 810,
        "y": 3120,
        "wires": []
    },
    {
        "id": "2ef322e034f98afc",
        "type": "restart",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 650,
        "y": 1720,
        "wires": []
    },
    {
        "id": "b91ba79f1ead1054",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Reset Mode selector to AUTO",
        "rules": [
            {
                "t": "set",
                "p": "myModeSelector",
                "pt": "global",
                "to": "1",
                "tot": "num"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1510,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "3712339da3876688",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Stigetid",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 920,
        "wires": [
            [
                "2463515280e7bef8"
            ]
        ]
    },
    {
        "id": "0cbf0addbfdd9a47",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "8d055d0c1bc7c0f9",
        "name": "Stigetid",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 150,
        "y": 920,
        "wires": [
            [
                "2243d439ceee708f"
            ]
        ]
    },
    {
        "id": "2134736d5ec127c5",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "8d055d0c1bc7c0f9",
        "name": "Stigetid",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 560,
        "y": 960,
        "wires": []
    },
    {
        "id": "2243d439ceee708f",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Stigetid 0-100% [s]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "65000",
        "step": "15",
        "className": "",
        "x": 350,
        "y": 920,
        "wires": [
            [
                "2134736d5ec127c5",
                "3712339da3876688"
            ]
        ]
    },
    {
        "id": "68db6ad90ddc4ad3",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Dimmetid 100-0% [s]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 10,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "65000",
        "step": "15",
        "className": "",
        "x": 360,
        "y": 1020,
        "wires": [
            [
                "1bf3075e5bc680b7",
                "c43bcc64b8743202"
            ]
        ]
    },
    {
        "id": "b2d43b7aae3c1b2f",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "3000022b053cc228",
        "name": "Dimmetid",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 1020,
        "wires": [
            [
                "68db6ad90ddc4ad3"
            ]
        ]
    },
    {
        "id": "c43bcc64b8743202",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "3000022b053cc228",
        "name": "Dimmetid",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 560,
        "y": 1060,
        "wires": []
    },
    {
        "id": "1bf3075e5bc680b7",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Dimmetid",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 590,
        "y": 1020,
        "wires": [
            [
                "0beb7fc68551a8f6"
            ]
        ]
    },
    {
        "id": "b283553d411bf7b9",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Set Stigetid",
        "func": "return [\n    { payload: { 'lampe': 1, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'lampe': 2, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'lampe': 3, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'lampe': 4, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'lampe': 5, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'lampe': 6, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } }\n    ];",
        "outputs": 6,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 920,
        "wires": [
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ]
        ]
    },
    {
        "id": "e41e9b2efca2b2df",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Se Dimmetid",
        "func": "return [\n    { payload: { 'lampe': 1, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'lampe': 2, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'lampe': 3, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'lampe': 4, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'lampe': 5, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'lampe': 6, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } }\n    ];",
        "outputs": 6,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 1020,
        "wires": [
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ],
            [
                "036fe9570bd1280c"
            ]
        ]
    },
    {
        "id": "036fe9570bd1280c",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "link out Update Stige og Dimme settings",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 1505,
        "y": 960,
        "wires": []
    },
    {
        "id": "2463515280e7bef8",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 920,
        "y": 920,
        "wires": [
            [
                "39e728ed3ead71f9"
            ]
        ]
    },
    {
        "id": "0beb7fc68551a8f6",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 920,
        "y": 1020,
        "wires": [
            [
                "eb2e0eabb27d6b8a"
            ]
        ]
    },
    {
        "id": "064ac8a0b9a446f5",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Set Stigetid",
        "links": [
            "496fb9dac232e058"
        ],
        "x": 165,
        "y": 960,
        "wires": [
            [
                "2243d439ceee708f"
            ]
        ]
    },
    {
        "id": "0b989a0b56f00f63",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Set Dimmetid",
        "links": [
            "7a55c8c19db754e0"
        ],
        "x": 165,
        "y": 1060,
        "wires": [
            [
                "68db6ad90ddc4ad3"
            ]
        ]
    },
    {
        "id": "39e728ed3ead71f9",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Stigetid",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 920,
        "wires": [
            [
                "b283553d411bf7b9"
            ]
        ]
    },
    {
        "id": "eb2e0eabb27d6b8a",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Dimmetid",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1100,
        "y": 1020,
        "wires": [
            [
                "e41e9b2efca2b2df"
            ]
        ]
    },
    {
        "id": "f81448d7f550ebbc",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "POSISJON",
        "info": "",
        "x": 130,
        "y": 2400,
        "wires": []
    },
    {
        "id": "ed48a33732eee3a2",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "FW Upgrade",
        "info": "",
        "x": 130,
        "y": 2760,
        "wires": []
    },
    {
        "id": "40382b50765dbe43",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "System",
        "info": "",
        "x": 110,
        "y": 80,
        "wires": []
    },
    {
        "id": "7ba5e248b170868f",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Reset",
        "links": [
            "258fbcb05d0e472f"
        ],
        "x": 525,
        "y": 1760,
        "wires": [
            [
                "2ef322e034f98afc"
            ]
        ]
    },
    {
        "id": "f815e316967f8aad",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in runFWUpgrade",
        "links": [
            "e5d22582266e7253"
        ],
        "x": 185,
        "y": 3000,
        "wires": [
            [
                "f5c628fac390b678"
            ]
        ]
    },
    {
        "id": "1f38fb7ad94d5774",
        "type": "inject",
        "z": "483a6f631e7f69a7",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 170,
        "y": 180,
        "wires": [
            [
                "438e47f2cab73553"
            ]
        ]
    },
    {
        "id": "438e47f2cab73553",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "vcgencmd measure_temp",
        "addpay": "",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 390,
        "y": 180,
        "wires": [
            [
                "782e1f60e60d73e6"
            ],
            [],
            []
        ]
    },
    {
        "id": "6ff681bf5b257e78",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "8fb401a08da32934",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "CPU temperatur",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 820,
        "y": 160,
        "wires": []
    },
    {
        "id": "782e1f60e60d73e6",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Remove temp=",
        "func": "let str = msg.payload;\nlet arr = str.split(\"=\");\narr.shift();\nstr = arr.join(\"=\");\nreturn { payload: str };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 160,
        "wires": [
            [
                "6ff681bf5b257e78"
            ]
        ]
    },
    {
        "id": "ed1b54b719e8bd37",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Lampe1En",
        "links": [
            "a905f8f4d13c86e3"
        ],
        "x": 135,
        "y": 380,
        "wires": [
            [
                "7a113f2f974a1dae"
            ]
        ]
    },
    {
        "id": "7c39f660c1ae3e9b",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Lampe2En",
        "links": [
            "4d2a5268b73a20f5"
        ],
        "x": 125,
        "y": 480,
        "wires": [
            [
                "9888f53a4dba56d9"
            ]
        ]
    },
    {
        "id": "72d41e10e83b7747",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Lampe3En",
        "links": [
            "068a6459855e56b4"
        ],
        "x": 125,
        "y": 580,
        "wires": [
            [
                "ebf6b44764fc7b05"
            ]
        ]
    },
    {
        "id": "538f53838f1c56ee",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Lampe4En",
        "links": [
            "5de55c0d671ee25b"
        ],
        "x": 125,
        "y": 680,
        "wires": [
            [
                "5a17ca09c4ea4a62"
            ]
        ]
    },
    {
        "id": "aebd9e4b4d167fb4",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Lampe5En",
        "links": [
            "99472b59c81422d3"
        ],
        "x": 125,
        "y": 780,
        "wires": [
            [
                "9be8d603c2f9a2a3"
            ]
        ]
    },
    {
        "id": "0fd156bd44369080",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in Lampe6En",
        "links": [
            "acc065bfb0ac3c24"
        ],
        "x": 125,
        "y": 880,
        "wires": [
            [
                "ea9b30ce8736a6c1"
            ]
        ]
    },
    {
        "id": "ca64b0926a5d7f37",
        "type": "ui_slider",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Max. Driver Temperatur [°C]",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 12,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "30",
        "max": "90",
        "step": "1",
        "className": "",
        "x": 460,
        "y": 1480,
        "wires": [
            [
                "8b015a56cadba954",
                "7a36369141d9ca06"
            ]
        ]
    },
    {
        "id": "89b54d26a3e7cba6",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d2c111101b508bb4",
        "name": "MaxDriverTemperatur",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 1480,
        "wires": [
            [
                "ca64b0926a5d7f37"
            ]
        ]
    },
    {
        "id": "8b015a56cadba954",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d2c111101b508bb4",
        "name": "MaxDriverTemperatur",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 720,
        "y": 1520,
        "wires": []
    },
    {
        "id": "7a36369141d9ca06",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "MaxDriverTemperatur",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 750,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "0b15a252a73f9d20",
        "type": "trigger",
        "z": "389436610c6304c5",
        "name": "AlivePulse",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "100",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 430,
        "y": 460,
        "wires": [
            [
                "cdf23f9bebad3d09"
            ]
        ]
    },
    {
        "id": "a5c1a40f6aa5490b",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "DriverTemperatur",
        "payloadType": "global",
        "x": 190,
        "y": 440,
        "wires": [
            [
                "0b15a252a73f9d20",
                "55956a0eaefc9f5a",
                "55b9145c5fcdde7f"
            ]
        ]
    },
    {
        "id": "227377b89d9f05d3",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Sjekk State Machine med 1Hz",
        "info": "",
        "x": 180,
        "y": 380,
        "wires": []
    },
    {
        "id": "0373238bfae3876a",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Alive / Watchdog",
        "info": "",
        "x": 440,
        "y": 400,
        "wires": []
    },
    {
        "id": "140234849c844ca3",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Update modus?",
        "info": "",
        "x": 140,
        "y": 540,
        "wires": []
    },
    {
        "id": "d26ccf918054d530",
        "type": "switch",
        "z": "389436610c6304c5",
        "name": "Manuell Kjøring?",
        "property": "myManuellKjoringState",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 150,
        "y": 600,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "599eecdb58c4791d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Normal drift",
        "info": "",
        "x": 130,
        "y": 680,
        "wires": []
    },
    {
        "id": "e35f186791f1cae4",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Logging",
        "info": "",
        "x": 110,
        "y": 1420,
        "wires": []
    },
    {
        "id": "f919e2e4e25acf1a",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Analog inn",
        "info": "global.set(\"MB01Septiklevel\", msg.payload[8]);\nglobal.set(\"MB01Bruksvannlevel\", msg.payload[9]);\n",
        "x": 120,
        "y": 1700,
        "wires": []
    },
    {
        "id": "eed6412019e0569e",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Alarmhåndtering",
        "info": "",
        "x": 140,
        "y": 1800,
        "wires": []
    },
    {
        "id": "199fbf45b6f0067d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "System Oppstart",
        "info": "",
        "x": 140,
        "y": 80,
        "wires": []
    },
    {
        "id": "ff05082d402edd3c",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "100e44bf77834a1f",
                "cff4564a70b363a8"
            ]
        ]
    },
    {
        "id": "dc8e2bd53450658d",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "Update Position, Config an Prosessdata on startup",
        "mode": "link",
        "links": [
            "19e1100a281a1a59",
            "3bcdd38ce2c510ef",
            "bb177e98cd2da314"
        ],
        "x": 235,
        "y": 200,
        "wires": []
    },
    {
        "id": "100e44bf77834a1f",
        "type": "delay",
        "z": "389436610c6304c5",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 120,
        "y": 200,
        "wires": [
            [
                "dc8e2bd53450658d"
            ]
        ]
    },
    {
        "id": "cff4564a70b363a8",
        "type": "change",
        "z": "389436610c6304c5",
        "name": "Set global.mySystemtype & Andre preset...",
        "rules": [
            {
                "t": "set",
                "p": "mySystemStatusIndikator",
                "pt": "global",
                "to": "G",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "myPST2PWM",
                "pt": "global",
                "to": "[0,1,2,3,4,5,6,7,8,50,100,200,350,550,800,1100,1300,1900,2330,2557,2715,2871,3026,3178,3330,3479,3627,3773,3918,4061,4202,4342,4480,4616,4751,4884,5016,5145,5274,5400,5525,5648,5770,5890,6008,6125,6240,6353,6465,6575,6684,6790,6895,6999,7101,7201,7300,7397,7492,7586,7678,7768,7857,7944,8029,8113,8195,8276,8355,8432,8508,8582,8654,8725,8794,8861,8927,8991,9053,9114,9173,9231,9287,9341,9394,9445,9494,9542,9588,9632,9675,9716,9755,9793,9829,9864,9897,9928,9958,9986,10000]",
                "tot": "json"
            },
            {
                "t": "set",
                "p": "myModeSelector",
                "pt": "global",
                "to": "0",
                "tot": "num"
            },
            {
                "t": "set",
                "p": "Lampe1Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "Lampe2Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "Lampe3Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "Lampe4Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "Lampe5Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "Lampe6Status",
                "pt": "global",
                "to": "ÿ",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "e8760c74b3cdf49e",
        "type": "change",
        "z": "389436610c6304c5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HWaddr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "a5bc5fef41ba420a",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "Start Sample loop",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "[{\"lampe\":100,\"fc\":3,\"address\":1,\"quantity\":25},{\"lampe\":1,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":2,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":3,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":4,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":5,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":6,\"fc\":3,\"address\":1,\"quantity\":50}]",
        "payloadType": "json",
        "x": 190,
        "y": 800,
        "wires": [
            [
                "1fa2165e5866d52c"
            ]
        ]
    },
    {
        "id": "089c75d3c5d4b78d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Sample Lamper i sekvens",
        "info": "",
        "x": 210,
        "y": 740,
        "wires": []
    },
    {
        "id": "c0f330a21ad8dfec",
        "type": "subflow:e7722a256c713090",
        "z": "389436610c6304c5",
        "name": "",
        "x": 430,
        "y": 1080,
        "wires": [
            [
                "6d8fb636dd849de6",
                "8cc38d51a0074bd4"
            ],
            [
                "e230e0e6382efeaa"
            ]
        ]
    },
    {
        "id": "642aa16378e0192c",
        "type": "link in",
        "z": "389436610c6304c5",
        "name": "link in MODBUS msg",
        "links": [
            "887252bdc7b4cdd0",
            "47239b4d7a5639fa",
            "22f1dfc7bddd731f",
            "3cdb683d3618528b",
            "e348a25d9e2c445d",
            "c1c4d0869af13f5a",
            "443ac19b27ec0921",
            "fd4ab9d7153eee6c",
            "e923ccbae21e2d1d",
            "7b2f1619dbccb7c6",
            "dd8f8e91f0eb4279",
            "18713591d9a58de0",
            "6293d6aeec21cbd9",
            "34744888e103c185",
            "036fe9570bd1280c"
        ],
        "x": 235,
        "y": 960,
        "wires": [
            [
                "1fa2165e5866d52c"
            ]
        ]
    },
    {
        "id": "6d8fb636dd849de6",
        "type": "modbus-response",
        "z": "389436610c6304c5",
        "name": "",
        "registerShowMax": 20,
        "x": 690,
        "y": 1060,
        "wires": []
    },
    {
        "id": "e230e0e6382efeaa",
        "type": "modbus-response",
        "z": "389436610c6304c5",
        "name": "",
        "registerShowMax": 20,
        "x": 690,
        "y": 1160,
        "wires": []
    },
    {
        "id": "1d5271f67b4adabf",
        "type": "get-shared-state",
        "z": "389436610c6304c5",
        "state": "984d640ef763cab4",
        "name": "myHWaddr",
        "triggerOnInit": true,
        "triggerOnChange": false,
        "x": 120,
        "y": 260,
        "wires": [
            [
                "e8760c74b3cdf49e"
            ]
        ]
    },
    {
        "id": "cdf23f9bebad3d09",
        "type": "rpi-gpio out",
        "z": "389436610c6304c5",
        "name": "Heartbeat",
        "pin": "7",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 600,
        "y": 460,
        "wires": []
    },
    {
        "id": "1fa2165e5866d52c",
        "type": "queue",
        "z": "389436610c6304c5",
        "name": "",
        "input": "payload",
        "inputType": "msg",
        "addFields": "",
        "addFieldsType": "str",
        "pourType": "interval",
        "pourTypeType": "pourType",
        "pourTime": "0.5",
        "pourTimeType": "num",
        "pourAmount": "1",
        "pourAmountType": "num",
        "maxUseMemory": "",
        "x": 150,
        "y": 1080,
        "wires": [
            [
                "c0f330a21ad8dfec"
            ]
        ]
    },
    {
        "id": "356e2dd01d9a2f2d",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "System Feedback?",
        "func": "/*\nTower Status Summer\n*/\nfunction myStatusSummer(status, newStatus) {\n\n    // Off?\n    if (status == \"ÿ\") {\n        return newStatus;\n    }\n\n    // Alarm?\n    if(newStatus == \"r\") {\n            return \"r\";\n    }\n    if ((newStatus == \"R\") || (status == \"R\") || (status == \"r\")) {\n        if ((status == \"R\") || (status == \"r\")) {\n            return \"r\";\n        } else {\n            return \"R\";\n        }\n    }\n\n    // Warning?\n    if (newStatus == \"y\") {\n        return \"y\";\n    }\n    if ((newStatus == \"Y\") || (status == \"Y\") || (status == \"y\")) {\n        if ((status == \"Y\") || (status == \"y\")) {\n            return \"y\";\n        } else {\n            return \"Y\";\n        }\n    }\n\n    // OK/in progress?\n    if ((newStatus == \"g\") || (status == \"g\"))  {\n        return \"g\";\n    }\n    if (newStatus == \"G\") {\n        return \"G\";\n    }\n\n    // Disabled/Off?\n    if(newStatus == \"ÿ\") {\n        return status;  // return system Status unchanges\n    }\n\n    return \"ÿ\";\n}\n\n/*\nParse System Telegram\n*/\nif ((Array.isArray(msg.payload)) && (msg.topic == '100')) {\n\n    // Mode Selector\n    if(global.get(\"myManuellKjoringState\")===false) {\n        if(global.get(\"myModeSelector\") != msg.payload[2]) {\n            global.set(\"myModeSelector\", msg.payload[2]);\n        }\n    } else {\n        if(global.get(\"myModeSelector\") != 1) {\n            global.set(\"myModeSelector\", 1);\n        }\n    }\n\n    // Driver Temp.\n    global.set(\"DriverTemperatur\",msg.payload[20]);\n\n    // Tower update\n    let myTowerMode = msg.payload[8];\n    let LampeStatus = \"ÿ\";\n    LampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe1Status\"));\n    LampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe2Status\"));\n    LampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe3Status\"));\n    LampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe4Status\"));\n    LampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe5Status\"));\n    LampeStatus = myStatusSummer(LampeStatus, global.get(\"Lampe6Status\"));\n\n    if(global.get(\"mySystemStatusIndikator\") != LampeStatus) {\n        global.set(\"mySystemStatusIndikator\", LampeStatus);\n    }\n    node.status({text:\"Temp: \"+ msg.payload[20] + \" 1:\" + global.get(\"Lampe1Status\") + \" 2:\" + global.get(\"Lampe2Status\") + \" 3:\" + global.get(\"Lampe3Status\") + \" 4:\" + global.get(\"Lampe4Status\") + \" 5:\" + global.get(\"Lampe5Status\") + \" 6:\" + global.get(\"Lampe6Status\") });\n\n    if( myTowerMode != LampeStatus.charCodeAt(0)) {\n        return { payload: { 'value': LampeStatus.charCodeAt(0), 'fc': 6, 'address': 9 , 'quantity': 1 } };\n    }\n\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1280,
        "wires": [
            [
                "34744888e103c185"
            ]
        ]
    },
    {
        "id": "8845ca88ea6d4f1d",
        "type": "link in",
        "z": "389436610c6304c5",
        "name": "link in System Feedback",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 95,
        "y": 1280,
        "wires": [
            [
                "aab8eaa96f877de8"
            ]
        ]
    },
    {
        "id": "34744888e103c185",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out Update Tower",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "739c60140fc57b11"
        ],
        "x": 555,
        "y": 1280,
        "wires": []
    },
    {
        "id": "aab8eaa96f877de8",
        "type": "delay",
        "z": "389436610c6304c5",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 210,
        "y": 1280,
        "wires": [
            [
                "356e2dd01d9a2f2d"
            ]
        ]
    },
    {
        "id": "55956a0eaefc9f5a",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Mode Selector",
        "func": "// MAN = 2 (100%)\n// OFF = 0 (0%)\n// AUTO = 1 (Justere lysstyrken til satt verdi)\n\nlet myLastMode = flow.get(\"myLastMode\"); \nlet myModeSelector = global.get(\"myModeSelector\");\nif( myLastMode !== myModeSelector) {\n    flow.set(\"myLastMode\", myModeSelector);\n    if(myModeSelector==0) {\n        return { payload: 0, enabled: false};\n    }\n    if(myModeSelector==2) {\n        return { payload: 100, enabled: false};\n    }\n\n    return { enabled: true}\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 480,
        "y": 520,
        "wires": [
            [
                "697e84fb6138d306"
            ]
        ]
    },
    {
        "id": "697e84fb6138d306",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out Set Lampe X PWM",
        "mode": "link",
        "links": [
            "0212c851d6375ee4",
            "2337bede3b108eb4",
            "56a3e5eb0558aee0",
            "6aa3a5b9eb3eb915",
            "745caaff2fe6a583",
            "acf426c9f4cfd90b"
        ],
        "x": 615,
        "y": 520,
        "wires": []
    },
    {
        "id": "8cc38d51a0074bd4",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out MODBUS FC 3",
        "mode": "link",
        "links": [
            "20c18c2df895357f",
            "630e275db65d31c6",
            "6e799390a285957b",
            "7cd4d5d7ba1473a5",
            "8017046007044d71",
            "8845ca88ea6d4f1d",
            "ced6cad19131ba87"
        ],
        "x": 635,
        "y": 1020,
        "wires": []
    },
    {
        "id": "53f01ac327a1cb3e",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "3600",
        "crontab": "",
        "once": true,
        "onceDelay": "15",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 1480,
        "wires": [
            [
                "98ea3027fec75c8a"
            ]
        ]
    },
    {
        "id": "98ea3027fec75c8a",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out MQTT Data Logg",
        "mode": "link",
        "links": [
            "bb177e98cd2da314"
        ],
        "x": 255,
        "y": 1480,
        "wires": []
    },
    {
        "id": "55b9145c5fcdde7f",
        "type": "ui_chart",
        "z": "389436610c6304c5",
        "name": "Driver1Temp",
        "group": "8fb401a08da32934",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "Driver Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 430,
        "y": 580,
        "wires": [
            []
        ]
    },
    {
        "id": "9d2cd34151d9a265",
        "type": "mqtt out",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f2615cba8578655a",
        "x": 690,
        "y": 540,
        "wires": []
    },
    {
        "id": "bdf10b8e21cfdee3",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater posisjon",
        "func": "var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myGeometric = {};\nvar myLat = global.get(\"myLat\");\nvar myLon = global.get(\"myLon\");\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyGeometric[\"type\"] = \"Point\"; // myGeo.geometry.type;\nmyGeometric[\"coordinates\"] = [Number(myLon), Number(myLat)];  // myGeo.geometry.coordinate;\n\nmyPayload[\"geometry\"] = myGeometric;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 380,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "7852d349bce530f1",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send oppstartsmelding med tid og posisjon",
        "info": "",
        "x": 220,
        "y": 320,
        "wires": []
    },
    {
        "id": "3bcdd38ce2c510ef",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater posisjon",
        "links": [
            "66075e03ab09b9bf",
            "dc8e2bd53450658d",
            "f0da8ba54ddf95de"
        ],
        "x": 185,
        "y": 380,
        "wires": [
            [
                "bdf10b8e21cfdee3"
            ]
        ]
    },
    {
        "id": "096736127f61bc2e",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater konfigurasjon",
        "func": "var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myConfig = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyConfig[\"hostname\"] = global.get(\"hostname\");\n//myConfig[\"Systemtype\"] = global.get(\"mySystemtype\");  // \"Sortvann001\";\n//myConfig[\"Septikpumpetid\"] = global.get(\"mySeptikpumpetid\");\n//myConfig[\"Septikpumpepausetid\"] = global.get(\"mySeptikpumpepausetid\");\n//myConfig[\"BrukstankHNivaaIProsent\"] = global.get(\"myBrukstankHNivaaIProsent\");\n//myConfig[\"BrukstankLLNivaaIProsent\"] = global.get(\"myBrukstankLLNivaaIProsent\");\n//myConfig[\"O2Intervall\"] = global.get(\"myO2Intervall\");\n//myConfig[\"O2Runtime\"] = global.get(\"myO2Runtime\");\n//myConfig[\"O3Runtime\"] = global.get(\"myO3Runtime\");\n//myConfig[\"BuzzerDisabled\"] = global.get(\"BuzzerDisabled\");\n//myConfig[\"Forbrukspumpetid\"] = global.get(\"myForbrukspumpetid\");\n//myConfig[\"Forbrukspumpepausetid\"] = global.get(\"myForbrukspumpepausetid\");\n//myConfig[\"Nattkjoring\"] = global.get(\"myNattkjoring\");\n//myConfig[\"MaksverdiSeptikAN\"] = global.get(\"myMaksverdiSeptikAN\");\n//myConfig[\"MinverdiSeptikAN\"] = global.get(\"myMinverdiSeptikAN\");\n//myConfig[\"MinimumsnivaaSeptikProsent\"] = global.get(\"myMinimumsnivaaSeptikProsent\");\n//myConfig[\"MaksverdiBruksvannAN\"] = global.get(\"myMaksverdiBruksvannAN\");\n//myConfig[\"MinverdiBruksvannAN\"] = global.get(\"myMinverdiBruksvannAN\");\n//myConfig[\"MinimumsnivaaBruksvannProsent\"] = global.get(\"myMinimumsnivaaBruksvannProsent\");\n//myConfig[\"\"] = global.get(\"\");\n//myConfig[\"\"] = global.get(\"\");\n\nmyPayload[\"config\"] = myConfig;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 540,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "b370efcdefd7ecd6",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send konfigurasjonsendringer",
        "info": "",
        "x": 180,
        "y": 480,
        "wires": []
    },
    {
        "id": "19e1100a281a1a59",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater konfigurasjon",
        "links": [
            "1bb45da5f98ef2a2",
            "ec97a38cfde26961",
            "cd643db2d4e2dd54",
            "dc8e2bd53450658d",
            "142ac5ca21618d51",
            "ac692d21344025f2"
        ],
        "x": 185,
        "y": 540,
        "wires": [
            [
                "096736127f61bc2e"
            ]
        ]
    },
    {
        "id": "2ea22bfed3861ec2",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send prosessdata",
        "info": "",
        "x": 150,
        "y": 640,
        "wires": []
    },
    {
        "id": "f4748bd882951979",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater prosessdata",
        "func": "var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myStatus = (global.get(\"myManuellKjoringState\") ? \"M\" : \"A\") + global.get(\"mySystemStatusIndikator\");  // Status[0] = <A,O,M> (Auto, Off, Manuell), Status[1] = <ÿ,G,g,Y,y,R,r> (Off,Grønn,grønnblink,Gul,gulblink,Rød, rødblink)\nvar myData = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\nmyPayload[\"status\"] = myStatus;\n\nmyData[\"Lampe1Data\"] = global.get(\"Lampe1Data\");\nmyData[\"Lampe2Data\"] = global.get(\"Lampe2Data\");\nmyData[\"Lampe3Data\"] = global.get(\"Lampe3Data\");\nmyData[\"Lampe4Data\"] = global.get(\"Lampe4Data\");\nmyData[\"Lampe5Data\"] = global.get(\"Lampe5Data\");\nmyData[\"Lampe6Data\"] = global.get(\"Lampe6Data\");\n\nmyPayload[\"data\"] = myData;\n\nlet d = new Date(Date.now());\nlet myFilename = '/home/pi/logg/' + d.getFullYear() + '/' + (d.getMonth()+1) + '.txt';\n\nreturn {\"topic\": myTopic, \"payload\": myPayload, \"filename\": myFilename};",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 700,
        "wires": [
            [
                "9d2cd34151d9a265",
                "2787b3213104d9b9"
            ]
        ]
    },
    {
        "id": "bb177e98cd2da314",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater Prosessdata",
        "links": [
            "a6ae04c8e40eb804",
            "867f354c7f729c72",
            "dc8e2bd53450658d",
            "142ac5ca21618d51",
            "ac692d21344025f2",
            "98ea3027fec75c8a"
        ],
        "x": 185,
        "y": 700,
        "wires": [
            [
                "f4748bd882951979"
            ]
        ]
    },
    {
        "id": "e7d5308ff8080842",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Prosess inndata",
        "info": "",
        "x": 140,
        "y": 820,
        "wires": []
    },
    {
        "id": "5ff552d33d303762",
        "type": "mqtt in",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "f2615cba8578655a",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 350,
        "y": 940,
        "wires": [
            [
                "df70cc9af0041d36"
            ]
        ]
    },
    {
        "id": "746b0006df813a46",
        "type": "inject",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 880,
        "wires": [
            [
                "0f9268e9eb004f16"
            ]
        ]
    },
    {
        "id": "0f9268e9eb004f16",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Set topic med HWAddr",
        "func": "let myTopic = \"ktas_cmd/\" + global.get(\"HWaddr\");\n\nreturn {\"action\": \"subscribe\", \"topic\": myTopic};",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 940,
        "wires": [
            [
                "5ff552d33d303762"
            ]
        ]
    },
    {
        "id": "df70cc9af0041d36",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Tolke innkommende data",
        "func": "let getStatus = null;\nlet getConfig = null;\nlet getPos = null;\nlet setManuellKjoringState = null; \nlet setLat = null;\nlet setLon = null;\nlet setSSID = null;\nlet setWifiPassword = null;\nlet setReset = null;\nlet setRunFWUpgrade = null;\nlet Lampe = null;\nlet setPWM = null;\nlet setEnable = null;\nlet setLampeEnable = null;\nlet setStigetid = null;\nlet setDimmetid = null;\n\n\n// Command (cmd)\nif ((msg.payload.cmd === \"Status\") || (msg.payload.cmd === \"status\") || (msg.payload.cmd === \"STATUS\")) {\n    getStatus = true;\n} else if ((msg.payload.cmd === \"Konfig\") || (msg.payload.cmd === \"konfig\") || (msg.payload.cmd === \"KONFIG\")\n    || (msg.payload.cmd === \"Config\") || (msg.payload.cmd === \"config\") || (msg.payload.cmd === \"CONFIG\")) {\n    getConfig = true;\n} else if ((msg.payload.cmd === \"Pos\") || (msg.payload.cmd === \"pos\") || (msg.payload.cmd === \"POS\")\n    || (msg.payload.cmd === \"gps\") || (msg.payload.cmd === \"GPS\")) {\n    getPos = true;\n} else if ((msg.payload.cmd === \"Reset\") || (msg.payload.cmd === \"reset\") || (msg.payload.cmd === \"RESET\")) {\n    setReset = true;\n} else if ((msg.payload.cmd === \"RunFWUpgrade\") || (msg.payload.cmd === \"runfwupgrade\") || (msg.payload.cmd === \"Run FW upgrade\") || (msg.payload.cmd === \"RUNFWUPGRADE\")) {\n    setRunFWUpgrade = true;\n}\n\n// ManuellKjoringState\nif ((msg.payload.ManuellKjoringState === true) || (msg.payload.ManuellKjoringState === 1)) {\n    setManuellKjoringState = true;\n} else if ((msg.payload.ManuellKjoringState === false) || (msg.payload.ManuellKjoringState === 0)) {\n    setManuellKjoringState = false;\n}\n\n// Lat\nif (msg.payload.Lat !== undefined) {\n    setLat = msg.payload.Lat;\n}\n\n// Lon\nif (msg.payload.Lon !== undefined) {\n    setLon = msg.payload.Lon;\n}\n\n// SSID\nif (msg.payload.SSID !== undefined) {\n    setSSID = msg.payload.SSID;\n}\n\n// WifiPassword\nif (msg.payload.WifiPassword !== undefined) {\n    setWifiPassword = msg.payload.WifiPassword;\n}\n\n// Lampe?\nif ((msg.payload.Lampe !== undefined) && (msg.payload.Lampe >= 0) && (msg.payload.Lampe <= 6)) {\n    Lampe = msg.payload.Lampe;\n    if ((msg.payload.setPWM !== undefined) && (msg.payload.setPWM >= 0) && (msg.payload.setPWM <= 100)) {\n        setPWM = msg.payload.setPWM;\n    }\n    if (msg.payload.Enable !== undefined) {\n        setEnable = msg.payload.Enable;\n    }\n    if (msg.payload.enable !== undefined) {\n        setEnable = msg.payload.Enable;\n    }\n    if (msg.payload.ENABLE !== undefined) {\n        setEnable = msg.payload.Enable;\n    }\n}\n\n\n/*\n// P1\nif ((msg.payload.P1 === true) || (msg.payload.P1 === 1)) {\n    global.set(\"P1On\",1);\n} else if ((msg.payload.P1 === false) || (msg.payload.P1 === 0)) {\n    global.set(\"P1On\", 0);\n}\n\n// RL1\nif ((msg.payload.RL1 === true) || (msg.payload.RL1 === 1)) {\n    global.set(\"RL1On\", 1);\n} else if ((msg.payload.RL1 === false) || (msg.payload.RL1 === 0)) {\n    global.set(\"RL1On\", 0);\n}\n\n// myConfig[\"Septikpumpetid\"] = global.get(\"mySeptikpumpetid\");\nif (msg.payload.Septikpumpetid !== undefined) {\n    setSeptikpumpetid = msg.payload.Septikpumpetid;\n}\n\n*/\n\nreturn [\n    { payload: getStatus },\n    { payload: getConfig },\n    { payload: getPos },\n    { payload: setManuellKjoringState },\n    { payload: setLat },\n    { payload: setLon },\n    { payload: setSSID },\n    { payload: setWifiPassword },\n    { payload: setReset },\n    null,\n    { payload: setRunFWUpgrade },\n    { payload: (setPWM===undefined?null:{\"Lampe\": Lampe, \"setPWM\": setPWM }) },\n    { payload: (setEnable===undefined?null:{\"Lampe\": Lampe, \"Enable\": setEnable }) },\n    { payload: (msg.payload.Stigetid === undefined ? null : msg.payload.Stigetid) },\n    { payload: (msg.payload.Dimmetid === undefined ? null : msg.payload.Dimmetid) }\n];",
        "outputs": 15,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 270,
        "y": 1320,
        "wires": [
            [
                "759cd29b3e825093"
            ],
            [
                "dec5ae09f4f715be"
            ],
            [
                "2054e2989f4561d8"
            ],
            [
                "517fe687ab2af65d"
            ],
            [
                "28c0d9274d4fbd18"
            ],
            [
                "130354b9a59ee94e"
            ],
            [
                "76251ae28fcb562e"
            ],
            [
                "bdf4358a52864a4e"
            ],
            [
                "01b1f4e23ec4bfb8"
            ],
            [],
            [
                "b9027b7b8b98f523"
            ],
            [
                "98bb2d9f8b2d2bd9"
            ],
            [
                "c1ecbda1a2c8fa4d"
            ],
            [
                "f6cb3f3aeb5f742e"
            ],
            [
                "de5928872408d3a4"
            ]
        ]
    },
    {
        "id": "759cd29b3e825093",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner prosessdata",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 1000,
        "wires": [
            [
                "867f354c7f729c72"
            ]
        ]
    },
    {
        "id": "dec5ae09f4f715be",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner konfigurasjonsdata",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 760,
        "y": 1040,
        "wires": [
            [
                "ec97a38cfde26961"
            ]
        ]
    },
    {
        "id": "867f354c7f729c72",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "bb177e98cd2da314"
        ],
        "x": 935,
        "y": 1000,
        "wires": []
    },
    {
        "id": "ec97a38cfde26961",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "19e1100a281a1a59"
        ],
        "x": 935,
        "y": 1040,
        "wires": []
    },
    {
        "id": "2054e2989f4561d8",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner posisjon",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1080,
        "wires": [
            [
                "f0da8ba54ddf95de"
            ]
        ]
    },
    {
        "id": "f0da8ba54ddf95de",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "3bcdd38ce2c510ef"
        ],
        "x": 935,
        "y": 1080,
        "wires": []
    },
    {
        "id": "517fe687ab2af65d",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set ManuellKjoringState",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 1160,
        "wires": [
            [
                "831d01bfc3dde3a0"
            ]
        ]
    },
    {
        "id": "28c0d9274d4fbd18",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lat",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1240,
        "wires": [
            [
                "7ec59ce7537fe97d"
            ]
        ]
    },
    {
        "id": "130354b9a59ee94e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lon",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1300,
        "wires": [
            [
                "407d6e7c6cdf834a"
            ]
        ]
    },
    {
        "id": "76251ae28fcb562e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set SSID",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1380,
        "wires": [
            [
                "bd09041f1951af61"
            ]
        ]
    },
    {
        "id": "bdf4358a52864a4e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set WifiPassword",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1420,
        "wires": [
            [
                "0fa5e2f74c05ad92"
            ]
        ]
    },
    {
        "id": "bd09041f1951af61",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out SSID",
        "mode": "link",
        "links": [
            "43a334e28706087c"
        ],
        "x": 935,
        "y": 1380,
        "wires": []
    },
    {
        "id": "0fa5e2f74c05ad92",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out WifiPassword",
        "mode": "link",
        "links": [
            "13a7ca5bd49cdb11"
        ],
        "x": 935,
        "y": 1420,
        "wires": []
    },
    {
        "id": "831d01bfc3dde3a0",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": false,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 1030,
        "y": 1160,
        "wires": []
    },
    {
        "id": "7ec59ce7537fe97d",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 970,
        "y": 1240,
        "wires": []
    },
    {
        "id": "407d6e7c6cdf834a",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 970,
        "y": 1300,
        "wires": []
    },
    {
        "id": "6fefe8c93faf2667",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Connect",
        "info": "",
        "x": 120,
        "y": 80,
        "wires": []
    },
    {
        "id": "4657629c23bb998b",
        "type": "mqtt in",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "f2615cba8578655a",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 350,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "7d8af44242668085",
        "type": "inject",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 140,
        "wires": [
            [
                "e643e1e93ef0a951"
            ]
        ]
    },
    {
        "id": "e643e1e93ef0a951",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Connect to Broker",
        "func": "return {\"action\": \"connect\", \"broker\": {\"broker\": \"128.199.38.63\", \"port\": 1883, \"username\": \"bio3000\", \"password\": \"Joy53606\"}};",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 150,
        "y": 200,
        "wires": [
            [
                "4657629c23bb998b"
            ]
        ]
    },
    {
        "id": "2787b3213104d9b9",
        "type": "file",
        "z": "ec96b8f08fb0c19e",
        "name": "logg file",
        "filename": "filename",
        "filenameType": "msg",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 540,
        "y": 720,
        "wires": [
            []
        ]
    },
    {
        "id": "98bb2d9f8b2d2bd9",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lampe PWM",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1680,
        "wires": [
            [
                "1140c68fd17e11b6"
            ]
        ]
    },
    {
        "id": "1140c68fd17e11b6",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lampe x PWM",
        "func": "let myModeSelector = global.get(\"myModeSelector\");\nnode.status({'text': msg.payload.Lampe + \" \" + msg.payload.setPWM});\nreturn [ \n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==1)) && (myModeSelector==1)? { payload: msg.payload.setPWM}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==2)) && (myModeSelector==1)? { payload: msg.payload.setPWM}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==3)) && (myModeSelector==1)? { payload: msg.payload.setPWM}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==4)) && (myModeSelector==1)? { payload: msg.payload.setPWM}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==5)) && (myModeSelector==1)? { payload: msg.payload.setPWM}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==6)) && (myModeSelector==1)? { payload: msg.payload.setPWM}:null)\n];",
        "outputs": 6,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 1680,
        "wires": [
            [
                "f6b75ae89ada85a3"
            ],
            [
                "72210dbade498dac"
            ],
            [
                "430ac708239bc44b"
            ],
            [
                "8fe2f39d57373487"
            ],
            [
                "bb6371f487f9bf67"
            ],
            [
                "064d66898ded9d78"
            ]
        ]
    },
    {
        "id": "f6b75ae89ada85a3",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 1 PWM",
        "mode": "link",
        "links": [
            "0212c851d6375ee4"
        ],
        "x": 1095,
        "y": 1620,
        "wires": []
    },
    {
        "id": "72210dbade498dac",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 2 PWM",
        "mode": "link",
        "links": [
            "56a3e5eb0558aee0"
        ],
        "x": 1135,
        "y": 1640,
        "wires": []
    },
    {
        "id": "8fe2f39d57373487",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 4 PWM",
        "mode": "link",
        "links": [
            "745caaff2fe6a583"
        ],
        "x": 1175,
        "y": 1700,
        "wires": []
    },
    {
        "id": "bb6371f487f9bf67",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 5 PWM",
        "mode": "link",
        "links": [
            "2337bede3b108eb4"
        ],
        "x": 1135,
        "y": 1720,
        "wires": []
    },
    {
        "id": "064d66898ded9d78",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 6 PWM",
        "mode": "link",
        "links": [
            "6aa3a5b9eb3eb915"
        ],
        "x": 1095,
        "y": 1740,
        "wires": []
    },
    {
        "id": "430ac708239bc44b",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 3 PWM",
        "mode": "link",
        "links": [
            "acf426c9f4cfd90b"
        ],
        "x": 1175,
        "y": 1660,
        "wires": []
    },
    {
        "id": "f6cb3f3aeb5f742e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Stigetid 0-100% [s]",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 2000,
        "wires": [
            [
                "496fb9dac232e058"
            ]
        ]
    },
    {
        "id": "de5928872408d3a4",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Dimmetid 0-100% [s]",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 2080,
        "wires": [
            [
                "7a55c8c19db754e0"
            ]
        ]
    },
    {
        "id": "496fb9dac232e058",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Stigetid",
        "mode": "link",
        "links": [
            "064ac8a0b9a446f5"
        ],
        "x": 895,
        "y": 2000,
        "wires": []
    },
    {
        "id": "7a55c8c19db754e0",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Dimmetid",
        "mode": "link",
        "links": [
            "0b989a0b56f00f63"
        ],
        "x": 915,
        "y": 2080,
        "wires": []
    },
    {
        "id": "01b1f4e23ec4bfb8",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Reset",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1500,
        "wires": [
            [
                "258fbcb05d0e472f"
            ]
        ]
    },
    {
        "id": "258fbcb05d0e472f",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Reset",
        "mode": "link",
        "links": [
            "7ba5e248b170868f"
        ],
        "x": 935,
        "y": 1500,
        "wires": []
    },
    {
        "id": "b9027b7b8b98f523",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Run FW upgrade",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 1580,
        "wires": [
            [
                "e5d22582266e7253"
            ]
        ]
    },
    {
        "id": "e5d22582266e7253",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out RunFWUpgrade",
        "mode": "link",
        "links": [
            "f815e316967f8aad"
        ],
        "x": 935,
        "y": 1580,
        "wires": []
    },
    {
        "id": "c1ecbda1a2c8fa4d",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lampe Enable",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1860,
        "wires": [
            [
                "b9b2fa687f2f81cc"
            ]
        ]
    },
    {
        "id": "b9b2fa687f2f81cc",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lampe x Enable",
        "func": "node.status({'text': msg.payload.Lampe + \" \" + msg.payload.Enable});\nreturn [ \n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==1)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==2)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==3)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==4)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==5)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==6)) ? { payload: msg.payload.Enable}:null)\n];",
        "outputs": 6,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 960,
        "y": 1860,
        "wires": [
            [
                "a905f8f4d13c86e3"
            ],
            [
                "4d2a5268b73a20f5"
            ],
            [
                "068a6459855e56b4"
            ],
            [
                "5de55c0d671ee25b"
            ],
            [
                "99472b59c81422d3"
            ],
            [
                "acc065bfb0ac3c24"
            ]
        ]
    },
    {
        "id": "a905f8f4d13c86e3",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 1 Enable",
        "mode": "link",
        "links": [
            "ed1b54b719e8bd37"
        ],
        "x": 1095,
        "y": 1800,
        "wires": []
    },
    {
        "id": "4d2a5268b73a20f5",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 2 Enable",
        "mode": "link",
        "links": [
            "7c39f660c1ae3e9b"
        ],
        "x": 1135,
        "y": 1820,
        "wires": []
    },
    {
        "id": "5de55c0d671ee25b",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 4 Enable",
        "mode": "link",
        "links": [
            "538f53838f1c56ee"
        ],
        "x": 1175,
        "y": 1880,
        "wires": []
    },
    {
        "id": "99472b59c81422d3",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 5 Enable",
        "mode": "link",
        "links": [
            "aebd9e4b4d167fb4"
        ],
        "x": 1135,
        "y": 1900,
        "wires": []
    },
    {
        "id": "acc065bfb0ac3c24",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 6 Enable",
        "mode": "link",
        "links": [
            "0fd156bd44369080"
        ],
        "x": 1095,
        "y": 1920,
        "wires": []
    },
    {
        "id": "068a6459855e56b4",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out Lampe 3 Enable",
        "mode": "link",
        "links": [
            "72d41e10e83b7747"
        ],
        "x": 1175,
        "y": 1840,
        "wires": []
    },
    {
        "id": "6a63b433.e2a73c",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "cat /etc/dhcpcd.conf",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "name": "",
        "x": 476,
        "y": 179,
        "wires": [
            [
                "3239ea8.73a1016"
            ],
            [],
            []
        ]
    },
    {
        "id": "3239ea8.73a1016",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "parse response",
        "func": "var lines = msg.payload.split(\"\\n\");\nvar data = [];\n\nfor(var i=0; i< lines.length; i++){\n    if(lines[i].indexOf(\"interface eth0\") != -1)\n        break;\n}\n\n//check if interface eth0 is disabled\nif(i < lines.length && lines[i].indexOf(\"#\") >= 0) flow.set('disabled', true);\nelse flow.set('disabled', false);\n\nnode.send({topic:'interface eth0', payload:flow.get('disabled')})\n\ni++;\n\nfor(i; i< lines.length; i++){\n   \n   //new interface, not eth0\n   if(lines[i].indexOf(\"static\") == -1)\n    break;\n    \n    var tmp = lines[i].split(\"=\");\n    if(tmp.length==2){\n        var prop = tmp[0].split(' ')[1].trim();\n        var value = tmp[1].trim();\n        \n        flow.set(prop, value);\n        node.send({topic:prop, payload:value})\n    }\n} ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 716,
        "y": 166,
        "wires": [
            [
                "3e969ca3.142384"
            ]
        ]
    },
    {
        "id": "3e969ca3.142384",
        "type": "switch",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ip_address",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "routers",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "domain_name_servers",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "interface eth0",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 888,
        "y": 166,
        "wires": [
            [
                "2d434d1f.145822"
            ],
            [
                "502308c7.25bef8"
            ],
            [
                "6a605c6d.329194",
                "140df8ca.dea297"
            ],
            [
                "ba4f96ca.0f28b8"
            ]
        ]
    },
    {
        "id": "2d434d1f.145822",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "ip_address",
        "label": "Indirizzo IP",
        "group": "1cf52e38.3cfee2",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "ip_address",
        "x": 1130,
        "y": 120,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "502308c7.25bef8",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "router",
        "label": "Router",
        "group": "1cf52e38.3cfee2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "routers",
        "x": 1109,
        "y": 163,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "6a605c6d.329194",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "dns",
        "label": "DNS",
        "group": "1cf52e38.3cfee2",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "domain_name_servers",
        "x": 1109,
        "y": 206,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "9ae462fb.d924d",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "sudo sed -i ",
        "addpay": "payload",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 510,
        "y": 320,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "1b55bbd2.2f6a74",
        "type": "ui_button",
        "z": "2d2bd18e.3e4abe",
        "name": "reboot",
        "group": "1cf52e38.3cfee2",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Reboot",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "By pressing OK the device will be rebooted. If settings are wrong this may cause the device to be unreachable",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "846fb983.93f448"
            ]
        ]
    },
    {
        "id": "6da389d0.e8d598",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "sudo reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "name": "",
        "x": 650,
        "y": 480,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d0341b01.217ee8",
        "type": "ui_button",
        "z": "2d2bd18e.3e4abe",
        "name": "refresh",
        "group": "1cf52e38.3cfee2",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Update",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 111.44442749023438,
        "y": 247.33291149139404,
        "wires": [
            [
                "fb34e190.3926a",
                "c2728ad2.71ac48"
            ]
        ]
    },
    {
        "id": "fb34e190.3926a",
        "type": "delay",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "pauseType": "delay",
        "timeout": "300",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 278.8888740539551,
        "y": 247.44451141357422,
        "wires": [
            [
                "6a63b433.e2a73c"
            ]
        ]
    },
    {
        "id": "c2728ad2.71ac48",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "send commands",
        "func": "var properties = flow.get(\"properties\");\n\nvar disabled = flow.get(\"disabled\") ? '#' : '';\n\nif(disabled == '#'){\n    //enable interface (replace only first occurance)\n    var command = `'0,/#interface eth0/s//interface eth0/g;' /etc/dhcpcd.conf`;\n    node.send({payload: command})\n}\n\nfor(var i=0;i<properties.length;i++){\n    var p = properties[i];\n    \n    var old_value = flow.get(p);\n    var new_value = flow.get(p+\"_new\") || old_value;\n    \n    if(old_value && ((old_value != new_value) || disabled == '#'))\n    {\n        //enable interface (replace only first occurance)\n        var command = `'0,\\\\?${disabled}static ${p}=${old_value}?s??static ${p}=${new_value}?g;' /etc/dhcpcd.conf`;\n        node.send({payload: command})\n    }\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 320,
        "wires": [
            [
                "8d2915b0.eb5188",
                "9ae462fb.d924d"
            ]
        ]
    },
    {
        "id": "846fb983.93f448",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "ATTENTION",
        "name": "",
        "x": 330,
        "y": 480,
        "wires": [
            [
                "9f141047.ed494"
            ]
        ]
    },
    {
        "id": "9f141047.ed494",
        "type": "switch",
        "z": "2d2bd18e.3e4abe",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 480,
        "wires": [
            [
                "6da389d0.e8d598"
            ]
        ]
    },
    {
        "id": "a825b0e4.2a051",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "store new",
        "func": "flow.set(msg.topic+\"_new\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1419,
        "y": 161,
        "wires": [
            [
                "aef2e472.475238"
            ]
        ]
    },
    {
        "id": "b585fb60.e936a8",
        "type": "inject",
        "z": "2d2bd18e.3e4abe",
        "name": "init",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 122,
        "y": 91,
        "wires": [
            [
                "a6810bb0.a3e788"
            ]
        ]
    },
    {
        "id": "a6810bb0.a3e788",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "set properties",
        "func": "var properties = ['routers', 'ip_address', 'domain_name_servers'];\n\nflow.set(\"properties\", properties);\n\n//init properties\nfor(var i=0;i<properties.length;i++){\n    var p = properties[i];\n    flow.set(p, null);\n    flow.set(p+\"_new\", null);\n}\n\nnode.send({payload: true});\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 326,
        "y": 91,
        "wires": [
            [
                "6a63b433.e2a73c"
            ]
        ]
    },
    {
        "id": "8d2915b0.eb5188",
        "type": "debug",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 514,
        "y": 385,
        "wires": []
    },
    {
        "id": "fd5e6a37.bc5d38",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 1310,
        "y": 340,
        "wires": []
    },
    {
        "id": "140df8ca.dea297",
        "type": "change",
        "z": "2d2bd18e.3e4abe",
        "name": "set",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Settings updated. Reboot device to enable new ip",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1097,
        "y": 310,
        "wires": [
            [
                "fd5e6a37.bc5d38"
            ]
        ]
    },
    {
        "id": "ba4f96ca.0f28b8",
        "type": "ui_text",
        "z": "2d2bd18e.3e4abe",
        "group": "1cf52e38.3cfee2",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Static ip",
        "format": "{{!msg.payload}}",
        "layout": "row-spread",
        "x": 1120,
        "y": 248,
        "wires": []
    },
    {
        "id": "fea93690.140ec8",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1758,
        "y": 161,
        "wires": []
    },
    {
        "id": "aef2e472.475238",
        "type": "change",
        "z": "2d2bd18e.3e4abe",
        "name": "set",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "New setting stored ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1566,
        "y": 161,
        "wires": [
            [
                "fea93690.140ec8"
            ]
        ]
    },
    {
        "id": "4b72781d.d0e178",
        "type": "ui_text",
        "z": "2d2bd18e.3e4abe",
        "group": "1cf52e38.3cfee2",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "help",
        "label": "",
        "format": "To store the new value, once edited, press ENTER or TAB",
        "layout": "col-center",
        "x": 711,
        "y": 91,
        "wires": []
    },
    {
        "id": "f34a641beb964996",
        "type": "ui_slider",
        "z": "bf782cbf60794af0",
        "name": "Lampe1PWM",
        "label": "Lys",
        "tooltip": "",
        "group": "6419184378ff1692",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 320,
        "y": 80,
        "wires": [
            [
                "63de8939063e8d06",
                "bb16d0d6c80240ab"
            ]
        ]
    },
    {
        "id": "3c0b1e105f7caac4",
        "type": "ui_chart",
        "z": "bf782cbf60794af0",
        "name": "Lampe1mA",
        "group": "6419184378ff1692",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [A]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 630,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "89de17185eab7328",
        "type": "ui_chart",
        "z": "bf782cbf60794af0",
        "name": "Lampe1Temp",
        "group": "6419184378ff1692",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "140",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 640,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "20893d7657a88114",
        "type": "ui_chart",
        "z": "bf782cbf60794af0",
        "name": "Lampe1RH",
        "group": "6419184378ff1692",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 630,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "7b055b76f5fa3870",
        "type": "function",
        "z": "bf782cbf60794af0",
        "name": "Set Lampe 1",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\nflow.set(\"setPoint\",msg.payload);\nreturn { payload: { 'lampe': 1, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 80,
        "wires": [
            [
                "0453284267e57b69",
                "3cdb683d3618528b"
            ]
        ]
    },
    {
        "id": "22f1dfc7bddd731f",
        "type": "link out",
        "z": "bf782cbf60794af0",
        "name": "link out Send Set Lampe 1",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 1045,
        "y": 160,
        "wires": []
    },
    {
        "id": "0453284267e57b69",
        "type": "delay",
        "z": "bf782cbf60794af0",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 730,
        "y": 160,
        "wires": [
            [
                "47a34f4b2045d539"
            ]
        ]
    },
    {
        "id": "3cdb683d3618528b",
        "type": "link out",
        "z": "bf782cbf60794af0",
        "name": "link out Set Lampe 1",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 795,
        "y": 80,
        "wires": []
    },
    {
        "id": "20c18c2df895357f",
        "type": "link in",
        "z": "bf782cbf60794af0",
        "name": "link in Modbus Reponse",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 195,
        "y": 320,
        "wires": [
            [
                "773657e7bed57045"
            ]
        ]
    },
    {
        "id": "773657e7bed57045",
        "type": "function",
        "z": "bf782cbf60794af0",
        "name": "Branch out message",
        "func": "if (msg.topic == '1') {\n    \n    // Avoid Driver overheat\n    let newSetPoint = null;\n    if ((flow.get(\"setPoint\") > 50) && (global.get(\"DriverTemperatur\")!==undefined)) {\n        if(global.get(\"DriverTemperatur\") > global.get(\"MaxDriverTemperatur\")) {\n            newSetPoint = 50;\n        }\n    }\n\n    // Data updated?\n    if (Array.isArray(msg.payload)) {\n    \n        // Handle Lamp PWM set points\n        let PWM = msg.payload[10];\n        PWM += msg.payload[11];\n        PWM += msg.payload[12];\n        PWM += msg.payload[13];\n        PWM += msg.payload[14];\n        PWM += msg.payload[15];\n        PWM += msg.payload[16];\n        PWM += msg.payload[17];\n        PWM /= 8;\n        let myPST2PWM = global.get(\"myPST2PWM\");\n        let lastIndex = flow.get(\"lastIndex\") || 0;\n        if(PWM < myPST2PWM[lastIndex]) {\n            while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n                lastIndex--;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        } else if (PWM > myPST2PWM[lastIndex]) {\n            while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n                lastIndex++;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        }\n\n        // LEDs temp.\n        let ledsTemp = (msg.payload[30]+msg.payload[32]+msg.payload[34]+msg.payload[36]+msg.payload[38]+msg.payload[40]+msg.payload[42]+msg.payload[44])/8;\n\n        // Update Lampe status\n        if (PWM == 0) {\n            global.set(\"Lampe1Status\", \"ÿ\");\n        } else if (myPST2PWM[lastIndex] == PWM) {\n            global.set(\"Lampe1Status\", \"G\");\n        } else {\n            global.set(\"Lampe1Status\", \"g\");\n        }\n\n        // Fix false negative values for Amper\n        let A = (msg.payload[9] / 1000);\n        if(( A > 100.0) || ( A == 0.0)) {\n            A = 0.1;\n        }\n\n        // Store Data\n        let Lampe1Data = {};\n        Lampe1Data[\"epoch\"] = Math.round(Date.now() / 1000);\n        Lampe1Data[\"status\"] = global.get(\"Lampe1Status\");\n        Lampe1Data[\"data\"] = msg.payload;\n        global.set(\"Lampe1Data\", Lampe1Data);\n\n        return [\n            { topic: \"ambient\", payload: msg.payload[5] },\n            { topic: \"LEDs avg.\", payload: ledsTemp },\n            { payload: msg.payload[7] },\n            { payload: A.toFixed(1) },\n            { payload: lastIndex },\n            { payload: Lampe1Data[\"status\"] },\n            newSetPoint\n        ];\n    } else if(global.get(\"Lampe1En\")===true) {\n        global.set(\"Lampe1Status\", \"r\");\n        return [\n            null,\n            null,\n            null,\n            null,\n            null,\n            { payload: global.get(\"Lampe1Status\") },\n            newSetPoint\n        ];\n    }\n}",
        "outputs": 7,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 320,
        "wires": [
            [
                "89de17185eab7328"
            ],
            [
                "89de17185eab7328"
            ],
            [
                "20893d7657a88114"
            ],
            [
                "3c0b1e105f7caac4"
            ],
            [
                "3c89a7e4c752377a"
            ],
            [
                "01b2c23c22b14edb"
            ],
            [
                "f34a641beb964996"
            ]
        ]
    },
    {
        "id": "3c89a7e4c752377a",
        "type": "ui_gauge",
        "z": "bf782cbf60794af0",
        "name": "Lys1",
        "group": "6419184378ff1692",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "",
        "label": "Lys",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#b2b201",
            "#e6e600",
            "#ffff00"
        ],
        "seg1": "10",
        "seg2": "90",
        "diff": false,
        "className": "",
        "x": 610,
        "y": 400,
        "wires": []
    },
    {
        "id": "63de8939063e8d06",
        "type": "trigger",
        "z": "bf782cbf60794af0",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 500,
        "y": 80,
        "wires": [
            [
                "7b055b76f5fa3870"
            ]
        ]
    },
    {
        "id": "b08c81d7181cd85c",
        "type": "get-shared-state",
        "z": "bf782cbf60794af0",
        "state": "269e17ffddb211c4",
        "name": "Lampe1PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "f34a641beb964996"
            ]
        ]
    },
    {
        "id": "bb16d0d6c80240ab",
        "type": "set-shared-state",
        "z": "bf782cbf60794af0",
        "state": "269e17ffddb211c4",
        "name": "Lampe1PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 520,
        "y": 140,
        "wires": []
    },
    {
        "id": "0212c851d6375ee4",
        "type": "link in",
        "z": "bf782cbf60794af0",
        "name": "link in Lampe 1 Set PWM",
        "links": [
            "697e84fb6138d306",
            "f6b75ae89ada85a3",
            "480b9a86c69e76e6"
        ],
        "x": 145,
        "y": 140,
        "wires": [
            [
                "f34a641beb964996"
            ]
        ]
    },
    {
        "id": "01b2c23c22b14edb",
        "type": "ui_led",
        "z": "bf782cbf60794af0",
        "order": 1,
        "group": "6419184378ff1692",
        "width": "0",
        "height": "0",
        "label": "Status",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "R",
                "valueType": "str"
            },
            {
                "color": "#8b0000",
                "value": "r",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Y",
                "valueType": "str"
            },
            {
                "color": "#000000",
                "value": "y",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "G",
                "valueType": "str"
            },
            {
                "color": "#006400",
                "value": "g",
                "valueType": "str"
            },
            {
                "color": "#808080",
                "value": "ÿ",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": true,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 610,
        "y": 440,
        "wires": []
    },
    {
        "id": "47a34f4b2045d539",
        "type": "function",
        "z": "bf782cbf60794af0",
        "name": "Resend & Read",
        "func": "//let data = [msg.payload,{\"lampe\":1,\"fc\":3,\"address\":1,\"quantity\":50}];\n//msg.payload = data;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 920,
        "y": 160,
        "wires": [
            [
                "22f1dfc7bddd731f"
            ]
        ]
    },
    {
        "id": "864bcf9308dbf46e",
        "type": "ui_slider",
        "z": "88be0e5091306a90",
        "name": "Lampe2PWM",
        "label": "Lys",
        "tooltip": "",
        "group": "8bb3fa33612b5685",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 320,
        "y": 80,
        "wires": [
            [
                "5254b99d3ccc5e20",
                "1e5d7bae22caa927"
            ]
        ]
    },
    {
        "id": "9673a55f74ab0713",
        "type": "function",
        "z": "88be0e5091306a90",
        "name": "Set Lampe 2",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 2, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 80,
        "wires": [
            [
                "7330e06691b02a75",
                "47239b4d7a5639fa"
            ]
        ]
    },
    {
        "id": "887252bdc7b4cdd0",
        "type": "link out",
        "z": "88be0e5091306a90",
        "name": "link out Send Set Lampe 2",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 1035,
        "y": 120,
        "wires": []
    },
    {
        "id": "7330e06691b02a75",
        "type": "delay",
        "z": "88be0e5091306a90",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 910,
        "y": 120,
        "wires": [
            [
                "887252bdc7b4cdd0"
            ]
        ]
    },
    {
        "id": "47239b4d7a5639fa",
        "type": "link out",
        "z": "88be0e5091306a90",
        "name": "link out Set Lampe 2 ",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 855,
        "y": 80,
        "wires": []
    },
    {
        "id": "5254b99d3ccc5e20",
        "type": "trigger",
        "z": "88be0e5091306a90",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 500,
        "y": 80,
        "wires": [
            [
                "9673a55f74ab0713"
            ]
        ]
    },
    {
        "id": "c5cc2f13a990c015",
        "type": "get-shared-state",
        "z": "88be0e5091306a90",
        "state": "eb3215e684fcb092",
        "name": "Lampe2PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "864bcf9308dbf46e"
            ]
        ]
    },
    {
        "id": "1e5d7bae22caa927",
        "type": "set-shared-state",
        "z": "88be0e5091306a90",
        "state": "eb3215e684fcb092",
        "name": "Lampe2PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 520,
        "y": 140,
        "wires": []
    },
    {
        "id": "4f1b3bd8254cd125",
        "type": "ui_chart",
        "z": "88be0e5091306a90",
        "name": "Lampe2mA",
        "group": "8bb3fa33612b5685",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [A]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 570,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "047e670a2c4badfa",
        "type": "ui_chart",
        "z": "88be0e5091306a90",
        "name": "Lampe2Temp",
        "group": "8bb3fa33612b5685",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "140",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 580,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "a0232d26507e670e",
        "type": "ui_chart",
        "z": "88be0e5091306a90",
        "name": "Lampe2RH",
        "group": "8bb3fa33612b5685",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 570,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "630e275db65d31c6",
        "type": "link in",
        "z": "88be0e5091306a90",
        "name": "link in Modbus Reponse",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 135,
        "y": 280,
        "wires": [
            [
                "8c51a06dc7e6e16e"
            ]
        ]
    },
    {
        "id": "8c51a06dc7e6e16e",
        "type": "function",
        "z": "88be0e5091306a90",
        "name": "Branch out message",
        "func": "if (msg.topic == '2') {\n\n    // Avoid Driver overheat\n    let newSetPoint = null;\n    if ((flow.get(\"setPoint\") > 50) && (global.get(\"DriverTemperatur\") !== undefined)) {\n        if (global.get(\"DriverTemperatur\") > global.get(\"MaxDriverTemperatur\")) {\n            newSetPoint = 50;\n        }\n    }\n\n    // Data updated?\n    if (Array.isArray(msg.payload)) {\n\n        // Handle Lamp PWM set points\n        let PWM = msg.payload[10];\n        PWM += msg.payload[11];\n        PWM += msg.payload[12];\n        PWM += msg.payload[13];\n        PWM += msg.payload[14];\n        PWM += msg.payload[15];\n        PWM += msg.payload[16];\n        PWM += msg.payload[17];\n        PWM /= 8;\n        let myPST2PWM = global.get(\"myPST2PWM\");\n        let lastIndex = flow.get(\"lastIndex\") || 0;\n        if(PWM < myPST2PWM[lastIndex]) {\n            while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n                lastIndex--;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        } else if (PWM > myPST2PWM[lastIndex]) {\n            while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n                lastIndex++;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        }\n\n        // LEDs temp.\n        let ledsTemp = (msg.payload[30]+msg.payload[32]+msg.payload[34]+msg.payload[36]+msg.payload[38]+msg.payload[40]+msg.payload[42]+msg.payload[44])/8;\n\n        // Update Lampe status\n        if (PWM == 0) {\n            global.set(\"Lampe2Status\", \"ÿ\");\n        } else if (myPST2PWM[lastIndex] == PWM) {\n            global.set(\"Lampe2Status\", \"G\");\n        } else {\n            global.set(\"Lampe2Status\", \"g\");\n        }\n\n       // Fix false negative values for Amper\n        let A = (msg.payload[9] / 1000);\n        if(( A > 100.0) || ( A == 0.0)) {\n            A = 0.1;\n        }\n\n        // Store Data\n        let LampeData = {};\n        LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n        LampeData[\"data\"] = msg.payload;\n        LampeData[\"status\"] = global.get(\"Lampe2Status\"); \n        global.set(\"Lampe2Data\", LampeData);\n\n        return [\n            { topic: \"ambient\", payload: msg.payload[5] },\n            { topic: \"LEDs avg.\", payload: ledsTemp },\n            { payload: msg.payload[7] },\n            { payload: A.toFixed(1) },\n            { payload: lastIndex },\n            { payload:  LampeData[\"status\"]},\n            newSetPoint\n        ];\n    } else if(global.get(\"Lampe2En\")===true) {\n        global.set(\"Lampe2Status\", \"r\");\n        return [\n            null,\n            null,\n            null,\n            null,\n            null,\n            { payload: global.get(\"Lampe2Status\") },\n            newSetPoint\n        ];\n    }\n}",
        "outputs": 7,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 280,
        "wires": [
            [
                "047e670a2c4badfa"
            ],
            [
                "047e670a2c4badfa"
            ],
            [
                "a0232d26507e670e"
            ],
            [
                "4f1b3bd8254cd125"
            ],
            [
                "669e2c0812ac6927"
            ],
            [
                "cf85268b54d7192e"
            ],
            [
                "864bcf9308dbf46e"
            ]
        ]
    },
    {
        "id": "669e2c0812ac6927",
        "type": "ui_gauge",
        "z": "88be0e5091306a90",
        "name": "Lys2",
        "group": "8bb3fa33612b5685",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "",
        "label": "Lys",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#b2b201",
            "#e6e600",
            "#ffff00"
        ],
        "seg1": "10",
        "seg2": "90",
        "diff": false,
        "className": "",
        "x": 550,
        "y": 360,
        "wires": []
    },
    {
        "id": "56a3e5eb0558aee0",
        "type": "link in",
        "z": "88be0e5091306a90",
        "name": "link in Lampe 2 Set PWM",
        "links": [
            "697e84fb6138d306",
            "72210dbade498dac"
        ],
        "x": 165,
        "y": 160,
        "wires": [
            [
                "864bcf9308dbf46e"
            ]
        ]
    },
    {
        "id": "cf85268b54d7192e",
        "type": "ui_led",
        "z": "88be0e5091306a90",
        "order": 1,
        "group": "8bb3fa33612b5685",
        "width": "0",
        "height": "0",
        "label": "Status",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "R",
                "valueType": "str"
            },
            {
                "color": "#8b0000",
                "value": "r",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Y",
                "valueType": "str"
            },
            {
                "color": "#000000",
                "value": "y",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "G",
                "valueType": "str"
            },
            {
                "color": "#006400",
                "value": "g",
                "valueType": "str"
            },
            {
                "color": "#808080",
                "value": "ÿ",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": true,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 550,
        "y": 400,
        "wires": []
    },
    {
        "id": "c84e2b58d4246944",
        "type": "ui_slider",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3PWM",
        "label": "Lys",
        "tooltip": "",
        "group": "f735df78474bdbad",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 320,
        "y": 80,
        "wires": [
            [
                "4a0730f3ca8ac4f0",
                "8dc474d4fc053c59"
            ]
        ]
    },
    {
        "id": "e7d25d2193087cd6",
        "type": "function",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Set Lampe 3",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 3, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 80,
        "wires": [
            [
                "2791aed6484e56ea",
                "c1c4d0869af13f5a"
            ]
        ]
    },
    {
        "id": "e348a25d9e2c445d",
        "type": "link out",
        "z": "ca1e3fc7ee28f5a2",
        "name": "link out Send Set Lampe 3",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 1035,
        "y": 120,
        "wires": []
    },
    {
        "id": "2791aed6484e56ea",
        "type": "delay",
        "z": "ca1e3fc7ee28f5a2",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 910,
        "y": 120,
        "wires": [
            [
                "e348a25d9e2c445d"
            ]
        ]
    },
    {
        "id": "c1c4d0869af13f5a",
        "type": "link out",
        "z": "ca1e3fc7ee28f5a2",
        "name": "link out Set Lampe 3",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 855,
        "y": 80,
        "wires": []
    },
    {
        "id": "4a0730f3ca8ac4f0",
        "type": "trigger",
        "z": "ca1e3fc7ee28f5a2",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 500,
        "y": 80,
        "wires": [
            [
                "e7d25d2193087cd6"
            ]
        ]
    },
    {
        "id": "8dc474d4fc053c59",
        "type": "set-shared-state",
        "z": "ca1e3fc7ee28f5a2",
        "state": "edb4d845d6735ccc",
        "name": "Lampe3PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 520,
        "y": 140,
        "wires": []
    },
    {
        "id": "62fd1712059d7e75",
        "type": "get-shared-state",
        "z": "ca1e3fc7ee28f5a2",
        "state": "edb4d845d6735ccc",
        "name": "Lampe3PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "c84e2b58d4246944"
            ]
        ]
    },
    {
        "id": "acf426c9f4cfd90b",
        "type": "link in",
        "z": "ca1e3fc7ee28f5a2",
        "name": "link in Lampe 3 Set PWM",
        "links": [
            "697e84fb6138d306",
            "430ac708239bc44b"
        ],
        "x": 125,
        "y": 160,
        "wires": [
            [
                "c84e2b58d4246944"
            ]
        ]
    },
    {
        "id": "727acfe0f768ae47",
        "type": "ui_chart",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3mA",
        "group": "f735df78474bdbad",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [A]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 590,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "e46c595b069b858c",
        "type": "ui_chart",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3Temp",
        "group": "f735df78474bdbad",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "140",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 600,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "aa806a254dd66072",
        "type": "ui_chart",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3RH",
        "group": "f735df78474bdbad",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 590,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "6e799390a285957b",
        "type": "link in",
        "z": "ca1e3fc7ee28f5a2",
        "name": "link in Modbus Reponse",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 155,
        "y": 300,
        "wires": [
            [
                "a95862d64e89938d"
            ]
        ]
    },
    {
        "id": "a95862d64e89938d",
        "type": "function",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Branch out message",
        "func": "if (msg.topic == '3') {\n\n    // Avoid Driver overheat\n    let newSetPoint = null;\n    if ((flow.get(\"setPoint\") > 50) && (global.get(\"DriverTemperatur\") !== undefined)) {\n        if (global.get(\"DriverTemperatur\") > global.get(\"MaxDriverTemperatur\")) {\n            newSetPoint = 50;\n        }\n    }\n\n    // Data updated?\n    if (Array.isArray(msg.payload)) {\n\n        // Handle Lamp PWM set points\n        let PWM = msg.payload[10];\n        PWM += msg.payload[11];\n        PWM += msg.payload[12];\n        PWM += msg.payload[13];\n        PWM += msg.payload[14];\n        PWM += msg.payload[15];\n        PWM += msg.payload[16];\n        PWM += msg.payload[17];\n        PWM /= 8;\n        let myPST2PWM = global.get(\"myPST2PWM\");\n        let lastIndex = flow.get(\"lastIndex\") || 0;\n        if(PWM < myPST2PWM[lastIndex]) {\n            while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n                lastIndex--;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        } else if (PWM > myPST2PWM[lastIndex]) {\n            while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n                lastIndex++;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        }\n\n        // LEDs temp.\n        let ledsTemp = (msg.payload[30]+msg.payload[32]+msg.payload[34]+msg.payload[36]+msg.payload[38]+msg.payload[40]+msg.payload[42]+msg.payload[44])/8;\n\n        // Update Lampe status\n        if (PWM == 0) {\n            global.set(\"Lampe3Status\", \"ÿ\");\n        } else if (myPST2PWM[lastIndex] == PWM) {\n            global.set(\"Lampe3Status\", \"G\");\n        } else {\n            global.set(\"Lampe3Status\", \"g\");\n        }\n\n        // Fix false negative values for Amper\n        let A = (msg.payload[9] / 1000);\n        if ((A > 100.0) || (A == 0.0)) {\n            A = 0.1;\n        }\n\n        // Store Data\n        let LampeData = {};\n        LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n        LampeData[\"data\"] = msg.payload;\n        LampeData[\"status\"] = global.get(\"Lampe3Status\");\n        global.set(\"Lampe3Data\", LampeData);\n\n        return [\n            { topic: \"ambient\", payload: msg.payload[5] },\n            { topic: \"LEDs avg.\", payload: ledsTemp },\n            { payload: msg.payload[7] },\n            { payload: A.toFixed(1) },\n            { payload: lastIndex },\n            { payload: LampeData[\"status\"] },\n            newSetPoint\n        ];\n    } else if(global.get(\"Lampe3En\")===true) {\n        global.set(\"Lampe3Status\", \"r\");\n        return [\n            null,\n            null,\n            null,\n            null,\n            null,\n            { payload: global.get(\"Lampe3Status\") },\n            newSetPoint\n        ];\n    }\n}",
        "outputs": 7,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 300,
        "wires": [
            [
                "e46c595b069b858c"
            ],
            [
                "e46c595b069b858c"
            ],
            [
                "aa806a254dd66072"
            ],
            [
                "727acfe0f768ae47"
            ],
            [
                "4717ca8c70c33e08"
            ],
            [
                "ca2a9982df3e5fd6"
            ],
            [
                "c84e2b58d4246944"
            ]
        ]
    },
    {
        "id": "4717ca8c70c33e08",
        "type": "ui_gauge",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lys3",
        "group": "f735df78474bdbad",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "",
        "label": "Lys",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#b2b201",
            "#e6e600",
            "#ffff00"
        ],
        "seg1": "10",
        "seg2": "90",
        "diff": false,
        "className": "",
        "x": 570,
        "y": 380,
        "wires": []
    },
    {
        "id": "ca2a9982df3e5fd6",
        "type": "ui_led",
        "z": "ca1e3fc7ee28f5a2",
        "order": 1,
        "group": "f735df78474bdbad",
        "width": "0",
        "height": "0",
        "label": "Status",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "R",
                "valueType": "str"
            },
            {
                "color": "#8b0000",
                "value": "r",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Y",
                "valueType": "str"
            },
            {
                "color": "#000000",
                "value": "y",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "G",
                "valueType": "str"
            },
            {
                "color": "#006400",
                "value": "g",
                "valueType": "str"
            },
            {
                "color": "#808080",
                "value": "ÿ",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": true,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 570,
        "y": 420,
        "wires": []
    },
    {
        "id": "a633e672441c9a50",
        "type": "ui_slider",
        "z": "02e68394143357bb",
        "name": "Lampe4PWM",
        "label": "Lys",
        "tooltip": "",
        "group": "d96855d5801a8206",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 320,
        "y": 80,
        "wires": [
            [
                "143bc0f9a6a4ac6c",
                "bacaa2a4c9b7d43e"
            ]
        ]
    },
    {
        "id": "5d7b607d5b532a46",
        "type": "function",
        "z": "02e68394143357bb",
        "name": "Set Lampe 4",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 4, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 80,
        "wires": [
            [
                "51ba776a7452b040",
                "fd4ab9d7153eee6c"
            ]
        ]
    },
    {
        "id": "443ac19b27ec0921",
        "type": "link out",
        "z": "02e68394143357bb",
        "name": "link out Send Set Lampe 4",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 1035,
        "y": 120,
        "wires": []
    },
    {
        "id": "51ba776a7452b040",
        "type": "delay",
        "z": "02e68394143357bb",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 910,
        "y": 120,
        "wires": [
            [
                "443ac19b27ec0921"
            ]
        ]
    },
    {
        "id": "fd4ab9d7153eee6c",
        "type": "link out",
        "z": "02e68394143357bb",
        "name": "link out Set Lampe 4",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 855,
        "y": 80,
        "wires": []
    },
    {
        "id": "143bc0f9a6a4ac6c",
        "type": "trigger",
        "z": "02e68394143357bb",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 500,
        "y": 80,
        "wires": [
            [
                "5d7b607d5b532a46"
            ]
        ]
    },
    {
        "id": "bacaa2a4c9b7d43e",
        "type": "set-shared-state",
        "z": "02e68394143357bb",
        "state": "6276b0fa49d00b90",
        "name": "Lampe4PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 520,
        "y": 140,
        "wires": []
    },
    {
        "id": "50fdc0e8b93121b9",
        "type": "get-shared-state",
        "z": "02e68394143357bb",
        "state": "6276b0fa49d00b90",
        "name": "Lampe4PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "a633e672441c9a50"
            ]
        ]
    },
    {
        "id": "745caaff2fe6a583",
        "type": "link in",
        "z": "02e68394143357bb",
        "name": "link in Lampe 4 Set PWM",
        "links": [
            "697e84fb6138d306",
            "8fe2f39d57373487"
        ],
        "x": 131,
        "y": 160,
        "wires": [
            [
                "a633e672441c9a50"
            ]
        ]
    },
    {
        "id": "a64d57f9885b747a",
        "type": "ui_chart",
        "z": "02e68394143357bb",
        "name": "Lampe4mA",
        "group": "d96855d5801a8206",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [A]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 630,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "1d12b3e7c40c69d2",
        "type": "ui_chart",
        "z": "02e68394143357bb",
        "name": "Lampe4Temp",
        "group": "d96855d5801a8206",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "140",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 640,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "65f46c347d96d625",
        "type": "ui_chart",
        "z": "02e68394143357bb",
        "name": "Lampe4RH",
        "group": "d96855d5801a8206",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 630,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "8017046007044d71",
        "type": "link in",
        "z": "02e68394143357bb",
        "name": "link in Modbus Reponse",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 195,
        "y": 320,
        "wires": [
            [
                "e763da464359c1b3"
            ]
        ]
    },
    {
        "id": "e763da464359c1b3",
        "type": "function",
        "z": "02e68394143357bb",
        "name": "Branch out message",
        "func": "if (msg.topic == '4') {\n\n    // Avoid Driver overheat\n    let newSetPoint = null;\n    if ((flow.get(\"setPoint\") > 50) && (global.get(\"DriverTemperatur\") !== undefined)) {\n        if (global.get(\"DriverTemperatur\") > global.get(\"MaxDriverTemperatur\")) {\n            newSetPoint = 50;\n        }\n    }\n\n    // Data updated?\n    if (Array.isArray(msg.payload)) {\n\n        // Handle Lamp PWM set points\n        let PWM = msg.payload[10];\n        PWM += msg.payload[11];\n        PWM += msg.payload[12];\n        PWM += msg.payload[13];\n        PWM += msg.payload[14];\n        PWM += msg.payload[15];\n        PWM += msg.payload[16];\n        PWM += msg.payload[17];\n        PWM /= 8;\n        let myPST2PWM = global.get(\"myPST2PWM\");\n        let lastIndex = flow.get(\"lastIndex\") || 0;\n        if(PWM < myPST2PWM[lastIndex]) {\n            while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n                lastIndex--;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        } else if (PWM > myPST2PWM[lastIndex]) {\n            while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n                lastIndex++;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        }\n\n        // LEDs temp.\n        let ledsTemp = (msg.payload[30]+msg.payload[32]+msg.payload[34]+msg.payload[36]+msg.payload[38]+msg.payload[40]+msg.payload[42]+msg.payload[44])/8;\n\n        // Update Lampe status\n        if (PWM == 0) {\n            global.set(\"Lampe4Status\", \"ÿ\");\n        } else if (myPST2PWM[lastIndex] == PWM) {\n            global.set(\"Lampe4Status\", \"G\");\n        } else {\n            global.set(\"Lampe4Status\", \"g\");\n        }\n\n       // Fix false negative values for Amper\n        let A = (msg.payload[9] / 1000);\n        if(( A > 100.0) || ( A == 0.0)) {\n            A = 0.1;\n        }\n\n        // Store Data\n        let LampeData = {};\n        LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n        LampeData[\"data\"] = msg.payload;\n        LampeData[\"status\"] = global.get(\"Lampe4Status\");\n        global.set(\"Lampe4Data\", LampeData);\n\n        return [\n            { topic: \"ambient\", payload: msg.payload[5] },\n            { topic: \"LEDs avg.\", payload: ledsTemp },\n            { payload: msg.payload[7] },\n            { payload: A.toFixed(1) },\n            { payload: lastIndex },\n            { payload: LampeData[\"status\"] },\n            newSetPoint\n        ];\n    } else if(global.get(\"Lampe4En\")===true) {\n        global.set(\"Lampe4Status\", \"r\");\n        return [\n            null,\n            null,\n            null,\n            null,\n            null,\n            { payload: global.get(\"Lampe4Status\") },\n            newSetPoint\n        ];\n    }\n}",
        "outputs": 7,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 320,
        "wires": [
            [
                "1d12b3e7c40c69d2"
            ],
            [
                "1d12b3e7c40c69d2"
            ],
            [
                "65f46c347d96d625"
            ],
            [
                "a64d57f9885b747a"
            ],
            [
                "86156f535039c3df"
            ],
            [
                "966ddc7bc3a6890c"
            ],
            [
                "a633e672441c9a50"
            ]
        ]
    },
    {
        "id": "86156f535039c3df",
        "type": "ui_gauge",
        "z": "02e68394143357bb",
        "name": "Lys4",
        "group": "d96855d5801a8206",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "",
        "label": "Lys",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#b2b201",
            "#e6e600",
            "#ffff00"
        ],
        "seg1": "10",
        "seg2": "90",
        "diff": false,
        "className": "",
        "x": 610,
        "y": 400,
        "wires": []
    },
    {
        "id": "966ddc7bc3a6890c",
        "type": "ui_led",
        "z": "02e68394143357bb",
        "order": 1,
        "group": "d96855d5801a8206",
        "width": "0",
        "height": "0",
        "label": "Status",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "R",
                "valueType": "str"
            },
            {
                "color": "#8b0000",
                "value": "r",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Y",
                "valueType": "str"
            },
            {
                "color": "#000000",
                "value": "y",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "G",
                "valueType": "str"
            },
            {
                "color": "#006400",
                "value": "g",
                "valueType": "str"
            },
            {
                "color": "#808080",
                "value": "ÿ",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": true,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 610,
        "y": 440,
        "wires": []
    },
    {
        "id": "f4d98d0ccb1e01ab",
        "type": "ui_slider",
        "z": "82a9216af09bde7a",
        "name": "Lampe5PWM",
        "label": "Lys",
        "tooltip": "",
        "group": "051ab72180dfa122",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 320,
        "y": 80,
        "wires": [
            [
                "807c53cb734ecc7c",
                "25138cbc4873052e"
            ]
        ]
    },
    {
        "id": "be53b964083423f4",
        "type": "function",
        "z": "82a9216af09bde7a",
        "name": "Set Lampe 5",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 5, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 80,
        "wires": [
            [
                "96006ca274391304",
                "7b2f1619dbccb7c6"
            ]
        ]
    },
    {
        "id": "e923ccbae21e2d1d",
        "type": "link out",
        "z": "82a9216af09bde7a",
        "name": "link out Send Set Lampe 5",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 1035,
        "y": 120,
        "wires": []
    },
    {
        "id": "96006ca274391304",
        "type": "delay",
        "z": "82a9216af09bde7a",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 910,
        "y": 120,
        "wires": [
            [
                "e923ccbae21e2d1d"
            ]
        ]
    },
    {
        "id": "7b2f1619dbccb7c6",
        "type": "link out",
        "z": "82a9216af09bde7a",
        "name": "link out Set Lampe 5",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 855,
        "y": 80,
        "wires": []
    },
    {
        "id": "807c53cb734ecc7c",
        "type": "trigger",
        "z": "82a9216af09bde7a",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 500,
        "y": 80,
        "wires": [
            [
                "be53b964083423f4"
            ]
        ]
    },
    {
        "id": "25138cbc4873052e",
        "type": "set-shared-state",
        "z": "82a9216af09bde7a",
        "state": "32d2cc555bb82017",
        "name": "Lampe5PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 520,
        "y": 140,
        "wires": []
    },
    {
        "id": "ac92fa2a4459f46c",
        "type": "get-shared-state",
        "z": "82a9216af09bde7a",
        "state": "32d2cc555bb82017",
        "name": "Lampe5PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "f4d98d0ccb1e01ab"
            ]
        ]
    },
    {
        "id": "2337bede3b108eb4",
        "type": "link in",
        "z": "82a9216af09bde7a",
        "name": "link in Lampe 5 Set PWM",
        "links": [
            "697e84fb6138d306",
            "bb6371f487f9bf67"
        ],
        "x": 125,
        "y": 160,
        "wires": [
            [
                "f4d98d0ccb1e01ab"
            ]
        ]
    },
    {
        "id": "c7a1dff570307a32",
        "type": "ui_chart",
        "z": "82a9216af09bde7a",
        "name": "Lampe5mA",
        "group": "051ab72180dfa122",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [A]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 550,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "723fce3ce0b1c7c3",
        "type": "ui_chart",
        "z": "82a9216af09bde7a",
        "name": "Lampe5Temp",
        "group": "051ab72180dfa122",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "140",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 560,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "1bedc1a541e54ea9",
        "type": "ui_chart",
        "z": "82a9216af09bde7a",
        "name": "Lampe5RH",
        "group": "051ab72180dfa122",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 550,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "7cd4d5d7ba1473a5",
        "type": "link in",
        "z": "82a9216af09bde7a",
        "name": "link in Modbus Reponse",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 115,
        "y": 300,
        "wires": [
            [
                "d17055f112fb0fbd"
            ]
        ]
    },
    {
        "id": "d17055f112fb0fbd",
        "type": "function",
        "z": "82a9216af09bde7a",
        "name": "Branch out message",
        "func": "if (msg.topic == '5') {\n\n    // Avoid Driver overheat\n    let newSetPoint = null;\n    if ((flow.get(\"setPoint\") > 50) && (global.get(\"DriverTemperatur\") !== undefined)) {\n        if (global.get(\"DriverTemperatur\") > global.get(\"MaxDriverTemperatur\")) {\n            newSetPoint = 50;\n        }\n    }\n\n    // Data updated?\n    if (Array.isArray(msg.payload)) {\n\n        // Handle Lamp PWM set points\n        let PWM = msg.payload[10];\n        PWM += msg.payload[11];\n        PWM += msg.payload[12];\n        PWM += msg.payload[13];\n        PWM += msg.payload[14];\n        PWM += msg.payload[15];\n        PWM += msg.payload[16];\n        PWM += msg.payload[17];\n        PWM /= 8;\n        let myPST2PWM = global.get(\"myPST2PWM\");\n        let lastIndex = flow.get(\"lastIndex\") || 0;\n        if(PWM < myPST2PWM[lastIndex]) {\n            while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n                lastIndex--;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        } else if (PWM > myPST2PWM[lastIndex]) {\n            while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n                lastIndex++;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        }\n\n        // LEDs temp.\n        let ledsTemp = (msg.payload[30]+msg.payload[32]+msg.payload[34]+msg.payload[36]+msg.payload[38]+msg.payload[40]+msg.payload[42]+msg.payload[44])/8;\n\n        // Update Lampe status\n        if (PWM == 0) {\n            global.set(\"Lampe5Status\", \"ÿ\");\n        } else if (myPST2PWM[lastIndex] == PWM) {\n            global.set(\"Lampe5Status\", \"G\");\n        } else {\n            global.set(\"Lampe5Status\", \"g\");\n        }\n\n       // Fix false negative values for Amper\n        let A = (msg.payload[9] / 1000);\n        if(( A > 100.0) || ( A == 0.0)) {\n            A = 0.1;\n        }\n\n        // Store Data\n        let LampeData = {};\n        LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n        LampeData[\"data\"] = msg.payload;\n        LampeData[\"status\"] = global.get(\"Lampe5Status\");\n        global.set(\"Lampe5Data\", LampeData);\n\n        return [\n            { topic: \"ambient\", payload: msg.payload[5] },\n            { topic: \"LEDs avg.\", payload: ledsTemp },\n            { payload: msg.payload[7] },\n            { payload: A.toFixed(1) },\n            { payload: lastIndex },\n            { payload: LampeData[\"status\"] },\n            newSetPoint\n        ];\n    } else if(global.get(\"Lampe5En\")===true) {\n        global.set(\"Lampe5Status\", \"r\");\n        return [\n            null,\n            null,\n            null,\n            null,\n            null,\n            { payload: global.get(\"Lampe5Status\") },\n            newSetPoint\n        ];\n    }\n}",
        "outputs": 7,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 300,
        "wires": [
            [
                "723fce3ce0b1c7c3"
            ],
            [
                "723fce3ce0b1c7c3"
            ],
            [
                "1bedc1a541e54ea9"
            ],
            [
                "c7a1dff570307a32"
            ],
            [
                "08e1ac8e3dd6b8b9"
            ],
            [
                "b52eb9418e43ed52"
            ],
            [
                "f4d98d0ccb1e01ab"
            ]
        ]
    },
    {
        "id": "08e1ac8e3dd6b8b9",
        "type": "ui_gauge",
        "z": "82a9216af09bde7a",
        "name": "Lys5",
        "group": "051ab72180dfa122",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "",
        "label": "Lys",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#b2b201",
            "#e6e600",
            "#ffff00"
        ],
        "seg1": "10",
        "seg2": "90",
        "diff": false,
        "className": "",
        "x": 530,
        "y": 380,
        "wires": []
    },
    {
        "id": "b52eb9418e43ed52",
        "type": "ui_led",
        "z": "82a9216af09bde7a",
        "order": 1,
        "group": "051ab72180dfa122",
        "width": "0",
        "height": "0",
        "label": "Status",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "R",
                "valueType": "str"
            },
            {
                "color": "#8b0000",
                "value": "r",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Y",
                "valueType": "str"
            },
            {
                "color": "#000000",
                "value": "y",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "G",
                "valueType": "str"
            },
            {
                "color": "#006400",
                "value": "g",
                "valueType": "str"
            },
            {
                "color": "#808080",
                "value": "ÿ",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": true,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 530,
        "y": 420,
        "wires": []
    },
    {
        "id": "f892e5ae6ffda8f7",
        "type": "ui_slider",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6PWM",
        "label": "Lys",
        "tooltip": "",
        "group": "977d9c659b3c9fb3",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 320,
        "y": 80,
        "wires": [
            [
                "b1f5cbd6e1bfd490",
                "30b64d79d8f3ed5b"
            ]
        ]
    },
    {
        "id": "d92441b9fd9f80fe",
        "type": "function",
        "z": "937e7cf0ac72c745",
        "name": "Set Lampe 6",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 6, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 80,
        "wires": [
            [
                "c2c603f76e787926",
                "18713591d9a58de0"
            ]
        ]
    },
    {
        "id": "dd8f8e91f0eb4279",
        "type": "link out",
        "z": "937e7cf0ac72c745",
        "name": "link out Send Set Lampe 6",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 1035,
        "y": 120,
        "wires": []
    },
    {
        "id": "c2c603f76e787926",
        "type": "delay",
        "z": "937e7cf0ac72c745",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 910,
        "y": 120,
        "wires": [
            [
                "dd8f8e91f0eb4279"
            ]
        ]
    },
    {
        "id": "18713591d9a58de0",
        "type": "link out",
        "z": "937e7cf0ac72c745",
        "name": "link out Set Lampe 6",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 855,
        "y": 80,
        "wires": []
    },
    {
        "id": "b1f5cbd6e1bfd490",
        "type": "trigger",
        "z": "937e7cf0ac72c745",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 500,
        "y": 80,
        "wires": [
            [
                "d92441b9fd9f80fe"
            ]
        ]
    },
    {
        "id": "30b64d79d8f3ed5b",
        "type": "set-shared-state",
        "z": "937e7cf0ac72c745",
        "state": "1f0b74adb1422ff1",
        "name": "Lampe6PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 520,
        "y": 140,
        "wires": []
    },
    {
        "id": "66de7c324869fd38",
        "type": "get-shared-state",
        "z": "937e7cf0ac72c745",
        "state": "1f0b74adb1422ff1",
        "name": "Lampe6PWM",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 130,
        "y": 80,
        "wires": [
            [
                "f892e5ae6ffda8f7"
            ]
        ]
    },
    {
        "id": "6aa3a5b9eb3eb915",
        "type": "link in",
        "z": "937e7cf0ac72c745",
        "name": "link in Lampe 6 Set PWM",
        "links": [
            "697e84fb6138d306",
            "064d66898ded9d78"
        ],
        "x": 145,
        "y": 160,
        "wires": [
            [
                "f892e5ae6ffda8f7"
            ]
        ]
    },
    {
        "id": "6090a61ef80b1712",
        "type": "ui_chart",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6mA",
        "group": "977d9c659b3c9fb3",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [A]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "12",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 550,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "a474f429d4966a1a",
        "type": "ui_chart",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6Temp",
        "group": "977d9c659b3c9fb3",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "140",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 560,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "c16af1ac6d43d6b2",
        "type": "ui_chart",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6RH",
        "group": "977d9c659b3c9fb3",
        "order": 6,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 550,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "ced6cad19131ba87",
        "type": "link in",
        "z": "937e7cf0ac72c745",
        "name": "link in Modbus Reponse",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 115,
        "y": 280,
        "wires": [
            [
                "a077fe6415c2083f"
            ]
        ]
    },
    {
        "id": "a077fe6415c2083f",
        "type": "function",
        "z": "937e7cf0ac72c745",
        "name": "Branch out message",
        "func": "if (msg.topic == '6') {\n\n    // Avoid Driver overheat\n    let newSetPoint = null;\n    if ((flow.get(\"setPoint\") > 50) && (global.get(\"DriverTemperatur\") !== undefined)) {\n        if (global.get(\"DriverTemperatur\") > global.get(\"MaxDriverTemperatur\")) {\n            newSetPoint = 50;\n        }\n    }\n\n    // Data updated?\n    if (Array.isArray(msg.payload)) {\n\n        // Handle Lamp PWM set points\n        let PWM = msg.payload[10];\n        PWM += msg.payload[11];\n        PWM += msg.payload[12];\n        PWM += msg.payload[13];\n        PWM += msg.payload[14];\n        PWM += msg.payload[15];\n        PWM += msg.payload[16];\n        PWM += msg.payload[17];\n        PWM /= 8;\n        let myPST2PWM = global.get(\"myPST2PWM\");\n        let lastIndex = flow.get(\"lastIndex\") || 0;\n        if(PWM < myPST2PWM[lastIndex]) {\n            while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n                lastIndex--;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        } else if (PWM > myPST2PWM[lastIndex]) {\n            while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n                lastIndex++;\n            }\n            flow.set(\"lastIndex\", lastIndex);\n        }\n\n        // LEDs temp.\n        let ledsTemp = (msg.payload[30]+msg.payload[32]+msg.payload[34]+msg.payload[36]+msg.payload[38]+msg.payload[40]+msg.payload[42]+msg.payload[44])/8;\n\n        // Update Lampe status\n        if (PWM == 0) {\n            global.set(\"Lampe6Status\", \"ÿ\");\n        } else if (myPST2PWM[lastIndex] == PWM) {\n            global.set(\"Lampe6Status\", \"G\");\n        } else {\n            global.set(\"Lampe6Status\", \"g\");\n        }\n\n        // Fix false negative values for Amper\n        let A = (msg.payload[9] / 1000);\n        if(( A > 100.0) || ( A == 0.0)) {\n            A = 0.1;\n        }\n\n        // Store Data\n        let LampeData = {};\n        LampeData[\"epoch\"] = Math.round(Date.now() / 1000);\n        LampeData[\"data\"] = msg.payload;\n        LampeData[\"status\"] = global.get(\"Lampe6Status\");\n        global.set(\"Lampe6Data\", LampeData);\n\n        return [\n            { topic: \"ambient\", payload: msg.payload[5] },\n            { topic: \"LEDs avg.\", payload: ledsTemp },\n            { payload: msg.payload[7] },\n            { payload: A.toFixed(1) },\n            { payload: lastIndex },\n            { payload: LampeData[\"status\"] },\n            newSetPoint\n        ];\n    } else if(global.get(\"Lampe6En\")===true) {\n        global.set(\"Lampe6Status\", \"r\");\n        return [\n            null,\n            null,\n            null,\n            null,\n            null,\n            { payload: global.get(\"Lampe6Status\") },\n            newSetPoint\n        ];\n    }\n}",
        "outputs": 7,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 280,
        "y": 280,
        "wires": [
            [
                "a474f429d4966a1a"
            ],
            [
                "a474f429d4966a1a"
            ],
            [
                "c16af1ac6d43d6b2"
            ],
            [
                "6090a61ef80b1712"
            ],
            [
                "78ddd0561a17b3ca"
            ],
            [
                "4da2d590b367caa9"
            ],
            []
        ]
    },
    {
        "id": "78ddd0561a17b3ca",
        "type": "ui_gauge",
        "z": "937e7cf0ac72c745",
        "name": "Lys6",
        "group": "977d9c659b3c9fb3",
        "order": 2,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "",
        "label": "Lys",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#b2b201",
            "#e6e600",
            "#ffff00"
        ],
        "seg1": "10",
        "seg2": "90",
        "diff": false,
        "className": "",
        "x": 530,
        "y": 360,
        "wires": []
    },
    {
        "id": "4da2d590b367caa9",
        "type": "ui_led",
        "z": "937e7cf0ac72c745",
        "order": 1,
        "group": "977d9c659b3c9fb3",
        "width": "0",
        "height": "0",
        "label": "Status",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "R",
                "valueType": "str"
            },
            {
                "color": "#8b0000",
                "value": "r",
                "valueType": "str"
            },
            {
                "color": "#ffff00",
                "value": "Y",
                "valueType": "str"
            },
            {
                "color": "#000000",
                "value": "y",
                "valueType": "str"
            },
            {
                "color": "#008000",
                "value": "G",
                "valueType": "str"
            },
            {
                "color": "#006400",
                "value": "g",
                "valueType": "str"
            },
            {
                "color": "#808080",
                "value": "ÿ",
                "valueType": "str"
            }
        ],
        "allowColorForValueInMessage": true,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 530,
        "y": 400,
        "wires": []
    }
]