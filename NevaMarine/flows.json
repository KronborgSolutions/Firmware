[
    {
        "id": "483a6f631e7f69a7",
        "type": "tab",
        "label": "Oppsett",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "389436610c6304c5",
        "type": "tab",
        "label": "State Machine",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "cedfdb6678b9e49e",
        "type": "tab",
        "label": "MODBUS",
        "disabled": true,
        "info": "",
        "env": []
    },
    {
        "id": "ec96b8f08fb0c19e",
        "type": "tab",
        "label": "MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2d2bd18e.3e4abe",
        "type": "tab",
        "label": "IP Settings",
        "disabled": true,
        "info": ""
    },
    {
        "id": "bf782cbf60794af0",
        "type": "tab",
        "label": "Lampe 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "88be0e5091306a90",
        "type": "tab",
        "label": "Lampe 2",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "ca1e3fc7ee28f5a2",
        "type": "tab",
        "label": "Lampe 3",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "02e68394143357bb",
        "type": "tab",
        "label": "Lampe 4",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "82a9216af09bde7a",
        "type": "tab",
        "label": "Lampe 5",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "937e7cf0ac72c745",
        "type": "tab",
        "label": "Lampe 6",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e7722a256c713090",
        "type": "subflow",
        "name": "Lampe Kommunikasjon",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 80,
                "y": 180,
                "wires": [
                    {
                        "id": "6f5ac5f6c36105a3"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 940,
                "y": 600,
                "wires": [
                    {
                        "id": "836f29e3fdea1105",
                        "port": 0
                    },
                    {
                        "id": "26be3e9f33b3ae29",
                        "port": 0
                    }
                ]
            },
            {
                "x": 940,
                "y": 660,
                "wires": [
                    {
                        "id": "8a7e684034ba0f4a",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {
            "module": "LampeCOM",
            "version": "1.0.0",
            "author": "Ole Petter Ruud <ole@torka.no>"
        },
        "color": "#E9967A",
        "icon": "node-red-contrib-modbus/modbus-icon.png",
        "status": {
            "x": 940,
            "y": 420,
            "wires": [
                {
                    "id": "1eb2f71161ca1410",
                    "port": 2
                },
                {
                    "id": "870e8b76fd0472b0",
                    "port": 0
                },
                {
                    "id": "5313def2edfb882c",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "aa95de13d0ae7341",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "Neva Marine - Aqua Solar",
            "hideToolbar": "false",
            "allowSwipe": "true",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 36,
                "sy": 36,
                "gx": 5,
                "gy": 5,
                "cx": 3,
                "cy": 3,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "bf34d136a8669896",
        "type": "ui_tab",
        "name": "Oppsett",
        "icon": "settings",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "1cf52e38.3cfee2",
        "type": "ui_group",
        "name": "IP Settings",
        "tab": "be53a269.02ec3",
        "order": 1,
        "disp": true,
        "width": 16,
        "collapse": false
    },
    {
        "id": "be53a269.02ec3",
        "type": "ui_tab",
        "name": "Settings",
        "icon": "settings",
        "order": 3
    },
    {
        "id": "713180c82aa959a2",
        "type": "ui_group",
        "name": "Prosessoppsett",
        "tab": "bf34d136a8669896",
        "order": 1,
        "disp": true,
        "width": "18",
        "collapse": true,
        "className": ""
    },
    {
        "id": "5dd95ee166991007",
        "type": "ui_group",
        "name": "Nettverk",
        "tab": "bf34d136a8669896",
        "order": 3,
        "disp": true,
        "width": "12",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f2615cba8578655a",
        "type": "mqtt-broker",
        "name": "",
        "broker": "128.199.38.63",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "f00a67f94951c24d",
        "type": "ui_spacer",
        "z": "2d2bd18e.3e4abe",
        "name": "spacer",
        "group": "1cf52e38.3cfee2",
        "order": 8,
        "width": 10,
        "height": 1
    },
    {
        "id": "1c31383f58ccd4f8",
        "type": "ui_group",
        "name": "Programvare",
        "tab": "bf34d136a8669896",
        "order": 4,
        "disp": true,
        "width": "18",
        "collapse": true,
        "className": ""
    },
    {
        "id": "8fb401a08da32934",
        "type": "ui_group",
        "name": "System",
        "tab": "d5f639bc116dce5e",
        "order": 7,
        "disp": true,
        "width": 8,
        "collapse": true,
        "className": ""
    },
    {
        "id": "d5f639bc116dce5e",
        "type": "ui_tab",
        "name": "Hjem",
        "icon": "mi-hub",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "6419184378ff1692",
        "type": "ui_group",
        "name": "Lampe 1",
        "tab": "d5f639bc116dce5e",
        "order": 1,
        "disp": true,
        "width": "8",
        "collapse": true,
        "className": ""
    },
    {
        "id": "8bb3fa33612b5685",
        "type": "ui_group",
        "name": "Lampe 2",
        "tab": "d5f639bc116dce5e",
        "order": 2,
        "disp": true,
        "width": 8,
        "collapse": true,
        "className": ""
    },
    {
        "id": "f735df78474bdbad",
        "type": "ui_group",
        "name": "Lampe 3",
        "tab": "d5f639bc116dce5e",
        "order": 3,
        "disp": true,
        "width": 8,
        "collapse": true,
        "className": ""
    },
    {
        "id": "d96855d5801a8206",
        "type": "ui_group",
        "name": "Lampe 4",
        "tab": "d5f639bc116dce5e",
        "order": 4,
        "disp": true,
        "width": 8,
        "collapse": true,
        "className": ""
    },
    {
        "id": "051ab72180dfa122",
        "type": "ui_group",
        "name": "Lampe 5",
        "tab": "d5f639bc116dce5e",
        "order": 5,
        "disp": true,
        "width": "8",
        "collapse": true,
        "className": ""
    },
    {
        "id": "977d9c659b3c9fb3",
        "type": "ui_group",
        "name": "Lampe 6",
        "tab": "d5f639bc116dce5e",
        "order": 6,
        "disp": true,
        "width": 8,
        "collapse": true,
        "className": ""
    },
    {
        "id": "26c2ba69e9d72b9e",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 10,
        "width": "0",
        "height": "0"
    },
    {
        "id": "8840cd4845491c62",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "5dd95ee166991007",
        "order": 11,
        "width": "0",
        "height": "0"
    },
    {
        "id": "c3237125d4f73087",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "5dd95ee166991007",
        "order": 7,
        "width": "0",
        "height": "0"
    },
    {
        "id": "94c42d35e9d544d4",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "1c31383f58ccd4f8",
        "order": 6,
        "width": "0",
        "height": "0"
    },
    {
        "id": "ec40c28ec39359c3",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "1c31383f58ccd4f8",
        "order": 4,
        "width": "0",
        "height": "0"
    },
    {
        "id": "5f750cad81ef8ff6",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "1c31383f58ccd4f8",
        "order": 2,
        "width": "0",
        "height": "0"
    },
    {
        "id": "6e960e88aa2ff62b",
        "type": "ui_spacer",
        "z": "483a6f631e7f69a7",
        "name": "spacer",
        "group": "713180c82aa959a2",
        "order": 7,
        "width": "0",
        "height": "0"
    },
    {
        "id": "46c1561852cb3234",
        "type": "modbus-client",
        "name": "LocalBUS",
        "clienttype": "simpleser",
        "bufferCommands": true,
        "stateLogEnabled": true,
        "queueLogEnabled": false,
        "failureLogEnabled": true,
        "tcpHost": "127.0.0.1",
        "tcpPort": "502",
        "tcpType": "DEFAULT",
        "serialPort": "/dev/ttyS0",
        "serialType": "RTU-BUFFERD",
        "serialBaudrate": "115200",
        "serialDatabits": "8",
        "serialStopbits": "1",
        "serialParity": "none",
        "serialConnectionDelay": "100",
        "serialAsciiResponseStartDelimiter": "0x3A",
        "unit_id": "1",
        "commandDelay": "1",
        "clientTimeout": "1000",
        "reconnectOnTimeout": false,
        "reconnectTimeout": "2000",
        "parallelUnitIdsAllowed": true,
        "showErrors": true,
        "showWarnings": true,
        "showLogs": true
    },
    {
        "id": "7f2169e2cb92802f",
        "type": "shared-state",
        "name": "myManuellKjoringState",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "884e0b0f934ba909",
        "type": "shared-state",
        "name": "myLat",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "6",
        "numMin": "-90",
        "numMax": "90",
        "unit": "deg",
        "saveInterval": "0"
    },
    {
        "id": "407e7742e8b9f1bc",
        "type": "shared-state",
        "name": "myLon",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "num",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "6",
        "numMin": "-180",
        "numMax": "180",
        "unit": "deg",
        "saveInterval": "0"
    },
    {
        "id": "9eb895dadc67bea0",
        "type": "shared-state",
        "name": "myBuzzerDisabled",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "d5e8bd2b1115be28",
        "type": "shared-state",
        "name": "FW_Link",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "str",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "984d640ef763cab4",
        "type": "shared-state",
        "name": "myHWaddr",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "str",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "6e1e834c24242472",
        "type": "shared-state",
        "name": "Lampe1En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "dbd084ce70a3aca9",
        "type": "shared-state",
        "name": "Lampe2En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "3ebac7f92155048a",
        "type": "shared-state",
        "name": "Lampe3En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "b2b0acad0fd02e0a",
        "type": "shared-state",
        "name": "Lampe4En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "78fee3bd300e2412",
        "type": "shared-state",
        "name": "Lampe5En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "dcbeac56928b2456",
        "type": "shared-state",
        "name": "Lampe6En",
        "lbl": "",
        "tags": "",
        "historyCount": "2",
        "dataType": "bool",
        "boolType": "bool",
        "boolStrTrue": "",
        "boolStrFalse": "",
        "precision": "",
        "numMin": "",
        "numMax": "",
        "unit": "",
        "saveInterval": "0"
    },
    {
        "id": "bd428c2239aecda6",
        "type": "ui_group",
        "name": "Debug",
        "tab": "d5f639bc116dce5e",
        "order": 8,
        "disp": true,
        "width": "20",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ac4a87428d288525",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Setup MUX",
        "info": "",
        "x": 210,
        "y": 280,
        "wires": []
    },
    {
        "id": "1eb2f71161ca1410",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Pipe MUX",
        "func": "// PIPE MUX\nlet MUX = 0\nswitch (msg.payload.lampe) {\n    case 1:\n    {\n        MUX = 1;\n        msg.payload[\"unitid\"] = 10;\n        break;\n    }\n    case 2:\n    {\n        MUX = 1;\n        msg.payload[\"unitid\"] = 11;\n        break;\n    }\n    case 3:\n    {\n        MUX = 2;\n        msg.payload[\"unitid\"] = 10;\n        break;\n    }\n    case 4:\n    {\n        MUX = 2;\n        msg.payload[\"unitid\"] = 11;\n        break;\n    }\n    case 5:\n    {\n        MUX = 3;\n        msg.payload[\"unitid\"] = 10;\n        break;\n    }\n    case 6:\n    {\n        MUX = 3;\n        msg.payload[\"unitid\"] = 11;\n        break;\n    }\n    default:\n    {\n        MUX = 0;\n        msg.payload[\"unitid\"] = 1;\n        break;\n    }\n}\n\n\nreturn [\n    { payload: (MUX & 0x1 ? 1 : 0) },\n    { payload: (MUX & 0x2 ? 1 : 0) },\n    { payload: { fill: \"green\", shape: \"dot\", text: \"COM: \" + (msg.payload.lampe != 0 ? \"Lampe \" + msg.payload.lampe : \"System\") + \" FC: \" + msg.payload.fc }},\n    msg\n]",
        "outputs": 4,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 380,
        "wires": [
            [
                "f00dd78de521a5b6"
            ],
            [
                "e17d5fc2c5732a04"
            ],
            [],
            [
                "fa260155b62ca90e"
            ]
        ]
    },
    {
        "id": "16b1e324925b874c",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Handle all MODBUS communication between RPi vs. CTRL-Card vs. Lamps",
        "info": "",
        "x": 330,
        "y": 80,
        "wires": []
    },
    {
        "id": "979b6f996bfd67a7",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Get or Set data?",
        "info": "",
        "x": 220,
        "y": 540,
        "wires": []
    },
    {
        "id": "60a71c44128a3e3c",
        "type": "switch",
        "z": "e7722a256c713090",
        "name": "",
        "property": "payload.fc",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "3",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 190,
        "y": 600,
        "wires": [
            [
                "836f29e3fdea1105"
            ],
            [
                "8a7e684034ba0f4a"
            ]
        ]
    },
    {
        "id": "fa260155b62ca90e",
        "type": "delay",
        "z": "e7722a256c713090",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 210,
        "y": 460,
        "wires": [
            [
                "60a71c44128a3e3c"
            ]
        ]
    },
    {
        "id": "6f5ac5f6c36105a3",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "If Array => Array[0]  and set enable flag",
        "func": "if(Array.isArray(msg.payload)) {\n    msg.payload = msg.payload[0];\n}\n\nlet lampe = 100;\nif(msg.payload.lampe !== undefined) {\n    lampe = msg.payload.lampe;\n} else {\n    msg.payload[\"lampe\"] = 100;\n}\n\nmsg.topic = lampe;\nmsg[\"enabled\"] = true;\n\nswitch(lampe) {\n    case 1:\n    {\n        msg.enabled = global.get(\"Lampe1En\");\n        break;\n    }\n    case 2:\n    {\n        msg.enabled = global.get(\"Lampe2En\");\n        break;\n    }\n    case 3:\n    {\n        msg.enabled = global.get(\"Lampe3En\");\n        break;\n    }\n    case 4:\n    {\n        msg.enabled = global.get(\"Lampe4En\");\n        break;\n    }\n    case 5:\n    {\n        msg.enabled = global.get(\"Lampe5En\");\n        break;\n    }\n    case 6:\n    {\n        msg.enabled = global.get(\"Lampe6En\");\n        break;\n    }\n    default:\n    {\n        break;\n    }\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 180,
        "wires": [
            [
                "411cba2e789dd038"
            ]
        ]
    },
    {
        "id": "0df49946869f682f",
        "type": "switch",
        "z": "e7722a256c713090",
        "name": "Error?",
        "property": "error",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 550,
        "y": 500,
        "wires": [
            [
                "870e8b76fd0472b0"
            ]
        ]
    },
    {
        "id": "870e8b76fd0472b0",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Report Error in Status",
        "func": "return { payload: { fill: \"red\", shape: \"dot\", text: \"COM: \" + (msg.topic != 0 ? \"Lampe \" + msg.topic : \"System\") + \" \" + msg.error }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "411cba2e789dd038",
        "type": "switch",
        "z": "e7722a256c713090",
        "name": "Enabled?",
        "property": "enabled",
        "propertyType": "msg",
        "rules": [
            {
                "t": "false"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 380,
        "y": 240,
        "wires": [
            [
                "5313def2edfb882c"
            ],
            [
                "1eb2f71161ca1410"
            ]
        ]
    },
    {
        "id": "c6bf9f5cb1d25036",
        "type": "comment",
        "z": "e7722a256c713090",
        "name": "Enabled?",
        "info": "",
        "x": 200,
        "y": 120,
        "wires": []
    },
    {
        "id": "5313def2edfb882c",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Report Disabled",
        "func": "return { topic: msg.topic, payload: { fill: \"yellow\", shape: \"dot\", text: \"COM: \" + (msg.topic != 0 ? \"Lampe \" + msg.topic : \"System\") + \" Disabled\" }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 240,
        "wires": [
            [
                "26be3e9f33b3ae29"
            ]
        ]
    },
    {
        "id": "26be3e9f33b3ae29",
        "type": "function",
        "z": "e7722a256c713090",
        "name": "Empty",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "836f29e3fdea1105",
        "type": "modbus-flex-getter",
        "z": "e7722a256c713090",
        "name": "",
        "showStatusActivities": true,
        "showErrors": false,
        "showWarnings": false,
        "logIOActivities": false,
        "server": "46c1561852cb3234",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": true,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 370,
        "y": 600,
        "wires": [
            [
                "0df49946869f682f"
            ],
            []
        ]
    },
    {
        "id": "8a7e684034ba0f4a",
        "type": "modbus-flex-write",
        "z": "e7722a256c713090",
        "name": "",
        "showStatusActivities": true,
        "showErrors": false,
        "showWarnings": false,
        "server": "46c1561852cb3234",
        "emptyMsgOnFail": true,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 370,
        "y": 660,
        "wires": [
            [
                "0df49946869f682f"
            ],
            []
        ]
    },
    {
        "id": "f00dd78de521a5b6",
        "type": "rpi-gpio out",
        "z": "e7722a256c713090",
        "name": "MUX0",
        "pin": "4",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 550,
        "y": 300,
        "wires": []
    },
    {
        "id": "e17d5fc2c5732a04",
        "type": "rpi-gpio out",
        "z": "e7722a256c713090",
        "name": "MUX1",
        "pin": "5",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 550,
        "y": 360,
        "wires": []
    },
    {
        "id": "ead8f956c53ebd34",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Prosessoppsett",
        "info": "",
        "x": 140,
        "y": 80,
        "wires": []
    },
    {
        "id": "9652c9e68944c869",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Hent Hostname og MAC og IP",
        "info": "",
        "x": 180,
        "y": 1180,
        "wires": []
    },
    {
        "id": "8606686a.ef7008",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract HWaddr",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ether \") + 6; // Offset the start of the address from \"ether \"\nlet addr = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nreturn { payload : addr }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 1300,
        "wires": [
            [
                "b4ef47649e9c4759",
                "54b06a2d2d3f7da9"
            ]
        ]
    },
    {
        "id": "52753337.7b5a8c",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "ifconfig eth0",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 370,
        "y": 1320,
        "wires": [
            [
                "8606686a.ef7008",
                "f378c2eb37bccb2e"
            ],
            [],
            []
        ]
    },
    {
        "id": "7274cbde085522a1",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract Hostname",
        "func": "let hostname = msg.payload; // Save the payload string to a more convenient variable name\n\nreturn { payload : hostname.trim() };",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 1240,
        "wires": [
            [
                "7f0574c4b0c6d150",
                "89718a34befe08cc"
            ]
        ]
    },
    {
        "id": "8672e44b8c93e04e",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "hostname",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 380,
        "y": 1240,
        "wires": [
            [
                "7274cbde085522a1"
            ],
            [],
            []
        ]
    },
    {
        "id": "7f0574c4b0c6d150",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "Show Hostname",
        "label": "Hostname:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 780,
        "y": 1260,
        "wires": []
    },
    {
        "id": "b4ef47649e9c4759",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "Show HW addr",
        "label": "MAC:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 780,
        "y": 1340,
        "wires": []
    },
    {
        "id": "f378c2eb37bccb2e",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract IP",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1380,
        "wires": [
            [
                "c1effe7692196d3b"
            ]
        ]
    },
    {
        "id": "c1effe7692196d3b",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "Show eth0 IP",
        "label": "eth0 IP:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 770,
        "y": 1380,
        "wires": []
    },
    {
        "id": "e6597813fd0ae3f4",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "ifconfig wlan0",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 360,
        "y": 1440,
        "wires": [
            [
                "fefea0960b0e5ccf"
            ],
            [],
            []
        ]
    },
    {
        "id": "096f2f794a85bfda",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 4,
        "width": 0,
        "height": 0,
        "name": "Show wlan0 IP",
        "label": "wlan0 IP:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 780,
        "y": 1440,
        "wires": []
    },
    {
        "id": "54b06a2d2d3f7da9",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HWaddr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 790,
        "y": 1300,
        "wires": [
            [
                "99221ed0b3ff9b78"
            ]
        ]
    },
    {
        "id": "415279b36a1b260b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myLat",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1820,
        "wires": [
            [
                "d3a04c2a524f335d"
            ]
        ]
    },
    {
        "id": "9446bd4891094586",
        "type": "inject",
        "z": "483a6f631e7f69a7",
        "name": "59.321648",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "59.321648",
        "payloadType": "num",
        "x": 180,
        "y": 1780,
        "wires": [
            [
                "bd2bf422b00f4ea1"
            ]
        ]
    },
    {
        "id": "bd2bf422b00f4ea1",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Lat:",
        "tooltip": "",
        "group": "5dd95ee166991007",
        "order": 9,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 330,
        "y": 1820,
        "wires": [
            [
                "415279b36a1b260b",
                "f559be213ad80699"
            ]
        ]
    },
    {
        "id": "942d34ae8956f965",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myLon",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 1940,
        "wires": [
            [
                "d3a04c2a524f335d"
            ]
        ]
    },
    {
        "id": "0658f9f3b5b365fe",
        "type": "inject",
        "z": "483a6f631e7f69a7",
        "name": "10.496234",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "10.496234",
        "payloadType": "num",
        "x": 180,
        "y": 1900,
        "wires": [
            [
                "f4894c4f1c847f1c"
            ]
        ]
    },
    {
        "id": "f4894c4f1c847f1c",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Lon:",
        "tooltip": "",
        "group": "5dd95ee166991007",
        "order": 10,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 330,
        "y": 1940,
        "wires": [
            [
                "942d34ae8956f965",
                "18c63098db69cf72"
            ]
        ]
    },
    {
        "id": "6ce543380d8075b6",
        "type": "ui_text",
        "z": "483a6f631e7f69a7",
        "group": "5dd95ee166991007",
        "order": 8,
        "width": 2,
        "height": 1,
        "name": "",
        "label": "Position:",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 340,
        "y": 1780,
        "wires": []
    },
    {
        "id": "66075e03ab09b9bf",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "Send position update",
        "mode": "link",
        "links": [
            "3bcdd38ce2c510ef"
        ],
        "x": 1095,
        "y": 1880,
        "wires": []
    },
    {
        "id": "d3a04c2a524f335d",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "0",
        "op2": "",
        "op1type": "str",
        "op2type": "date",
        "duration": "10",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 970,
        "y": 1860,
        "wires": [
            [],
            [
                "66075e03ab09b9bf"
            ]
        ]
    },
    {
        "id": "89718a34befe08cc",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "hostname",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "fbd47f18eb2c1b2e",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Deaktivere alarmlyd",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 420,
        "y": 740,
        "wires": [
            [
                "1c1f9e4030ad8e36",
                "89fad0d68ea4aea0"
            ]
        ]
    },
    {
        "id": "1c1f9e4030ad8e36",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "BuzzerDisabled",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 710,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "85d582adbda505d5",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "WifiPassword",
        "label": "Nettverkspassord:",
        "tooltip": "Avslutt med Enter eller Tab for å endre.",
        "group": "5dd95ee166991007",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "password",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 780,
        "y": 1640,
        "wires": [
            [
                "8a75d5bd744e8a34"
            ]
        ]
    },
    {
        "id": "92f50ec9494dca41",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "SSID",
        "label": "Nettverksnavn (SSID):",
        "tooltip": "Avslutt med Enter eller Tab for å endre.",
        "group": "5dd95ee166991007",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 750,
        "y": 1600,
        "wires": [
            [
                "4137c932c634e85c"
            ]
        ]
    },
    {
        "id": "c7f54ee0b2f3a63a",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "cat /etc/wpa_supplicant/wpa_supplicant.conf",
        "addpay": false,
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 270,
        "y": 1620,
        "wires": [
            [
                "1b2a342569d2a26e",
                "42dc6006f9fea2f4"
            ],
            [],
            []
        ]
    },
    {
        "id": "4bbd09c9d61fa90a",
        "type": "ui_ui_control",
        "z": "483a6f631e7f69a7",
        "name": "",
        "events": "change",
        "x": 160,
        "y": 1240,
        "wires": [
            [
                "e465494834110f2d"
            ]
        ]
    },
    {
        "id": "e3fa8f4d8f0e2257",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "top right",
        "displayTime": "5",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 810,
        "y": 1500,
        "wires": []
    },
    {
        "id": "c14bb127b5df1c7b",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract available SSID",
        "func": "let myArray = msg.payload;\nlet mySSIDs = \"SSID(s):\";\n\n// List all SSIDs\nfor(let i=0;i<myArray.length;i++) {\n    mySSIDs = mySSIDs + \" \" + myArray[i].ssid;\n}\n\nreturn { payload : mySSIDs }; // return the SSIDs found as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 1500,
        "wires": [
            [
                "e3fa8f4d8f0e2257"
            ]
        ]
    },
    {
        "id": "fefea0960b0e5ccf",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract IP",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 1440,
        "wires": [
            [
                "096f2f794a85bfda"
            ]
        ]
    },
    {
        "id": "e465494834110f2d",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "name",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Oppsett",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 150,
        "y": 1380,
        "wires": [
            [
                "8672e44b8c93e04e",
                "52753337.7b5a8c",
                "e6597813fd0ae3f4",
                "c7f54ee0b2f3a63a",
                "5d6762f0715ad17d"
            ]
        ]
    },
    {
        "id": "1b2a342569d2a26e",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract SSID",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ssid=\") + 6; // Offset the start of the SSID \"\nlet mySSID = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgSSID\", mySSID);\n\nreturn { payload: mySSID }; // return the SSID as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 1600,
        "wires": [
            [
                "92f50ec9494dca41"
            ]
        ]
    },
    {
        "id": "42dc6006f9fea2f4",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "extract psk",
        "func": "let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"psk=\") + 5; // Offset the start of the psk \"\nlet myPSK = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgPSK\", myPSK);\n\n\nreturn { payload: myPSK }; // return the PSK as the new payload",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 1640,
        "wires": [
            [
                "85d582adbda505d5"
            ]
        ]
    },
    {
        "id": "4137c932c634e85c",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Endring?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "orgSSID",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 960,
        "y": 1600,
        "wires": [
            [
                "f08261ebfc7c4153"
            ]
        ]
    },
    {
        "id": "8a75d5bd744e8a34",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Endring?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "neq",
                "v": "orgPSK",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 960,
        "y": 1640,
        "wires": [
            [
                "585fb6d440aca651"
            ]
        ]
    },
    {
        "id": "f08261ebfc7c4153",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let newValue = msg.payload;\nlet orgValue = flow.get(\"orgSSID\"); \n\nlet command = `'s?ssid=\"${orgValue}\"?ssid=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgSSID\",newValue);\n\nreturn {payload: command};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 1600,
        "wires": [
            [
                "e4b41e99e4495c4e"
            ]
        ]
    },
    {
        "id": "e4b41e99e4495c4e",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "sudo sed -i ",
        "addpay": true,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "oldrc": false,
        "name": "",
        "x": 1330,
        "y": 1620,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "585fb6d440aca651",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let newValue = msg.payload;\nlet orgValue = flow.get(\"orgPSK\"); \n\nlet command = `'s?psk=\"${orgValue}\"?psk=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgPSK\",newValue);\n\nreturn {payload: command};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1140,
        "y": 1640,
        "wires": [
            [
                "e4b41e99e4495c4e"
            ]
        ]
    },
    {
        "id": "43a334e28706087c",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in SSID",
        "links": [
            "bd09041f1951af61"
        ],
        "x": 605,
        "y": 1560,
        "wires": [
            [
                "92f50ec9494dca41"
            ]
        ]
    },
    {
        "id": "13a7ca5bd49cdb11",
        "type": "link in",
        "z": "483a6f631e7f69a7",
        "name": "link in WifiPassword",
        "links": [
            "0fa5e2f74c05ad92"
        ],
        "x": 605,
        "y": 1680,
        "wires": [
            [
                "85d582adbda505d5"
            ]
        ]
    },
    {
        "id": "bf46220a5ddc0c5a",
        "type": "ui_text_input",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "FW link:",
        "tooltip": "",
        "group": "1c31383f58ccd4f8",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 340,
        "y": 2060,
        "wires": [
            [
                "d276a4a2ddf4962d",
                "b13ec189cc79f6ba"
            ]
        ]
    },
    {
        "id": "b13ec189cc79f6ba",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "FW_Link",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 570,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "5d8c74fd4da28a7d",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "1c31383f58ccd4f8",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Oppdater programvare",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "Sikker på at du vil oppdatere programvare nå?",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 200,
        "y": 2160,
        "wires": [
            [
                "b97564d416dc3d4b"
            ]
        ]
    },
    {
        "id": "b97564d416dc3d4b",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "OBS!",
        "name": "",
        "x": 410,
        "y": 2160,
        "wires": [
            [
                "87af758445f14285"
            ]
        ]
    },
    {
        "id": "87af758445f14285",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 570,
        "y": 2160,
        "wires": [
            [
                "f5c628fac390b678"
            ]
        ]
    },
    {
        "id": "fc771a88fc812e82",
        "type": "exec",
        "z": "483a6f631e7f69a7",
        "command": "sudo wget -cO - ",
        "addpay": "payload",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "name": "",
        "x": 420,
        "y": 2240,
        "wires": [
            [
                "b56eeb28afd7b903"
            ],
            [
                "b56eeb28afd7b903"
            ],
            [
                "b56eeb28afd7b903",
                "5e26a60998e2c14e"
            ]
        ]
    },
    {
        "id": "f5c628fac390b678",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "send commands",
        "func": "let myParam = flow.get(\"FW_Link\") + \" > /home/pi/.node-red/flows.json\";\n\nreturn { payload: myParam }",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 220,
        "y": 2240,
        "wires": [
            [
                "fc771a88fc812e82"
            ]
        ]
    },
    {
        "id": "b56eeb28afd7b903",
        "type": "debug",
        "z": "483a6f631e7f69a7",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 2240,
        "wires": []
    },
    {
        "id": "5e26a60998e2c14e",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "Alt i orden?",
        "property": "payload.code",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "num"
            },
            {
                "t": "neq",
                "v": "0",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 210,
        "y": 2320,
        "wires": [
            [
                "e4c0288adfa9a86f"
            ],
            [
                "343324275668efb1"
            ]
        ]
    },
    {
        "id": "40ed356cf71a23de",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "top right",
        "displayTime": "10",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 670,
        "y": 2320,
        "wires": []
    },
    {
        "id": "e4c0288adfa9a86f",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Programvare Oppdatert!",
        "func": "return { payload: \"Programvare Oppdatert! Omstart nødvendig for at endringene skal tre i kraft - kjører omstart nå...\" };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2320,
        "wires": [
            [
                "40ed356cf71a23de",
                "4b257f03fe785047"
            ]
        ]
    },
    {
        "id": "4b257f03fe785047",
        "type": "delay",
        "z": "483a6f631e7f69a7",
        "name": "",
        "pauseType": "delay",
        "timeout": "15",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 640,
        "y": 2360,
        "wires": [
            [
                "f2e8fe39856e80ef"
            ]
        ]
    },
    {
        "id": "343324275668efb1",
        "type": "function",
        "z": "483a6f631e7f69a7",
        "name": "Uff da... Dette gikk jo ikke.",
        "func": "return { payload: \"Uff da! Fikk ikke tak i Programvaren.\" + msg.payload.message };\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 2360,
        "wires": [
            [
                "40ed356cf71a23de"
            ]
        ]
    },
    {
        "id": "54b12257f4a94b77",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "System Status/Overide",
        "info": "",
        "x": 160,
        "y": 840,
        "wires": []
    },
    {
        "id": "b478d0db2b70e8aa",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "DeaktiverBryter",
        "label": "Deaktivere Bryter (Man/Av/Auto)",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 420,
        "y": 900,
        "wires": [
            [
                "0f6199f63595e02c",
                "33312b8bbafd2fbb"
            ]
        ]
    },
    {
        "id": "33312b8bbafd2fbb",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "myManuellKjoringState",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 900,
        "wires": [
            [
                "9c4441022fa25dc3"
            ]
        ]
    },
    {
        "id": "0a58943a5119541a",
        "type": "ui_button",
        "z": "483a6f631e7f69a7",
        "name": "",
        "group": "1c31383f58ccd4f8",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "label": "Omstart",
        "tooltip": "",
        "color": "white",
        "bgcolor": "red",
        "className": "",
        "icon": "close",
        "payload": "Trukk OK for omstart av systemmet. Hvis du ikke er sikker - trykk CANCEL nå!",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 160,
        "y": 1080,
        "wires": [
            [
                "db9e027392c5b21e"
            ]
        ]
    },
    {
        "id": "9e4b31212a818980",
        "type": "comment",
        "z": "483a6f631e7f69a7",
        "name": "Omstart",
        "info": "",
        "x": 110,
        "y": 1020,
        "wires": []
    },
    {
        "id": "db9e027392c5b21e",
        "type": "ui_toast",
        "z": "483a6f631e7f69a7",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "ADVARSEL",
        "name": "",
        "x": 330,
        "y": 1080,
        "wires": [
            [
                "91f87512e16887b3"
            ]
        ]
    },
    {
        "id": "91f87512e16887b3",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 1080,
        "wires": [
            [
                "2ef322e034f98afc"
            ]
        ]
    },
    {
        "id": "9c4441022fa25dc3",
        "type": "trigger",
        "z": "483a6f631e7f69a7",
        "name": "",
        "op1": "0",
        "op2": "",
        "op1type": "str",
        "op2type": "date",
        "duration": "3",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 2,
        "x": 1020,
        "y": 900,
        "wires": [
            [],
            [
                "142ac5ca21618d51"
            ]
        ]
    },
    {
        "id": "142ac5ca21618d51",
        "type": "link out",
        "z": "483a6f631e7f69a7",
        "name": "link out Manuell Kjoring",
        "mode": "link",
        "links": [
            "19e1100a281a1a59",
            "bb177e98cd2da314"
        ],
        "x": 1145,
        "y": 920,
        "wires": []
    },
    {
        "id": "5b2f4d4e11e164f2",
        "type": "ui_template",
        "z": "483a6f631e7f69a7",
        "group": "8fb401a08da32934",
        "name": "",
        "order": 10,
        "width": 0,
        "height": 0,
        "format": "<div ng-bind-html=\"msg.payload\"></div>\n<style>\n    \n    /* Set Background picture */\n    body {\n        background-image: url(\"/Background.png\");\n        background-repeat: no-repeat;\n        background-position: center;\n        background-size: contain;\n    }\n\n    /* Styling for all the groups */\n    ui-card-panel {\n        box-shadow: rgba(0,0,0,0.55) 0px 15px 25px !important;\n        border-radius: 5px;\n        background: rgba(50,50,50,0.75) !important;\n    }\n    \n    /* Styling for all the lelements in the groups */\n    ui-card-panel * {\n        border-radius: 2.5px;\n    }\n\n    /* Styling */\n    md-card {\n        background: rgba(50,50,50,0.75) !important;\n    }\n\n    /* Styling of the Group Title */\n    .nr-dashboard-cardtitle {\n        font-weight: bold !important;\n    }\n\n</style>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "global",
        "className": "",
        "x": 360,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "7a113f2f974a1dae",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": " Aktivere Lampe 1",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 140,
        "wires": [
            [
                "80772545d1e55244",
                "da8e8ea18dc47c69"
            ]
        ]
    },
    {
        "id": "da8e8ea18dc47c69",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe1En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 140,
        "wires": [
            [
                "4f19a906966b33c4"
            ]
        ]
    },
    {
        "id": "9888f53a4dba56d9",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Aktivere Lampe 2",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 240,
        "wires": [
            [
                "4240b58247da8662",
                "1ac3755c818bbb14"
            ]
        ]
    },
    {
        "id": "1ac3755c818bbb14",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe2En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 240,
        "wires": [
            [
                "2ff74425e33e6373"
            ]
        ]
    },
    {
        "id": "ebf6b44764fc7b05",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": " Aktivere Lampe 3",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 340,
        "wires": [
            [
                "3ce9de1f03152b4b",
                "d78dcfddd87ec46b"
            ]
        ]
    },
    {
        "id": "d78dcfddd87ec46b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe3En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 340,
        "wires": [
            [
                "62f7b48dcbda874c"
            ]
        ]
    },
    {
        "id": "5a17ca09c4ea4a62",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Aktivere Lampe 4",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 440,
        "wires": [
            [
                "2c8782f46aa80988",
                "b35b12e3c51bd86a"
            ]
        ]
    },
    {
        "id": "b35b12e3c51bd86a",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe4En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 440,
        "wires": [
            [
                "8f3b748b72912b3b"
            ]
        ]
    },
    {
        "id": "9be8d603c2f9a2a3",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": " Aktivere Lampe 5",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 540,
        "wires": [
            [
                "592ea8cc15e1b674",
                "b4daa565f7d18b63"
            ]
        ]
    },
    {
        "id": "b4daa565f7d18b63",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe5En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 540,
        "wires": [
            [
                "4af1e2fca77db38a"
            ]
        ]
    },
    {
        "id": "ea9b30ce8736a6c1",
        "type": "ui_switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "label": "Aktivere Lampe 6",
        "tooltip": "",
        "group": "713180c82aa959a2",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 350,
        "y": 640,
        "wires": [
            [
                "e0eb3af760b09bea",
                "f0b8619a95c18428"
            ]
        ]
    },
    {
        "id": "f0b8619a95c18428",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "Lampe6En",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 580,
        "y": 640,
        "wires": [
            [
                "0d0333cce94a1861"
            ]
        ]
    },
    {
        "id": "4f19a906966b33c4",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 140,
        "wires": [
            [
                "b0678749530ae61c"
            ],
            [
                "e21c0ddaf8225231"
            ]
        ]
    },
    {
        "id": "b0678749530ae61c",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_1\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 120,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "e21c0ddaf8225231",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_1\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 160,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "03d2fa616f31f01c",
        "type": "ui_ui_control",
        "z": "483a6f631e7f69a7",
        "name": "",
        "events": "change",
        "x": 1260,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "2ff74425e33e6373",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 240,
        "wires": [
            [
                "f4a7b993c97da077"
            ],
            [
                "8b535299319578d1"
            ]
        ]
    },
    {
        "id": "f4a7b993c97da077",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_2\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 220,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "8b535299319578d1",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_2\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 260,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "62f7b48dcbda874c",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 340,
        "wires": [
            [
                "cd736e5ef3766df0"
            ],
            [
                "b784750d653c40a7"
            ]
        ]
    },
    {
        "id": "cd736e5ef3766df0",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_3\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 320,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "b784750d653c40a7",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_3\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 360,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "8f3b748b72912b3b",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 440,
        "wires": [
            [
                "b9c3dfd449c2ea9b"
            ],
            [
                "961ae798fe59177d"
            ]
        ]
    },
    {
        "id": "b9c3dfd449c2ea9b",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_4\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 420,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "961ae798fe59177d",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_4\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 460,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "4af1e2fca77db38a",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 540,
        "wires": [
            [
                "e646a1a7a8d503f9"
            ],
            [
                "f5b858411fdadf50"
            ]
        ]
    },
    {
        "id": "e646a1a7a8d503f9",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_5\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 520,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "f5b858411fdadf50",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_5\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 560,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "0d0333cce94a1861",
        "type": "switch",
        "z": "483a6f631e7f69a7",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 770,
        "y": 640,
        "wires": [
            [
                "216f18c5df9a42e0"
            ],
            [
                "c334077b933c4c7e"
            ]
        ]
    },
    {
        "id": "216f18c5df9a42e0",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Show",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"show\":[\"Hjem_Lampe_6\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 620,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "c334077b933c4c7e",
        "type": "change",
        "z": "483a6f631e7f69a7",
        "name": "Hide ",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\":{\"hide\":[\"Hjem_Lampe_6\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 910,
        "y": 660,
        "wires": [
            [
                "03d2fa616f31f01c"
            ]
        ]
    },
    {
        "id": "cc41947dcd6a7447",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 190,
        "y": 1820,
        "wires": [
            [
                "bd2bf422b00f4ea1"
            ]
        ]
    },
    {
        "id": "136cbb4d09d53679",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 190,
        "y": 1940,
        "wires": [
            [
                "f4894c4f1c847f1c"
            ]
        ]
    },
    {
        "id": "39950418cf657b21",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "9eb895dadc67bea0",
        "name": "myBuzzerDisabled",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 190,
        "y": 740,
        "wires": [
            [
                "fbd47f18eb2c1b2e"
            ]
        ]
    },
    {
        "id": "73b0e388477c6a78",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d5e8bd2b1115be28",
        "name": "FW_Link",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 2060,
        "wires": [
            [
                "bf46220a5ddc0c5a"
            ]
        ]
    },
    {
        "id": "fc1097f1322444ad",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 200,
        "y": 900,
        "wires": [
            [
                "b478d0db2b70e8aa"
            ]
        ]
    },
    {
        "id": "a4d0915da9164c50",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "6e1e834c24242472",
        "name": "Lampe1En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 140,
        "wires": [
            [
                "7a113f2f974a1dae"
            ]
        ]
    },
    {
        "id": "cca950337b0e4cd6",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dbd084ce70a3aca9",
        "name": "Lampe2En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 240,
        "wires": [
            [
                "9888f53a4dba56d9"
            ]
        ]
    },
    {
        "id": "d92b02fa08482154",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "3ebac7f92155048a",
        "name": "Lampe3En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 340,
        "wires": [
            [
                "ebf6b44764fc7b05"
            ]
        ]
    },
    {
        "id": "ea3c66bf77880b2e",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "b2b0acad0fd02e0a",
        "name": "Lampe4En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 440,
        "wires": [
            [
                "5a17ca09c4ea4a62"
            ]
        ]
    },
    {
        "id": "6d4ac23763231581",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "78fee3bd300e2412",
        "name": "Lampe5En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 540,
        "wires": [
            [
                "9be8d603c2f9a2a3"
            ]
        ]
    },
    {
        "id": "4be8e5f68a4abfe9",
        "type": "get-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dcbeac56928b2456",
        "name": "Lampe6En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "x": 160,
        "y": 640,
        "wires": [
            [
                "ea9b30ce8736a6c1"
            ]
        ]
    },
    {
        "id": "f559be213ad80699",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 530,
        "y": 1860,
        "wires": []
    },
    {
        "id": "18c63098db69cf72",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 530,
        "y": 1980,
        "wires": []
    },
    {
        "id": "89fad0d68ea4aea0",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "9eb895dadc67bea0",
        "name": "myBuzzerDisabled",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 710,
        "y": 780,
        "wires": []
    },
    {
        "id": "d276a4a2ddf4962d",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "d5e8bd2b1115be28",
        "name": "FW_Link",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 540,
        "y": 2100,
        "wires": []
    },
    {
        "id": "0f6199f63595e02c",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": false,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 770,
        "y": 940,
        "wires": []
    },
    {
        "id": "99221ed0b3ff9b78",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "984d640ef763cab4",
        "name": "myHWaddr",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 990,
        "y": 1300,
        "wires": []
    },
    {
        "id": "80772545d1e55244",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "6e1e834c24242472",
        "name": "Lampe1En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 550,
        "y": 180,
        "wires": []
    },
    {
        "id": "4240b58247da8662",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dbd084ce70a3aca9",
        "name": "Lampe2En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 550,
        "y": 280,
        "wires": []
    },
    {
        "id": "3ce9de1f03152b4b",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "3ebac7f92155048a",
        "name": "Lampe3En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 550,
        "y": 380,
        "wires": []
    },
    {
        "id": "2c8782f46aa80988",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "b2b0acad0fd02e0a",
        "name": "Lampe4En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 550,
        "y": 480,
        "wires": []
    },
    {
        "id": "592ea8cc15e1b674",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "78fee3bd300e2412",
        "name": "Lampe5En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 550,
        "y": 580,
        "wires": []
    },
    {
        "id": "e0eb3af760b09bea",
        "type": "set-shared-state",
        "z": "483a6f631e7f69a7",
        "state": "dcbeac56928b2456",
        "name": "Lampe6En",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 550,
        "y": 680,
        "wires": []
    },
    {
        "id": "5d6762f0715ad17d",
        "type": "wifiscan",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 370,
        "y": 1500,
        "wires": [
            [
                "c14bb127b5df1c7b"
            ]
        ]
    },
    {
        "id": "f2e8fe39856e80ef",
        "type": "restart",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 810,
        "y": 2360,
        "wires": []
    },
    {
        "id": "2ef322e034f98afc",
        "type": "restart",
        "z": "483a6f631e7f69a7",
        "name": "",
        "x": 650,
        "y": 1080,
        "wires": []
    },
    {
        "id": "0b15a252a73f9d20",
        "type": "trigger",
        "z": "389436610c6304c5",
        "name": "AlivePulse",
        "op1": "1",
        "op2": "0",
        "op1type": "str",
        "op2type": "str",
        "duration": "100",
        "extend": false,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 430,
        "y": 460,
        "wires": [
            [
                "cdf23f9bebad3d09"
            ]
        ]
    },
    {
        "id": "a5c1a40f6aa5490b",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": "10",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 440,
        "wires": [
            [
                "0b15a252a73f9d20",
                "d26ccf918054d530"
            ]
        ]
    },
    {
        "id": "227377b89d9f05d3",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Sjekk State Machine med 1Hz",
        "info": "",
        "x": 180,
        "y": 380,
        "wires": []
    },
    {
        "id": "0373238bfae3876a",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Alive / Watchdog",
        "info": "",
        "x": 440,
        "y": 400,
        "wires": []
    },
    {
        "id": "140234849c844ca3",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Manuell modus?",
        "info": "",
        "x": 140,
        "y": 540,
        "wires": []
    },
    {
        "id": "d26ccf918054d530",
        "type": "switch",
        "z": "389436610c6304c5",
        "name": "Manuell Kjøring?",
        "property": "myManuellKjoringState",
        "propertyType": "global",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 150,
        "y": 600,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "599eecdb58c4791d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Normal drift",
        "info": "",
        "x": 130,
        "y": 680,
        "wires": []
    },
    {
        "id": "e35f186791f1cae4",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Digital inn",
        "info": "",
        "x": 120,
        "y": 1600,
        "wires": []
    },
    {
        "id": "f919e2e4e25acf1a",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Analog inn",
        "info": "global.set(\"MB01Septiklevel\", msg.payload[8]);\nglobal.set(\"MB01Bruksvannlevel\", msg.payload[9]);\n",
        "x": 120,
        "y": 1700,
        "wires": []
    },
    {
        "id": "eed6412019e0569e",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Alarmhåndtering",
        "info": "",
        "x": 140,
        "y": 1800,
        "wires": []
    },
    {
        "id": "199fbf45b6f0067d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "System Oppstart",
        "info": "",
        "x": 140,
        "y": 80,
        "wires": []
    },
    {
        "id": "ff05082d402edd3c",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 150,
        "y": 140,
        "wires": [
            [
                "100e44bf77834a1f",
                "cff4564a70b363a8"
            ]
        ]
    },
    {
        "id": "dc8e2bd53450658d",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "Update Position, Config an Prosessdata on startup",
        "mode": "link",
        "links": [
            "19e1100a281a1a59",
            "3bcdd38ce2c510ef",
            "bb177e98cd2da314"
        ],
        "x": 235,
        "y": 200,
        "wires": []
    },
    {
        "id": "100e44bf77834a1f",
        "type": "delay",
        "z": "389436610c6304c5",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 120,
        "y": 200,
        "wires": [
            [
                "dc8e2bd53450658d"
            ]
        ]
    },
    {
        "id": "cff4564a70b363a8",
        "type": "change",
        "z": "389436610c6304c5",
        "name": "Set global.mySystemtype & Andre preset...",
        "rules": [
            {
                "t": "set",
                "p": "mySystemStatusIndikator",
                "pt": "global",
                "to": "G",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "myPST2PWM",
                "pt": "global",
                "to": "[0,1,2,3,4,5,6,7,8,50,100,200,350,550,800,1100,1300,1900,2330,2557,2715,2871,3026,3178,3330,3479,3627,3773,3918,4061,4202,4342,4480,4616,4751,4884,5016,5145,5274,5400,5525,5648,5770,5890,6008,6125,6240,6353,6465,6575,6684,6790,6895,6999,7101,7201,7300,7397,7492,7586,7678,7768,7857,7944,8029,8113,8195,8276,8355,8432,8508,8582,8654,8725,8794,8861,8927,8991,9053,9114,9173,9231,9287,9341,9394,9445,9494,9542,9588,9632,9675,9716,9755,9793,9829,9864,9897,9928,9958,9986,10000]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 430,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "e8760c74b3cdf49e",
        "type": "change",
        "z": "389436610c6304c5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "HWaddr",
                "pt": "global",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "a5bc5fef41ba420a",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "Start Sample loop",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "2",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "[{\"lampe\":100,\"fc\":3,\"address\":1,\"quantity\":25},{\"lampe\":1,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":2,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":3,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":4,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":5,\"fc\":3,\"address\":1,\"quantity\":50},{\"lampe\":6,\"fc\":3,\"address\":1,\"quantity\":50}]",
        "payloadType": "json",
        "x": 230,
        "y": 800,
        "wires": [
            [
                "371fd01d510920bf",
                "1fa2165e5866d52c",
                "f8a85af9cc0e2c06"
            ]
        ]
    },
    {
        "id": "089c75d3c5d4b78d",
        "type": "comment",
        "z": "389436610c6304c5",
        "name": "Sample Lamper i sekvens",
        "info": "",
        "x": 210,
        "y": 740,
        "wires": []
    },
    {
        "id": "21ed62acb1b0da63",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Set Tower (9)",
        "func": "\nreturn {payload: { 'value': msg.payload, 'fc': 6, 'address': 9 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1750,
        "y": 380,
        "wires": [
            [
                "6293d6aeec21cbd9"
            ]
        ]
    },
    {
        "id": "88e76f057ffabec3",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "255",
        "payloadType": "num",
        "x": 1570,
        "y": 180,
        "wires": [
            [
                "21ed62acb1b0da63"
            ]
        ]
    },
    {
        "id": "36ae02db4df1e9e7",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "71",
        "payloadType": "num",
        "x": 1570,
        "y": 240,
        "wires": [
            [
                "21ed62acb1b0da63"
            ]
        ]
    },
    {
        "id": "b6b34432482985af",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Set Tower (9)",
        "func": "\nreturn {payload: { 'lampe': 100, 'value': msg.payload, 'fc': 6, 'address': 9 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1750,
        "y": 420,
        "wires": [
            [
                "6293d6aeec21cbd9"
            ]
        ]
    },
    {
        "id": "858796a689e1239c",
        "type": "inject",
        "z": "389436610c6304c5",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "0",
        "payloadType": "num",
        "x": 1570,
        "y": 420,
        "wires": [
            [
                "b6b34432482985af"
            ]
        ]
    },
    {
        "id": "371fd01d510920bf",
        "type": "trigger",
        "z": "389436610c6304c5",
        "name": "",
        "op1": "",
        "op2": "1",
        "op1type": "nul",
        "op2type": "num",
        "duration": "1100",
        "extend": true,
        "overrideDelay": false,
        "units": "ms",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 520,
        "y": 860,
        "wires": [
            [
                "f8a85af9cc0e2c06"
            ]
        ]
    },
    {
        "id": "c0f330a21ad8dfec",
        "type": "subflow:e7722a256c713090",
        "z": "389436610c6304c5",
        "name": "",
        "x": 430,
        "y": 1080,
        "wires": [
            [
                "6d8fb636dd849de6",
                "8cc38d51a0074bd4"
            ],
            [
                "e230e0e6382efeaa",
                "d99aa21634a5dd31"
            ]
        ]
    },
    {
        "id": "f8a85af9cc0e2c06",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "Dequeue 1",
        "func": "msg[\"dequeue\"] = 1;\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 1000,
        "wires": [
            [
                "1fa2165e5866d52c"
            ]
        ]
    },
    {
        "id": "d99aa21634a5dd31",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out MODBUS FC 6 ",
        "mode": "link",
        "links": [
            "6a3df59d9fc3e866",
            "739c60140fc57b11"
        ],
        "x": 625,
        "y": 1120,
        "wires": []
    },
    {
        "id": "8cc38d51a0074bd4",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out MODBUS FC 3",
        "mode": "link",
        "links": [
            "6a3df59d9fc3e866",
            "739c60140fc57b11",
            "20c18c2df895357f",
            "8845ca88ea6d4f1d"
        ],
        "x": 635,
        "y": 1020,
        "wires": []
    },
    {
        "id": "739c60140fc57b11",
        "type": "link in",
        "z": "389436610c6304c5",
        "name": "link in Trigger (Lantern rouge)",
        "links": [
            "8cc38d51a0074bd4",
            "d99aa21634a5dd31",
            "6293d6aeec21cbd9",
            "34744888e103c185"
        ],
        "x": 365,
        "y": 900,
        "wires": [
            [
                "371fd01d510920bf"
            ]
        ]
    },
    {
        "id": "6a3df59d9fc3e866",
        "type": "link in",
        "z": "389436610c6304c5",
        "name": "link in Dequeue",
        "links": [
            "8cc38d51a0074bd4",
            "d99aa21634a5dd31",
            "887252bdc7b4cdd0",
            "22f1dfc7bddd731f",
            "e348a25d9e2c445d",
            "443ac19b27ec0921",
            "e923ccbae21e2d1d",
            "dd8f8e91f0eb4279"
        ],
        "x": 195,
        "y": 1000,
        "wires": [
            [
                "f8a85af9cc0e2c06"
            ]
        ]
    },
    {
        "id": "642aa16378e0192c",
        "type": "link in",
        "z": "389436610c6304c5",
        "name": "link in MODBUS msg",
        "links": [
            "887252bdc7b4cdd0",
            "47239b4d7a5639fa",
            "22f1dfc7bddd731f",
            "3cdb683d3618528b",
            "e348a25d9e2c445d",
            "c1c4d0869af13f5a",
            "443ac19b27ec0921",
            "fd4ab9d7153eee6c",
            "e923ccbae21e2d1d",
            "7b2f1619dbccb7c6",
            "dd8f8e91f0eb4279",
            "18713591d9a58de0",
            "6293d6aeec21cbd9",
            "34744888e103c185"
        ],
        "x": 175,
        "y": 860,
        "wires": [
            [
                "1fa2165e5866d52c"
            ]
        ]
    },
    {
        "id": "6d8fb636dd849de6",
        "type": "modbus-response",
        "z": "389436610c6304c5",
        "name": "",
        "registerShowMax": 20,
        "x": 690,
        "y": 1060,
        "wires": []
    },
    {
        "id": "e230e0e6382efeaa",
        "type": "modbus-response",
        "z": "389436610c6304c5",
        "name": "",
        "registerShowMax": 20,
        "x": 690,
        "y": 1160,
        "wires": []
    },
    {
        "id": "1d5271f67b4adabf",
        "type": "get-shared-state",
        "z": "389436610c6304c5",
        "state": "984d640ef763cab4",
        "name": "myHWaddr",
        "triggerOnInit": true,
        "triggerOnChange": false,
        "x": 120,
        "y": 260,
        "wires": [
            [
                "e8760c74b3cdf49e"
            ]
        ]
    },
    {
        "id": "cdf23f9bebad3d09",
        "type": "rpi-gpio out",
        "z": "389436610c6304c5",
        "name": "Heartbeat",
        "pin": "7",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 600,
        "y": 460,
        "wires": []
    },
    {
        "id": "1fa2165e5866d52c",
        "type": "queue",
        "z": "389436610c6304c5",
        "name": "",
        "input": "payload",
        "inputType": "msg",
        "addFields": "",
        "addFieldsType": "str",
        "pourType": "none",
        "pourTypeType": "pourType",
        "pourTime": "",
        "pourTimeType": "num",
        "pourAmount": "",
        "pourAmountType": "num",
        "maxUseMemory": "",
        "x": 150,
        "y": 1080,
        "wires": [
            [
                "c0f330a21ad8dfec"
            ]
        ]
    },
    {
        "id": "6293d6aeec21cbd9",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "739c60140fc57b11"
        ],
        "x": 1935,
        "y": 400,
        "wires": []
    },
    {
        "id": "356e2dd01d9a2f2d",
        "type": "function",
        "z": "389436610c6304c5",
        "name": "System Feedback?",
        "func": "if ((Array.isArray(msg.payload)) && (msg.topic == '100')) {\n/*    \n    // Handle Lamp PWM set points\n    let PWM = msg.payload[10];\n    PWM += msg.payload[11];\n    PWM += msg.payload[12];\n    PWM += msg.payload[13];\n    PWM += msg.payload[14];\n    PWM += msg.payload[15];\n    PWM += msg.payload[16];\n    PWM += msg.payload[17];\n    PWM /= 8;\n    //PWM = Math.round(PWM) / 100;\n    let myPST2PWM = global.get(\"myPST2PWM\");\n    let lastIndex = flow.get(\"lastIndex\") || 0;\n    let setPoint = flow.get(\"setPoint\");\n    if (((PWM < myPST2PWM[lastIndex]) && ((setPoint==lastIndex) || (setPoint-1==lastIndex)))\n     || ((PWM > myPST2PWM[lastIndex]) && ((setPoint==lastIndex) || (setPoint+1==lastIndex))) ) {\n\n    } else if(PWM < myPST2PWM[lastIndex]) {\n        while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n            lastIndex--;\n        }\n        flow.set(\"lastIndex\", lastIndex);\n    } else if (PWM > myPST2PWM[lastIndex]) {\n        while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n            lastIndex++;\n        }\n        flow.set(\"lastIndex\", lastIndex);\n    }\n\n    // Update Lampe status\n    if (myPST2PWM[lastIndex] == PWM) {\n        global.set(\"Lampe1Status\", 'G');\n    } else {\n        global.set(\"Lampe1Status\", 'g');\n    }\n\n    return [\n        { payload: msg.payload[5] },\n        { payload: msg.payload[7] },\n        { payload: (msg.payload[9] / 1000).toFixed(1) },\n        { payload: lastIndex},\n        { payload: myPST2PWM[lastIndex] + \", \" + PWM +  \" D:\" + msg.payload }\n    ];\n*/    \n    let myTowerMode = msg.payload[8];\n    let Lampe1Status = global.get(\"Lampe1Status\") || \"R\";\n\n    if( myTowerMode != Lampe1Status.charCodeAt(0)) {\n        //return {payload: [{'value': Lampe1Status.charCodeAt(0), 'fc': 6, 'address': 9, 'quantity': 1 }] };\n        return {payload: { 'value': Lampe1Status.charCodeAt(0), 'fc': 6, 'address': 9 , 'quantity': 1 } };\n    }\n\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1280,
        "wires": [
            [
                "34744888e103c185"
            ]
        ]
    },
    {
        "id": "8845ca88ea6d4f1d",
        "type": "link in",
        "z": "389436610c6304c5",
        "name": "link in System Feedback",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 95,
        "y": 1280,
        "wires": [
            [
                "aab8eaa96f877de8"
            ]
        ]
    },
    {
        "id": "34744888e103c185",
        "type": "link out",
        "z": "389436610c6304c5",
        "name": "link out Update Tower",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "739c60140fc57b11"
        ],
        "x": 555,
        "y": 1280,
        "wires": []
    },
    {
        "id": "aab8eaa96f877de8",
        "type": "delay",
        "z": "389436610c6304c5",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 210,
        "y": 1280,
        "wires": [
            [
                "356e2dd01d9a2f2d"
            ]
        ]
    },
    {
        "id": "6bee3c2f96b2ac2c",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1530,
        "y": 200,
        "wires": [
            [
                "6bcd2081ba8f8bfa"
            ]
        ]
    },
    {
        "id": "4d14e2a1c9482b13",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 1530,
        "y": 240,
        "wires": [
            [
                "6bcd2081ba8f8bfa"
            ]
        ]
    },
    {
        "id": "c50fa81ec275b49c",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "true",
        "payloadType": "bool",
        "x": 1530,
        "y": 300,
        "wires": [
            [
                "dcc362ab608aa064"
            ]
        ]
    },
    {
        "id": "c4c6b9ca705a5f8c",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 1530,
        "y": 340,
        "wires": [
            [
                "dcc362ab608aa064"
            ]
        ]
    },
    {
        "id": "693f59fdf5a9d739",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"fc\":3,\"unitid\":1,\"address\":1,\"quantity\":10}",
        "payloadType": "json",
        "x": 1530,
        "y": 440,
        "wires": [
            [
                "47ec85ef70523c5d"
            ]
        ]
    },
    {
        "id": "bb267cba1477d453",
        "type": "ui_slider",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "TOWER RED",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "6000",
        "step": 1,
        "className": "",
        "x": 1540,
        "y": 620,
        "wires": [
            [
                "19c6ea23524b8d0f"
            ]
        ]
    },
    {
        "id": "19c6ea23524b8d0f",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set Tower Red (10)",
        "func": "\nreturn {payload: { 'value': msg.payload, 'fc': 6, 'unitid': 1, 'address': 10 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1750,
        "y": 620,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "77474d19854d9dc6",
        "type": "ui_slider",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "TOWER GREEN",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "6000",
        "step": 1,
        "className": "",
        "x": 1550,
        "y": 680,
        "wires": [
            [
                "6ca54d2663449687"
            ]
        ]
    },
    {
        "id": "6ca54d2663449687",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set Tower GREEN (11)",
        "func": "\nreturn {payload: { 'value': msg.payload, 'fc': 6, 'unitid': 1, 'address': 11 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1780,
        "y": 680,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "b5653946ed4bb475",
        "type": "ui_switch",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "BUZZ",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1510,
        "y": 780,
        "wires": [
            [
                "d71832359f6bc11b"
            ]
        ]
    },
    {
        "id": "d71832359f6bc11b",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set Buzzer (12)",
        "func": "\nreturn {payload: { 'value': msg.payload, 'fc': 6, 'unitid': 1, 'address': 12 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1720,
        "y": 780,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "6f43f30798d475bb",
        "type": "ui_slider",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "PWM (10) (0-100%)",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 6,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 1560,
        "y": 960,
        "wires": [
            [
                "9a3958a4083d0e74"
            ]
        ]
    },
    {
        "id": "e6c571bcaa9ff774",
        "type": "ui_slider",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "PWM (11) (0-100%)",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 1550,
        "y": 1000,
        "wires": [
            [
                "ca4a5c6ca168e77f"
            ]
        ]
    },
    {
        "id": "9a3958a4083d0e74",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set LAMP (30)",
        "func": "let myPST2PWM=[0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\n\nreturn {payload: { 'value': myPST2PWM[msg.payload], 'fc': 6, 'unitid': 10, 'address': 30 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1780,
        "y": 960,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "ca4a5c6ca168e77f",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set LAMP (30)",
        "func": "//let myPST2PWM=[0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn {payload: { 'value': myPST2PWM[msg.payload], 'fc': 6, 'unitid': 11, 'address': 30 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1780,
        "y": 1000,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "040870272b79c521",
        "type": "ui_switch",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "MUX 0",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1650,
        "y": 180,
        "wires": [
            [
                "6bcd2081ba8f8bfa"
            ]
        ]
    },
    {
        "id": "783a3fc14eed5140",
        "type": "ui_switch",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "MUX 1",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "1",
        "onvalueType": "num",
        "onicon": "",
        "oncolor": "",
        "offvalue": "0",
        "offvalueType": "num",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1650,
        "y": 280,
        "wires": [
            [
                "dcc362ab608aa064"
            ]
        ]
    },
    {
        "id": "cf08f5b4ab902714",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "10",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"fc\":3,\"unitid\":10,\"address\":50,\"quantity\":25}",
        "payloadType": "json",
        "x": 1530,
        "y": 480,
        "wires": [
            [
                "47ec85ef70523c5d"
            ]
        ]
    },
    {
        "id": "4414b95364bb89c5",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "11",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"fc\":3,\"unitid\":11,\"address\":50,\"quantity\":25}",
        "payloadType": "json",
        "x": 1530,
        "y": 520,
        "wires": [
            [
                "47ec85ef70523c5d"
            ]
        ]
    },
    {
        "id": "51057deb578e2f2c",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set On Timer (28)",
        "func": "return {payload: { 'value': msg.payload, 'fc': 6, 'unitid': 10, 'address': 28 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1790,
        "y": 820,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "260747960c7c428a",
        "type": "ui_slider",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "OnTimer (10) (0-650)",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "650",
        "step": 1,
        "className": "",
        "x": 1560,
        "y": 820,
        "wires": [
            [
                "51057deb578e2f2c"
            ]
        ]
    },
    {
        "id": "68a0dfdc57ae0afb",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set Off Timer (29)",
        "func": "return {payload: { 'value': msg.payload, 'fc': 6, 'unitid': 10, 'address': 29 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1790,
        "y": 880,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "d6ce68e20fa2ab9d",
        "type": "ui_slider",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "label": "OffTimer (10) (0-650)",
        "tooltip": "",
        "group": "8fb401a08da32934",
        "order": 9,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "650",
        "step": 1,
        "className": "",
        "x": 1560,
        "y": 880,
        "wires": [
            [
                "68a0dfdc57ae0afb"
            ]
        ]
    },
    {
        "id": "313fca7f645c6201",
        "type": "function",
        "z": "cedfdb6678b9e49e",
        "name": "Set Tower (9)",
        "func": "\nreturn {payload: { 'value': msg.payload, 'fc': 6, 'unitid': 1, 'address': 9 , 'quantity': 1 } };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1730,
        "y": 740,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "e43e49cc564a3ee8",
        "type": "inject",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "255",
        "payloadType": "num",
        "x": 1550,
        "y": 740,
        "wires": [
            [
                "313fca7f645c6201"
            ]
        ]
    },
    {
        "id": "ebdd25c05b72abf2",
        "type": "link in",
        "z": "cedfdb6678b9e49e",
        "name": "link in Lampe x",
        "links": [
            "59e734e6b8e39ccf",
            "1dea93a4a959d826",
            "ac389a1be9bd5b11",
            "6c08497d8b208fd8",
            "d04e035053f5ff8d",
            "3284ca3f0cafe1cc"
        ],
        "x": 1245,
        "y": 560,
        "wires": [
            [
                "b895b7ac12dcc111"
            ]
        ]
    },
    {
        "id": "ef55c162fe7f9780",
        "type": "catch",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "scope": null,
        "uncaught": false,
        "x": 1380,
        "y": 1060,
        "wires": [
            [
                "e39ed914a59a7669"
            ]
        ]
    },
    {
        "id": "e39ed914a59a7669",
        "type": "debug",
        "z": "cedfdb6678b9e49e",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1540,
        "y": 1060,
        "wires": []
    },
    {
        "id": "9e72bb27417b5d0a",
        "type": "modbus-response",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "registerShowMax": 20,
        "x": 1930,
        "y": 380,
        "wires": []
    },
    {
        "id": "18d5dc7a0ad0910f",
        "type": "modbus-response",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "registerShowMax": 20,
        "x": 2210,
        "y": 540,
        "wires": []
    },
    {
        "id": "47ec85ef70523c5d",
        "type": "modbus-flex-getter",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "showStatusActivities": false,
        "showErrors": false,
        "showWarnings": false,
        "logIOActivities": false,
        "server": "46c1561852cb3234",
        "useIOFile": false,
        "ioFile": "",
        "useIOForPayload": false,
        "emptyMsgOnFail": true,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1710,
        "y": 400,
        "wires": [
            [
                "9e72bb27417b5d0a"
            ],
            []
        ]
    },
    {
        "id": "b895b7ac12dcc111",
        "type": "modbus-flex-write",
        "z": "cedfdb6678b9e49e",
        "name": "",
        "showStatusActivities": true,
        "showErrors": false,
        "showWarnings": false,
        "server": "46c1561852cb3234",
        "emptyMsgOnFail": true,
        "keepMsgProperties": false,
        "delayOnStart": false,
        "startDelayTime": "",
        "x": 1990,
        "y": 560,
        "wires": [
            [
                "18d5dc7a0ad0910f"
            ],
            []
        ]
    },
    {
        "id": "6bcd2081ba8f8bfa",
        "type": "rpi-gpio out",
        "z": "cedfdb6678b9e49e",
        "name": "MUX0",
        "pin": "4",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 1810,
        "y": 260,
        "wires": []
    },
    {
        "id": "dcc362ab608aa064",
        "type": "rpi-gpio out",
        "z": "cedfdb6678b9e49e",
        "name": "MUX1",
        "pin": "5",
        "set": true,
        "level": "0",
        "freq": "",
        "out": "out",
        "bcm": true,
        "x": 1810,
        "y": 320,
        "wires": []
    },
    {
        "id": "9d2cd34151d9a265",
        "type": "mqtt out",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f2615cba8578655a",
        "x": 690,
        "y": 300,
        "wires": []
    },
    {
        "id": "bdf10b8e21cfdee3",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater posisjon",
        "func": "var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myGeometric = {};\nvar myLat = global.get(\"myLat\");\nvar myLon = global.get(\"myLon\");\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyGeometric[\"type\"] = \"Point\"; // myGeo.geometry.type;\nmyGeometric[\"coordinates\"] = [Number(myLon), Number(myLat)];  // myGeo.geometry.coordinate;\n\nmyPayload[\"geometry\"] = myGeometric;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 140,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "7852d349bce530f1",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send oppstartsmelding med tid og posisjon",
        "info": "",
        "x": 220,
        "y": 80,
        "wires": []
    },
    {
        "id": "3bcdd38ce2c510ef",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater posisjon",
        "links": [
            "66075e03ab09b9bf",
            "dc8e2bd53450658d",
            "f0da8ba54ddf95de"
        ],
        "x": 185,
        "y": 140,
        "wires": [
            [
                "bdf10b8e21cfdee3"
            ]
        ]
    },
    {
        "id": "096736127f61bc2e",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater konfigurasjon",
        "func": "var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myConfig = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyConfig[\"hostname\"] = global.get(\"hostname\");\n//myConfig[\"Systemtype\"] = global.get(\"mySystemtype\");  // \"Sortvann001\";\n//myConfig[\"Septikpumpetid\"] = global.get(\"mySeptikpumpetid\");\n//myConfig[\"Septikpumpepausetid\"] = global.get(\"mySeptikpumpepausetid\");\n//myConfig[\"BrukstankHNivaaIProsent\"] = global.get(\"myBrukstankHNivaaIProsent\");\n//myConfig[\"BrukstankLLNivaaIProsent\"] = global.get(\"myBrukstankLLNivaaIProsent\");\n//myConfig[\"O2Intervall\"] = global.get(\"myO2Intervall\");\n//myConfig[\"O2Runtime\"] = global.get(\"myO2Runtime\");\n//myConfig[\"O3Runtime\"] = global.get(\"myO3Runtime\");\n//myConfig[\"BuzzerDisabled\"] = global.get(\"BuzzerDisabled\");\n//myConfig[\"Forbrukspumpetid\"] = global.get(\"myForbrukspumpetid\");\n//myConfig[\"Forbrukspumpepausetid\"] = global.get(\"myForbrukspumpepausetid\");\n//myConfig[\"Nattkjoring\"] = global.get(\"myNattkjoring\");\n//myConfig[\"MaksverdiSeptikAN\"] = global.get(\"myMaksverdiSeptikAN\");\n//myConfig[\"MinverdiSeptikAN\"] = global.get(\"myMinverdiSeptikAN\");\n//myConfig[\"MinimumsnivaaSeptikProsent\"] = global.get(\"myMinimumsnivaaSeptikProsent\");\n//myConfig[\"MaksverdiBruksvannAN\"] = global.get(\"myMaksverdiBruksvannAN\");\n//myConfig[\"MinverdiBruksvannAN\"] = global.get(\"myMinverdiBruksvannAN\");\n//myConfig[\"MinimumsnivaaBruksvannProsent\"] = global.get(\"myMinimumsnivaaBruksvannProsent\");\n//myConfig[\"\"] = global.get(\"\");\n//myConfig[\"\"] = global.get(\"\");\n\nmyPayload[\"config\"] = myConfig;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 300,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "b370efcdefd7ecd6",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send konfigurasjonsendringer",
        "info": "",
        "x": 180,
        "y": 240,
        "wires": []
    },
    {
        "id": "19e1100a281a1a59",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater konfigurasjon",
        "links": [
            "1bb45da5f98ef2a2",
            "ec97a38cfde26961",
            "cd643db2d4e2dd54",
            "dc8e2bd53450658d",
            "142ac5ca21618d51",
            "ac692d21344025f2"
        ],
        "x": 185,
        "y": 300,
        "wires": [
            [
                "096736127f61bc2e"
            ]
        ]
    },
    {
        "id": "2ea22bfed3861ec2",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Send prosessdata",
        "info": "",
        "x": 150,
        "y": 400,
        "wires": []
    },
    {
        "id": "f4748bd882951979",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater prosessdata",
        "func": "var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myStatus = (global.get(\"myManuellKjoringState\")?\"M\":\"A\") + global.get(\"mySystemStatusIndikator\");  // Status[0] = <A,O,M> (Auto, Off, Manuell), Status[1] = <-,G,g,Y,y,R,r> (Off,Grønn,grønnblink,Gul,gulblink,Rød, rødblink)  \nvar myData = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\nmyPayload[\"status\"] = myStatus;\n\n//myData[\"P1Fuse\"] = global.get(\"fuseBlown1\");\n//myData[\"MB01P1Temp\"] = global.get(\"MB01P1Temp\");\n//myData[\"MB01P1ARaw\"] = global.get(\"MB01P1ARaw\");\n//myData[\"P2Fuse\"] = global.get(\"fuseBlown2\");\n//myData[\"MB01P2Temp\"] = global.get(\"MB01P2Temp\");\n//myData[\"MB01P2ARaw\"] = global.get(\"MB01P2ARaw\");\n//myData[\"P3Fuse\"] = global.get(\"fuseBlown3\");\n//myData[\"MB01P3Temp\"] = global.get(\"MB01P3Temp\");\n//myData[\"MB01P3ARaw\"] = global.get(\"MB01P3ARaw\");\n//myData[\"MB01DigitalIn\"] = global.get(\"MB01DigitalIn\");\n//myData[\"SeptikktanknivaaProsent\"] = global.get(\"mySeptiktanknivaaProsent\");\n//myData[\"BruksvanntanknivaaProsent\"] = global.get(\"myBruksvanntanknivaaProsent\");\n//myData[\"filter2HH\"] = global.get(\"filter2HH\");\n//myData[\"septikH\"] = global.get(\"septikH\");\n//myData[\"septikHH\"] = global.get(\"septikHH\");\n\nmyPayload[\"data\"] = myData;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 340,
        "y": 460,
        "wires": [
            [
                "9d2cd34151d9a265"
            ]
        ]
    },
    {
        "id": "bb177e98cd2da314",
        "type": "link in",
        "z": "ec96b8f08fb0c19e",
        "name": "Oppdater Prosessdata",
        "links": [
            "a6ae04c8e40eb804",
            "867f354c7f729c72",
            "dc8e2bd53450658d",
            "142ac5ca21618d51",
            "ac692d21344025f2"
        ],
        "x": 185,
        "y": 460,
        "wires": [
            [
                "f4748bd882951979"
            ]
        ]
    },
    {
        "id": "e7d5308ff8080842",
        "type": "comment",
        "z": "ec96b8f08fb0c19e",
        "name": "Prosess inndata",
        "info": "",
        "x": 140,
        "y": 560,
        "wires": []
    },
    {
        "id": "5ff552d33d303762",
        "type": "mqtt in",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "topic": "",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "f2615cba8578655a",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 1,
        "x": 350,
        "y": 680,
        "wires": [
            [
                "df70cc9af0041d36"
            ]
        ]
    },
    {
        "id": "746b0006df813a46",
        "type": "inject",
        "z": "ec96b8f08fb0c19e",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "2",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 130,
        "y": 620,
        "wires": [
            [
                "0f9268e9eb004f16"
            ]
        ]
    },
    {
        "id": "0f9268e9eb004f16",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Set topic med HWAddr",
        "func": "let myTopic = \"ktas_cmd/\" + global.get(\"HWaddr\");\n\nreturn {\"action\": \"subscribe\", \"topic\": myTopic};",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 680,
        "wires": [
            [
                "5ff552d33d303762"
            ]
        ]
    },
    {
        "id": "df70cc9af0041d36",
        "type": "function",
        "z": "ec96b8f08fb0c19e",
        "name": "Tolke innkommende data",
        "func": "let getStatus = null;\nlet getConfig = null;\nlet getPos = null;\nlet setManuellKjoringState = null; \nlet setLat = null;\nlet setLon = null;\nlet setSSID = null;\nlet setWifiPassword = null;\n\n\n// Command (cmd)\nif ((msg.payload.cmd === \"Status\") || (msg.payload.cmd === \"status\") || (msg.payload.cmd === \"STATUS\")) {\n    getStatus = true;\n} else if ((msg.payload.cmd === \"Konfig\") || (msg.payload.cmd === \"konfig\") || (msg.payload.cmd === \"KONFIG\")\n    || (msg.payload.cmd === \"Config\") || (msg.payload.cmd === \"config\") || (msg.payload.cmd === \"CONFIG\")) {\n    getConfig = true;\n} else if ((msg.payload.cmd === \"Pos\") || (msg.payload.cmd === \"pos\") || (msg.payload.cmd === \"POS\")\n    || (msg.payload.cmd === \"gps\") || (msg.payload.cmd === \"GPS\")) {\n    getPos = true;\n}\n\n// ManuellKjoringState\nif ((msg.payload.ManuellKjoringState === true) || (msg.payload.ManuellKjoringState === 1)) {\n    setManuellKjoringState = true;\n} else if ((msg.payload.ManuellKjoringState === false) || (msg.payload.ManuellKjoringState === 0)) {\n    setManuellKjoringState = false;\n}\n\n// Lat\nif (msg.payload.Lat !== undefined) {\n    setLat = msg.payload.Lat;\n}\n\n// Lon\nif (msg.payload.Lon !== undefined) {\n    setLon = msg.payload.Lon;\n}\n\n// SSID\nif (msg.payload.SSID !== undefined) {\n    setSSID = msg.payload.SSID;\n}\n\n// WifiPassword\nif (msg.payload.WifiPassword !== undefined) {\n    setWifiPassword = msg.payload.WifiPassword;\n}\n\n/*\n// P1\nif ((msg.payload.P1 === true) || (msg.payload.P1 === 1)) {\n    global.set(\"P1On\",1);\n} else if ((msg.payload.P1 === false) || (msg.payload.P1 === 0)) {\n    global.set(\"P1On\", 0);\n}\n\n// P2\nif ((msg.payload.P2 === true) || (msg.payload.P2 === 1)) {\n    global.set(\"P2On\", 1);\n} else if ((msg.payload.P2 === false) || (msg.payload.P2 === 0)) {\n    global.set(\"P2On\", 0);\n}\n\n// P3\nif ((msg.payload.P3 === true) || (msg.payload.P3 === 1)) {\n    global.set(\"P3On\", 1);\n} else if ((msg.payload.P3 === false) || (msg.payload.P3 === 0)) {\n    global.set(\"P3On\", 0);\n}\n\n// RL1\nif ((msg.payload.RL1 === true) || (msg.payload.RL1 === 1)) {\n    global.set(\"RL1On\", 1);\n} else if ((msg.payload.RL1 === false) || (msg.payload.RL1 === 0)) {\n    global.set(\"RL1On\", 0);\n}\n\n// RL2\nif ((msg.payload.RL2 === true) || (msg.payload.RL2 === 1)) {\n    global.set(\"RL2On\", 1);\n} else if ((msg.payload.RL2 === false) || (msg.payload.RL2 === 0)) {\n    global.set(\"RL2On\", 0);\n}\n\n// RL3\nif ((msg.payload.RL3 === true) || (msg.payload.RL3 === 1)) {\n    global.set(\"RL3On\", 1);\n} else if ((msg.payload.RL3 === false) || (msg.payload.RL3 === 0)) {\n    global.set(\"RL3On\", 0);\n}\n\n// RL4\nif ((msg.payload.RL4 === true) || (msg.payload.RL4 === 1)) {\n    global.set(\"RL4On\", 1);\n} else if ((msg.payload.RL4 === false) || (msg.payload.RL4 === 0)) {\n    global.set(\"RL4On\", 0);\n}\n\n// RL5\nif ((msg.payload.RL5 === true) || (msg.payload.RL4 === 1)) {\n    global.set(\"RL5On\", 1);\n} else if ((msg.payload.RL5 === false) || (msg.payload.RL5 === 0)) {\n    global.set(\"RL5On\", 0);\n}\n\n// myConfig[\"Septikpumpetid\"] = global.get(\"mySeptikpumpetid\");\nif (msg.payload.Septikpumpetid !== undefined) {\n    setSeptikpumpetid = msg.payload.Septikpumpetid;\n}\n\n// myConfig[\"Septikpumpepausetid\"] = global.get(\"mySeptikpumpepausetid\");\nif (msg.payload.Septikpumpepausetid !== undefined) {\n    setSeptikpumpepausetid = msg.payload.Septikpumpepausetid;\n}\n\n// myConfig[\"Forbrukspumpetid\"] = global.get(\"myForbrukspumpetid\");\nif (msg.payload.Forbrukspumpetid !== undefined) {\n    setForbrukspumpetid = msg.payload.Forbrukspumpetid;\n}\n\n// myConfig[\"Forbrukspumpepausetid\"] = global.get(\"myForbrukspumpepausetid\");\nif (msg.payload.Forbrukspumpepausetid !== undefined) {\n    setForbrukspumpetid = msg.payload.Forbrukspumpepausetid;\n}\n*/\n\nreturn [\n    { payload: getStatus },\n    { payload: getConfig },\n    { payload: getPos },\n    { payload: setManuellKjoringState },\n    { payload: setLat },\n    { payload: setLon },\n    { payload: setSSID },\n    { payload: setWifiPassword }\n];",
        "outputs": 8,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 190,
        "y": 1020,
        "wires": [
            [
                "759cd29b3e825093"
            ],
            [
                "dec5ae09f4f715be"
            ],
            [
                "2054e2989f4561d8"
            ],
            [
                "517fe687ab2af65d"
            ],
            [
                "28c0d9274d4fbd18"
            ],
            [
                "130354b9a59ee94e"
            ],
            [
                "76251ae28fcb562e"
            ],
            [
                "bdf4358a52864a4e"
            ]
        ]
    },
    {
        "id": "759cd29b3e825093",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner prosessdata",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 740,
        "y": 740,
        "wires": [
            [
                "867f354c7f729c72"
            ]
        ]
    },
    {
        "id": "dec5ae09f4f715be",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner konfigurasjonsdata",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 760,
        "y": 780,
        "wires": [
            [
                "ec97a38cfde26961"
            ]
        ]
    },
    {
        "id": "867f354c7f729c72",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "bb177e98cd2da314"
        ],
        "x": 935,
        "y": 740,
        "wires": []
    },
    {
        "id": "ec97a38cfde26961",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "19e1100a281a1a59"
        ],
        "x": 935,
        "y": 780,
        "wires": []
    },
    {
        "id": "2054e2989f4561d8",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Returner posisjon",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 820,
        "wires": [
            [
                "f0da8ba54ddf95de"
            ]
        ]
    },
    {
        "id": "f0da8ba54ddf95de",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "3bcdd38ce2c510ef"
        ],
        "x": 935,
        "y": 820,
        "wires": []
    },
    {
        "id": "517fe687ab2af65d",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set ManuellKjoringState",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 750,
        "y": 900,
        "wires": [
            [
                "831d01bfc3dde3a0"
            ]
        ]
    },
    {
        "id": "28c0d9274d4fbd18",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lat",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 980,
        "wires": [
            [
                "7ec59ce7537fe97d"
            ]
        ]
    },
    {
        "id": "130354b9a59ee94e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set Lon",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1040,
        "wires": [
            [
                "407d6e7c6cdf834a"
            ]
        ]
    },
    {
        "id": "76251ae28fcb562e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set SSID",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 700,
        "y": 1120,
        "wires": [
            [
                "bd09041f1951af61"
            ]
        ]
    },
    {
        "id": "bdf4358a52864a4e",
        "type": "switch",
        "z": "ec96b8f08fb0c19e",
        "name": "Set WifiPassword",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1160,
        "wires": [
            [
                "0fa5e2f74c05ad92"
            ]
        ]
    },
    {
        "id": "bd09041f1951af61",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out SSID",
        "mode": "link",
        "links": [
            "43a334e28706087c"
        ],
        "x": 995,
        "y": 1120,
        "wires": []
    },
    {
        "id": "0fa5e2f74c05ad92",
        "type": "link out",
        "z": "ec96b8f08fb0c19e",
        "name": "link out WifiPassword",
        "mode": "link",
        "links": [
            "13a7ca5bd49cdb11"
        ],
        "x": 995,
        "y": 1160,
        "wires": []
    },
    {
        "id": "831d01bfc3dde3a0",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "7f2169e2cb92802f",
        "name": "myManuellKjoringState",
        "triggerOnInit": false,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 1090,
        "y": 900,
        "wires": []
    },
    {
        "id": "7ec59ce7537fe97d",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "884e0b0f934ba909",
        "name": "myLat",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 1030,
        "y": 980,
        "wires": []
    },
    {
        "id": "407d6e7c6cdf834a",
        "type": "set-shared-state",
        "z": "ec96b8f08fb0c19e",
        "state": "407e7742e8b9f1bc",
        "name": "myLon",
        "triggerOnInit": true,
        "triggerOnChange": true,
        "provideOutput": false,
        "outputs": 0,
        "x": 1030,
        "y": 1040,
        "wires": []
    },
    {
        "id": "6a63b433.e2a73c",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "cat /etc/dhcpcd.conf",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "name": "",
        "x": 476,
        "y": 179,
        "wires": [
            [
                "3239ea8.73a1016"
            ],
            [],
            []
        ]
    },
    {
        "id": "3239ea8.73a1016",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "parse response",
        "func": "var lines = msg.payload.split(\"\\n\");\nvar data = [];\n\nfor(var i=0; i< lines.length; i++){\n    if(lines[i].indexOf(\"interface eth0\") != -1)\n        break;\n}\n\n//check if interface eth0 is disabled\nif(i < lines.length && lines[i].indexOf(\"#\") >= 0) flow.set('disabled', true);\nelse flow.set('disabled', false);\n\nnode.send({topic:'interface eth0', payload:flow.get('disabled')})\n\ni++;\n\nfor(i; i< lines.length; i++){\n   \n   //new interface, not eth0\n   if(lines[i].indexOf(\"static\") == -1)\n    break;\n    \n    var tmp = lines[i].split(\"=\");\n    if(tmp.length==2){\n        var prop = tmp[0].split(' ')[1].trim();\n        var value = tmp[1].trim();\n        \n        flow.set(prop, value);\n        node.send({topic:prop, payload:value})\n    }\n} ",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 716,
        "y": 166,
        "wires": [
            [
                "3e969ca3.142384"
            ]
        ]
    },
    {
        "id": "3e969ca3.142384",
        "type": "switch",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ip_address",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "routers",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "domain_name_servers",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "interface eth0",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 888,
        "y": 166,
        "wires": [
            [
                "2d434d1f.145822"
            ],
            [
                "502308c7.25bef8"
            ],
            [
                "6a605c6d.329194",
                "140df8ca.dea297"
            ],
            [
                "ba4f96ca.0f28b8"
            ]
        ]
    },
    {
        "id": "2d434d1f.145822",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "ip_address",
        "label": "Indirizzo IP",
        "group": "1cf52e38.3cfee2",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "ip_address",
        "x": 1130,
        "y": 120,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "502308c7.25bef8",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "router",
        "label": "Router",
        "group": "1cf52e38.3cfee2",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "routers",
        "x": 1109,
        "y": 163,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "6a605c6d.329194",
        "type": "ui_text_input",
        "z": "2d2bd18e.3e4abe",
        "name": "dns",
        "label": "DNS",
        "group": "1cf52e38.3cfee2",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "domain_name_servers",
        "x": 1109,
        "y": 206,
        "wires": [
            [
                "a825b0e4.2a051"
            ]
        ]
    },
    {
        "id": "9ae462fb.d924d",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "sudo sed -i ",
        "addpay": "payload",
        "append": "",
        "useSpawn": "",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 510,
        "y": 320,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "1b55bbd2.2f6a74",
        "type": "ui_button",
        "z": "2d2bd18e.3e4abe",
        "name": "reboot",
        "group": "1cf52e38.3cfee2",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Reboot",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "By pressing OK the device will be rebooted. If settings are wrong this may cause the device to be unreachable",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 170,
        "y": 480,
        "wires": [
            [
                "846fb983.93f448"
            ]
        ]
    },
    {
        "id": "6da389d0.e8d598",
        "type": "exec",
        "z": "2d2bd18e.3e4abe",
        "command": "sudo reboot",
        "addpay": false,
        "append": "",
        "useSpawn": "",
        "timer": "",
        "name": "",
        "x": 650,
        "y": 480,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d0341b01.217ee8",
        "type": "ui_button",
        "z": "2d2bd18e.3e4abe",
        "name": "refresh",
        "group": "1cf52e38.3cfee2",
        "order": 7,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "Update",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "",
        "topicType": "str",
        "x": 111.44442749023438,
        "y": 247.33291149139404,
        "wires": [
            [
                "fb34e190.3926a",
                "c2728ad2.71ac48"
            ]
        ]
    },
    {
        "id": "fb34e190.3926a",
        "type": "delay",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "pauseType": "delay",
        "timeout": "300",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "outputs": 1,
        "x": 278.8888740539551,
        "y": 247.44451141357422,
        "wires": [
            [
                "6a63b433.e2a73c"
            ]
        ]
    },
    {
        "id": "c2728ad2.71ac48",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "send commands",
        "func": "var properties = flow.get(\"properties\");\n\nvar disabled = flow.get(\"disabled\") ? '#' : '';\n\nif(disabled == '#'){\n    //enable interface (replace only first occurance)\n    var command = `'0,/#interface eth0/s//interface eth0/g;' /etc/dhcpcd.conf`;\n    node.send({payload: command})\n}\n\nfor(var i=0;i<properties.length;i++){\n    var p = properties[i];\n    \n    var old_value = flow.get(p);\n    var new_value = flow.get(p+\"_new\") || old_value;\n    \n    if(old_value && ((old_value != new_value) || disabled == '#'))\n    {\n        //enable interface (replace only first occurance)\n        var command = `'0,\\\\?${disabled}static ${p}=${old_value}?s??static ${p}=${new_value}?g;' /etc/dhcpcd.conf`;\n        node.send({payload: command})\n    }\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 320,
        "wires": [
            [
                "8d2915b0.eb5188",
                "9ae462fb.d924d"
            ]
        ]
    },
    {
        "id": "846fb983.93f448",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": false,
        "className": "",
        "topic": "ATTENTION",
        "name": "",
        "x": 330,
        "y": 480,
        "wires": [
            [
                "9f141047.ed494"
            ]
        ]
    },
    {
        "id": "9f141047.ed494",
        "type": "switch",
        "z": "2d2bd18e.3e4abe",
        "name": "OK ?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OK",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 480,
        "wires": [
            [
                "6da389d0.e8d598"
            ]
        ]
    },
    {
        "id": "a825b0e4.2a051",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "store new",
        "func": "flow.set(msg.topic+\"_new\", msg.payload);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1419,
        "y": 161,
        "wires": [
            [
                "aef2e472.475238"
            ]
        ]
    },
    {
        "id": "b585fb60.e936a8",
        "type": "inject",
        "z": "2d2bd18e.3e4abe",
        "name": "init",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 122,
        "y": 91,
        "wires": [
            [
                "a6810bb0.a3e788"
            ]
        ]
    },
    {
        "id": "a6810bb0.a3e788",
        "type": "function",
        "z": "2d2bd18e.3e4abe",
        "name": "set properties",
        "func": "var properties = ['routers', 'ip_address', 'domain_name_servers'];\n\nflow.set(\"properties\", properties);\n\n//init properties\nfor(var i=0;i<properties.length;i++){\n    var p = properties[i];\n    flow.set(p, null);\n    flow.set(p+\"_new\", null);\n}\n\nnode.send({payload: true});\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 326,
        "y": 91,
        "wires": [
            [
                "6a63b433.e2a73c"
            ]
        ]
    },
    {
        "id": "8d2915b0.eb5188",
        "type": "debug",
        "z": "2d2bd18e.3e4abe",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 514,
        "y": 385,
        "wires": []
    },
    {
        "id": "fd5e6a37.bc5d38",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "topic": "",
        "name": "",
        "x": 1310,
        "y": 340,
        "wires": []
    },
    {
        "id": "140df8ca.dea297",
        "type": "change",
        "z": "2d2bd18e.3e4abe",
        "name": "set",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Settings updated. Reboot device to enable new ip",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1097,
        "y": 310,
        "wires": [
            [
                "fd5e6a37.bc5d38"
            ]
        ]
    },
    {
        "id": "ba4f96ca.0f28b8",
        "type": "ui_text",
        "z": "2d2bd18e.3e4abe",
        "group": "1cf52e38.3cfee2",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Static ip",
        "format": "{{!msg.payload}}",
        "layout": "row-spread",
        "x": 1120,
        "y": 248,
        "wires": []
    },
    {
        "id": "fea93690.140ec8",
        "type": "ui_toast",
        "z": "2d2bd18e.3e4abe",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 1758,
        "y": 161,
        "wires": []
    },
    {
        "id": "aef2e472.475238",
        "type": "change",
        "z": "2d2bd18e.3e4abe",
        "name": "set",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "New setting stored ",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1566,
        "y": 161,
        "wires": [
            [
                "fea93690.140ec8"
            ]
        ]
    },
    {
        "id": "4b72781d.d0e178",
        "type": "ui_text",
        "z": "2d2bd18e.3e4abe",
        "group": "1cf52e38.3cfee2",
        "order": 2,
        "width": 0,
        "height": 0,
        "name": "help",
        "label": "",
        "format": "To store the new value, once edited, press ENTER or TAB",
        "layout": "col-center",
        "x": 711,
        "y": 91,
        "wires": []
    },
    {
        "id": "f34a641beb964996",
        "type": "ui_slider",
        "z": "bf782cbf60794af0",
        "name": "Lampe1PWM",
        "label": "Setpunkt lysnivå",
        "tooltip": "",
        "group": "6419184378ff1692",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "63de8939063e8d06"
            ]
        ]
    },
    {
        "id": "3c0b1e105f7caac4",
        "type": "ui_chart",
        "z": "bf782cbf60794af0",
        "name": "Lampe1mA",
        "group": "6419184378ff1692",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [A]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "11",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 530,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "89de17185eab7328",
        "type": "ui_chart",
        "z": "bf782cbf60794af0",
        "name": "Lampe1Temp",
        "group": "6419184378ff1692",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-20",
        "ymax": "120",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 520,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "20893d7657a88114",
        "type": "ui_chart",
        "z": "bf782cbf60794af0",
        "name": "Lampe1RH",
        "group": "6419184378ff1692",
        "order": 5,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "3",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 530,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "7b055b76f5fa3870",
        "type": "function",
        "z": "bf782cbf60794af0",
        "name": "Set Lampe 1",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\nflow.set(\"setPoint\",msg.payload);\nreturn { payload: { 'lampe': 1, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 80,
        "wires": [
            [
                "0453284267e57b69",
                "3cdb683d3618528b"
            ]
        ]
    },
    {
        "id": "22f1dfc7bddd731f",
        "type": "link out",
        "z": "bf782cbf60794af0",
        "name": "link out Send Set Lampe 1",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 795,
        "y": 160,
        "wires": []
    },
    {
        "id": "0453284267e57b69",
        "type": "delay",
        "z": "bf782cbf60794af0",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 670,
        "y": 160,
        "wires": [
            [
                "22f1dfc7bddd731f"
            ]
        ]
    },
    {
        "id": "3cdb683d3618528b",
        "type": "link out",
        "z": "bf782cbf60794af0",
        "name": "link out Set Lampe 1",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 615,
        "y": 80,
        "wires": []
    },
    {
        "id": "20c18c2df895357f",
        "type": "link in",
        "z": "bf782cbf60794af0",
        "name": "link in Modbus Reponse",
        "links": [
            "8cc38d51a0074bd4"
        ],
        "x": 75,
        "y": 240,
        "wires": [
            [
                "773657e7bed57045"
            ]
        ]
    },
    {
        "id": "773657e7bed57045",
        "type": "function",
        "z": "bf782cbf60794af0",
        "name": "Branch out message",
        "func": "if ((Array.isArray(msg.payload)) && (msg.topic == '1')) {\n    \n    // Handle Lamp PWM set points\n    let PWM = msg.payload[10];\n    PWM += msg.payload[11];\n    PWM += msg.payload[12];\n    PWM += msg.payload[13];\n    PWM += msg.payload[14];\n    PWM += msg.payload[15];\n    PWM += msg.payload[16];\n    PWM += msg.payload[17];\n    PWM /= 8;\n    //PWM = Math.round(PWM) / 100;\n    let myPST2PWM = global.get(\"myPST2PWM\");\n    let lastIndex = flow.get(\"lastIndex\") || 0;\n    let setPoint = flow.get(\"setPoint\");\n    if(PWM < myPST2PWM[lastIndex]) {\n        while((PWM < myPST2PWM[lastIndex]) && (lastIndex>0)) {\n            lastIndex--;\n        }\n        flow.set(\"lastIndex\", lastIndex);\n    } else if (PWM > myPST2PWM[lastIndex]) {\n        while((PWM > myPST2PWM[lastIndex]) && (lastIndex<100)) {\n            lastIndex++;\n        }\n        flow.set(\"lastIndex\", lastIndex);\n    }\n\n    // LEDs temp.\n    let ledsTemp = (msg.payload[30]+msg.payload[32]+msg.payload[34]+msg.payload[36]+msg.payload[38]+msg.payload[40]+msg.payload[42]+msg.payload[44])/8;\n\n    // Update Lampe status\n    if (myPST2PWM[lastIndex] == PWM) {\n        global.set(\"Lampe1Status\", \"G\");\n    } else {\n        global.set(\"Lampe1Status\", \"g\");\n    }\n\n    return [\n        { topic: \"ambient\", payload: msg.payload[5] },\n        { topic: \"LEDs avg.\", payload: ledsTemp },\n        { payload: msg.payload[7] },\n        { payload: (msg.payload[9] / 1000).toFixed(1) },\n        { payload: lastIndex},\n        { payload: myPST2PWM[lastIndex] + \", \" + PWM +  \" D:\" + msg.payload }\n    ];\n}",
        "outputs": 6,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 240,
        "y": 240,
        "wires": [
            [
                "89de17185eab7328"
            ],
            [
                "89de17185eab7328"
            ],
            [
                "20893d7657a88114"
            ],
            [
                "3c0b1e105f7caac4"
            ],
            [
                "3c89a7e4c752377a"
            ],
            [
                "e281ab99ce88758d"
            ]
        ]
    },
    {
        "id": "3c89a7e4c752377a",
        "type": "ui_gauge",
        "z": "bf782cbf60794af0",
        "name": "Lys1",
        "group": "6419184378ff1692",
        "order": 1,
        "width": 0,
        "height": 0,
        "gtype": "donut",
        "title": "",
        "label": "Lys",
        "format": "{{value}}",
        "min": 0,
        "max": "100",
        "colors": [
            "#505000",
            "#e6e600",
            "#ffff00"
        ],
        "seg1": "10",
        "seg2": "90",
        "diff": false,
        "className": "",
        "x": 510,
        "y": 360,
        "wires": []
    },
    {
        "id": "e281ab99ce88758d",
        "type": "ui_text",
        "z": "bf782cbf60794af0",
        "group": "bd428c2239aecda6",
        "order": 0,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "text",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 470,
        "y": 440,
        "wires": []
    },
    {
        "id": "63de8939063e8d06",
        "type": "trigger",
        "z": "bf782cbf60794af0",
        "name": "",
        "op1": "",
        "op2": "",
        "op1type": "nul",
        "op2type": "payl",
        "duration": "1",
        "extend": true,
        "overrideDelay": false,
        "units": "s",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 320,
        "y": 80,
        "wires": [
            [
                "7b055b76f5fa3870"
            ]
        ]
    },
    {
        "id": "864bcf9308dbf46e",
        "type": "ui_slider",
        "z": "88be0e5091306a90",
        "name": "Lampe2PWM",
        "label": "Setpunkt lysnivå",
        "tooltip": "",
        "group": "8bb3fa33612b5685",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 180,
        "y": 80,
        "wires": [
            [
                "9673a55f74ab0713"
            ]
        ]
    },
    {
        "id": "fbcb339243534caf",
        "type": "ui_chart",
        "z": "88be0e5091306a90",
        "name": "Lampe2mA",
        "group": "8bb3fa33612b5685",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [mA]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "10000",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 190,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "7509a9c199fd4a62",
        "type": "ui_chart",
        "z": "88be0e5091306a90",
        "name": "Lampe2Temp",
        "group": "8bb3fa33612b5685",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-20",
        "ymax": "120",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 200,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "c4327ce3a8c69404",
        "type": "ui_chart",
        "z": "88be0e5091306a90",
        "name": "Lampe2RH",
        "group": "8bb3fa33612b5685",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 190,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "9673a55f74ab0713",
        "type": "function",
        "z": "88be0e5091306a90",
        "name": "Set Lampe 2",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 2, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 80,
        "wires": [
            [
                "7330e06691b02a75",
                "47239b4d7a5639fa"
            ]
        ]
    },
    {
        "id": "887252bdc7b4cdd0",
        "type": "link out",
        "z": "88be0e5091306a90",
        "name": "link out Send Set Lampe 2",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 735,
        "y": 120,
        "wires": []
    },
    {
        "id": "7330e06691b02a75",
        "type": "delay",
        "z": "88be0e5091306a90",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 610,
        "y": 120,
        "wires": [
            [
                "887252bdc7b4cdd0"
            ]
        ]
    },
    {
        "id": "47239b4d7a5639fa",
        "type": "link out",
        "z": "88be0e5091306a90",
        "name": "link out Set Lampe 2 ",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 555,
        "y": 80,
        "wires": []
    },
    {
        "id": "c84e2b58d4246944",
        "type": "ui_slider",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3PWM",
        "label": "Setpunkt lysnivå",
        "tooltip": "",
        "group": "f735df78474bdbad",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "e7d25d2193087cd6"
            ]
        ]
    },
    {
        "id": "2f0b585e0356583e",
        "type": "ui_chart",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3mA",
        "group": "f735df78474bdbad",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [mA]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "10000",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 150,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "f989646a723bd6d3",
        "type": "ui_chart",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3Temp",
        "group": "f735df78474bdbad",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-20",
        "ymax": "120",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 160,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "6a53cd527dad21f2",
        "type": "ui_chart",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Lampe3RH",
        "group": "f735df78474bdbad",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 150,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "e7d25d2193087cd6",
        "type": "function",
        "z": "ca1e3fc7ee28f5a2",
        "name": "Set Lampe 3",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 3, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 80,
        "wires": [
            [
                "2791aed6484e56ea",
                "c1c4d0869af13f5a"
            ]
        ]
    },
    {
        "id": "e348a25d9e2c445d",
        "type": "link out",
        "z": "ca1e3fc7ee28f5a2",
        "name": "link out Send Set Lampe 3",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 695,
        "y": 120,
        "wires": []
    },
    {
        "id": "2791aed6484e56ea",
        "type": "delay",
        "z": "ca1e3fc7ee28f5a2",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 570,
        "y": 120,
        "wires": [
            [
                "e348a25d9e2c445d"
            ]
        ]
    },
    {
        "id": "c1c4d0869af13f5a",
        "type": "link out",
        "z": "ca1e3fc7ee28f5a2",
        "name": "link out Set Lampe 3",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 515,
        "y": 80,
        "wires": []
    },
    {
        "id": "a633e672441c9a50",
        "type": "ui_slider",
        "z": "02e68394143357bb",
        "name": "Lampe4PWM",
        "label": "Setpunkt lysnivå",
        "tooltip": "",
        "group": "d96855d5801a8206",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "5d7b607d5b532a46"
            ]
        ]
    },
    {
        "id": "5b99f78adc69554c",
        "type": "ui_chart",
        "z": "02e68394143357bb",
        "name": "Lampe4mA",
        "group": "d96855d5801a8206",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [mA]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "10000",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 130,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "3bbadf084f4f1f04",
        "type": "ui_chart",
        "z": "02e68394143357bb",
        "name": "Lampe4Temp",
        "group": "d96855d5801a8206",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-20",
        "ymax": "120",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 140,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "d51832d8ebdb30d5",
        "type": "ui_chart",
        "z": "02e68394143357bb",
        "name": "Lampe4RH",
        "group": "d96855d5801a8206",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 130,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "5d7b607d5b532a46",
        "type": "function",
        "z": "02e68394143357bb",
        "name": "Set Lampe 4",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 4, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 80,
        "wires": [
            [
                "51ba776a7452b040",
                "fd4ab9d7153eee6c"
            ]
        ]
    },
    {
        "id": "443ac19b27ec0921",
        "type": "link out",
        "z": "02e68394143357bb",
        "name": "link out Send Set Lampe 4",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 695,
        "y": 120,
        "wires": []
    },
    {
        "id": "51ba776a7452b040",
        "type": "delay",
        "z": "02e68394143357bb",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 570,
        "y": 120,
        "wires": [
            [
                "443ac19b27ec0921"
            ]
        ]
    },
    {
        "id": "fd4ab9d7153eee6c",
        "type": "link out",
        "z": "02e68394143357bb",
        "name": "link out Set Lampe 4",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 515,
        "y": 80,
        "wires": []
    },
    {
        "id": "f4d98d0ccb1e01ab",
        "type": "ui_slider",
        "z": "82a9216af09bde7a",
        "name": "Lampe5PWM",
        "label": "Setpunkt lysnivå",
        "tooltip": "",
        "group": "051ab72180dfa122",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "be53b964083423f4"
            ]
        ]
    },
    {
        "id": "818168924ebf9595",
        "type": "ui_chart",
        "z": "82a9216af09bde7a",
        "name": "Lampe5mA",
        "group": "051ab72180dfa122",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [mA]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "10000",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 150,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "9c844749c56b2110",
        "type": "ui_chart",
        "z": "82a9216af09bde7a",
        "name": "Lampe5Temp",
        "group": "051ab72180dfa122",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-20",
        "ymax": "120",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 160,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "ff81c541c9d3941f",
        "type": "ui_chart",
        "z": "82a9216af09bde7a",
        "name": "Lampe5RH",
        "group": "051ab72180dfa122",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 150,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "be53b964083423f4",
        "type": "function",
        "z": "82a9216af09bde7a",
        "name": "Set Lampe 5",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 5, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 80,
        "wires": [
            [
                "96006ca274391304",
                "7b2f1619dbccb7c6"
            ]
        ]
    },
    {
        "id": "e923ccbae21e2d1d",
        "type": "link out",
        "z": "82a9216af09bde7a",
        "name": "link out Send Set Lampe 5",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 695,
        "y": 120,
        "wires": []
    },
    {
        "id": "96006ca274391304",
        "type": "delay",
        "z": "82a9216af09bde7a",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 570,
        "y": 120,
        "wires": [
            [
                "e923ccbae21e2d1d"
            ]
        ]
    },
    {
        "id": "7b2f1619dbccb7c6",
        "type": "link out",
        "z": "82a9216af09bde7a",
        "name": "link out Set Lampe 5",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 515,
        "y": 80,
        "wires": []
    },
    {
        "id": "f892e5ae6ffda8f7",
        "type": "ui_slider",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6PWM",
        "label": "Setpunkt lysnivå",
        "tooltip": "",
        "group": "977d9c659b3c9fb3",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "100",
        "step": 1,
        "className": "",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "d92441b9fd9f80fe"
            ]
        ]
    },
    {
        "id": "c65be420587e12de",
        "type": "ui_chart",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6mA",
        "group": "977d9c659b3c9fb3",
        "order": 2,
        "width": 0,
        "height": 0,
        "label": "Strømtrekk [mA]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "10000",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 150,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "3bc46aad2f888a98",
        "type": "ui_chart",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6Temp",
        "group": "977d9c659b3c9fb3",
        "order": 3,
        "width": 0,
        "height": 0,
        "label": "Temperatur [°C]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "-20",
        "ymax": "120",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 160,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "c470f7c75f48d396",
        "type": "ui_chart",
        "z": "937e7cf0ac72c745",
        "name": "Lampe6RH",
        "group": "977d9c659b3c9fb3",
        "order": 4,
        "width": 0,
        "height": 0,
        "label": "RH [%]",
        "chartType": "line",
        "legend": "false",
        "xformat": "dd HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "100",
        "removeOlder": "7",
        "removeOlderPoints": "10000",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 150,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "d92441b9fd9f80fe",
        "type": "function",
        "z": "937e7cf0ac72c745",
        "name": "Set Lampe 6",
        "func": "//let myPST2PWM = [0, 1, 2, 3, 4, 5, 6, 7, 8, 50, 100, 200, 350, 550, 800, 1100, 1300, 1900, 2330, 2557, 2715, 2871, 3026, 3178, 3330, 3479, 3627, 3773, 3918, 4061, 4202, 4342, 4480, 4616, 4751, 4884, 5016, 5145, 5274, 5400, 5525, 5648, 5770, 5890, 6008, 6125, 6240, 6353, 6465, 6575, 6684, 6790, 6895, 6999, 7101, 7201, 7300, 7397, 7492, 7586, 7678, 7768, 7857, 7944, 8029, 8113, 8195, 8276, 8355, 8432, 8508, 8582, 8654, 8725, 8794, 8861, 8927, 8991, 9053, 9114, 9173, 9231, 9287, 9341, 9394, 9445, 9494, 9542, 9588, 9632, 9675, 9716, 9755, 9793, 9829, 9864, 9897, 9928, 9958, 9986, 10000];\nlet myPST2PWM = global.get(\"myPST2PWM\");\n\nreturn { payload: { 'lampe': 6, 'value': myPST2PWM[msg.payload], 'fc': 6, 'address': 30, 'quantity': 1 }};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 80,
        "wires": [
            [
                "c2c603f76e787926",
                "18713591d9a58de0"
            ]
        ]
    },
    {
        "id": "dd8f8e91f0eb4279",
        "type": "link out",
        "z": "937e7cf0ac72c745",
        "name": "link out Send Set Lampe 6",
        "mode": "link",
        "links": [
            "642aa16378e0192c",
            "6a3df59d9fc3e866"
        ],
        "x": 695,
        "y": 120,
        "wires": []
    },
    {
        "id": "c2c603f76e787926",
        "type": "delay",
        "z": "937e7cf0ac72c745",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 570,
        "y": 120,
        "wires": [
            [
                "dd8f8e91f0eb4279"
            ]
        ]
    },
    {
        "id": "18713591d9a58de0",
        "type": "link out",
        "z": "937e7cf0ac72c745",
        "name": "link out Set Lampe 6",
        "mode": "link",
        "links": [
            "642aa16378e0192c"
        ],
        "x": 515,
        "y": 80,
        "wires": []
    }
]