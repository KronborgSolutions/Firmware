[{"id":"483a6f631e7f69a7","type":"tab","label":"Oppsett","disabled":false,"info":"","env":[]},{"id":"38519fcf62fceae2","type":"tab","label":"MQTT","disabled":false,"info":"","env":[]},{"id":"abfb29b7fe98de5f","type":"tab","label":"Main","disabled":false,"info":"","env":[]},{"id":"56a22929a6befff3","type":"tab","label":"Panel","disabled":false,"info":"","env":[]},{"id":"ec28d8db3689b1f5","type":"tab","label":"MODBUS","disabled":false,"info":"","env":[]},{"id":"b2590d1d879b30f0","type":"group","z":"abfb29b7fe98de5f","name":"System","style":{"stroke":"#92d04f","label":true,"color":"#000000"},"nodes":["18676fc92dec75b3","778b6afb06e3d8b8","fa1460efeca4a892","4730bde001160d21","7c800b43bcc1367d","ef57d13459406072","318a9b3cb2760c34","1f38fb7ad94d5774","438e47f2cab73553","782e1f60e60d73e6","40970db1d04002d7","a087e9abb1098415","1d1c05193a7bd2cc","dfdabc7132da9634","bfbdca53ae2a50da","1f8a82c1c83d8d4b","42e339b84a696b47","8bbb699ccca61343","2a376b1eb9b49d76","90dffa8443fcdae9","96d452d4031bede7","508e9b3ed6e18b7d","34c68dee52198693","4f276b60d6fcf57d","d251178b3bb1d305","a8555faf709767e5","d402b30dd3246378","6980d683220aeec6","7e255baabc20967b","7a1b96c51d2c3503","9206e2182f2c1ae9","cd22ce2233734f46","a89fb3154f922761","c82a3bd95487c916","45ed53406547bbec","d2944ce2935e80a2","f7cfe9820952f851","0963c6cf33312ba6","094a2f15142b1939","4ce786e495e98b64","e5695479e114b53f","dd4283b2a4aadb50","22b90d75e4c42a3a","3fd196f03881ef02","b3fc5fb4f1348ec5","118422cb32dcbdae","1b6ae0af71143060","c9f3fd99e28b794a","5d5d9b6841ecee28","0bcc47a9e661021e","96f3bd76c1244db3","5a362992ea8a3eb3","4bc7cdc853aec945","7a9505bb7a7327e5","585d663bdfaca460","6e9d0a69642e98b2","f6b0cbef0b12395d","d21702da7db612b7","f8bef1fde9688288","114f9d442d7099db","361f625e107ad8b1","b215f93c679bba12","2af26b7c25ef445d","6b08cff41e317d5e","c7acdc1e62c55259","a42e3850811c7534","974d5c3c66ce7aae","7f9235d1cda708ed","1ab2c2ab2eafd076","4b906f5de6520ca5","e5383ecd4d503251","851b3ff8b084d58c","5aa8faa50173b79a","5377d56e592a5792","4137d7f599c2445c","5f1ac4d4ff38773e","13b35d334c2c4ea8","e7f3c994874fb4b4","612bee73e37ec395","bb888bd270ee626d","2929a0bb661e6a11","d2c18952143856aa","64bc1288f32443bd","8f7e178f5ee2fdf5","40298948c9f78390","313a5c23a8223fbe","2d099517c8cd041e","d4b40338a39b16f0","cf3ca3d2395df141","1b47f0c787042a33","6222b49c9a44de4d"],"x":34,"y":59,"w":1072,"h":1762},{"id":"f89014669a905f2e","type":"group","z":"38519fcf62fceae2","name":"Prosess inndata","style":{"stroke":"#ffC000","label":true},"nodes":["941e97387d6bf838","ad1f6f9242f22b62","9a1bad8c603cc5f4","9096739f9495f3d7","046a02568bf18ef0","8d828dadf12808fb","b5fec1b6a60c2a7f","ef1d815e8d0197ce","f7ecdac73d72b68e","e16a8ac076e9c512","960b91115ecf9ca9","ae96ad273b218805","ca05588391bf5d1a"],"x":34,"y":939,"w":902,"h":562},{"id":"41881c375950137d","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b13ec189cc79f6ba","87af758445f14285","fc771a88fc812e82","f5c628fac390b678","b56eeb28afd7b903","5e26a60998e2c14e","e4c0288adfa9a86f","4b257f03fe785047","343324275668efb1","73b0e388477c6a78","d276a4a2ddf4962d","f2e8fe39856e80ef","ed48a33732eee3a2","f815e316967f8aad","a475fa7038733191","b4c390b2ca2c11f4","fab272a802e81139","56271a130596dd6d"],"x":34,"y":3139,"w":872,"h":442},{"id":"2d1d117a9c036920","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["415279b36a1b260b","9446bd4891094586","942d34ae8956f965","0658f9f3b5b365fe","66075e03ab09b9bf","d3a04c2a524f335d","cc41947dcd6a7447","136cbb4d09d53679","f559be213ad80699","18c63098db69cf72","f81448d7f550ebbc"],"x":34,"y":2779,"w":1082,"h":342},{"id":"63d9e95b7e27f8c0","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["9652c9e68944c869","8606686a.ef7008","52753337.7b5a8c","7274cbde085522a1","8672e44b8c93e04e","f378c2eb37bccb2e","e6597813fd0ae3f4","54b06a2d2d3f7da9","89718a34befe08cc","c7f54ee0b2f3a63a","c14bb127b5df1c7b","fefea0960b0e5ccf","e465494834110f2d","1b2a342569d2a26e","42dc6006f9fea2f4","4137c932c634e85c","8a75d5bd744e8a34","f08261ebfc7c4153","e4b41e99e4495c4e","585fb6d440aca651","43a334e28706087c","13a7ca5bd49cdb11","99221ed0b3ff9b78","5d6762f0715ad17d","f55d92b93a2bc9ab","d993607f45ebee6f","e416f00314dba446","2103052d12fe2218","3b9eea01f3cb8a9c","10f66669a4c75868","088dfb1014c70f1f"],"x":34,"y":2179,"w":1392,"h":582},{"id":"ac4ead5e8e82fb90","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["9e4b31212a818980","91f87512e16887b3","2ef322e034f98afc","7ba5e248b170868f","99c9f669af88ec05","f32f136301a0888e","e225bb78d03d91c6","7a09ac512fd3f1b4"],"x":34,"y":1939,"w":872,"h":182},{"id":"a7ae0748491944ae","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["1c1f9e4030ad8e36","54b12257f4a94b77","33312b8bbafd2fbb","9c4441022fa25dc3","142ac5ca21618d51","39950418cf657b21","fc1097f1322444ad","89fad0d68ea4aea0","0f6199f63595e02c","89b54d26a3e7cba6","8b015a56cadba954","7a36369141d9ca06","43735253926b7632","6a3ad87467ada1af","bf153915c27f022e","5b2c9afa7a04d7c4","a82d45d441548f1c","cd027137a9cb7f6d","b09e593e3f0451bc","edc591dc30d01fab","89eb4821929a5dac","63f772c7d1f6eb4e","e845695292441400","e92924a556371408"],"x":34,"y":1139,"w":1152,"h":642},{"id":"db562037527b0503","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ead8f956c53ebd34","da8e8ea18dc47c69","1ac3755c818bbb14","d78dcfddd87ec46b","b35b12e3c51bd86a","b4daa565f7d18b63","f0b8619a95c18428","4f19a906966b33c4","b0678749530ae61c","e21c0ddaf8225231","2ff74425e33e6373","f4a7b993c97da077","8b535299319578d1","62f7b48dcbda874c","cd736e5ef3766df0","b784750d653c40a7","8f3b748b72912b3b","b9c3dfd449c2ea9b","961ae798fe59177d","4af1e2fca77db38a","e646a1a7a8d503f9","f5b858411fdadf50","0d0333cce94a1861","216f18c5df9a42e0","c334077b933c4c7e","a4d0915da9164c50","cca950337b0e4cd6","d92b02fa08482154","ea3c66bf77880b2e","6d4ac23763231581","4be8e5f68a4abfe9","80772545d1e55244","4240b58247da8662","3ce9de1f03152b4b","2c8782f46aa80988","592ea8cc15e1b674","e0eb3af760b09bea","b91ba79f1ead1054","3712339da3876688","0cbf0addbfdd9a47","2134736d5ec127c5","b2d43b7aae3c1b2f","c43bcc64b8743202","1bf3075e5bc680b7","b283553d411bf7b9","e41e9b2efca2b2df","036fe9570bd1280c","2463515280e7bef8","0beb7fc68551a8f6","064ac8a0b9a446f5","0b989a0b56f00f63","39e728ed3ead71f9","eb2e0eabb27d6b8a","ed1b54b719e8bd37","7c39f660c1ae3e9b","72d41e10e83b7747","538f53838f1c56ee","aebd9e4b4d167fb4","0fd156bd44369080","d4058a1f22ad037f","ed959f6271de3d60","ac5c21d921f345a6","55ed41f1a1508d9e","326a6450f1d62c5a","3e396febbc546701","9eae6ea6cb719e16","3d9f6c422ee65ffc","9c9e1af865d6292c","9dbbd9f38af2b487","2582f87606526f7d","8b0da6409caa0b93","537caf641205eb56","e215359b90ecb91d","840a3d99ab049e04","f41096f9b85689db","440797e1bf305abe","144e60bacf342e5b","fa1b597a26f66834","0bd92f96a190128b","29f1405febae376a","533a9d0945502f69","5e3e0aa8a62ca041","09d3b446412c901a"],"x":34,"y":159,"w":1632,"h":962},{"id":"2ff03b1965fc68a7","type":"group","z":"483a6f631e7f69a7","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["8fde0dfa8a0ed61b","771572d3499dac92","778312ef779bcbdd","2844a24cd9cd909b","d6d10dfd2db4c6e1","84c18d7af6b031e0","bdcd1c829c7a36f6","0cad7d26bfef7f80","3d64a96a0737a125","d4bbc81d1cdd2b6f","0d0c2166a291ddee","821c3fb925c59b71","de056491db24879f","e5483949691ac136","e19e990d4b204329","96d1bcb3d1b22559","f586077a647ee992","2de1376b97559a60","e72c59841c91e4ac","2a1efc1f283b12c7","c2fa2bc083d84c6a","398aef823b0963c4","9e0cebdac8ca63dc","df475d358257d10a","d11c18e736296c14","88438c3f5c594a7c","ec48a822e2716876","9bf2139cc00988d4","d0df03cae5b7c353","28ed411c360ec636","ad30acc07c6db622","5a5e55ba23ab00f0","5964aeb968bc1c43","aa6f370a2b8ec3ef","64d1006a38878da1","04a82a164dbef682","0b78a79d6e589c26","ad01b9468379d716","008ac704a1c1c03a"],"x":34,"y":3599,"w":1282,"h":542},{"id":"1e428712aecf6d9b","type":"group","z":"ec28d8db3689b1f5","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["6c126e970403fcff","8823cb8729815af4","2e98ae0def3f8971","9f5dbe8983d70841","40e13278d3e52632","30b8cc7f00513770","2e90502c9e60db36","8d65543ae2db6c45","1efcdb7b91e37854","7e55e72f2d47252a","a361919615a1cc26","cc7b0aa5ef28e9a2","97609632057df6e7","0164c672efb85f86","d674df4c1bc373ff","53740e1295c0a793"],"x":34,"y":1879,"w":952,"h":622},{"id":"b8b150c06f3a9076","type":"group","z":"ec28d8db3689b1f5","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c4c8967622b3601a","f166ceed6221b02f","fb617cf78d913d32","d58b167b3d633716","bacc3dc050c302ea","a70267820ff566f5","f9a488d9ce1e31f1","bbdff27ebf33aa92","732b642fa86bb6fe","afc0124ae2b4de98","a7e8e53a7d9fe513","cfa67075a0bda41d","b9584062e67cb6ab","e66011d888adee35","55296d6f8737b7cd","65baaacb9b852b56","d3f9f89d687df097","2888a749934b883f","fff7c6bcef83fb07","ce1f91caaed2df6d","742b42c3e8451df2","8648574ea83e3466","f14a1cfc04b3e96a","59fb85a7f74023e9","bd0b77b768989b3c","75c1677095ad4799","b5664075264aa2a3","bd62395d57ec59e0","17d4dd54afa63911","272e6f97f31b38da","36fa1f72a2ad9ff9","33a9e62e909c32de"],"x":34,"y":39,"w":1132,"h":1402},{"id":"b7ac32e3ce7e3a2e","type":"group","z":"56a22929a6befff3","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["f8234035c1102617","232e1bd3c0337d7f","5e04324166d97655","838d66358b114764","0da0d71069b5b7f3","89657707357da688","47f7db55ffd4a18e","b82ef4fac43b42e8","f1da07013ec03217","75b3a4915df81ca5","2a88c7a4d6403b15","ea7909646c8d0c3d","8ecd42ee4e431d0c","41e650e71e591599","b29b5734ec540eeb","d8d50b4f0044aad5","63474e8ce6190a52","0559ea9b907b5e87","a8465dcdc49200ae","0b170f7fd451c41e","93089d2796f378bf","0cb76ba058af601c","38ebe0311e6bdc2a","a0ce570afed14a8d","981b138d56a342a1","b92ee649d741c20f","b1d68f1fe1b35806","05d53d8a3221f9f9","af1860db05dca164","b6bc419e735896a1","130d1b309a8fe4b9","41ed58f0641cf7fd","1ea1c5224e43b9ce","aa9aba60326e34be","ec2d195300a2c034","b0339c65754e972f","72d1447dbe82ddab","90d62064705f73f1","e24005ae6dc43ec4","13f274d193788451","e69de5184b231a94","d27f65d1d23d242c","325eaf833ee5cce3","875442658bad3c4f","f72b8945e0d6e7c8","de6093ed3c849c91","1462c26ff18a9b14","aeeac0cf1fdd9830","7cfdc7454169e917","ee8be4810504bc8b","5543a516269ff258","f94dba06ac3beaca","3db2309c96c9b9f8","128a7cc3e49f98e8","c9a98c15c2d75c54"],"x":94,"y":959,"w":552,"h":1002},{"id":"f5c87a406c2a2913","type":"group","z":"56a22929a6befff3","name":"Buzzer","style":{"label":true},"nodes":["21e843f1141f2812","c82a7a9cf53b6766","85dc1d4df05984f5","cb5e22bab4fd99a0"],"x":94,"y":1999,"w":532,"h":122},{"id":"5ef1898fd1dfa0be","type":"group","z":"56a22929a6befff3","name":"Reset µC's","style":{"label":true},"nodes":["52448ca093f78ede","f50714910682243f","03211c9df0de1676","d89cc656e9940fac","0a09fa988785a4e7","3d8a82ff5252af97","bb741bfdc1a28d2f","863a43e520dabbb7","19cc4d5b860d4539","86ad116678314ab4"],"x":94,"y":2179,"w":552,"h":242},{"id":"28b056b664db7e80","type":"group","z":"56a22929a6befff3","name":"Keycontrol","style":{"label":true},"nodes":["f727bd199c4fb768","d5e98713ea88e6fd","a1ddf172bb91138b","e5eab9d52f7a0086","48249a3cc4ab1fd4","039b2e92a9b9d472","82d6222d68c28e03","f2d93e245ff5cdf7","6c09cd4ea603abf6","ee50c16135371407","97ebbc9b4b847917","d29d0ecfede9d169","578692bfdfd312f9","9059050ea1a9717c","6da92f3df123c7b4","e8515c5a2a53679b","588a640468dc8aca","6cc6a9240dcf8388","4e2df3c7014b798d","b233f13c3c0e9134","02058f1a917cd966","298584d94781070a","132243cc94758b3b","b363c9039d3a2aa1","e12d9cd04acd6ddc","5046eaa39240a5bc","60fde80910767087","9d299c7841f6b7e3","5064484f529a2a7b","6a126674d482ab85","2180b854cbe50558","a8780f5f789efc06","be9d9329642bb66e","8ecc145e5b6e6808","cb824308557a262c","197f53a221848a40","4c7049ed79454c16","275915e3ae53883a","c742ff045f3172e6","0ca498f4c0687239","18d3e06fd08c190c","fb0b31803db83fad","c866476a4c8e984c","e8e645424a931ec2","193bcb010d48fde0","2c756f954bc08d41","bf3011f72f55c205","fdcfa9fe617e8e09","01181ddbbe2e4a89","27b17c5189e23f72","5352bf734e1b7dde","c1ac9021c1a090c7","627ec3cd91405d19","02642554e8f0311a","f8cad5b4500b8284","11bd5c78693e02cc","a71cc94cf1f9d106","c3a33ee604dcfeab","7501793c6f97f616","fe12ea7cc2ba245f","8846d68d6ad482c9"],"x":34,"y":59,"w":1152,"h":722},{"id":"e69de5184b231a94","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1140,"wires":[["232e1bd3c0337d7f","d27f65d1d23d242c","de6093ed3c849c91"]]},{"id":"d27f65d1d23d242c","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1260,"wires":[["5e04324166d97655","325eaf833ee5cce3"]]},{"id":"325eaf833ee5cce3","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1380,"wires":[["0da0d71069b5b7f3","875442658bad3c4f"]]},{"id":"875442658bad3c4f","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1500,"wires":[["47f7db55ffd4a18e","f72b8945e0d6e7c8"]]},{"id":"f72b8945e0d6e7c8","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":360,"y":1620,"wires":[["f1da07013ec03217","2a88c7a4d6403b15"]]},{"id":"de6093ed3c849c91","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1140,"wires":[["f8234035c1102617","1462c26ff18a9b14"]]},{"id":"1462c26ff18a9b14","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1260,"wires":[["41e650e71e591599","aeeac0cf1fdd9830"]]},{"id":"aeeac0cf1fdd9830","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1380,"wires":[["838d66358b114764","7cfdc7454169e917"]]},{"id":"7cfdc7454169e917","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1500,"wires":[["89657707357da688","ee8be4810504bc8b"]]},{"id":"ee8be4810504bc8b","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1620,"wires":[["b82ef4fac43b42e8","5543a516269ff258"]]},{"id":"5543a516269ff258","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1740,"wires":[["75b3a4915df81ca5","f94dba06ac3beaca"]]},{"id":"f94dba06ac3beaca","type":"junction","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","x":460,"y":1840,"wires":[["8ecd42ee4e431d0c"]]},{"id":"c2fa2bc083d84c6a","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":820,"y":3940,"wires":[["2a1efc1f283b12c7","008ac704a1c1c03a"]]},{"id":"398aef823b0963c4","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":780,"y":4100,"wires":[["2a1efc1f283b12c7","008ac704a1c1c03a"]]},{"id":"9e0cebdac8ca63dc","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":1040,"y":3760,"wires":[["2a1efc1f283b12c7","008ac704a1c1c03a"]]},{"id":"df475d358257d10a","type":"junction","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","x":640,"y":4100,"wires":[["398aef823b0963c4"]]},{"id":"01181ddbbe2e4a89","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":980,"y":120,"wires":[["6da92f3df123c7b4"]]},{"id":"27b17c5189e23f72","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":980,"y":200,"wires":[["6da92f3df123c7b4"]]},{"id":"5352bf734e1b7dde","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":980,"y":280,"wires":[["6da92f3df123c7b4"]]},{"id":"c1ac9021c1a090c7","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":980,"y":360,"wires":[["6da92f3df123c7b4"]]},{"id":"627ec3cd91405d19","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":980,"y":440,"wires":[["6da92f3df123c7b4"]]},{"id":"02642554e8f0311a","type":"junction","z":"56a22929a6befff3","g":"28b056b664db7e80","x":980,"y":520,"wires":[["6da92f3df123c7b4"]]},{"id":"974608b50ff5df9c","type":"modbus-client","name":"","clienttype":"serial","bufferCommands":true,"stateLogEnabled":true,"queueLogEnabled":false,"failureLogEnabled":true,"tcpHost":"127.0.0.1","tcpPort":502,"tcpType":"DEFAULT","serialPort":"/dev/ttyAMA0","serialType":"RTU-BUFFERD","serialBaudrate":"115200","serialDatabits":8,"serialStopbits":1,"serialParity":"none","serialConnectionDelay":100,"serialAsciiResponseStartDelimiter":"0x3A","unit_id":1,"commandDelay":"200","clientTimeout":300,"reconnectOnTimeout":false,"reconnectTimeout":1000,"parallelUnitIdsAllowed":false,"showErrors":true,"showWarnings":true,"showLogs":true},{"id":"a34efc6669e0b23a","type":"ui-base","name":"Neva Marine","path":"/dashboard","appIcon":"","includeClientData":true,"acceptsClientConfig":["ui-notification","ui-control"],"showPathInSidebar":false,"headerContent":"dashpage","navigationStyle":"default","titleBarStyle":"default","showReconnectNotification":true,"notificationDisplayTime":1,"showDisconnectNotification":true,"allowInstall":true},{"id":"07b472da491cc459","type":"PCA9685","deviceNumber":1,"address":"95","frequency":50},{"id":"7151a80ba6b123df","type":"ui-theme","name":"Neva Marine AS","colors":{"surface":"#097479","primary":"#097479","bgPage":"#111111","groupBg":"#333333","groupOutline":"#555555"},"sizes":{"density":"comfortable","pagePadding":"6px","groupGap":"6px","groupBorderRadius":"4px","widgetGap":"6px"}},{"id":"ff4d78a12d1c8a98","type":"ui-page","name":"Main","ui":"a34efc6669e0b23a","path":"/main","icon":"home","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":1,"className":"","visible":"true","disabled":"false"},{"id":"44785c01e8a599e5","type":"ui-group","name":"Test","page":"ff4d78a12d1c8a98","width":6,"height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"911b963030fadadc","type":"ui-group","name":"Lys 1","page":"ff4d78a12d1c8a98","width":"1","height":1,"order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"856f7fc555539b8e","type":"modbus-client","name":"BAT UART","clienttype":"serial","bufferCommands":true,"stateLogEnabled":false,"queueLogEnabled":false,"failureLogEnabled":true,"tcpHost":"127.0.0.1","tcpPort":502,"tcpType":"DEFAULT","serialPort":"/dev/ttyAMA4","serialType":"RTU-BUFFERD","serialBaudrate":9600,"serialDatabits":8,"serialStopbits":1,"serialParity":"none","serialConnectionDelay":100,"serialAsciiResponseStartDelimiter":"0x3A","unit_id":1,"commandDelay":1,"clientTimeout":1000,"reconnectOnTimeout":true,"reconnectTimeout":2000,"parallelUnitIdsAllowed":true,"showErrors":false,"showWarnings":true,"showLogs":true},{"id":"fb3fabef7f732e4f","type":"serial-port","name":"","serialport":"/dev/ttyAMA3","serialbaud":"9600","databits":8,"parity":"none","stopbits":1,"waitfor":"$","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":10000},{"id":"689d59762dda24eb","type":"ui-page","name":"Trykk","ui":"a34efc6669e0b23a","path":"/page2","icon":"gear","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":3,"className":"","visible":"true","disabled":"false"},{"id":"67e67d3ec5cedac0","type":"ui-group","name":"Trykk","page":"689d59762dda24eb","width":6,"height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"a75df0de71f5b033","type":"ui-page","name":"TEST","ui":"a34efc6669e0b23a","path":"/test","icon":"test-tube","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":4,"className":"","visible":"true","disabled":"false"},{"id":"43f83edaea29acf4","type":"ui-group","name":"Lampe 1","page":"a75df0de71f5b033","width":6,"height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"884e0b0f934ba909","type":"shared-state","name":"myLat","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"6","numMin":"-90","numMax":"90","unit":"deg","saveInterval":"0"},{"id":"407e7742e8b9f1bc","type":"shared-state","name":"myLon","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"6","numMin":"-180","numMax":"180","unit":"deg","saveInterval":"0"},{"id":"9eb895dadc67bea0","type":"shared-state","name":"myBuzzerDisabled","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"d5e8bd2b1115be28","type":"shared-state","name":"FW_Link","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"7f2169e2cb92802f","type":"shared-state","name":"myManuellKjoringState","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"6e1e834c24242472","type":"shared-state","name":"Lampe1En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"dbd084ce70a3aca9","type":"shared-state","name":"Lampe2En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"3ebac7f92155048a","type":"shared-state","name":"Lampe3En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"b2b0acad0fd02e0a","type":"shared-state","name":"Lampe4En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"78fee3bd300e2412","type":"shared-state","name":"Lampe5En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"dcbeac56928b2456","type":"shared-state","name":"Lampe6En","lbl":"","tags":"","historyCount":"2","dataType":"bool","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"984d640ef763cab4","type":"shared-state","name":"myHWaddr","lbl":"","tags":"","historyCount":"2","dataType":"str","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"","numMax":"","unit":"","saveInterval":"0"},{"id":"8d055d0c1bc7c0f9","type":"shared-state","name":"Stigetid","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"65000","unit":"","saveInterval":"0"},{"id":"3000022b053cc228","type":"shared-state","name":"Dimmetid","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"","numMin":"0","numMax":"65000","unit":"","saveInterval":"0"},{"id":"d2c111101b508bb4","type":"shared-state","name":"MaxDriverTemperatur","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"0","numMin":"30","numMax":"90","unit":"C","saveInterval":"0"},{"id":"2ae0878ed3a6804b","type":"shared-state","name":"DriverCoolDownPWM","lbl":"","tags":"","historyCount":"2","dataType":"num","boolType":"bool","boolStrTrue":"","boolStrFalse":"","precision":"0","numMin":"0","numMax":"100","unit":"","saveInterval":"0"},{"id":"94dfd7648f9e7446","type":"ui-page","name":"Oppsett","ui":"a34efc6669e0b23a","path":"/Oppsett","icon":"tune","layout":"grid","theme":"7151a80ba6b123df","breakpoints":[{"name":"Default","px":"0","cols":"3"},{"name":"Tablet","px":"576","cols":"6"},{"name":"Small Desktop","px":"768","cols":"9"},{"name":"Desktop","px":"1024","cols":"12"}],"order":2,"className":"","visible":"true","disabled":"false"},{"id":"abb155b2a3b51c32","type":"ui-group","name":"Panel","page":"94dfd7648f9e7446","width":6,"height":1,"order":3,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"8085ac2cfd9fe232","type":"ui-group","name":"Nettverk","page":"94dfd7648f9e7446","width":"3","height":1,"order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"2fc0f99eeddfe6d3","type":"mqtt-broker","name":"BIO3000","broker":"128.199.38.63","port":1883,"clientid":"","autoConnect":false,"usetls":false,"protocolVersion":4,"keepalive":60,"cleansession":true,"autoUnsubscribe":true,"birthTopic":"","birthQos":"0","birthRetain":"false","birthPayload":"","birthMsg":{},"closeTopic":"","closeQos":"0","closeRetain":"false","closePayload":"","closeMsg":{},"willTopic":"","willQos":"0","willRetain":"false","willPayload":"","willMsg":{},"userProps":"","sessionExpiry":""},{"id":"b141066593e2150a","type":"ui-group","name":"Prosessoppsett","page":"94dfd7648f9e7446","width":"3","height":1,"order":1,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"e31ead2e4f213bbe","type":"ui-spacer","group":"b141066593e2150a","name":"spacer","tooltip":"","order":7,"width":"3","height":1,"className":""},{"id":"ce1aea3db85cc3a5","type":"ui-spacer","group":"b141066593e2150a","name":"spacer","tooltip":"","order":10,"width":"3","height":1,"className":""},{"id":"3851858da9cbf137","type":"ui-group","name":"Lampe 2","page":"a75df0de71f5b033","width":6,"height":1,"order":2,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"8154b0c2d333ea5c","type":"ui-group","name":"Lampe 3","page":"a75df0de71f5b033","width":6,"height":1,"order":3,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"7e38435dec7f5cbb","type":"ui-group","name":"Lampe 4","page":"a75df0de71f5b033","width":6,"height":1,"order":4,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"bdd1ccedc4b38339","type":"ui-group","name":"Lampe 5","page":"a75df0de71f5b033","width":6,"height":1,"order":5,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"0f4fff2dc12465d5","type":"ui-group","name":"Lampe 6","page":"a75df0de71f5b033","width":6,"height":1,"order":6,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"a6ecfbc58fb32627","type":"ui-spacer","group":"b141066593e2150a","name":"spacer","tooltip":"","order":13,"width":"3","height":1,"className":""},{"id":"b7e9fe26a8d71a7f","type":"ui-group","name":"Programvare","page":"94dfd7648f9e7446","width":6,"height":1,"order":4,"showTitle":true,"className":"","visible":"true","disabled":"false","groupType":"default"},{"id":"ead8f956c53ebd34","type":"comment","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Prosessoppsett","info":"","x":140,"y":200,"wires":[]},{"id":"9652c9e68944c869","type":"comment","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"Hent Hostname og MAC og IP","info":"","x":180,"y":2220,"wires":[]},{"id":"8606686a.ef7008","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract HWaddr","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ether \") + 6; // Offset the start of the address from \"ether \"\nlet addr = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nreturn { payload : addr }; // return the address as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":560,"y":2340,"wires":[["54b06a2d2d3f7da9","d993607f45ebee6f"]]},{"id":"52753337.7b5a8c","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"ifconfig eth0","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":370,"y":2360,"wires":[["8606686a.ef7008","f378c2eb37bccb2e"],[],[]]},{"id":"7274cbde085522a1","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract Hostname","func":"let hostname = msg.payload; // Save the payload string to a more convenient variable name\n\nreturn { payload : hostname.trim() };","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":2280,"wires":[["89718a34befe08cc","3b9eea01f3cb8a9c"]]},{"id":"8672e44b8c93e04e","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"hostname","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":380,"y":2280,"wires":[["7274cbde085522a1"],[],[]]},{"id":"f378c2eb37bccb2e","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract IP","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":2420,"wires":[["10f66669a4c75868"]]},{"id":"e6597813fd0ae3f4","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"ifconfig wlan0","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":360,"y":2480,"wires":[["fefea0960b0e5ccf"],[],[]]},{"id":"54b06a2d2d3f7da9","type":"change","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","rules":[{"t":"set","p":"HWaddr","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":790,"y":2340,"wires":[["99221ed0b3ff9b78"]]},{"id":"415279b36a1b260b","type":"change","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"","rules":[{"t":"set","p":"myLat","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":2920,"wires":[["d3a04c2a524f335d"]]},{"id":"9446bd4891094586","type":"inject","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"59.321648","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"59.321648","payloadType":"num","x":160,"y":2880,"wires":[[]]},{"id":"942d34ae8956f965","type":"change","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"","rules":[{"t":"set","p":"myLon","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":550,"y":3040,"wires":[["d3a04c2a524f335d"]]},{"id":"0658f9f3b5b365fe","type":"inject","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"10.496234","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"10.496234","payloadType":"num","x":160,"y":3000,"wires":[[]]},{"id":"66075e03ab09b9bf","type":"link out","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"Send position update","mode":"link","links":[],"x":1075,"y":2980,"wires":[]},{"id":"d3a04c2a524f335d","type":"trigger","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"","op1":"0","op2":"","op1type":"str","op2type":"date","duration":"10","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":2,"x":950,"y":2960,"wires":[[],["66075e03ab09b9bf"]]},{"id":"89718a34befe08cc","type":"change","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","rules":[{"t":"set","p":"hostname","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":2260,"wires":[[]]},{"id":"1c1f9e4030ad8e36","type":"change","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","rules":[{"t":"set","p":"BuzzerDisabled","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":1340,"wires":[[]]},{"id":"c7f54ee0b2f3a63a","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"cat /etc/wpa_supplicant/wpa_supplicant.conf","addpay":false,"append":"","useSpawn":"false","timer":"","winHide":false,"oldrc":false,"name":"","x":270,"y":2660,"wires":[["1b2a342569d2a26e","42dc6006f9fea2f4"],[],[]]},{"id":"c14bb127b5df1c7b","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract available SSID","func":"let myArray = msg.payload;\nlet mySSIDs = \"SSID(s):\";\n\n// List all SSIDs\nfor(let i=0;i<myArray.length;i++) {\n    mySSIDs = mySSIDs + \" \" + myArray[i].ssid;\n}\n\nreturn { payload : mySSIDs }; // return the SSIDs found as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":580,"y":2540,"wires":[["e416f00314dba446"]]},{"id":"fefea0960b0e5ccf","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract IP","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"inet \") + 5; // Offset the start of the address from \"inet \"\nlet ip = ifconfig.substring(start, ifconfig.indexOf(' ', start)); // Get up until the next space\n\nif ( (start == 5) || (start == 4) ) {\n    ip = \"Not available\";\n}\n\nreturn { payload : ip }; // return the address as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":540,"y":2480,"wires":[["088dfb1014c70f1f"]]},{"id":"e465494834110f2d","type":"switch","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","property":"name","propertyType":"msg","rules":[{"t":"eq","v":"Oppsett","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":150,"y":2420,"wires":[["8672e44b8c93e04e","52753337.7b5a8c","e6597813fd0ae3f4","c7f54ee0b2f3a63a","5d6762f0715ad17d"]]},{"id":"1b2a342569d2a26e","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract SSID","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"ssid=\") + 6; // Offset the start of the SSID \"\nlet mySSID = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgSSID\", mySSID);\n\nreturn { payload: mySSID }; // return the SSID as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":2640,"wires":[[]]},{"id":"42dc6006f9fea2f4","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"extract psk","func":"let ifconfig = msg.payload; // Save the payload string to a more convenient variable name\nlet start = ifconfig.indexOf(\"psk=\") + 5; // Offset the start of the psk \"\nlet myPSK = ifconfig.substring(start, ifconfig.indexOf('\"', start)); // Get up until the next space\n\n// Store orginal value\nflow.set(\"orgPSK\", myPSK);\n\n\nreturn { payload: myPSK }; // return the PSK as the new payload","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":550,"y":2680,"wires":[[]]},{"id":"4137c932c634e85c","type":"switch","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"Endring?","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"orgSSID","vt":"flow"}],"checkall":"true","repair":false,"outputs":1,"x":960,"y":2640,"wires":[["f08261ebfc7c4153"]]},{"id":"8a75d5bd744e8a34","type":"switch","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"Endring?","property":"payload","propertyType":"msg","rules":[{"t":"neq","v":"orgPSK","vt":"flow"}],"checkall":"true","repair":false,"outputs":1,"x":960,"y":2680,"wires":[["585fb6d440aca651"]]},{"id":"f08261ebfc7c4153","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"send commands","func":"let newValue = msg.payload;\nlet orgValue = flow.get(\"orgSSID\"); \n\nlet command = `'s?ssid=\"${orgValue}\"?ssid=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgSSID\",newValue);\n\nreturn {payload: command};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2640,"wires":[["e4b41e99e4495c4e"]]},{"id":"e4b41e99e4495c4e","type":"exec","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","command":"sudo sed -i ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"","x":1330,"y":2660,"wires":[[],[],[]]},{"id":"585fb6d440aca651","type":"function","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"send commands","func":"let newValue = msg.payload;\nlet orgValue = flow.get(\"orgPSK\"); \n\nlet command = `'s?psk=\"${orgValue}\"?psk=\"${newValue}\"?g' /etc/wpa_supplicant/wpa_supplicant.conf`;\n\nflow.set(\"orgPSK\",newValue);\n\nreturn {payload: command};","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1140,"y":2680,"wires":[["e4b41e99e4495c4e"]]},{"id":"43a334e28706087c","type":"link in","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"link in SSID","links":[],"x":605,"y":2600,"wires":[[]]},{"id":"13a7ca5bd49cdb11","type":"link in","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"link in WifiPassword","links":[],"x":605,"y":2720,"wires":[[]]},{"id":"b13ec189cc79f6ba","type":"change","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"","rules":[{"t":"set","p":"FW_Link","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":3240,"wires":[[]]},{"id":"87af758445f14285","type":"switch","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"OK ?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"confirm_clicked","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":610,"y":3340,"wires":[["f5c628fac390b678"]]},{"id":"fc771a88fc812e82","type":"exec","z":"483a6f631e7f69a7","g":"41881c375950137d","command":"sudo wget -cO - ","addpay":"payload","append":"","useSpawn":"","timer":"","winHide":false,"name":"","x":520,"y":3420,"wires":[["b56eeb28afd7b903"],["b56eeb28afd7b903"],["b56eeb28afd7b903","5e26a60998e2c14e"]]},{"id":"f5c628fac390b678","type":"function","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"send commands","func":"let myParam = flow.get(\"FW_Link\") + \" > /home/pi/.node-red/flows.json\";\n\nreturn { payload: myParam }","outputs":1,"timeout":"","noerr":0,"initialize":"","finalize":"","libs":[],"x":320,"y":3420,"wires":[["fc771a88fc812e82"]]},{"id":"b56eeb28afd7b903","type":"debug","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"debug 1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":700,"y":3420,"wires":[]},{"id":"5e26a60998e2c14e","type":"switch","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"Alt i orden?","property":"payload.code","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"neq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":210,"y":3500,"wires":[["e4c0288adfa9a86f"],["343324275668efb1"]]},{"id":"e4c0288adfa9a86f","type":"function","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"Programvare Oppdatert!","func":"return { payload: \"Programvare Oppdatert! Omstart nødvendig for at endringene skal tre i kraft - kjører omstart nå...\" };\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":3500,"wires":[["4b257f03fe785047","56271a130596dd6d"]]},{"id":"4b257f03fe785047","type":"delay","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":640,"y":3540,"wires":[["f2e8fe39856e80ef"]]},{"id":"343324275668efb1","type":"function","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"Uff da... Dette gikk jo ikke.","func":"return { payload: \"Uff da! Fikk ikke tak i Programvaren.\" + msg.payload.message };\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":3540,"wires":[["56271a130596dd6d"]]},{"id":"54b12257f4a94b77","type":"comment","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"System Status/Overide","info":"","x":160,"y":1180,"wires":[]},{"id":"33312b8bbafd2fbb","type":"change","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","rules":[{"t":"set","p":"myManuellKjoringState","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1240,"wires":[["9c4441022fa25dc3"]]},{"id":"9e4b31212a818980","type":"comment","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"Omstart","info":"","x":110,"y":1980,"wires":[]},{"id":"91f87512e16887b3","type":"switch","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"OK ?","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"confirm_clicked","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":490,"y":2040,"wires":[["e225bb78d03d91c6","7a09ac512fd3f1b4"]]},{"id":"9c4441022fa25dc3","type":"trigger","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","op1":"0","op2":"","op1type":"str","op2type":"date","duration":"3","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":2,"x":1020,"y":1240,"wires":[[],["142ac5ca21618d51"]]},{"id":"142ac5ca21618d51","type":"link out","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link out Manuell Kjoring","mode":"link","links":[],"x":1145,"y":1260,"wires":[]},{"id":"da8e8ea18dc47c69","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe1En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":260,"wires":[["4f19a906966b33c4"]]},{"id":"1ac3755c818bbb14","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe2En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":360,"wires":[["2ff74425e33e6373"]]},{"id":"d78dcfddd87ec46b","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe3En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":460,"wires":[["62f7b48dcbda874c"]]},{"id":"b35b12e3c51bd86a","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe4En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":560,"wires":[["8f3b748b72912b3b"]]},{"id":"b4daa565f7d18b63","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe5En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":660,"wires":[["4af1e2fca77db38a"]]},{"id":"f0b8619a95c18428","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Lampe6En","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":760,"wires":[["0d0333cce94a1861"]]},{"id":"4f19a906966b33c4","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":260,"wires":[["b0678749530ae61c"],["e21c0ddaf8225231"]]},{"id":"b0678749530ae61c","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Show","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"show\":[\"Hjem_Lampe_1\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":240,"wires":[[]]},{"id":"e21c0ddaf8225231","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Hide ","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Hjem_Lampe_1\"]}}","tot":"json"},{"t":"set","p":"Lampe1Status","pt":"global","to":"ÿ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":280,"wires":[["537caf641205eb56"]]},{"id":"2ff74425e33e6373","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":360,"wires":[["f4a7b993c97da077"],["8b535299319578d1"]]},{"id":"f4a7b993c97da077","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Show","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"show\":[\"Hjem_Lampe_2\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":340,"wires":[[]]},{"id":"8b535299319578d1","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Hide ","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Hjem_Lampe_2\"]}}","tot":"json"},{"t":"set","p":"Lampe2Status","pt":"global","to":"ÿ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":380,"wires":[["840a3d99ab049e04"]]},{"id":"62f7b48dcbda874c","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":460,"wires":[["cd736e5ef3766df0"],["b784750d653c40a7"]]},{"id":"cd736e5ef3766df0","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Show","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"show\":[\"Hjem_Lampe_3\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":440,"wires":[[]]},{"id":"b784750d653c40a7","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Hide ","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Hjem_Lampe_3\"]}}","tot":"json"},{"t":"set","p":"Lampe3Status","pt":"global","to":"ÿ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":480,"wires":[["440797e1bf305abe"]]},{"id":"8f3b748b72912b3b","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":560,"wires":[["b9c3dfd449c2ea9b"],["961ae798fe59177d"]]},{"id":"b9c3dfd449c2ea9b","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Show","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"show\":[\"Hjem_Lampe_4\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":540,"wires":[[]]},{"id":"961ae798fe59177d","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Hide ","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Hjem_Lampe_4\"]}}","tot":"json"},{"t":"set","p":"Lampe4Status","pt":"global","to":"ÿ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":580,"wires":[["fa1b597a26f66834"]]},{"id":"4af1e2fca77db38a","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":660,"wires":[["e646a1a7a8d503f9"],["f5b858411fdadf50"]]},{"id":"e646a1a7a8d503f9","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Show","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"show\":[\"Hjem_Lampe_5\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":640,"wires":[[]]},{"id":"f5b858411fdadf50","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Hide ","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Hjem_Lampe_5\"]}}","tot":"json"},{"t":"set","p":"Lampe5Status","pt":"global","to":"ÿ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":680,"wires":[["29f1405febae376a"]]},{"id":"0d0333cce94a1861","type":"switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":790,"y":760,"wires":[["216f18c5df9a42e0"],["c334077b933c4c7e"]]},{"id":"216f18c5df9a42e0","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Show","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"show\":[\"Hjem_Lampe_6\"]}}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":740,"wires":[[]]},{"id":"c334077b933c4c7e","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Hide ","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"group\":{\"hide\":[\"Hjem_Lampe_6\"]}}","tot":"json"},{"t":"set","p":"Lampe6Status","pt":"global","to":"ÿ","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":930,"y":780,"wires":[["5e3e0aa8a62ca041"]]},{"id":"cc41947dcd6a7447","type":"get-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"884e0b0f934ba909","name":"myLat","triggerOnInit":true,"triggerOnChange":true,"x":170,"y":2920,"wires":[[]]},{"id":"136cbb4d09d53679","type":"get-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"407e7742e8b9f1bc","name":"myLon","triggerOnInit":true,"triggerOnChange":true,"x":170,"y":3040,"wires":[[]]},{"id":"39950418cf657b21","type":"get-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"9eb895dadc67bea0","name":"myBuzzerDisabled","triggerOnInit":true,"triggerOnChange":true,"x":190,"y":1340,"wires":[[]]},{"id":"73b0e388477c6a78","type":"get-shared-state","z":"483a6f631e7f69a7","g":"41881c375950137d","state":"d5e8bd2b1115be28","name":"FW_Link","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":3240,"wires":[["a475fa7038733191"]]},{"id":"fc1097f1322444ad","type":"get-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"7f2169e2cb92802f","name":"myManuellKjoringState","triggerOnInit":true,"triggerOnChange":true,"x":200,"y":1240,"wires":[[]]},{"id":"a4d0915da9164c50","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"6e1e834c24242472","name":"Lampe1En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":260,"wires":[["ac5c21d921f345a6"]]},{"id":"cca950337b0e4cd6","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dbd084ce70a3aca9","name":"Lampe2En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":360,"wires":[["55ed41f1a1508d9e"]]},{"id":"d92b02fa08482154","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3ebac7f92155048a","name":"Lampe3En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":460,"wires":[["326a6450f1d62c5a"]]},{"id":"ea3c66bf77880b2e","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"b2b0acad0fd02e0a","name":"Lampe4En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":560,"wires":[["3e396febbc546701"]]},{"id":"6d4ac23763231581","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"78fee3bd300e2412","name":"Lampe5En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":660,"wires":[["9eae6ea6cb719e16"]]},{"id":"4be8e5f68a4abfe9","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dcbeac56928b2456","name":"Lampe6En","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":760,"wires":[["3d9f6c422ee65ffc"]]},{"id":"f559be213ad80699","type":"set-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"884e0b0f934ba909","name":"myLat","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":510,"y":2960,"wires":[]},{"id":"18c63098db69cf72","type":"set-shared-state","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","state":"407e7742e8b9f1bc","name":"myLon","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":510,"y":3080,"wires":[]},{"id":"89fad0d68ea4aea0","type":"set-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"9eb895dadc67bea0","name":"myBuzzerDisabled","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":710,"y":1380,"wires":[]},{"id":"d276a4a2ddf4962d","type":"set-shared-state","z":"483a6f631e7f69a7","g":"41881c375950137d","state":"d5e8bd2b1115be28","name":"FW_Link","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":540,"y":3280,"wires":[]},{"id":"0f6199f63595e02c","type":"set-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"7f2169e2cb92802f","name":"myManuellKjoringState","triggerOnInit":false,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":770,"y":1280,"wires":[]},{"id":"99221ed0b3ff9b78","type":"set-shared-state","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","state":"984d640ef763cab4","name":"myHWaddr","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":990,"y":2340,"wires":[]},{"id":"80772545d1e55244","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"6e1e834c24242472","name":"Lampe1En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":300,"wires":[]},{"id":"4240b58247da8662","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dbd084ce70a3aca9","name":"Lampe2En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":400,"wires":[]},{"id":"3ce9de1f03152b4b","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3ebac7f92155048a","name":"Lampe3En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":500,"wires":[]},{"id":"2c8782f46aa80988","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"b2b0acad0fd02e0a","name":"Lampe4En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":600,"wires":[]},{"id":"592ea8cc15e1b674","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"78fee3bd300e2412","name":"Lampe5En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":700,"wires":[]},{"id":"e0eb3af760b09bea","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"dcbeac56928b2456","name":"Lampe6En","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":570,"y":800,"wires":[]},{"id":"5d6762f0715ad17d","type":"wifiscan","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","x":370,"y":2540,"wires":[["c14bb127b5df1c7b"]]},{"id":"f2e8fe39856e80ef","type":"restart","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"","x":810,"y":3540,"wires":[]},{"id":"2ef322e034f98afc","type":"restart","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"","x":810,"y":2040,"wires":[]},{"id":"b91ba79f1ead1054","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Reset Mode selector to AUTO","rules":[{"t":"set","p":"myModeSelector","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":520,"wires":[[]]},{"id":"3712339da3876688","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Stigetid","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":860,"wires":[["2463515280e7bef8"]]},{"id":"0cbf0addbfdd9a47","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"8d055d0c1bc7c0f9","name":"Stigetid","triggerOnInit":true,"triggerOnChange":true,"x":150,"y":860,"wires":[["9c9e1af865d6292c"]]},{"id":"2134736d5ec127c5","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"8d055d0c1bc7c0f9","name":"Stigetid","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":560,"y":900,"wires":[]},{"id":"b2d43b7aae3c1b2f","type":"get-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3000022b053cc228","name":"Dimmetid","triggerOnInit":true,"triggerOnChange":true,"x":160,"y":960,"wires":[["8b0da6409caa0b93"]]},{"id":"c43bcc64b8743202","type":"set-shared-state","z":"483a6f631e7f69a7","g":"db562037527b0503","state":"3000022b053cc228","name":"Dimmetid","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":560,"y":1000,"wires":[]},{"id":"1bf3075e5bc680b7","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"Dimmetid","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":960,"wires":[["0beb7fc68551a8f6"]]},{"id":"b283553d411bf7b9","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Set Stigetid","func":"return [\n    { payload: { 'unitid': 11, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 12, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 13, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 14, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 15, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } },\n    { payload: { 'unitid': 16, 'value': msg.payload, 'fc': 6, 'address': 28, 'quantity': 1 } }\n    ];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1290,"y":860,"wires":[["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"]]},{"id":"e41e9b2efca2b2df","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"Se Dimmetid","func":"return [\n    { payload: { 'unitid': 11, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 12, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 13, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 14, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 15, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } },\n    { payload: { 'unitid': 16, 'value': msg.payload, 'fc': 6, 'address': 29, 'quantity': 1 } }\n    ];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1290,"y":960,"wires":[["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"],["036fe9570bd1280c"]]},{"id":"036fe9570bd1280c","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Update Stige og Dimme settings","mode":"link","links":["53740e1295c0a793"],"x":1505,"y":900,"wires":[]},{"id":"2463515280e7bef8","type":"trigger","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"1","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":920,"y":860,"wires":[["39e728ed3ead71f9"]]},{"id":"0beb7fc68551a8f6","type":"trigger","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"1","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":920,"y":960,"wires":[["eb2e0eabb27d6b8a"]]},{"id":"064ac8a0b9a446f5","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Set Stigetid","links":[],"x":165,"y":900,"wires":[["9c9e1af865d6292c"]]},{"id":"0b989a0b56f00f63","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Set Dimmetid","links":[],"x":165,"y":1000,"wires":[["8b0da6409caa0b93"]]},{"id":"39e728ed3ead71f9","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Stigetid","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":860,"wires":[["b283553d411bf7b9","d4058a1f22ad037f"]]},{"id":"eb2e0eabb27d6b8a","type":"change","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Dimmetid","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":960,"wires":[["e41e9b2efca2b2df","d4058a1f22ad037f"]]},{"id":"f81448d7f550ebbc","type":"comment","z":"483a6f631e7f69a7","g":"2d1d117a9c036920","name":"POSISJON","info":"","x":130,"y":2820,"wires":[]},{"id":"ed48a33732eee3a2","type":"comment","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"FW Upgrade","info":"","x":130,"y":3180,"wires":[]},{"id":"40382b50765dbe43","type":"comment","z":"483a6f631e7f69a7","name":"System","info":"","x":110,"y":80,"wires":[]},{"id":"7ba5e248b170868f","type":"link in","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"link in Reset","links":[],"x":685,"y":2080,"wires":[["2ef322e034f98afc"]]},{"id":"f815e316967f8aad","type":"link in","z":"483a6f631e7f69a7","g":"41881c375950137d","name":"link in runFWUpgrade","links":[],"x":185,"y":3420,"wires":[["f5c628fac390b678"]]},{"id":"ed1b54b719e8bd37","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe1En","links":["8d828dadf12808fb"],"x":135,"y":320,"wires":[["ac5c21d921f345a6"]]},{"id":"7c39f660c1ae3e9b","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe2En","links":["b5fec1b6a60c2a7f"],"x":125,"y":420,"wires":[["55ed41f1a1508d9e"]]},{"id":"72d41e10e83b7747","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe3En","links":["ef1d815e8d0197ce"],"x":125,"y":520,"wires":[["326a6450f1d62c5a"]]},{"id":"538f53838f1c56ee","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe4En","links":["f7ecdac73d72b68e"],"x":125,"y":620,"wires":[["3e396febbc546701"]]},{"id":"aebd9e4b4d167fb4","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe5En","links":["e16a8ac076e9c512"],"x":125,"y":720,"wires":[["9eae6ea6cb719e16"]]},{"id":"0fd156bd44369080","type":"link in","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link in Lampe6En","links":["960b91115ecf9ca9"],"x":125,"y":820,"wires":[["3d9f6c422ee65ffc"]]},{"id":"89b54d26a3e7cba6","type":"get-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"d2c111101b508bb4","name":"MaxDriverTemperatur","triggerOnInit":true,"triggerOnChange":true,"x":200,"y":1460,"wires":[[]]},{"id":"8b015a56cadba954","type":"set-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"d2c111101b508bb4","name":"MaxDriverTemperatur","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":720,"y":1500,"wires":[]},{"id":"7a36369141d9ca06","type":"change","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","rules":[{"t":"set","p":"MaxDriverTemperatur","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1460,"wires":[["9c4441022fa25dc3"]]},{"id":"43735253926b7632","type":"link in","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link in MaxDriverTemperatur","links":[],"x":245,"y":1520,"wires":[[]]},{"id":"d4058a1f22ad037f","type":"trigger","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","op1":"0","op2":"","op1type":"str","op2type":"date","duration":"3","extend":true,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":2,"x":1280,"y":1060,"wires":[[],["ed959f6271de3d60"]]},{"id":"ed959f6271de3d60","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Manuell Kjoring","mode":"link","links":[],"x":1395,"y":1080,"wires":[]},{"id":"6a3ad87467ada1af","type":"get-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"2ae0878ed3a6804b","name":"DriverCoolDownPWM","triggerOnInit":true,"triggerOnChange":true,"x":200,"y":1580,"wires":[[]]},{"id":"bf153915c27f022e","type":"set-shared-state","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","state":"2ae0878ed3a6804b","name":"DriverCoolDownPWM","triggerOnInit":true,"triggerOnChange":true,"provideOutput":false,"outputs":0,"x":720,"y":1620,"wires":[]},{"id":"5b2c9afa7a04d7c4","type":"change","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","rules":[{"t":"set","p":"DriverCoolDownPWM","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":1580,"wires":[[]]},{"id":"a82d45d441548f1c","type":"link in","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link in Cool Down PWM","links":[],"x":285,"y":1620,"wires":[[]]},{"id":"f55d92b93a2bc9ab","type":"ui-control","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","ui":"a34efc6669e0b23a","events":"change","x":140,"y":2380,"wires":[["e465494834110f2d"]]},{"id":"d993607f45ebee6f","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":2,"width":0,"height":0,"name":"ShowHWaddr","label":"MAC:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":780,"y":2380,"wires":[]},{"id":"e416f00314dba446","type":"ui-notification","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","ui":"a34efc6669e0b23a","position":"top right","colorDefault":true,"color":"#000000","displayTime":"10","showCountdown":true,"outputs":1,"allowDismiss":true,"dismissText":"Close","allowConfirm":false,"confirmText":"Confirm","raw":false,"className":"","name":"","x":810,"y":2540,"wires":[[]]},{"id":"7bb569857b3fb41a","type":"ui-template","z":"483a6f631e7f69a7","group":"","page":"","ui":"a34efc6669e0b23a","name":"","order":0,"width":0,"height":0,"head":"","format":"/* Set Background picture */\n.v-main {\n    background-image: url(\"/Background.png\");\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: contain;\n}\n\n/* Styling for all the groups */\nui-card-panel {\n    box-shadow: rgba(0, 0, 0, 0.55) 0px 15px 25px !important;\n    border-radius: 5px;\n    background: rgba(50, 50, 50, 0.75) !important;\n}\n\n/* Styling for all the lelements in the groups */\nui-card-panel * {\n    border-radius: 2.5px;\n}\n\n/* Styling */\nmd-card {\n    background: rgba(50, 50, 50, 0.75) !important;\n}\n\n/* Styling of the Group Title */\n.nr-dashboard-cardtitle {\n    font-weight: bold !important;\n}","storeOutMessages":true,"passthru":true,"resendOnRefresh":true,"templateScope":"site:style","className":"","x":120,"y":120,"wires":[[]]},{"id":"2103052d12fe2218","type":"inject","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":150,"y":2300,"wires":[["52753337.7b5a8c","8672e44b8c93e04e","e6597813fd0ae3f4"]]},{"id":"ac5c21d921f345a6","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 1","group":"b141066593e2150a","order":1,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":260,"wires":[["da8e8ea18dc47c69","80772545d1e55244"]]},{"id":"55ed41f1a1508d9e","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 2","group":"b141066593e2150a","order":2,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":360,"wires":[["1ac3755c818bbb14","4240b58247da8662"]]},{"id":"326a6450f1d62c5a","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 3","group":"b141066593e2150a","order":3,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":460,"wires":[["d78dcfddd87ec46b","3ce9de1f03152b4b"]]},{"id":"3e396febbc546701","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 4","group":"b141066593e2150a","order":4,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":560,"wires":[["b35b12e3c51bd86a","2c8782f46aa80988"]]},{"id":"9eae6ea6cb719e16","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 5","group":"b141066593e2150a","order":5,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":660,"wires":[["b4daa565f7d18b63","592ea8cc15e1b674"]]},{"id":"3d9f6c422ee65ffc","type":"ui-switch","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"","label":"Aktiver Lampe 6","group":"b141066593e2150a","order":6,"width":null,"height":null,"passthru":true,"decouple":false,"topic":"topic","topicType":"msg","style":"","className":"","layout":"row-left-swapped","clickableArea":"label","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":340,"y":760,"wires":[["f0b8619a95c18428","e0eb3af760b09bea"]]},{"id":"3b9eea01f3cb8a9c","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":1,"width":0,"height":0,"name":"ShowHostname","label":"Hostname:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":780,"y":2300,"wires":[]},{"id":"10f66669a4c75868","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":3,"width":0,"height":0,"name":"","label":"eth0 IP:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":760,"y":2420,"wires":[]},{"id":"088dfb1014c70f1f","type":"ui-text","z":"483a6f631e7f69a7","g":"63d9e95b7e27f8c0","group":"8085ac2cfd9fe232","order":4,"width":0,"height":0,"name":"","label":"wlan0 IP:","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":760,"y":2480,"wires":[]},{"id":"9c9e1af865d6292c","type":"ui-number-input","z":"483a6f631e7f69a7","g":"db562037527b0503","group":"b141066593e2150a","name":"Stigetid","label":"[s]","order":9,"width":1,"height":"1","topic":"topic","topicType":"msg","min":0,"max":"65000","step":"15","tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":320,"y":860,"wires":[["3712339da3876688","2134736d5ec127c5"]]},{"id":"9dbbd9f38af2b487","type":"ui-text","z":"483a6f631e7f69a7","g":"db562037527b0503","group":"b141066593e2150a","order":8,"width":2,"height":"1","name":"","label":"Stigetid 0-100% [s]","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":350,"y":820,"wires":[]},{"id":"2582f87606526f7d","type":"ui-text","z":"483a6f631e7f69a7","g":"db562037527b0503","group":"b141066593e2150a","order":11,"width":2,"height":"1","name":"","label":"Dimmetid 0-100% [s]","format":"{{msg.payload}}","layout":"row-spread","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":360,"y":920,"wires":[]},{"id":"8b0da6409caa0b93","type":"ui-number-input","z":"483a6f631e7f69a7","g":"db562037527b0503","group":"b141066593e2150a","name":"Dimmetid","label":"[s]","order":12,"width":1,"height":"1","topic":"topic","topicType":"msg","min":0,"max":"65000","step":"15","tooltip":"","passthru":true,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","spinner":"default","x":320,"y":960,"wires":[["1bf3075e5bc680b7","c43bcc64b8743202"]]},{"id":"537caf641205eb56","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":280,"wires":[["e215359b90ecb91d"]]},{"id":"e215359b90ecb91d","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 1","mode":"link","links":["2af26b7c25ef445d"],"x":1195,"y":280,"wires":[]},{"id":"840a3d99ab049e04","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":380,"wires":[["f41096f9b85689db"]]},{"id":"f41096f9b85689db","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 2","mode":"link","links":["6b08cff41e317d5e"],"x":1195,"y":380,"wires":[]},{"id":"440797e1bf305abe","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":480,"wires":[["144e60bacf342e5b"]]},{"id":"144e60bacf342e5b","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 3","mode":"link","links":["c7acdc1e62c55259"],"x":1195,"y":480,"wires":[]},{"id":"fa1b597a26f66834","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":580,"wires":[["0bd92f96a190128b"]]},{"id":"0bd92f96a190128b","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 4","mode":"link","links":["a42e3850811c7534"],"x":1195,"y":580,"wires":[]},{"id":"29f1405febae376a","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":680,"wires":[["533a9d0945502f69"]]},{"id":"533a9d0945502f69","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 5","mode":"link","links":["974d5c3c66ce7aae"],"x":1195,"y":680,"wires":[]},{"id":"5e3e0aa8a62ca041","type":"function","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"0 - Status","func":"\nreturn { payload: 0 };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1080,"y":780,"wires":[["09d3b446412c901a"]]},{"id":"09d3b446412c901a","type":"link out","z":"483a6f631e7f69a7","g":"db562037527b0503","name":"link out Disable Lampe 6","mode":"link","links":["7f9235d1cda708ed"],"x":1195,"y":780,"wires":[]},{"id":"cd027137a9cb7f6d","type":"ui-button-group","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"Reset Lampe MODBUS adresse (use only in installation)","group":"b141066593e2150a","order":14,"width":"0","height":"0","label":"Reset Lampe MODBUS adresse","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"Lampe 1","icon":"sun","value":"11","valueType":"num","color":"#009933"},{"label":"Lampe 2","icon":"sun","value":"12","valueType":"num","color":"#999999"},{"label":"Lampe 3","icon":"sun","value":"13","valueType":"num","color":"#ff6666"},{"label":"Lampe 4","icon":"sun","value":"14","valueType":"num","color":"#009999"},{"label":"Lampe 5","icon":"sun","value":"15","valueType":"num","color":"#cccc00"},{"label":"Lampe 6","icon":"sun","value":"16","valueType":"num","color":"#ff33cc"}],"topic":"topic","topicType":"msg","x":310,"y":1740,"wires":[["63f772c7d1f6eb4e"]]},{"id":"b09e593e3f0451bc","type":"function","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"clear","func":"\nreturn {payload: []};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1680,"wires":[["cd027137a9cb7f6d"]]},{"id":"edc591dc30d01fab","type":"delay","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":160,"y":1680,"wires":[["b09e593e3f0451bc"]]},{"id":"8fde0dfa8a0ed61b","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all Lamps out","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":170,"y":3980,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"771572d3499dac92","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"101","func":"msg.payload.unitid = 101;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":3980,"wires":[["c2fa2bc083d84c6a","778312ef779bcbdd"]]},{"id":"778312ef779bcbdd","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"102","func":"msg.payload.unitid = 102;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":4000,"wires":[["c2fa2bc083d84c6a","64d1006a38878da1"]]},{"id":"2844a24cd9cd909b","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all Lamps in","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"3","payloadType":"num","x":170,"y":4020,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"d6d10dfd2db4c6e1","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Cleanup IDs","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":100,\"fc\":6,\"unitid\":100,\"address\":1,\"quantity\":1}","payloadType":"json","x":190,"y":4100,"wires":[["64d1006a38878da1"]]},{"id":"84c18d7af6b031e0","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"101","func":"msg.payload.unitid = 101;\nmsg.payload.value = 101;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":570,"y":4060,"wires":[["bdcd1c829c7a36f6","df475d358257d10a"]]},{"id":"bdcd1c829c7a36f6","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"102","func":"msg.payload.unitid = 102;\nmsg.payload.value = 102;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":710,"y":4060,"wires":[["398aef823b0963c4"]]},{"id":"0cad7d26bfef7f80","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 1","props":[{"p":"payload"},{"p":"topic","v":"11","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":1,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3700,"wires":[["ec48a822e2716876"]]},{"id":"3d64a96a0737a125","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 2","props":[{"p":"payload"},{"p":"topic","v":"12","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":2,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3740,"wires":[["9bf2139cc00988d4"]]},{"id":"d4bbc81d1cdd2b6f","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 3","props":[{"p":"payload"},{"p":"topic","v":"13","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":1,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3780,"wires":[["d0df03cae5b7c353"]]},{"id":"0d0c2166a291ddee","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 4","props":[{"p":"payload"},{"p":"topic","v":"14","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":2,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3820,"wires":[["28ed411c360ec636"]]},{"id":"821c3fb925c59b71","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 5","props":[{"p":"payload"},{"p":"topic","v":"15","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":1,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3860,"wires":[["ad30acc07c6db622"]]},{"id":"de056491db24879f","type":"inject","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask in Lampe 6","props":[{"p":"payload"},{"p":"topic","v":"16","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"value\":2,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1}","payloadType":"json","x":180,"y":3900,"wires":[["5a5e55ba23ab00f0"]]},{"id":"e5483949691ac136","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Upload x","func":"return { payload: { 'value': msg.topic, 'fc': 6, 'unitid': 0, 'address': 1, 'quantity': 1 }, topic: msg.topic }; ","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":3700,"wires":[["9e0cebdac8ca63dc","2de1376b97559a60"]]},{"id":"e19e990d4b204329","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Change ID","func":"return { payload: { \"value\": 98, \"fc\": 6, \"unitid\": 0, \"address\": 99, \"quantity\": 1 }, topic: msg.topic }; ","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":890,"y":3760,"wires":[["f586077a647ee992","9e0cebdac8ca63dc"]]},{"id":"96d1bcb3d1b22559","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Save EE","func":"return { payload: { 'value': 1, 'fc': 6, 'unitid': msg.topic, 'address': 99, 'quantity': 1 } }; ","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":880,"y":3820,"wires":[["9e0cebdac8ca63dc","ad01b9468379d716"]]},{"id":"f586077a647ee992","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":720,"y":3820,"wires":[["96d1bcb3d1b22559"]]},{"id":"2de1376b97559a60","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":720,"y":3760,"wires":[["e19e990d4b204329"]]},{"id":"e72c59841c91e4ac","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":720,"y":3700,"wires":[["e5483949691ac136"]]},{"id":"2a1efc1f283b12c7","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 1","mode":"link","links":["53740e1295c0a793"],"x":1275,"y":3940,"wires":[]},{"id":"d11c18e736296c14","type":"comment","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Lamp MODBUS id changes","info":"","x":180,"y":3640,"wires":[]},{"id":"88438c3f5c594a7c","type":"link in","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link in MODBUS Lamp Addr update","links":["28ed411c360ec636","5a5e55ba23ab00f0","9bf2139cc00988d4","ad30acc07c6db622","d0df03cae5b7c353","ec48a822e2716876","e845695292441400"],"x":425,"y":3680,"wires":[["e72c59841c91e4ac","5964aeb968bc1c43","04a82a164dbef682"]]},{"id":"ec48a822e2716876","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 2","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3700,"wires":[]},{"id":"9bf2139cc00988d4","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 3","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3740,"wires":[]},{"id":"d0df03cae5b7c353","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 4","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3780,"wires":[]},{"id":"28ed411c360ec636","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 5","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3820,"wires":[]},{"id":"ad30acc07c6db622","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 6","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3860,"wires":[]},{"id":"5a5e55ba23ab00f0","type":"link out","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"link out 7","mode":"link","links":["88438c3f5c594a7c"],"x":315,"y":3900,"wires":[]},{"id":"5964aeb968bc1c43","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":540,"y":3820,"wires":[["c2fa2bc083d84c6a"]]},{"id":"aa6f370a2b8ec3ef","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"100","func":"return {payload : {\"value\":msg.payload,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1} };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":3960,"wires":[["771572d3499dac92","c2fa2bc083d84c6a"]]},{"id":"64d1006a38878da1","type":"function","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"100","func":"return { payload: {\"value\":100,\"fc\":6,\"unitid\":100,\"address\":1,\"quantity\":1} }","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":4100,"wires":[["84c18d7af6b031e0","df475d358257d10a"]]},{"id":"04a82a164dbef682","type":"change","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all out","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":450,"y":3880,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"0b78a79d6e589c26","type":"change","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"Mask all in","rules":[{"t":"set","p":"payload","pt":"msg","to":"3","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":3880,"wires":[["aa6f370a2b8ec3ef"]]},{"id":"ad01b9468379d716","type":"delay","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":900,"y":3880,"wires":[["0b78a79d6e589c26"]]},{"id":"008ac704a1c1c03a","type":"debug","z":"483a6f631e7f69a7","g":"2ff03b1965fc68a7","name":"debug 6","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1100,"y":4080,"wires":[]},{"id":"89eb4821929a5dac","type":"debug","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"debug 3","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":1000,"y":1680,"wires":[]},{"id":"63f772c7d1f6eb4e","type":"switch","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"","property":"payload","propertyType":"msg","rules":[{"t":"istype","v":"number","vt":"number"}],"checkall":"true","repair":false,"outputs":1,"x":610,"y":1740,"wires":[["edc591dc30d01fab","e92924a556371408","89eb4821929a5dac"]]},{"id":"e845695292441400","type":"link out","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"link out MODBUS Lamp Addr update","mode":"link","links":["88438c3f5c594a7c"],"x":975,"y":1740,"wires":[]},{"id":"e92924a556371408","type":"function","z":"483a6f631e7f69a7","g":"a7ae0748491944ae","name":"Setup macro messages","func":"let respons = {};\n\nswitch(msg.payload) {\n    case 11: \n        respons = {\"value\":1,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1};\n        break;\n    case 12: \n        respons = {\"value\":2,\"fc\":6,\"unitid\":100,\"address\":7,\"quantity\":1};\n        break;\n    case 13: \n        respons = {\"value\":1,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1};\n        break;\n    case 14: \n        respons = {\"value\":2,\"fc\":6,\"unitid\":101,\"address\":7,\"quantity\":1};\n        break;\n    case 15: \n        respons = {\"value\":1,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1};\n        break;\n    case 16: \n        respons = {\"value\":2,\"fc\":6,\"unitid\":102,\"address\":7,\"quantity\":1};\n        break;\n}\n\nreturn {topic: msg.payload, payload: respons};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":810,"y":1740,"wires":[["e845695292441400","89eb4821929a5dac"]]},{"id":"99c9f669af88ec05","type":"ui-button","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","group":"b7e9fe26a8d71a7f","name":"","label":"Omstart","order":3,"width":0,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"","iconPosition":"left","payload":"<h3>Trykk OK for omstart av systemmet. Hvis du ikke er sikker - trykk CANCEL nå!</h3>","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":120,"y":2040,"wires":[["f32f136301a0888e"]]},{"id":"f32f136301a0888e","type":"ui-notification","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"300","showCountdown":false,"outputs":1,"allowDismiss":true,"dismissText":"Cancel","allowConfirm":true,"confirmText":"OK","raw":true,"className":"","name":"","x":310,"y":2040,"wires":[["91f87512e16887b3"]]},{"id":"e225bb78d03d91c6","type":"delay","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":640,"y":2040,"wires":[["2ef322e034f98afc"]]},{"id":"7a09ac512fd3f1b4","type":"link out","z":"483a6f631e7f69a7","g":"ac4ead5e8e82fb90","name":"link out Reset µC's","mode":"link","links":["86ad116678314ab4"],"x":595,"y":2000,"wires":[]},{"id":"a475fa7038733191","type":"ui-text-input","z":"483a6f631e7f69a7","g":"41881c375950137d","group":"b7e9fe26a8d71a7f","name":"","label":"FW link:","order":2,"width":0,"height":0,"topic":"topic","topicType":"msg","mode":"text","tooltip":"","delay":300,"passthru":true,"sendOnDelay":false,"sendOnBlur":true,"sendOnEnter":true,"className":"","clearable":false,"sendOnClear":false,"icon":"","iconPosition":"left","iconInnerPosition":"inside","x":340,"y":3240,"wires":[["b13ec189cc79f6ba","d276a4a2ddf4962d"]]},{"id":"b4c390b2ca2c11f4","type":"ui-button","z":"483a6f631e7f69a7","g":"41881c375950137d","group":"b7e9fe26a8d71a7f","name":"","label":"Oppdater programvare","order":1,"width":0,"height":0,"emulateClick":false,"tooltip":"","color":"","bgcolor":"","className":"","icon":"","iconPosition":"left","payload":"<h3>Er du sikker på at du vil oppdatere programvare nå?</h3>","payloadType":"str","topic":"topic","topicType":"msg","buttonColor":"","textColor":"","iconColor":"","enableClick":true,"enablePointerdown":false,"pointerdownPayload":"","pointerdownPayloadType":"str","enablePointerup":false,"pointerupPayload":"","pointerupPayloadType":"str","x":200,"y":3340,"wires":[["fab272a802e81139"]]},{"id":"fab272a802e81139","type":"ui-notification","z":"483a6f631e7f69a7","g":"41881c375950137d","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"300","showCountdown":true,"outputs":1,"allowDismiss":true,"dismissText":"Nei","allowConfirm":true,"confirmText":"Ja","raw":true,"className":"","name":"","x":430,"y":3340,"wires":[["87af758445f14285"]]},{"id":"56271a130596dd6d","type":"ui-notification","z":"483a6f631e7f69a7","g":"41881c375950137d","ui":"a34efc6669e0b23a","position":"center center","colorDefault":true,"color":"#000000","displayTime":"10","showCountdown":true,"outputs":1,"allowDismiss":false,"dismissText":"Nei","allowConfirm":false,"confirmText":"Ja","raw":true,"className":"","name":"","x":670,"y":3500,"wires":[[]]},{"id":"c9a7edf8de9c9a12","type":"mqtt in","z":"38519fcf62fceae2","name":"","topic":"","qos":"2","datatype":"auto-detect","broker":"2fc0f99eeddfe6d3","nl":false,"rap":true,"rh":0,"inputs":1,"x":290,"y":140,"wires":[[]]},{"id":"2a35df0d9aac55b9","type":"comment","z":"38519fcf62fceae2","name":"Connect","info":"","x":120,"y":80,"wires":[]},{"id":"a7adcd8a1f04f80c","type":"inject","z":"38519fcf62fceae2","name":"","props":[{"p":"action","v":"connect","vt":"str"},{"p":"broker","v":"{\"broker\":\"128.199.38.63\",\"port\":1883,\"username\":\"bio3000\",\"password\":\"Joy53606\"}","vt":"json"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","x":150,"y":140,"wires":[["c9a7edf8de9c9a12"]]},{"id":"77bceff0b8fd48b4","type":"comment","z":"38519fcf62fceae2","name":"Ping med Posisjon","info":"","x":150,"y":260,"wires":[]},{"id":"1e23e26fe9b3e9c8","type":"function","z":"38519fcf62fceae2","name":"Format geometry-telegram","func":"let myTopic = \"data/\" + global.get(\"HWaddr\");\nlet myPayload = {};\nlet myGeometric = {};\nlet myLat = global.get(\"myLat\");\nlet myLon = global.get(\"myLon\");\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyGeometric[\"type\"] = \"Point\"; // myGeo.geometry.type;\nmyGeometric[\"coordinates\"] = [myLon, myLat];  // myGeo.geometry.coordinate;\n\nmyPayload[\"geometry\"] = myGeometric;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":360,"y":320,"wires":[["883e86dcfaa6d5a5"]]},{"id":"14cf84e811a02a85","type":"link in","z":"38519fcf62fceae2","name":"link in Geometry-telegram","links":["ae96ad273b218805"],"x":185,"y":320,"wires":[["1e23e26fe9b3e9c8"]]},{"id":"883e86dcfaa6d5a5","type":"mqtt out","z":"38519fcf62fceae2","name":"","topic":"","qos":"","retain":"","respTopic":"","contentType":"","userProps":"","correl":"","expiry":"","broker":"2fc0f99eeddfe6d3","x":590,"y":380,"wires":[]},{"id":"941e97387d6bf838","type":"inject","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":"2","topic":"","payload":"","payloadType":"date","x":150,"y":980,"wires":[["ad1f6f9242f22b62"]]},{"id":"ad1f6f9242f22b62","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Set topic: ktas_cmd/<HWaddr>","func":"let myTopic = \"ktas_cmd/\" + global.get(\"HWaddr\");\n\nreturn {\"action\": \"subscribe\", \"topic\": myTopic};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":210,"y":1040,"wires":[["9a1bad8c603cc5f4"]]},{"id":"9a1bad8c603cc5f4","type":"mqtt in","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"","topic":"","qos":"2","datatype":"auto-detect","broker":"2fc0f99eeddfe6d3","nl":false,"rap":true,"rh":0,"inputs":1,"x":430,"y":1040,"wires":[["9096739f9495f3d7"]]},{"id":"9096739f9495f3d7","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Parse incoming data","func":"let getStatus = null;\nlet getConfig = null;\nlet getPos = null;\nlet setReset = null;\nlet setRunFWUpgrade = null;\nlet Lampe = null;\nlet setPWM = null;\nlet setEnable = null;\n\n// Command (cmd)\nif ((msg.payload.cmd === \"Status\") || (msg.payload.cmd === \"status\") || (msg.payload.cmd === \"STATUS\")) {\n    getStatus = true;\n} else if ((msg.payload.cmd === \"Konfig\") || (msg.payload.cmd === \"konfig\") || (msg.payload.cmd === \"KONFIG\")\n    || (msg.payload.cmd === \"Config\") || (msg.payload.cmd === \"config\") || (msg.payload.cmd === \"CONFIG\")) {\n    getConfig = true;\n} else if ((msg.payload.cmd === \"Pos\") || (msg.payload.cmd === \"pos\") || (msg.payload.cmd === \"POS\")\n    || (msg.payload.cmd === \"gps\") || (msg.payload.cmd === \"GPS\")) {\n    getPos = true;\n} else if ((msg.payload.cmd === \"Reset\") || (msg.payload.cmd === \"reset\") || (msg.payload.cmd === \"RESET\")) {\n    setReset = true;\n} else if ((msg.payload.cmd === \"RunFWUpgrade\") || (msg.payload.cmd === \"runfwupgrade\") || (msg.payload.cmd === \"Run FW upgrade\") || (msg.payload.cmd === \"RUNFWUPGRADE\")) {\n    setRunFWUpgrade = true;\n}\n\n// Lampe?\nif ((msg.payload.Lampe !== undefined) && (msg.payload.Lampe >= 0) && (msg.payload.Lampe <= 6)) {\n    Lampe = msg.payload.Lampe;\n    if ((msg.payload.setPWM !== undefined) && (msg.payload.setPWM >= 0) && (msg.payload.setPWM <= 100)) {\n        setPWM = msg.payload.setPWM;\n    }\n    if (msg.payload.Enable !== undefined) {\n        setEnable = msg.payload.Enable;\n    }\n    if (msg.payload.enable !== undefined) {\n        setEnable = msg.payload.enable;\n    }\n    if (msg.payload.ENABLE !== undefined) {\n        setEnable = msg.payload.ENABLE;\n    }\n}\n\nreturn [\n    ( getStatus === null ? null : { payload: getStatus } ),\n    ( getConfig === null ? null : { payload: getConfig } ),\n    ( getPos === null ? null : { payload: getPos } ),\n    { payload: setReset },\n    { payload: setRunFWUpgrade },\n    ( setEnable === null ? null : {payload: { \"Lampe\": Lampe, \"Enable\": setEnable } } )\n];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":180,"y":1240,"wires":[[],["ca05588391bf5d1a"],["ae96ad273b218805"],[],[],["046a02568bf18ef0"]]},{"id":"046a02568bf18ef0","type":"function","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"Set Lampe x Enable","func":"node.status({'text': \"Lampe \" + msg.payload.Lampe + \": \" + msg.payload.Enable});\nreturn [ \n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==1)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==2)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==3)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==4)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==5)) ? { payload: msg.payload.Enable}:null),\n    (((msg.payload.Lampe==0) || (msg.payload.Lampe==6)) ? { payload: msg.payload.Enable}:null)\n];","outputs":6,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1400,"wires":[["8d828dadf12808fb"],["b5fec1b6a60c2a7f"],["ef1d815e8d0197ce"],["f7ecdac73d72b68e"],["e16a8ac076e9c512"],["960b91115ecf9ca9"]]},{"id":"8d828dadf12808fb","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe1En","mode":"link","links":["ed1b54b719e8bd37"],"x":815,"y":1340,"wires":[]},{"id":"b5fec1b6a60c2a7f","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe2En","mode":"link","links":["7c39f660c1ae3e9b"],"x":855,"y":1360,"wires":[]},{"id":"ef1d815e8d0197ce","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe3En","mode":"link","links":["72d41e10e83b7747"],"x":895,"y":1380,"wires":[]},{"id":"f7ecdac73d72b68e","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe4En","mode":"link","links":["538f53838f1c56ee"],"x":895,"y":1420,"wires":[]},{"id":"e16a8ac076e9c512","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe5En","mode":"link","links":["aebd9e4b4d167fb4"],"x":855,"y":1440,"wires":[]},{"id":"960b91115ecf9ca9","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Lampe6En","mode":"link","links":["0fd156bd44369080"],"x":815,"y":1460,"wires":[]},{"id":"ae96ad273b218805","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out GNSS","mode":"link","links":["14cf84e811a02a85"],"x":575,"y":1240,"wires":[]},{"id":"cdc566247c5fbc4c","type":"link in","z":"38519fcf62fceae2","name":"link in Oppdater konfigurasjon","links":["ca05588391bf5d1a"],"x":185,"y":380,"wires":[["bc65bd0441382528"]]},{"id":"bc65bd0441382528","type":"function","z":"38519fcf62fceae2","name":"Oppdater konfigurasjon","func":"var myTopic = \"data/\" + global.get(\"HWaddr\");\nvar myPayload = {};\nvar myConfig = {};\n\nmyPayload[\"IMEI\"] = global.get(\"HWaddr\");\nmyPayload[\"epoch\"] = Math.round(Date.now() / 1000);\n\nmyConfig[\"hostname\"] = global.get(\"hostname\");\nmyConfig[\"Stigetid\"] = global.get(\"Stigetid\");\nmyConfig[\"Dimmetid\"] = global.get(\"Dimmetid\");\nmyConfig[\"MaxDriverTemp\"] = global.get(\"MaxDriverTemperatur\");\nmyConfig[\"DriverCoolDownPWM\"] = global.get(\"DriverCoolDownPWM\");\nmyConfig[\"Lampe1En\"] = global.get(\"Lampe1En\");\nmyConfig[\"Lampe2En\"] = global.get(\"Lampe2En\");\nmyConfig[\"Lampe3En\"] = global.get(\"Lampe3En\");\nmyConfig[\"Lampe4En\"] = global.get(\"Lampe4En\");\nmyConfig[\"Lampe5En\"] = global.get(\"Lampe5En\");\nmyConfig[\"Lampe6En\"] = global.get(\"Lampe6En\");\n//myConfig[\"\"] = global.get(\"\");\n\nmyPayload[\"config\"] = myConfig;\n\nreturn {\"topic\": myTopic, \"payload\": myPayload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":350,"y":380,"wires":[["883e86dcfaa6d5a5"]]},{"id":"ca05588391bf5d1a","type":"link out","z":"38519fcf62fceae2","g":"f89014669a905f2e","name":"link out Get Config","mode":"link","links":["cdc566247c5fbc4c"],"x":575,"y":1200,"wires":[]},{"id":"ae03f87a3fbb055a","type":"i2c scan","z":"abfb29b7fe98de5f","name":"","busno":"1","x":1380,"y":140,"wires":[["45d881a9305003dd"],[]]},{"id":"12c8bcfc73668956","type":"inject","z":"abfb29b7fe98de5f","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1220,"y":140,"wires":[["ae03f87a3fbb055a"]]},{"id":"45d881a9305003dd","type":"debug","z":"abfb29b7fe98de5f","name":"debug 5","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1540,"y":120,"wires":[]},{"id":"18676fc92dec75b3","type":"serial in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","serial":"fb3fabef7f732e4f","x":190,"y":1760,"wires":[["fa1460efeca4a892"]]},{"id":"778b6afb06e3d8b8","type":"nmea","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","property":"payload","outputProperty":"payload","x":490,"y":1760,"wires":[["4730bde001160d21"]]},{"id":"fa1460efeca4a892","type":"switch","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"RMC","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":1760,"wires":[["778b6afb06e3d8b8"]]},{"id":"4730bde001160d21","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Extract Lat-Lon","func":"if( msg.payload.status == \"valid\" ) {\n    if(msg.payload.latPole != \"N\") {\n        msg.payload.lat = -msg.payload.lat;\n    }\n    if(msg.payload.lonPole != \"E\") {\n        msg.payload.lon = -msg.payload.lon;\n    }\n    return [\n        { payload : msg.payload.lat },\n        { payload : msg.payload.lon } \n    ];\n}","outputs":2,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":660,"y":1760,"wires":[["7c800b43bcc1367d"],["ef57d13459406072"]]},{"id":"7c800b43bcc1367d","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"myLat","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":1740,"wires":[[]]},{"id":"ef57d13459406072","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"myLon","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":1780,"wires":[[]]},{"id":"318a9b3cb2760c34","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"GPS","info":"","x":110,"y":1700,"wires":[]},{"id":"1f38fb7ad94d5774","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Read Raspberry Pi core temperature","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"60","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"","payloadType":"date","x":270,"y":160,"wires":[["438e47f2cab73553"]]},{"id":"438e47f2cab73553","type":"exec","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","command":"vcgencmd measure_temp","addpay":"","append":"","useSpawn":"","timer":"","winHide":false,"oldrc":false,"name":"","x":570,"y":160,"wires":[["782e1f60e60d73e6"],[],[]]},{"id":"782e1f60e60d73e6","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Remove temp=","func":"let str = msg.payload;\nlet arr = str.split(\"=\");\narr.shift();\nstr = arr.join(\"=\");\nlet CPU = parseFloat(str)\nglobal.set(\"CPU\", CPU);\nnode.status({text: \"CPU: \" + CPU + \"°C\"})\nreturn { payload: CPU };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":800,"y":160,"wires":[["40970db1d04002d7"]]},{"id":"40970db1d04002d7","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"CPU","group":"abb155b2a3b51c32","order":3,"width":"2","height":"3","gtype":"gauge-half","gstyle":"needle","title":"CPU","units":"°C","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#5cd65c"},{"from":"60","color":"#ffc800"},{"from":"75","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":970,"y":160,"wires":[]},{"id":"a087e9abb1098415","type":"rpi-gpio in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pin":"10","intype":"up","debounce":"25","read":true,"bcm":true,"x":180,"y":1520,"wires":[["dfdabc7132da9634","f7cfe9820952f851"]]},{"id":"1d1c05193a7bd2cc","type":"rpi-gpio in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pin":"27","intype":"up","debounce":"25","read":true,"bcm":true,"x":180,"y":1600,"wires":[["1f8a82c1c83d8d4b","0963c6cf33312ba6"]]},{"id":"dfdabc7132da9634","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":1,"width":6,"height":"1","label":"AC I","labelPlacement":"right","labelAlignment":"flex-start","states":[{"value":"1","valueType":"num","color":"#ff0000"},{"value":"0","valueType":"num","color":"#00ff00"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":330,"y":1540,"wires":[]},{"id":"bfbdca53ae2a50da","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"AC detection","info":"","x":130,"y":1460,"wires":[]},{"id":"1f8a82c1c83d8d4b","type":"ui-led","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":2,"width":6,"height":"1","label":"AC II","labelPlacement":"right","labelAlignment":"flex-start","states":[{"value":"1","valueType":"num","color":"#ff0000"},{"value":"0","valueType":"num","color":"#00ff00"}],"allowColorForValueInMessage":false,"shape":"circle","showBorder":true,"showGlow":true,"x":330,"y":1620,"wires":[]},{"id":"42e339b84a696b47","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Raspberry pi CPU temp.","info":"","x":170,"y":100,"wires":[]},{"id":"8bbb699ccca61343","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Control Card","info":"","x":130,"y":240,"wires":[]},{"id":"2a376b1eb9b49d76","type":"i2c in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"0","count":"4","x":650,"y":360,"wires":[["96d452d4031bede7","96f3bd76c1244db3"]]},{"id":"90dffa8443fcdae9","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Get all I2C","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"10","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"","payloadType":"date","x":170,"y":360,"wires":[["508e9b3ed6e18b7d"]]},{"id":"96d452d4031bede7","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Dump Temp & Hum.","func":"let myArray = msg.payload;\n\nlet A = (myArray[1] << 8) | myArray[0];\nlet B = (myArray[3] << 8) | myArray[2];\n\nlet temp = (A/65536)*165 - 40.5;\nlet hum = (B/65536)*100;\n\nnode.status({text:\"Temp: \" + temp.toFixed(0) + \"°C Hum:\" + hum.toFixed(0) + \"%\"});\n\nglobal.set(\"CardTemp\", temp.toFixed(0));\nglobal.set(\"CardHum\", hum.toFixed(0));\n\nreturn { payload: temp.toFixed(1) };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":840,"y":360,"wires":[["094a2f15142b1939"]]},{"id":"508e9b3ed6e18b7d","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"15","payload":"1","payloadType":"num","count":"1","x":330,"y":360,"wires":[["34c68dee52198693"]]},{"id":"34c68dee52198693","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":490,"y":360,"wires":[["2a376b1eb9b49d76"]]},{"id":"4f276b60d6fcf57d","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"14","payload":"-128","payloadType":"num","count":"1","x":350,"y":300,"wires":[["7e255baabc20967b"]]},{"id":"d251178b3bb1d305","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Init HDC2080","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":180,"y":300,"wires":[["4f276b60d6fcf57d"]]},{"id":"a8555faf709767e5","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"15","payload":"3","payloadType":"num","count":"1","x":670,"y":300,"wires":[["d402b30dd3246378"]]},{"id":"d402b30dd3246378","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"14","payload":"1","payloadType":"num","count":"1","x":810,"y":300,"wires":[["6980d683220aeec6"]]},{"id":"6980d683220aeec6","type":"i2c out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"64","command":"15","payload":"1","payloadType":"num","count":"1","x":950,"y":300,"wires":[[]]},{"id":"7e255baabc20967b","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"25","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":510,"y":300,"wires":[["a8555faf709767e5"]]},{"id":"7a1b96c51d2c3503","type":"i2c in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"109","command":"6","count":"3","x":150,"y":440,"wires":[["a89fb3154f922761","5a362992ea8a3eb3"]]},{"id":"9206e2182f2c1ae9","type":"i2c in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","busno":"1","address":"109","command":"9","count":"3","x":150,"y":520,"wires":[["cd22ce2233734f46"]]},{"id":"cd22ce2233734f46","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Temperature","func":"let dat = (msg.payload[0]<<16) + (msg.payload[1]<<8) + msg.payload[2];\nlet fadc = dat;\nif(dat & 0x800000) {\n    fadc = dat-16777216.0;\n}\nlet temp = 25.0 + (fadc / 65536.0); \nnode.status(\"Temp: \" + temp.toFixed(0) + \"°C\");\nglobal.set(\"systemTemp\", temp.toFixed(0));\n\nreturn { payload: temp.toFixed(1)};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":520,"wires":[["4ce786e495e98b64"]]},{"id":"a89fb3154f922761","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Pressure","func":"let dat = (msg.payload[0]<<16) + (msg.payload[1]<<8) + msg.payload[2];\nlet fadc = dat;\nif(dat & 0x800000) {\n    fadc = dat-16777216.0;\n} \n//let ADC = 3.3*fadc/8388608.0;\n//let ADC = 3.3*fadc/14278572.0;\n//let Upper_Range_limit = 700;\n//let Lower_Range_Limit = 0;\n//let Range = Upper_Range_limit - Lower_Range_Limit;\n//return { payload: (Range * (ADC-0.5)/2.0)+Lower_Range_Limit};\n//return { payload: fadc/100000.0 -16.03};\nlet hPa = ((5775*fadc)/4194304 -750);\nnode.status(\"Trykk: \" + hPa.toFixed(0) + \" hPa\");\n\nreturn { payload: hPa};\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":440,"wires":[["45ed53406547bbec"]]},{"id":"c82a3bd95487c916","type":"ui-chart","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","group":"67e67d3ec5cedac0","name":"","label":"chart","order":1,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"","ymax":"","bins":10,"action":"append","stackSeries":false,"pointShape":"false","pointRadius":4,"showLegend":true,"removeOlder":1,"removeOlderUnit":"3600","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":8,"className":"","interpolation":"linear","x":810,"y":440,"wires":[[]]},{"id":"45ed53406547bbec","type":"smooth","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","property":"payload","action":"mean","count":"60","round":"1","mult":"single","reduce":false,"x":460,"y":440,"wires":[["d2944ce2935e80a2"]]},{"id":"d2944ce2935e80a2","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Logg Pressure","func":"let hPa = msg.payload.toFixed(0);\nglobal.set(\"Pressure\", hPa);\nnode.status(\"Trykk: \" + hPa + \" hPa\");\nreturn {payload: hPa, topic: \"[hPa]\"};","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":640,"y":440,"wires":[["c82a3bd95487c916"]]},{"id":"f7cfe9820952f851","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"nAC1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1500,"wires":[[]]},{"id":"0963c6cf33312ba6","type":"change","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","rules":[{"t":"set","p":"nAC2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":360,"y":1580,"wires":[[]]},{"id":"094a2f15142b1939","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":4,"width":"2","height":"3","gtype":"gauge-half","gstyle":"needle","title":"PCB","units":"°C","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#5cd65c"},{"from":"60","color":"#ffc800"},{"from":"75","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":1030,"y":360,"wires":[]},{"id":"4ce786e495e98b64","type":"ui-gauge","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"abb155b2a3b51c32","order":5,"width":"2","height":"3","gtype":"gauge-half","gstyle":"needle","title":"Skap","units":"°C","icon":"","prefix":"","suffix":"","segments":[{"from":"0","color":"#5cd65c"},{"from":"60","color":"#ffc800"},{"from":"75","color":"#ea5353"}],"min":0,"max":"100","sizeThickness":16,"sizeGap":4,"sizeKeyThickness":8,"styleRounded":true,"styleGlow":false,"className":"","x":470,"y":520,"wires":[]},{"id":"e5695479e114b53f","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Lampestatus","info":"","x":130,"y":820,"wires":[]},{"id":"dd4283b2a4aadb50","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"1s timer","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"1","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"","payloadType":"date","x":180,"y":880,"wires":[["22b90d75e4c42a3a","7a9505bb7a7327e5"]]},{"id":"22b90d75e4c42a3a","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Update Lampestatus (Round Robin)","func":"let RR = flow.get(\"RR\");\nnode.status({fill:\"green\",shape:\"ring\",text:RR});\nswitch(RR) {\n\n    case 1:\n        flow.set(\"RR\", 2);\n        if (global.get(\"Lampe1En\")) {\n            return { payload: { \"fc\": 3, \"unitid\": 11, \"address\": 1, \"quantity\": 45 } };\n        }\n        break;\n\n    case 2:\n        flow.set(\"RR\", 3);\n        if (global.get(\"Lampe2En\")) {\n            return { payload: { \"fc\": 3, \"unitid\": 12, \"address\": 1, \"quantity\": 45 } };\n        }\n        break;\n\n    case 3:\n        flow.set(\"RR\", 4);\n        if (global.get(\"Lampe3En\")) {\n            return { payload: { \"fc\": 3, \"unitid\": 13, \"address\": 1, \"quantity\": 45 } };\n        }\n        break;\n\n    case 4:\n        flow.set(\"RR\", 5);\n        if (global.get(\"Lampe4En\")) {\n            return { payload: { \"fc\": 3, \"unitid\": 14, \"address\": 1, \"quantity\": 45 } };\n        }\n        break;\n\n    case 5:\n        flow.set(\"RR\", 6);\n        if (global.get(\"Lampe5En\")) {\n            return { payload: { \"fc\": 3, \"unitid\": 15, \"address\": 1, \"quantity\": 45 } };\n        }\n        break;\n\n    case 6:\n    default:\n        flow.set(\"RR\", 1);\n        if (global.get(\"Lampe6En\")) {\n            return { payload: { \"fc\": 3, \"unitid\": 16, \"address\": 1, \"quantity\": 45 } };\n        }\n        break;\n}\n","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":430,"y":880,"wires":[["0bcc47a9e661021e"]]},{"id":"3fd196f03881ef02","type":"inject","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Get data","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"5","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"{\"fc\":3,\"unitid\":100,\"address\":1,\"quantity\":9}","payloadType":"json","x":180,"y":700,"wires":[["1b6ae0af71143060","118422cb32dcbdae","b3fc5fb4f1348ec5"]]},{"id":"b3fc5fb4f1348ec5","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"102","func":"let L5En = global.get(\"Lampe5En\");\nlet L6En = global.get(\"Lampe6En\");\nif(L5En || L6En) {\n    msg.payload.unitid = 102;\n    return msg;\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":740,"wires":[["c9f3fd99e28b794a"]]},{"id":"118422cb32dcbdae","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"102","func":"let L3En = global.get(\"Lampe3En\");\nlet L4En = global.get(\"Lampe4En\");\nif(L3En || L4En) {\n    msg.payload.unitid = 101;\n    return msg;\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":700,"wires":[["c9f3fd99e28b794a"]]},{"id":"1b6ae0af71143060","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"100","func":"let L1En = global.get(\"Lampe1En\");\nlet L2En = global.get(\"Lampe2En\");\nif(L1En || L2En) {\n    msg.payload.unitid = 100;\n    return msg;\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":330,"y":660,"wires":[["c9f3fd99e28b794a"]]},{"id":"c9f3fd99e28b794a","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out MODBUS get 100, 101 and 102 ","mode":"link","links":["a70267820ff566f5"],"x":435,"y":700,"wires":[]},{"id":"5d5d9b6841ecee28","type":"comment","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Get system cluster status","info":"","x":170,"y":600,"wires":[]},{"id":"0bcc47a9e661021e","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out MODBUS get Lamp status","mode":"link","links":["a70267820ff566f5"],"x":635,"y":880,"wires":[]},{"id":"96f3bd76c1244db3","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":170,"y":400,"wires":[[]]},{"id":"5a362992ea8a3eb3","type":"delay","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","pauseType":"delay","timeout":"50","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":150,"y":480,"wires":[["9206e2182f2c1ae9"]]},{"id":"4bc7cdc853aec945","type":"rpi-gpio out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Alive","pin":"7","set":"","level":"0","freq":"","out":"out","bcm":true,"x":510,"y":940,"wires":[]},{"id":"7a9505bb7a7327e5","type":"trigger","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Alive pulse","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"50","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":350,"y":940,"wires":[["4bc7cdc853aec945"]]},{"id":"585d663bdfaca460","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"43f83edaea29acf4","order":2,"width":"","height":"","label":"Lampe 1 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L1","topicType":"str","x":280,"y":1040,"wires":[["1ab2c2ab2eafd076"]]},{"id":"6e9d0a69642e98b2","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 1","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe1Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe1Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe1Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe1Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe1Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":100,\"address\":8,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":1040,"wires":[["f6b0cbef0b12395d"],["4137d7f599c2445c"],["5f1ac4d4ff38773e"]]},{"id":"f6b0cbef0b12395d","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out LAMPE 1 Feedback","mode":"link","links":["53740e1295c0a793"],"x":995,"y":1180,"wires":[]},{"id":"d21702da7db612b7","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"3851858da9cbf137","order":2,"width":null,"height":null,"label":"Lampe 2 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L2","topicType":"str","x":280,"y":1100,"wires":[["4b906f5de6520ca5"]]},{"id":"f8bef1fde9688288","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"8154b0c2d333ea5c","order":2,"width":null,"height":null,"label":"Lampe 3 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L3","topicType":"str","x":280,"y":1160,"wires":[["e5383ecd4d503251"]]},{"id":"114f9d442d7099db","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"7e38435dec7f5cbb","order":2,"width":null,"height":null,"label":"Lampe 4 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L4","topicType":"str","x":280,"y":1220,"wires":[["851b3ff8b084d58c"]]},{"id":"361f625e107ad8b1","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"bdd1ccedc4b38339","order":2,"width":null,"height":null,"label":"Lampe 5 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L5","topicType":"str","x":280,"y":1280,"wires":[["5aa8faa50173b79a"]]},{"id":"b215f93c679bba12","type":"ui-button-group","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","group":"0f4fff2dc12465d5","order":2,"width":null,"height":null,"label":"Lampe 6 - Feedback","className":"","rounded":true,"useThemeColors":true,"passthru":true,"options":[{"label":"OFF","icon":"lightbulb-off","value":"0","valueType":"num","color":"#999999"},{"label":"GREEN ON","icon":"lightbulb-on","value":"1","valueType":"num","color":"#ff6666"},{"label":"G FADE OFF","icon":"lightbulb-on-30","value":"2","valueType":"num","color":"#009999"},{"label":"G FADE ON","icon":"lightbulb-on-70","value":"3","valueType":"num","color":"#cccc00"},{"label":"RED","icon":"alarm-light","value":"256","valueType":"num","color":"#009933"},{"label":"YELLOW","icon":"alarm-light","value":"257","valueType":"num","color":"#ff33cc"}],"topic":"L6","topicType":"str","x":280,"y":1340,"wires":[["5377d56e592a5792"]]},{"id":"2af26b7c25ef445d","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 1 FB","links":["8d65543ae2db6c45","e215359b90ecb91d","a7e8e53a7d9fe513"],"x":125,"y":1040,"wires":[["585d663bdfaca460"]]},{"id":"6b08cff41e317d5e","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 2 FB","links":["1efcdb7b91e37854","f41096f9b85689db","e66011d888adee35"],"x":125,"y":1100,"wires":[["d21702da7db612b7"]]},{"id":"c7acdc1e62c55259","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 3 FB","links":["7e55e72f2d47252a","144e60bacf342e5b","d3f9f89d687df097"],"x":125,"y":1160,"wires":[["f8bef1fde9688288"]]},{"id":"a42e3850811c7534","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 4 FB","links":["cc7b0aa5ef28e9a2","0bd92f96a190128b","ce1f91caaed2df6d"],"x":125,"y":1220,"wires":[["114f9d442d7099db"]]},{"id":"974d5c3c66ce7aae","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 5 FB","links":["0164c672efb85f86","533a9d0945502f69","f14a1cfc04b3e96a"],"x":125,"y":1280,"wires":[["361f625e107ad8b1"]]},{"id":"7f9235d1cda708ed","type":"link in","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link in Lampe 6 FB","links":["97609632057df6e7","09d3b446412c901a","75c1677095ad4799"],"x":125,"y":1340,"wires":[["b215f93c679bba12"]]},{"id":"1ab2c2ab2eafd076","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":470,"y":1040,"wires":[["6e9d0a69642e98b2"]]},{"id":"4b906f5de6520ca5","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":470,"y":1100,"wires":[["13b35d334c2c4ea8"]]},{"id":"e5383ecd4d503251","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":470,"y":1160,"wires":[["bb888bd270ee626d"]]},{"id":"851b3ff8b084d58c","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":470,"y":1220,"wires":[["40298948c9f78390"]]},{"id":"5aa8faa50173b79a","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":470,"y":1280,"wires":[["d4b40338a39b16f0"]]},{"id":"5377d56e592a5792","type":"rbe","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"","func":"rbe","gap":"","start":"","inout":"out","septopics":true,"property":"payload","topi":"topic","x":470,"y":1340,"wires":[["cf3ca3d2395df141"]]},{"id":"4137d7f599c2445c","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L1G","mode":"link","links":["0559ea9b907b5e87"],"x":855,"y":1020,"wires":[]},{"id":"5f1ac4d4ff38773e","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L1R","mode":"link","links":["0b170f7fd451c41e"],"x":905,"y":1040,"wires":[]},{"id":"13b35d334c2c4ea8","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 2","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe2Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe2Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe2Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe2Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe2Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":100,\"address\":9,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":1100,"wires":[["f6b0cbef0b12395d"],["e7f3c994874fb4b4"],["612bee73e37ec395"]]},{"id":"e7f3c994874fb4b4","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L2G","mode":"link","links":["38ebe0311e6bdc2a"],"x":855,"y":1080,"wires":[]},{"id":"612bee73e37ec395","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L2R","mode":"link","links":["a0ce570afed14a8d"],"x":905,"y":1100,"wires":[]},{"id":"bb888bd270ee626d","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 3","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe3Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe3Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe3Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe3Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe3Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":101,\"address\":8,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":1160,"wires":[["f6b0cbef0b12395d"],["2929a0bb661e6a11"],["d2c18952143856aa"]]},{"id":"2929a0bb661e6a11","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L3G","mode":"link","links":["b1d68f1fe1b35806"],"x":855,"y":1140,"wires":[]},{"id":"d2c18952143856aa","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L3R","mode":"link","links":["05d53d8a3221f9f9"],"x":905,"y":1160,"wires":[]},{"id":"64bc1288f32443bd","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L4G","mode":"link","links":["130d1b309a8fe4b9"],"x":855,"y":1200,"wires":[]},{"id":"8f7e178f5ee2fdf5","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L4R","mode":"link","links":["41ed58f0641cf7fd"],"x":895,"y":1220,"wires":[]},{"id":"40298948c9f78390","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 4","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe4Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe4Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe4Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe4Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe4Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":101,\"address\":9,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":1220,"wires":[["f6b0cbef0b12395d"],["64bc1288f32443bd"],["8f7e178f5ee2fdf5"]]},{"id":"313a5c23a8223fbe","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L5G","mode":"link","links":["ec2d195300a2c034"],"x":855,"y":1260,"wires":[]},{"id":"2d099517c8cd041e","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L5R","mode":"link","links":["b0339c65754e972f"],"x":895,"y":1280,"wires":[]},{"id":"d4b40338a39b16f0","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 5","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe5Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe5Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe5Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe5Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe5Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":102,\"address\":8,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":1280,"wires":[["f6b0cbef0b12395d"],["313a5c23a8223fbe"],["2d099517c8cd041e"]]},{"id":"cf3ca3d2395df141","type":"function","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"Make telegram 6","func":"let status = msg.payload;\nlet Green = 0;\nlet Red = 0;\n\nswitch(status) {\n    case 0:\n        global.set(\"Lampe6Status\",\"ÿ\");\n        break;\n    case 1:\n        global.set(\"Lampe6Status\",\"G\");\n        Green = 100;\n        break;\n    case 2:\n    case 3:\n        global.set(\"Lampe6Status\",\"g\");\n        Green = 25;\n        break;\n    case 256:\n        global.set(\"Lampe6Status\",\"r\");\n        Red = 100;\n        break;\n    case 257:\n    default:\n        global.set(\"Lampe6Status\",\"Y\");\n        Green = 100;\n        Red = 100;\n        break;\n\n}\nreturn [\n    { payload: {\"value\":status,\"fc\":6,\"unitid\":102,\"address\":9,\"quantity\":1} },\n    { payload: Green },\n    { payload: Red }\n]","outputs":3,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":650,"y":1340,"wires":[["f6b0cbef0b12395d"],["1b47f0c787042a33"],["6222b49c9a44de4d"]]},{"id":"1b47f0c787042a33","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L6G","mode":"link","links":["e24005ae6dc43ec4"],"x":855,"y":1320,"wires":[]},{"id":"6222b49c9a44de4d","type":"link out","z":"abfb29b7fe98de5f","g":"b2590d1d879b30f0","name":"link out L6R","mode":"link","links":["13f274d193788451"],"x":895,"y":1340,"wires":[]},{"id":"f727bd199c4fb768","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"AUTO","pin":"17","intype":"down","debounce":"25","read":true,"bcm":true,"x":110,"y":740,"wires":[["e8e645424a931ec2"]]},{"id":"d5e98713ea88e6fd","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN","pin":"18","intype":"down","debounce":"25","read":true,"bcm":true,"x":110,"y":680,"wires":[["fdcfa9fe617e8e09"]]},{"id":"a1ddf172bb91138b","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"ON/OFF","pin":"20","intype":"down","debounce":"25","read":true,"bcm":true,"x":120,"y":620,"wires":[["8846d68d6ad482c9"]]},{"id":"e5eab9d52f7a0086","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE6","pin":"26","intype":"down","debounce":"25","read":true,"bcm":true,"x":120,"y":520,"wires":[["fe12ea7cc2ba245f"]]},{"id":"48249a3cc4ab1fd4","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE5","pin":"25","intype":"down","debounce":"25","read":true,"bcm":true,"x":120,"y":440,"wires":[["7501793c6f97f616"]]},{"id":"039b2e92a9b9d472","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE4","pin":"24","intype":"down","debounce":"25","read":true,"bcm":true,"x":120,"y":360,"wires":[["c3a33ee604dcfeab"]]},{"id":"82d6222d68c28e03","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE3","pin":"23","intype":"down","debounce":"25","read":true,"bcm":true,"x":120,"y":280,"wires":[["a71cc94cf1f9d106"]]},{"id":"f2d93e245ff5cdf7","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE2","pin":"22","intype":"down","debounce":"25","read":true,"bcm":true,"x":120,"y":200,"wires":[["11bd5c78693e02cc"]]},{"id":"6c09cd4ea603abf6","type":"rpi-gpio in","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"LAMPE1","pin":"21","intype":"down","debounce":"25","read":true,"bcm":true,"x":120,"y":120,"wires":[["f8cad5b4500b8284"]]},{"id":"f8234035c1102617","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH0","pca9685":"07b472da491cc459","channel":"0","payload":"","unit":"percent","onStep":"2000","x":570,"y":1120,"wires":[]},{"id":"232e1bd3c0337d7f","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH1","pca9685":"07b472da491cc459","channel":"1","payload":"","unit":"percent","onStep":"2000","x":570,"y":1160,"wires":[]},{"id":"5e04324166d97655","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH3","pca9685":"07b472da491cc459","channel":"3","payload":"","unit":"percent","onStep":"2000","x":570,"y":1280,"wires":[]},{"id":"838d66358b114764","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH4","pca9685":"07b472da491cc459","channel":"4","payload":"","unit":"percent","onStep":"2000","x":570,"y":1360,"wires":[]},{"id":"0da0d71069b5b7f3","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH5","pca9685":"07b472da491cc459","channel":"5","payload":"","unit":"percent","onStep":"2000","x":570,"y":1400,"wires":[]},{"id":"89657707357da688","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH6","pca9685":"07b472da491cc459","channel":"6","payload":"","unit":"percent","onStep":"2000","x":570,"y":1480,"wires":[]},{"id":"47f7db55ffd4a18e","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH7","pca9685":"07b472da491cc459","channel":"7","payload":"","unit":"percent","onStep":"2000","x":570,"y":1520,"wires":[]},{"id":"b82ef4fac43b42e8","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH8","pca9685":"07b472da491cc459","channel":"8","payload":"","unit":"percent","onStep":"2000","x":570,"y":1600,"wires":[]},{"id":"f1da07013ec03217","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH9","pca9685":"07b472da491cc459","channel":"9","payload":"","unit":"percent","onStep":"2000","x":570,"y":1640,"wires":[]},{"id":"75b3a4915df81ca5","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH10","pca9685":"07b472da491cc459","channel":"10","payload":"","unit":"percent","onStep":"2000","x":570,"y":1720,"wires":[]},{"id":"2a88c7a4d6403b15","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH11","pca9685":"07b472da491cc459","channel":"11","payload":"","unit":"percent","onStep":"2000","x":570,"y":1760,"wires":[]},{"id":"ea7909646c8d0c3d","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH12","pca9685":"07b472da491cc459","channel":"12","payload":"","unit":"percent","onStep":"2000","x":570,"y":1880,"wires":[]},{"id":"8ecd42ee4e431d0c","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH13","pca9685":"07b472da491cc459","channel":"13","payload":"","unit":"percent","onStep":"2000","x":570,"y":1840,"wires":[]},{"id":"41e650e71e591599","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH2","pca9685":"07b472da491cc459","channel":"2","payload":"","unit":"percent","onStep":"2000","x":570,"y":1240,"wires":[]},{"id":"b29b5734ec540eeb","type":"PCA9685 out","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"CH14","pca9685":"07b472da491cc459","channel":"14","payload":"","unit":"percent","onStep":"2000","x":570,"y":1920,"wires":[]},{"id":"d8d50b4f0044aad5","type":"inject","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"","props":[{"p":"payload"},{"p":"topic","v":"100","vt":"num"}],"repeat":"","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"100","payloadType":"num","x":250,"y":1060,"wires":[["e69de5184b231a94"]]},{"id":"ee50c16135371407","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":120,"wires":[["97ebbc9b4b847917","18d3e06fd08c190c"]]},{"id":"63474e8ce6190a52","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L1G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1120,"wires":[["f8234035c1102617"]]},{"id":"0559ea9b907b5e87","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L1G","links":["4137d7f599c2445c"],"x":145,"y":1120,"wires":[["63474e8ce6190a52"]]},{"id":"21e843f1141f2812","type":"rpi-gpio out","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"","pin":"16","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":540,"y":2080,"wires":[]},{"id":"c82a7a9cf53b6766","type":"inject","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":200,"y":2040,"wires":[["85dc1d4df05984f5"]]},{"id":"85dc1d4df05984f5","type":"trigger","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"100","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2080,"wires":[["21e843f1141f2812"]]},{"id":"f50714910682243f","type":"rpi-gpio out","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"RESET_uC1","pin":"11","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":550,"y":2260,"wires":[]},{"id":"03211c9df0de1676","type":"inject","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":190,"y":2260,"wires":[["d89cc656e9940fac"]]},{"id":"d89cc656e9940fac","type":"trigger","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2260,"wires":[["f50714910682243f"]]},{"id":"0a09fa988785a4e7","type":"rpi-gpio out","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"RESET_uC2","pin":"6","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":550,"y":2320,"wires":[]},{"id":"3d8a82ff5252af97","type":"inject","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":190,"y":2320,"wires":[["52448ca093f78ede"]]},{"id":"52448ca093f78ede","type":"trigger","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2320,"wires":[["0a09fa988785a4e7"]]},{"id":"bb741bfdc1a28d2f","type":"rpi-gpio out","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"RESET_uC3","pin":"13","set":true,"level":"0","freq":"","out":"out","bcm":true,"x":550,"y":2380,"wires":[]},{"id":"863a43e520dabbb7","type":"inject","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":190,"y":2380,"wires":[["19cc4d5b860d4539"]]},{"id":"19cc4d5b860d4539","type":"trigger","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"","op1":"1","op2":"0","op1type":"num","op2type":"num","duration":"250","extend":false,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":360,"y":2380,"wires":[["bb741bfdc1a28d2f"]]},{"id":"a8465dcdc49200ae","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L1R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1160,"wires":[["232e1bd3c0337d7f"]]},{"id":"0b170f7fd451c41e","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L1R","links":["5f1ac4d4ff38773e"],"x":145,"y":1160,"wires":[["a8465dcdc49200ae"]]},{"id":"93089d2796f378bf","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L2G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1240,"wires":[["41e650e71e591599"]]},{"id":"0cb76ba058af601c","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L2R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1280,"wires":[["5e04324166d97655"]]},{"id":"38ebe0311e6bdc2a","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L2G","links":["e7f3c994874fb4b4"],"x":145,"y":1240,"wires":[["93089d2796f378bf"]]},{"id":"a0ce570afed14a8d","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L2R","links":["612bee73e37ec395"],"x":145,"y":1280,"wires":[["0cb76ba058af601c"]]},{"id":"981b138d56a342a1","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L3G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1360,"wires":[["838d66358b114764"]]},{"id":"b92ee649d741c20f","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L3R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1400,"wires":[["0da0d71069b5b7f3"]]},{"id":"b1d68f1fe1b35806","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L3G","links":["2929a0bb661e6a11"],"x":145,"y":1360,"wires":[["981b138d56a342a1"]]},{"id":"05d53d8a3221f9f9","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L3R","links":["d2c18952143856aa"],"x":145,"y":1400,"wires":[["b92ee649d741c20f"]]},{"id":"af1860db05dca164","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L4G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1480,"wires":[["89657707357da688"]]},{"id":"b6bc419e735896a1","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L4R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1520,"wires":[["47f7db55ffd4a18e"]]},{"id":"130d1b309a8fe4b9","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L4G","links":["64bc1288f32443bd"],"x":145,"y":1480,"wires":[["af1860db05dca164"]]},{"id":"41ed58f0641cf7fd","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L4R","links":["8f7e178f5ee2fdf5"],"x":145,"y":1520,"wires":[["b6bc419e735896a1"]]},{"id":"1ea1c5224e43b9ce","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L5G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1600,"wires":[["b82ef4fac43b42e8"]]},{"id":"aa9aba60326e34be","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L5R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1640,"wires":[["f1da07013ec03217"]]},{"id":"ec2d195300a2c034","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L5G","links":["313a5c23a8223fbe"],"x":145,"y":1600,"wires":[["1ea1c5224e43b9ce"]]},{"id":"b0339c65754e972f","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L5R","links":["2d099517c8cd041e"],"x":145,"y":1640,"wires":[["aa9aba60326e34be"]]},{"id":"72d1447dbe82ddab","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L6G","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1720,"wires":[["75b3a4915df81ca5"]]},{"id":"90d62064705f73f1","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"!L6R","func":"\nreturn { payload: 100 - msg.payload };","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":250,"y":1760,"wires":[["2a88c7a4d6403b15"]]},{"id":"e24005ae6dc43ec4","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L6G","links":["1b47f0c787042a33"],"x":145,"y":1720,"wires":[["72d1447dbe82ddab"]]},{"id":"13f274d193788451","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in L6R","links":["6222b49c9a44de4d"],"x":145,"y":1760,"wires":[["90d62064705f73f1"]]},{"id":"97ebbc9b4b847917","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe1En","property":"Lampe1En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":120,"wires":[["d29d0ecfede9d169"]]},{"id":"3db2309c96c9b9f8","type":"comment","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"Front LED's","info":"","x":190,"y":1000,"wires":[]},{"id":"d29d0ecfede9d169","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"myPST1PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":120,"wires":[["578692bfdfd312f9"],["9059050ea1a9717c"]]},{"id":"578692bfdfd312f9","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":11,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST1PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":100,"wires":[["01181ddbbe2e4a89"]]},{"id":"9059050ea1a9717c","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":11,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST1PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":140,"wires":[["01181ddbbe2e4a89"]]},{"id":"6da92f3df123c7b4","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out Buttons","mode":"link","links":["53740e1295c0a793"],"x":1145,"y":320,"wires":[]},{"id":"e8515c5a2a53679b","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":200,"wires":[["588a640468dc8aca","18d3e06fd08c190c"]]},{"id":"588a640468dc8aca","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe2En","property":"Lampe2En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":200,"wires":[["6cc6a9240dcf8388"]]},{"id":"6cc6a9240dcf8388","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"myPST2PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":200,"wires":[["4e2df3c7014b798d"],["b233f13c3c0e9134"]]},{"id":"4e2df3c7014b798d","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":12,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST2PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":180,"wires":[["27b17c5189e23f72"]]},{"id":"b233f13c3c0e9134","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":12,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST2PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":220,"wires":[["27b17c5189e23f72"]]},{"id":"02058f1a917cd966","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":280,"wires":[["298584d94781070a","18d3e06fd08c190c"]]},{"id":"298584d94781070a","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe3En","property":"Lampe3En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":280,"wires":[["132243cc94758b3b"]]},{"id":"132243cc94758b3b","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"myPST3PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":280,"wires":[["b363c9039d3a2aa1"],["e12d9cd04acd6ddc"]]},{"id":"b363c9039d3a2aa1","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":13,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST3PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":260,"wires":[["5352bf734e1b7dde"]]},{"id":"e12d9cd04acd6ddc","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":13,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST3PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":300,"wires":[["5352bf734e1b7dde"]]},{"id":"5046eaa39240a5bc","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":360,"wires":[["60fde80910767087","18d3e06fd08c190c"]]},{"id":"60fde80910767087","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe4En","property":"Lampe4En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":360,"wires":[["9d299c7841f6b7e3"]]},{"id":"9d299c7841f6b7e3","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"myPST4PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":360,"wires":[["5064484f529a2a7b"],["6a126674d482ab85"]]},{"id":"5064484f529a2a7b","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":14,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST4PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":340,"wires":[["c1ac9021c1a090c7"]]},{"id":"6a126674d482ab85","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":14,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST4PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":380,"wires":[["c1ac9021c1a090c7"]]},{"id":"2180b854cbe50558","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":440,"wires":[["a8780f5f789efc06","18d3e06fd08c190c"]]},{"id":"a8780f5f789efc06","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe5En","property":"Lampe5En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":440,"wires":[["be9d9329642bb66e"]]},{"id":"be9d9329642bb66e","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"myPST5PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":440,"wires":[["8ecc145e5b6e6808"],["cb824308557a262c"]]},{"id":"8ecc145e5b6e6808","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":15,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST5PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":420,"wires":[["627ec3cd91405d19"]]},{"id":"cb824308557a262c","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":15,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST5PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":460,"wires":[["627ec3cd91405d19"]]},{"id":"197f53a221848a40","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":520,"wires":[["4c7049ed79454c16","18d3e06fd08c190c"]]},{"id":"4c7049ed79454c16","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lampe6En","property":"Lampe6En","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":570,"y":520,"wires":[["275915e3ae53883a"]]},{"id":"275915e3ae53883a","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","property":"myPST6PWM","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":730,"y":520,"wires":[["c742ff045f3172e6"],["0ca498f4c0687239"]]},{"id":"c742ff045f3172e6","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp on","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":10000,\"fc\":6,\"unitid\":16,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST6PWM","pt":"global","to":"10000","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":500,"wires":[["02642554e8f0311a"]]},{"id":"0ca498f4c0687239","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"Lamp off","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"value\":0,\"fc\":6,\"unitid\":16,\"address\":3,\"quantity\":1}","tot":"json"},{"t":"set","p":"myPST6PWM","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":540,"wires":[["02642554e8f0311a"]]},{"id":"cb5e22bab4fd99a0","type":"link in","z":"56a22929a6befff3","g":"f5c87a406c2a2913","name":"link in Buzzer","links":["18d3e06fd08c190c"],"x":225,"y":2080,"wires":[["85dc1d4df05984f5"]]},{"id":"18d3e06fd08c190c","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out Buzzer","mode":"link","links":["cb5e22bab4fd99a0"],"x":665,"y":320,"wires":[]},{"id":"fb0b31803db83fad","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":410,"y":620,"wires":[["18d3e06fd08c190c"]]},{"id":"c866476a4c8e984c","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":430,"y":680,"wires":[["18d3e06fd08c190c","2c756f954bc08d41"]]},{"id":"e8e645424a931ec2","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"0->1","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":740,"wires":[["18d3e06fd08c190c","193bcb010d48fde0"]]},{"id":"86ad116678314ab4","type":"link in","z":"56a22929a6befff3","g":"5ef1898fd1dfa0be","name":"link in Reset µC's","links":["7a09ac512fd3f1b4"],"x":215,"y":2220,"wires":[["19cc4d5b860d4539","52448ca093f78ede","d89cc656e9940fac"]]},{"id":"193bcb010d48fde0","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","rules":[{"t":"set","p":"myModeSelector","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":740,"wires":[["bf3011f72f55c205"]]},{"id":"2c756f954bc08d41","type":"change","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","rules":[{"t":"set","p":"myModeSelector","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":680,"wires":[["bf3011f72f55c205"]]},{"id":"128a7cc3e49f98e8","type":"link in","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"link in myModeSelector","links":["bf3011f72f55c205"],"x":155,"y":1860,"wires":[["c9a98c15c2d75c54"]]},{"id":"c9a98c15c2d75c54","type":"function","z":"56a22929a6befff3","g":"b7ac32e3ce7e3a2e","name":"myModeSelector","func":"if(global.get(\"myModeSelector\") == 1) {\n    return [\n        { payload: 0 },\n        { payload: 100 }\n    ]\n} else {\n    return [\n        { payload: 100 },\n        { payload: 0 }\n    ]\n}\n        ","outputs":2,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":310,"y":1860,"wires":[["f94dba06ac3beaca"],["ea7909646c8d0c3d"]]},{"id":"bf3011f72f55c205","type":"link out","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"link out myModeSelector","mode":"link","links":["128a7cc3e49f98e8"],"x":915,"y":700,"wires":[]},{"id":"fdcfa9fe617e8e09","type":"trigger","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"","op1":"0","op2":"","op1type":"num","op2type":"payl","duration":"3","extend":false,"overrideDelay":false,"units":"s","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":280,"y":680,"wires":[["c866476a4c8e984c"]]},{"id":"f8cad5b4500b8284","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":120,"wires":[["ee50c16135371407"]]},{"id":"11bd5c78693e02cc","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":200,"wires":[["e8515c5a2a53679b"]]},{"id":"a71cc94cf1f9d106","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":280,"wires":[["02058f1a917cd966"]]},{"id":"c3a33ee604dcfeab","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":360,"wires":[["5046eaa39240a5bc"]]},{"id":"7501793c6f97f616","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":440,"wires":[["2180b854cbe50558"]]},{"id":"fe12ea7cc2ba245f","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":520,"wires":[["197f53a221848a40"]]},{"id":"8846d68d6ad482c9","type":"switch","z":"56a22929a6befff3","g":"28b056b664db7e80","name":"MAN?","property":"myModeSelector","propertyType":"global","rules":[{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":270,"y":620,"wires":[["fb0b31803db83fad"]]},{"id":"c4c8967622b3601a","type":"modbus-flex-getter","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"","showStatusActivities":false,"showErrors":true,"showWarnings":true,"logIOActivities":false,"server":"974608b50ff5df9c","useIOFile":false,"ioFile":"","useIOForPayload":false,"emptyMsgOnFail":false,"keepMsgProperties":false,"delayOnStart":false,"startDelayTime":"","x":190,"y":240,"wires":[["f166ceed6221b02f","bbdff27ebf33aa92"],[]]},{"id":"f166ceed6221b02f","type":"modbus-response","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"","registerShowMax":20,"x":430,"y":220,"wires":[]},{"id":"fb617cf78d913d32","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"100 - L11, L12","func":"let V = msg.payload[2]*3.3/4096*88/3;\nlet A1 = (msg.payload[3]-2048)*3.3/4096 / 0.066;\nlet A2 = (2048-msg.payload[4])*3.3/4096 / 0.066;\nnode.status({text: V.toFixed(1) + \"V, L11: \" + A1.toFixed(1) + \"A, L12: \" + A2.toFixed(1) + \"A F:\" + msg.payload[6]});\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":1280,"wires":[[]]},{"id":"d58b167b3d633716","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"101 - L13, L14","func":"let V = msg.payload[2]*3.3/4096*88/3;\nlet A1 = (msg.payload[3]-2048)*3.3/4096 / 0.066;\nlet A2 = (2048-msg.payload[4])*3.3/4096 / 0.066;\nnode.status({ text: V.toFixed(1) + \"V, L13: \" + A1.toFixed(1) + \"A, L14: \" + A2.toFixed(1) + \"A F:\" + msg.payload[6] });\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":1340,"wires":[[]]},{"id":"bacc3dc050c302ea","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"102 - L15, L16","func":"node.status({fill:\"red\",shape:\"ring\",text:\"Timeout\"});\nif( Array.isArray(msg.payload)) {\n    let V = msg.payload[2]*3.3/4096*88/3;\n    let A1 = (msg.payload[3]-2048)*3.3/4096 / 0.066;\n    let A2 = (2048-msg.payload[4])*3.3/4096 / 0.066;\n    node.status({ text: V.toFixed(1) + \"V, L15: \" + A1.toFixed(1) + \"A, L16: \" + A2.toFixed(1) + \"A F:\" + msg.payload[6] });\n    return msg;\n} else {\n    node.status({fill:\"red\",shape:\"ring\",text:\"Timeout\"});\n}","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":520,"y":1400,"wires":[[]]},{"id":"a70267820ff566f5","type":"link in","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link in MODBUS READ","links":["0bcc47a9e661021e","c9f3fd99e28b794a"],"x":185,"y":160,"wires":[["c4c8967622b3601a"]]},{"id":"f9a488d9ce1e31f1","type":"comment","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"MODBUS Read nodes","info":"","x":160,"y":80,"wires":[]},{"id":"6c126e970403fcff","type":"modbus-queue-info","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"","topic":"","unitid":1,"queueReadIntervalTime":1000,"lowLowLevel":"10","lowLevel":"20","highLevel":"30","highHighLevel":"40","server":"974608b50ff5df9c","errorOnHighLevel":true,"showStatusActivities":true,"updateOnAllQueueChanges":false,"updateOnAllUnitQueues":true,"x":690,"y":2140,"wires":[["9f5dbe8983d70841"]]},{"id":"8823cb8729815af4","type":"catch","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Modbus timeout handler","scope":["c4c8967622b3601a","40e13278d3e52632"],"uncaught":false,"x":180,"y":2140,"wires":[["a361919615a1cc26"]]},{"id":"2e98ae0def3f8971","type":"debug","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"debug 4","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":200,"y":2420,"wires":[]},{"id":"9f5dbe8983d70841","type":"debug","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"debug 2","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":880,"y":2140,"wires":[]},{"id":"bbdff27ebf33aa92","type":"switch","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Switch on unitId","property":"unitId","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"12","vt":"num"},{"t":"eq","v":"13","vt":"num"},{"t":"eq","v":"14","vt":"num"},{"t":"eq","v":"15","vt":"num"},{"t":"eq","v":"16","vt":"num"},{"t":"eq","v":"100","vt":"num"},{"t":"eq","v":"101","vt":"num"},{"t":"eq","v":"102","vt":"num"}],"checkall":"true","repair":false,"outputs":9,"x":180,"y":760,"wires":[["732b642fa86bb6fe"],["cfa67075a0bda41d"],["55296d6f8737b7cd"],["2888a749934b883f"],["742b42c3e8451df2"],["59fb85a7f74023e9"],["fb617cf78d913d32"],["d58b167b3d633716"],["bacc3dc050c302ea"]]},{"id":"732b642fa86bb6fe","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 1 Feedback","func":"if (msg.payload.length == 45) {\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9]/1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\"  + msg.payload[6] + \"%\";\n    node.status({ text: status+ \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":420,"wires":[["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["afc0124ae2b4de98"],["b5664075264aa2a3"],["a7e8e53a7d9fe513"]]},{"id":"afc0124ae2b4de98","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"43f83edaea29acf4","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":400,"wires":[[]]},{"id":"40e13278d3e52632","type":"modbus-flex-write","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"","showStatusActivities":false,"showErrors":false,"showWarnings":true,"server":"974608b50ff5df9c","emptyMsgOnFail":false,"keepMsgProperties":false,"delayOnStart":false,"startDelayTime":"","x":210,"y":2060,"wires":[["30b8cc7f00513770"],[]]},{"id":"30b8cc7f00513770","type":"modbus-response","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"","registerShowMax":20,"x":430,"y":2020,"wires":[]},{"id":"2e90502c9e60db36","type":"switch","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"Switch on unitId","property":"unitId","propertyType":"msg","rules":[{"t":"eq","v":"11","vt":"num"},{"t":"eq","v":"12","vt":"num"},{"t":"eq","v":"13","vt":"num"},{"t":"eq","v":"14","vt":"num"},{"t":"eq","v":"15","vt":"num"},{"t":"eq","v":"16","vt":"num"},{"t":"eq","v":"100","vt":"num"},{"t":"eq","v":"101","vt":"num"},{"t":"eq","v":"102","vt":"num"}],"checkall":"true","repair":false,"outputs":9,"x":400,"y":2320,"wires":[["8d65543ae2db6c45"],["1efcdb7b91e37854"],["7e55e72f2d47252a"],["cc7b0aa5ef28e9a2"],["0164c672efb85f86"],["97609632057df6e7"],[],[],[]]},{"id":"8d65543ae2db6c45","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 1","mode":"link","links":["2af26b7c25ef445d"],"x":925,"y":2260,"wires":[]},{"id":"1efcdb7b91e37854","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 2","mode":"link","links":["6b08cff41e317d5e"],"x":925,"y":2300,"wires":[]},{"id":"7e55e72f2d47252a","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 3","mode":"link","links":["c7acdc1e62c55259"],"x":925,"y":2340,"wires":[]},{"id":"a361919615a1cc26","type":"function","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"YELLOW respons","func":"msg.payload = 257;\nreturn msg;","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":190,"y":2320,"wires":[["2e90502c9e60db36","2e98ae0def3f8971"]]},{"id":"cc7b0aa5ef28e9a2","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 4","mode":"link","links":["a42e3850811c7534"],"x":925,"y":2380,"wires":[]},{"id":"97609632057df6e7","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 6","mode":"link","links":["7f9235d1cda708ed"],"x":925,"y":2460,"wires":[]},{"id":"0164c672efb85f86","type":"link out","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link out Timeout Lampe 5","mode":"link","links":["974d5c3c66ce7aae"],"x":925,"y":2420,"wires":[]},{"id":"a7e8e53a7d9fe513","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 1","mode":"link","links":["2af26b7c25ef445d"],"x":1015,"y":480,"wires":[]},{"id":"d674df4c1bc373ff","type":"comment","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"MODBUS Write nodes","info":"","x":160,"y":1920,"wires":[]},{"id":"53740e1295c0a793","type":"link in","z":"ec28d8db3689b1f5","g":"1e428712aecf6d9b","name":"link in MODBUS WRITE","links":["f6b0cbef0b12395d","2a1efc1f283b12c7","6da92f3df123c7b4","036fe9570bd1280c"],"x":185,"y":1980,"wires":[["40e13278d3e52632"]]},{"id":"cfa67075a0bda41d","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 2 Feedback","func":"if (msg.payload.length == 45) {\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":600,"wires":[["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["b9584062e67cb6ab"],["bd62395d57ec59e0"],["e66011d888adee35"]]},{"id":"b9584062e67cb6ab","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"3851858da9cbf137","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":580,"wires":[[]]},{"id":"e66011d888adee35","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 2","mode":"link","links":["6b08cff41e317d5e"],"x":1055,"y":660,"wires":[]},{"id":"55296d6f8737b7cd","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 3 Feedback","func":"if (msg.payload.length == 45) {\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":780,"wires":[["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["65baaacb9b852b56"],["17d4dd54afa63911"],["d3f9f89d687df097"]]},{"id":"65baaacb9b852b56","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"8154b0c2d333ea5c","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":740,"wires":[[]]},{"id":"d3f9f89d687df097","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 3","mode":"link","links":["c7acdc1e62c55259"],"x":1055,"y":820,"wires":[]},{"id":"2888a749934b883f","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 4 Feedback","func":"if (msg.payload.length == 45) {\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":960,"wires":[["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["fff7c6bcef83fb07"],["36fa1f72a2ad9ff9"],["ce1f91caaed2df6d"]]},{"id":"fff7c6bcef83fb07","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"7e38435dec7f5cbb","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":920,"wires":[[]]},{"id":"ce1f91caaed2df6d","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 4","mode":"link","links":["a42e3850811c7534"],"x":1055,"y":1000,"wires":[]},{"id":"742b42c3e8451df2","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 5 Feedback","func":"if (msg.payload.length == 45) {\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":1140,"wires":[["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["8648574ea83e3466"],["33a9e62e909c32de"],["f14a1cfc04b3e96a"]]},{"id":"8648574ea83e3466","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"bdd1ccedc4b38339","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":1100,"wires":[[]]},{"id":"f14a1cfc04b3e96a","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 5","mode":"link","links":["974d5c3c66ce7aae"],"x":1055,"y":1180,"wires":[]},{"id":"59fb85a7f74023e9","type":"function","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"Lampe 6 Feedback","func":"if (msg.payload.length == 45) {\n\n    let sum = 0;\n\n    for(let i=0;i<8;i++) {\n        sum += msg.payload[10+i];\n    }\n    sum = sum/8;\n\n    let status = 0; \n    if((sum == msg.payload[2]) && (msg.payload[2]>0)) {\n        status = 1;\n    } else if(sum > msg.payload[2]) {\n        status = 2;\n    } else if(sum < msg.payload[2]) {\n        status = 3;\n    }\n\n    let report = \"\";\n    report = \"Lys: \" + (sum / 100).toFixed(0) + \"/\" + (msg.payload[2] / 100).toFixed(0) + \", Current: \" + (msg.payload[9] / 1000).toFixed(1) + \"A, Ambient Temp./Hum: \" + msg.payload[4] + \"°C/\" + msg.payload[6] + \"%\";\n    node.status({ text: status + \"-\" + report });\n\n    return [\n        { payload: msg.payload[29], topic: \"LED1\" },\n        { payload: msg.payload[31], topic: \"LED2\" },\n        { payload: msg.payload[33], topic: \"LED3\" },\n        { payload: msg.payload[35], topic: \"LED4\" },\n        { payload: msg.payload[37], topic: \"LED5\" },\n        { payload: msg.payload[39], topic: \"LED6\" },\n        { payload: msg.payload[41], topic: \"LED7\" },\n        { payload: msg.payload[43], topic: \"LED8\" },\n        { payload: report },\n        { payload: status }\n    ];\n}","outputs":10,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":850,"y":1320,"wires":[["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["bd0b77b768989b3c"],["272e6f97f31b38da"],["75c1677095ad4799"]]},{"id":"bd0b77b768989b3c","type":"ui-chart","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"0f4fff2dc12465d5","name":"","label":"chart","order":3,"chartType":"line","category":"topic","categoryType":"msg","xAxisLabel":"","xAxisProperty":"","xAxisPropertyType":"timestamp","xAxisType":"time","xAxisFormat":"","xAxisFormatType":"auto","xmin":"","xmax":"","yAxisLabel":"[°C]","yAxisProperty":"payload","yAxisPropertyType":"msg","ymin":"0","ymax":"100","bins":10,"action":"append","stackSeries":false,"pointShape":"circle","pointRadius":4,"showLegend":true,"removeOlder":"5","removeOlderUnit":"60","removeOlderPoints":"","colors":["#0095ff","#ff0000","#ff7f0e","#2ca02c","#a347e1","#d62728","#ff9896","#9467bd","#c5b0d5"],"textColor":["#666666"],"textColorDefault":true,"gridColor":["#e5e5e5"],"gridColorDefault":true,"width":6,"height":"6","className":"","interpolation":"linear","x":1090,"y":1280,"wires":[[]]},{"id":"75c1677095ad4799","type":"link out","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","name":"link out Disable Lampe 6","mode":"link","links":["7f9235d1cda708ed"],"x":1055,"y":1380,"wires":[]},{"id":"b5664075264aa2a3","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"43f83edaea29acf4","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":440,"wires":[]},{"id":"bd62395d57ec59e0","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"3851858da9cbf137","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":620,"wires":[]},{"id":"17d4dd54afa63911","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"8154b0c2d333ea5c","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":780,"wires":[]},{"id":"272e6f97f31b38da","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"0f4fff2dc12465d5","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":1320,"wires":[]},{"id":"36fa1f72a2ad9ff9","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"7e38435dec7f5cbb","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":960,"wires":[]},{"id":"33a9e62e909c32de","type":"ui-text","z":"ec28d8db3689b1f5","g":"b8b150c06f3a9076","group":"bdd1ccedc4b38339","order":1,"width":0,"height":0,"name":"","label":"","format":"{{msg.payload}}","layout":"row-left","style":false,"font":"","fontSize":16,"color":"#717171","wrapText":false,"className":"","x":1090,"y":1140,"wires":[]}]